{"version":3,"sources":["images/Logo3.svg","components/Basic/LoadingData.js","components/Basic/AddToListCircle.jsx","components/Basic/PersonTiny.js","images/Cadillac.jpg","images/Shape-of-you.jpg","images/da-da-da.jpg","images/ayo.jpg","images/movie.jpg","images/coming-home.jpg","images/boulevard-of-broken-dreams.png","images/Гипноз.jpg","images/hitmyphone.jpg","images/Clout-cobain.png","images/Mood.jpg","images/Ты_горишь_как_огонь.jpg","images/лбтд.jpg","images/On-my-own.png","images/Buster-Keaton.jpeg","images/loyal.png","images/freaky-friday.jpg","images/Dont-check-on-me.jpg","images/changes.jpg","images/im-the-one.jpg","images/authors/justin-bieber.png","images/Rich-love.jpg","images/No-vacancy.jpg","images/Main-chick.jpg","images/revolver.jpg","images/Yamakasi.jpeg","images/roxanne.png","images/I-can-fucking-tell.png","images/Leck.jpg","images/tasm2Ost.jpg","images/Earth.png","images/Новая-волна.jpg","images/Can-we-kiss-forever.jpg","images/Drinking-problem.jpeg","images/Drunk-in-love.jpg","music/Da da da.mp3","music/Shape of You.mp3","music/Cadillac.mp3","music/Ayo.mp3","music/Movie.mp3","music/Coming Home.mp3","music/Boulevard of broken dreams.mp3","music/Гипноз.mp3","music/Hit My Phone.mp3","music/CLOUT COBAIN  CLOUT CO13A1N.mp3","music/Mood.mp3","music/ТЫ ГОРИШЬ КАК ОГОНЬ.mp3","music/лбтд.mp3","music/On My Own.mp3","music/Angel.mp3","music/Loyal.mp3","music/Freaky Friday.mp3","music/Don't check on me.mp3","music/Intentions.mp3","music/I'm the one.mp3","music/Yummy.mp3","music/Hold On.mp3","music/Rich Love.mp3","music/No Vacancy.mp3","music/Main Chick.mp3","music/Best Love Song.mp3","music/Tantra.mp3","music/Drunk In Love.mp3","music/Roxanne.mp3","music/Drinking Problem.mp3","music/I Can Fvcking Tell.mp3","music/Can we kiss forever.mp3","music/Leck.mp3","music/Need Somebody.mp3","music/I Chose You.mp3","music/I'm Moving To England.mp3","music/Earth.mp3","firebase.js","functions/checkNumber.js","functionality/AuthContext.js","functionality/SongPlay/SongContext.js","functions/shuffleSongs.js","functions/displayDate.js","components/Basic/BackBtn.js","images/authors/Denzel-Curry.jpg","images/authors/Morgenshtern.jpg","images/authors/Tyomcha.jpg","images/authors/yvng-swag.jpg","images/authors/chris-brown.jpg","images/authors/tyga.jpg","images/authors/diddy.jpg","images/authors/greenday.jpg","images/authors/johny-koch.jpg","images/authors/andro.jpg","images/authors/qontrast.jpg","images/authors/jaden.jpg","images/authors/kid-cudi.png","images/authors/dirty-money.jpg","images/authors/OneRepublic.jpg","images/authors/t-pain.jpg","images/authors/Kid-ink.jpg","images/authors/Chance-the-rapper.jpg","images/authors/Bob.jpg","images/authors/Lil-dicky.png","images/authors/Arizona-zervas.jpg","images/authors/Andy-panda.jpg","images/authors/Adriana-proenza.jpg","data/authors.js","images/authors/bluelake.jpg","images/authors/quavo.jpg","images/authors/Fetty-wap.png","components/AuthorPage/SmallImages.js","functions/rightFormatForBigNumber.js","functionality/ModalClass.js","hooks/useOutsideClick.js","functions/getUID.js","functions/createChat.js","functions/findChatURL.js","components/AuthorPage/ChatWithFriendButton.js","components/Basic/LoadingCircle.js","components/Basic/SearchBar.js","components/Basic/FriendsListToShareWith.js","functions/shareWithManyFriends.js","components/SignIn-Up/RadioBtn.js","components/FullScreenPlayer/colorCircles.js","data/friends.js","data/chat.js","functions/createRandomId.js","functions/shareWithOneFriend.js","components/Basic/SongItemChoice.js","functions/addSongToLibrary.js","functions/filterArrayWithArray.js","functions/deleteSongFromLibrary.js","components/FullScreenPlayer/AddOrDeleteSongButton.jsx","components/AuthorPage/PersonTinyVerticalItem.js","components/AuthorPage/PersonTinyList.js","components/Basic/SongInfo.js","functions/shortWord.js","functions/addOrDeleteSongToPlaylist.js","components/FullScreenPlayer/AddToPlaylists.jsx","components/FullScreenPlayer/SongItem.js","components/Basic/MoreBtn.js","components/Basic/TitleWithMoreBtn.js","components/Basic/SongList.js","components/AlbumPage/CustomizeAlbum.js","functions/addAuthorToLibrary.js","functions/addFriend.js","components/Basic/LastSeen.jsx","components/AuthorPage/Header.js","pages/AlbumPage.js","components/AddWindow/AddPlaylist.js","components/Basic/DownloadPhotoButton.jsx","components/Basic/ErrorPlate.jsx","components/AddWindow/AddSong.js","components/Tools/Slider.js","components/AuthorPage/AddWindow.js","components/AuthorPage/FriendRequestItem.js","components/AuthorPage/FriendRequest.js","functions/findAuthorsAlbums.js","functions/normalizeString.js","components/AuthorPage/PlaylistItem.js","components/Basic/AlbumList.js","components/AuthorPage/Playlists.js","functions/findSimilarArtists.js","components/AuthorPage/AuthorItemBig.js","components/Basic/AuthorsList.js","components/AuthorPage/SimilarArtists.js","functions/findIfSongIsNew.js","components/AuthorPage/TopSongs.js","pages/AuthorPage.js","components/ChatPage/AttachmentList.jsx","hooks/fetchFirebaseData.js","components/ChatPage/ChatInfo.jsx","hooks/useFetchDocs.js","components/ChatPage/WallpaperItem.jsx","components/ChatPage/Wallpapers.jsx","components/ChatPage/ChatMoreBtn.js","components/ChatPage/ChatHeader.js","functions/findWhatToWriteInResponseItem.js","components/ChatPage/SeenByCircle.jsx","components/ChatPage/MessageItem.js","hooks/useOnScreen.js","components/ChatPage/MessageField.jsx","components/ChatPage/DisplayChatMessages.jsx","components/ChatPage/AttachedItemsInChatInput.jsx","components/AuthorPage/ChatInput.js","functions/sendMessage.js","components/ChatPage/DateOnTop.jsx","components/ChatPage/TypingAnimation.jsx","pages/DialoguePage.js","utils/consts.js","components/SignIn-Up/BlurredBg.js","components/SignIn-Up/TitleAndLogo.js","components/HomePage/MainBanner.js","components/HomePage/RecentSongs.js","components/HomePage/RecommendedAuthors.js","components/HomePage/RecommendedSongs.js","images/wave2.svg","components/LibraryPage/LibraryPlaylistItem.js","components/LibraryPage/SongsPage.js","components/LibraryPage/CreatePlaylistPage.js","components/LibraryPage/PlaylistsPage.js","components/LibraryPage/AuthorsPage.js","components/Basic/IsUserOnlineCircle.jsx","components/ChatPage/AmountOfUnseenMessages.jsx","components/ChatPage/LastSentMessage.js","components/ChatPage/ChatItem.js","functions/findAmountOfUnseenMessages.js","components/Basic/ModalWindow.js","components/ChatPage/CreateChat.jsx","routes.js","pages/LogInPage.js","pages/SignUpPage.js","pages/Home.js","pages/LibraryPage.js","pages/SearchPage.js","pages/ChatPage.js","routers/ContentRouter.js","functions/correctTimeDisplay.js","components/FullScreenPlayer/Player.js","data/leftSideBar.js","components/BottomControlBar/MobileControlBarItem.js","components/Mobile/BottomControlBar.js","components/Mobile/FullBottomSide.js","components/FullScreenPlayer/Loading.js","data/playerRightSide.js","components/FullScreenPlayer/Share.js","components/FullScreenPlayer/Options.js","components/FullScreenPlayer/Lyrics.js","components/FullScreenPlayer/Queue.js","components/FullScreenPlayer/AuthorsList.jsx","components/Basic/FullScreenPlayer.js","components/LeftsideBar/NavigationItem.js","components/LeftsideBar/Person.js","components/LeftsideBar/TinyPlaylist.js","components/Basic/NotificationCircle.js","components/Basic/LeftsideBar.js","components/Basic/ContentWrapper.js","routers/AppRouter.js","App.js","index.js"],"names":["LoadingData","className","src","Logo","alt","AddToListCircle","listOfChosenItems","setListOfChosenItems","itemId","undefined","onClick","e","preventDefault","includes","type","filteredList","filter","el","style","color","prev","PersonTiny","data","chosenArray","setChosenArray","restProps","uid","photoURL","displayName","_","console","log","process","app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","storage","firestore","checkNumber","number","max","min","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","a","user","collection","doc","get","then","snapshot","fullUserInfo","value","login","email","password","signInWithEmailAndPassword","signup","name","role","imageColors","createUserWithEmailAndPassword","result","set","isAuthor","parseInt","isVerified","numberOfListenersPerMonth","ownSongs","ownPlaylists","addedSongs","addedPlaylists","addedAuthors","chats","friends","subscribers","regDate","FieldValue","serverTimestamp","logout","signOut","Provider","SongContext","useSong","SongProvider","yourSongs","setYourSongs","yourPlaylists","setYourPlaylists","yourAuthors","setYourAuthors","yourFriends","setYourFriends","currentSongQueue","setCurrentSongQueue","currentSong","setCurrentSong","currentSongInQueue","setCurrentSongInQueue","currentSongPlaylistSource","setCurrentSongPlaylistSource","currentSongData","setCurrentSongData","imgColors","setImgColors","play","setPlay","currentTime","setCurrentTime","songDuration","setSongDuration","repeatMode","setRepeatMode","shuffleMode","setShuffleMode","currentParagraph","setCurrentParagraph","isThereKaraoke","setIsThereKaraoke","openFullScreenPlayer","setOpenFullScreenPlayer","songRef","useRef","currentParagraphRef","inputRef","leftSideBarInputRef","rightSideCurrentPage","setRightSideCurrentPage","openMenu","setOpenMenu","checkKaraoke","lyrics","length","startTime","tempSongObject","id","songSrc","authors","cover","listens","releaseDate","curSong","lastSongPlayed","curQueue","lastQueue","source","image","songsList","docRef","exists","songData","catch","error","fetchYourSongs","map","song","i","fetchCurrentSongInitial","playlistId","forEach","friendObj","friend","status","songId","findIndex","authorId","fetchCurrentSong","shuffledSongsArray","songsArray","randomIndexesArray","newSongsNumbersArray","Array","counter","randNum","Math","floor","random","push","shuffleSongs","listenCountTimeOut","defineCurrentParagraph","first","last","roundedTime","parseFloat","current","toFixed","midPoint","blockStartTime","nextBlockStartTime","nextSong","stopPropagation","correctSongNumber","currentSongId","update","prevSong","clearTimeout","setTimeout","document","title","playSong","pause","playing","event","target","defineCurrentParagraphLight","documentElement","setProperty","changeCurrentTime","localName","displayAuthors","authorsList","separatingSign","to","displayAuthorsFull","loadSongData","duration","window","innerWidth","findLen","str","amountOfZeros","toDateTime","secs","t","Date","setSeconds","displayDate","stringDate","displayMode","Months","newDate","isNaN","seconds","getMonth","getDate","getFullYear","getHours","getMinutes","BackBtn","history","useHistory","goBack","morgen","songs","eldjey","johnykoch","greenday","andro","qontrast","yvngswag","jaden","kidcudi","miyagi","crhisbrown","tyga","tyomcha","diddy","dirtymoney","denzel","LilDicky","justinBieber","oneRepublic","tPain","andyPanda","chanceTheRapper","kidInk","Bob","arizonaZervas","adrianaProezna","SmallImages","imagesList","borderColor","marginRight","index","border","transform","rightFormanForBigNumber","ModalContext","useModal","ModalClassProvider","openModal","setOpenModal","content","setContent","toggleModal","useOutsideClick","ref","setFunc","handleClickOutside","contains","addEventListener","removeEventListener","getUID","replace","c","piece","toString","createChat","admins","participants","chatUID","chatName","chatImage","messages","wallpaper","admin","fullySeenBy","typing","personId","chatInfo","findChatURL","friendId","setShouldCreate","setFriendChatId","foundChat","chatId","where","chatInfo2","docs","chat","ChatWithFriendButton","shouldCreate","friendChatId","display","width","textDecoration","background","LoadingCircle","top","SearchBar","typingTimeout","setValue","setAllFoundSongs","setResultPlaylists","setResultAuthorList","focus","defaultSearchMode","inputText","defaultSongsListValue","message","setMessage","foundAnything","setFoundAnything","searchMode","setSearchMode","findSongs","foundItemTempArray","response","item","author","authorData","findAuthors","songsIdsArray","albumsIdsArray","albumId","albumData","findPlaylists","playlist","findSomething","placeholder","onChange","onKeyUp","func","onKeyDown","position","height","marginTop","FriendsListToShareWith","whatToShare","chosenFriends","setChosenFriends","messageText","setMessageText","shared","setShared","searchValue","setSearchValue","foundPeople","setFoundPeople","addFriend","some","filtered","peopleId","removeFriendFromList","showChoose","margin","maxWidth","opacity","shareList","userId","res","chatData","sender","sentTime","inResponseToMessage","attachedSongs","attachedAlbums","attachedAuthors","shareWithFriends","RadioBtn","currentActive","label","fontWeight","ColorCircles","createRandomId","len","randId","shareWithOneFriend","isThereChat","Object","keys","SongItemChoice","listOfSongs","setListOfSongs","showListens","isNewSong","openMoreWindow","setOpenMoreWindow","moreWindowPosRelativeToViewport","setMoreWindowPosRelativeToViewport","currentItemRef","addOrDeleteSongToLibrary","newList","songNum","addOrDeleteSongToPlaylist","visibility","alignItems","marginLeft","fontSize","getBoundingClientRect","innerHeight","bottom","key","isAlbum","addSongToLibrary","songAuthorsUIDS","finalAuthorsUIDS","filterArrayWithArray","whatToFilter","withWhatToFilter","this","indexOf","deleteSongFromLibrary","songObj","find","finalFilteredAuthors","AddOrDeleteButtonFull","PersonTinyVerticalItem","person","PersonTinyList","listOfPeople","setListOfPeople","scrollLeft","setScrollLeft","wrapperRef","shouldRenderRightArrow","setShouldRenderRightArrow","scrollWidth","offsetWidth","personObj","personData","onScroll","SongInfo","setSongData","friendsThatHaveThisSong","setFriendsThatHaveThisSong","findFriendsThatHaveThisSong","minHeight","shortWord","word","substr","AddToPlaylists","flexDirection","newSongsList","unshift","SongItem","localIndex","listOfChosenSongs","MoreBtn","lenOfList","maxLen","boolVal","TitleWithMoreBtn","marginBottom","SongList","showCount","showSearch","showMoreSongs","setShowMoreSongs","displaySongs","setDisplaySongs","listSongsIds","allFoundSongs","CustomizeAlbum","playlistName","setPlaylistName","playlistCover","setPlaylistCover","authorsInputValue","setAuthorsInputValue","allAuthors","setAllAuthors","chosenAuthors","setChosenAuthors","creationDate","setReleaseDate","songsSearch","setSongsSearch","allSongs","setAllSongs","chosenSongs","setChosenSongs","playlistStatus","setPlaylistStatus","isPrivate","isPlaylistPrivate","setIsPlaylistPrivate","loadingAuthors","setLoadingAuthors","loadingSongs","setLoadingSongs","imageLocalPath","setImageLocalPath","setImageColors","friendsIds","isAdmin","removeAuthorFromList","people","place","file","files","URL","createObjectURL","storageRef","fileRef","child","put","getDownloadURL","authorRef","authorPlaylists","filteredPlaylists","err","timerUpFunc","getColors","colors","required","addAuthor","removeSongFromList","justifyContent","onFileChange","addAuthorToLibrary","friendData","updatedDataForFriend","updatedDataForCurrentUser","LastSeen","userUID","lastSeen","setLastSeen","isOnline","setIsOnline","unsubscribe","onSnapshot","fiveMinutesAgo","getTime","online","Header","headerColors","albumAuthors","setAlbumAuthors","authorsImages","setAuthorsImages","isFriend","moreWindowRef","ids","addPlaylistToLibrary","deleteFriend","fetchAuthorsData","animation","AlbumPage","match","useRouteMatch","playlistSongs","setPlaylistSongs","setHeaderColors","params","setAlbumData","fetchAlbumsData","albumSong","AddPlaylist","onSubmit","DownloadPhotoButton","setErrorMessage","downloadedPhoto","setDownloadedPhoto","isValid","validExtensions","ext","ex","ErrorPlate","errorMessage","AddSong","songName","setSongName","songCover","setSongCover","setSongSrc","setLyrics","lyricsObject","setLyricsObject","authorSongs","padding","borderRadius","manuallyChangeColor","arrayOfParagraphs","startSubstr","text","Slider","pages","currentPage","setCurrentPage","pageName","AddWindow","openAddSongWindow","setOpenAddSongWindow","currentSliderPage","setCurrentSliderPage","sliderPages","FriendRequestItem","rejectFriend","FriendRequest","friendRequests","setFriendRequests","friendsList","otherUserFriendList","obj","findAuthorsAlbums","authorsData","setAuthorsPlaylists","currentUserUID","tempArray","playlistData","sort","b","normalizeString","toLowerCase","PlaylistItem","listOfChosenAlbums","setListOfChosenAlbums","playlistDate","split","AlbumList","listOfAlbums","Playlists","authorsPlaylists","findSimilarArtistsNames","authorsSongsArr","setSimilarAuthors","peopleArray","newAuthors","flat","uniqueAuthorsSet","Set","uniqueAuthorsIdsArray","from","uniqueAuthorsDataArray","j","findSimilarArtists","authorsSongsArray","AuthorItemBig","listOfChosenAuthors","setListOfChosenAuthors","AuthorsList","listOfAuthors","SimilarArtists","similarArtists","setSimilarArtists","findIfSongIsNew","songReleaseDate","TopSongs","popularSongs","setPopularSongs","newSongs","setNewSongs","prevSongs","findAuthorsSongs","AuthorPage","setAuthorsData","AttachmentList","attachmentList","setAttachmentList","sliderCurrentPage","setSliderCurrentPage","attachmentContent","fetchAttachedData","attachedType","firebaseCollection","page","useFetchFirebaseData","list","setState","sortCondition","whereCondFP","whereCondSP","whereCondTP","deps","fetchData","itemData","items","ChatInfo","setParticipants","chatNameValue","setChatNameValue","participantsPage","setParticipantsPage","listOfItems","setList","fetchItem","useFetchDocs","WallpaperItem","currentWallpaper","Wallpapers","wallpaperList","setWallpaperList","ChatMoreBtn","chatMoreBtnRef","ChatHeader","otherPerson","setOtherPerson","otherPersonId","fetchOtherPerson","findWhatToWriteInResponseToItem","referedMessage","SeenByCircle","listOfSeen","MessageItem","messageData","scrollToMessageRef","setScrollToMessageId","scrollToMessageId","showPhoto","otherMessages","inResponseToMessageArr","setInResponseToMessageArr","userThatSentMessage","setUserThatSentMessage","messageSentTime","attachedSongsData","setAttachedSongsData","attachedAuthorsData","setAttachedAuthorsData","attachedPlaylistsData","setAttachedPlaylistsData","inResponseToMessagesData","setInResponseToMessagesData","inResponseNames","setInResponseNames","messageRef","isVisible","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","disconnect","useOnScreen","seenBy","tempMessages","fetchSentMessageUser","messageId","paddingBottom","album","MessageField","messageList","setInResponseToMessage","setDateRefsArray","setShowPhoto","showDate","setShowDate","dateRef","DisplayChatMessages","messagesWindowRef","scrollTo","offsetTop","AttachedItemsInChatInput","attachedItems","setAttachedItems","icon","setItems","removeItemFromAttached","ChatInput","openAttachWindow","setOpenAttachWindow","setAttachedSongs","setAttachedAlbums","setAttachedAuthors","resultPlaylists","resultAuthorList","attachedSongsNames","setAttachedSongsNames","attachWindowRef","sendMessageFull","sendMessage","transition","maxHeight","overflowY","outline","DateOnTop","date","TypingAnimation","typingPeople","typingPeopleData","setTypingPeopleData","DialoguePage","setChatData","scrollToBottomElementRef","setMessageList","currentDateOnTop","setCurrentDateOnTop","dateRefsArray","scroll","scrollHeight","clientHeight","scrollToMyRef","scrollTop","innerHTML","left","zIndex","LOGIN_ROUTE","SIGNUP_ROUTE","HOME_ROUTE","LIBRARY_ROUTE","SEARCH_ROUTE","CHAT_ROUTE","BlurredBg","TitleAndLogo","MainBanner","bannerColors","setBannerColors","setcurrentSliderPage","topAuthor","setTopAuthor","topSong","setTopSong","topAlbum","setTopAlbum","findTop","criterion","orderBy","boxShadow","circleColor","RecentSongs","recentSongs","setRecentSongs","tempSongsIds","findRecentSongs","RecommendedAuthors","recommendationAuthors","setRecommendationAuthors","uniqueAuthors","setUniqueAuthors","uniqueAuthorsUIDSArray","RecommendedSongs","recommendedSongs","setRecommendedSongs","fetchRecommendedSongs","LibraryPlaylistItem","SongsPage","p","wave","CreatePlaylistPage","PlaylistsPage","AuthorsPage","IsUserOnlineCircle","AmountOfUnseenMessages","amountOfUnseen","LastSentMessage","lastAttachedItem","setLastAttachedItem","shouldPutDot","setShouldPutDot","lastMessage","setLastMessage","messageIcons","lastIcon","setLastIcon","authorName","findWhatToWriteUnderName","ChatItem","setAmountOfUnseen","reduce","accum","findAmountOfUnseenMessages","now","ModalWindow","modalRef","CreateChat","foundFriends","setFoundFriends","chatCover","setChatCover","setChatName","setRrrorMessage","publicRoutes","path","Component","setEmail","setPassword","disabled","currentRoleChoice","setCurrentRoleChoice","setName","setPhotoURL","privateRoutes","setSongList","libraryPages","resultSongList","setResultSongList","resultAlbumList","setResultAlbumList","shadowColor","setShadowColor","yourChats","setYourChats","ContentRouter","component","exact","correctTimeDisplay","Player","textLimit","overflow","whiteSpace","step","leftSideBar","link","MobileControlBarItem","element","BottomControlBar","userElement","location","pathname","FullBottomSide","Loading","timeSpan","pointerEvents","rightSide","socialMedia","social","inputKaraokeTime","setInputKaraokeTime","karaokeModeratorTimes","setKaraokeModeratorTimes","lyricsModeratorMode","setLyricsModeratorMode","canUpdateLyrics","setCanUpdateLyrics","inputKaraoke","convertedToNumber","addLyricsBlock","indexOfRelativeElement","direction","tempTimes","splice","scrollIntoView","paragraph","tempSongData","abs","FullScreenPlayer","lyricsRef","transformTransition","setTransformTransition","mobileMenuTransition","setMobileMenuTransition","deltaY","setDeltaY","deltaYMobileMenu","setDeltaYMobileMenu","mobileContentScroll","mobileMenuRef","handlers","useSwipeable","onSwiping","bgRef","handlersForMobileMenu","onSwipedLeft","onSwipedRight","dropDelta","returnToInitialMobileMenu","rightSideContent","RightSidePage","noLyrics","changeRightSidePage","onTouchEnd","NavigationItem","Person","TinyPlaylist","NotificationCircle","LeftsideBar","currentFriendToPlaylistPage","setCurrentFriendToPlaylistPage","ContentWrapper","intervalExciter","setIntervalExciter","interval","setInterval","clearInterval","onLoadedData","onTimeUpdate","AppRouter","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96903032.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo3.fc53f4ac.svg\";","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const LoadingData = () => {\r\n\treturn (\r\n\t\t<div className = \"LoadingData\">\r\n\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {IoIosCheckmarkCircle, IoIosRadioButtonOff} from 'react-icons/io'\r\n\r\nexport const AddToListCircle = ({listOfChosenItems, setListOfChosenItems, itemId}) => {\r\n\treturn listOfChosenItems !== undefined ? (\r\n\t\t<div onClick = {e=>e.preventDefault()}>\r\n\t\t\t{\r\n\t\t\t\tlistOfChosenItems.includes(itemId) ?\r\n\t\t\t\t\t<button type=\"button\" onClick={(e) => { let filteredList = listOfChosenItems.filter(el => el !== itemId); setListOfChosenItems(filteredList) }} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosCheckmarkCircle style={{ color: 'var(--lightBlue)' }} />\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button type=\"button\" onClick={() => setListOfChosenItems(prev => [...prev, itemId])} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosRadioButtonOff />\r\n\t\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React from 'react'\r\nimport { AddToListCircle } from './AddToListCircle'\r\nexport const PersonTiny = ({data, chosenArray, setChosenArray, ...restProps}) => {\r\n\treturn (\r\n\t\t<div className=\"person\" {...restProps}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {chosenArray} setListOfChosenItems = {setChosenArray} itemId = {data.uid}/>\r\n\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t<img src={data.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"personName\">\r\n\t\t\t\t{data.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Cadillac.70f03a2c.jpg\";","export default __webpack_public_path__ + \"static/media/Shape-of-you.a9a52651.jpg\";","export default __webpack_public_path__ + \"static/media/da-da-da.6ec71e46.jpg\";","export default __webpack_public_path__ + \"static/media/ayo.2964bde9.jpg\";","export default __webpack_public_path__ + \"static/media/movie.51e02da0.jpg\";","export default __webpack_public_path__ + \"static/media/coming-home.849a02e0.jpg\";","export default __webpack_public_path__ + \"static/media/boulevard-of-broken-dreams.026872d7.png\";","export default __webpack_public_path__ + \"static/media/Гипноз.c34c3a56.jpg\";","export default __webpack_public_path__ + \"static/media/hitmyphone.ee7a3893.jpg\";","export default __webpack_public_path__ + \"static/media/Clout-cobain.f0f828dc.png\";","export default __webpack_public_path__ + \"static/media/Mood.076fb483.jpg\";","export default __webpack_public_path__ + \"static/media/Ты_горишь_как_огонь.f4a80a70.jpg\";","export default __webpack_public_path__ + \"static/media/лбтд.5172f440.jpg\";","export default __webpack_public_path__ + \"static/media/On-my-own.a68b20c0.png\";","export default __webpack_public_path__ + \"static/media/Buster-Keaton.7efbdcda.jpeg\";","export default __webpack_public_path__ + \"static/media/loyal.92e2953d.png\";","export default __webpack_public_path__ + \"static/media/freaky-friday.144e27db.jpg\";","export default __webpack_public_path__ + \"static/media/Dont-check-on-me.eab9cb77.jpg\";","export default __webpack_public_path__ + \"static/media/changes.0625d65a.jpg\";","export default __webpack_public_path__ + \"static/media/im-the-one.51c78f3d.jpg\";","export default __webpack_public_path__ + \"static/media/justin-bieber.a64412fc.png\";","export default __webpack_public_path__ + \"static/media/Rich-love.1ee38a35.jpg\";","export default __webpack_public_path__ + \"static/media/No-vacancy.51f83469.jpg\";","export default __webpack_public_path__ + \"static/media/Main-chick.edb4134a.jpg\";","export default __webpack_public_path__ + \"static/media/revolver.0f049b67.jpg\";","export default __webpack_public_path__ + \"static/media/Yamakasi.42ff7e12.jpeg\";","export default __webpack_public_path__ + \"static/media/roxanne.2420c14f.png\";","export default __webpack_public_path__ + \"static/media/I-can-fucking-tell.e8584039.png\";","export default __webpack_public_path__ + \"static/media/Leck.71d82d26.jpg\";","export default __webpack_public_path__ + \"static/media/tasm2Ost.a62e9888.jpg\";","export default __webpack_public_path__ + \"static/media/Earth.5a524f61.png\";","export default __webpack_public_path__ + \"static/media/Новая-волна.44af3a15.jpg\";","export default __webpack_public_path__ + \"static/media/Can-we-kiss-forever.163e90ed.jpg\";","export default __webpack_public_path__ + \"static/media/Drinking-problem.2a6a8f72.jpeg\";","export default __webpack_public_path__ + \"static/media/Drunk-in-love.1e3f9eb5.jpg\";","export default __webpack_public_path__ + \"static/media/Da da da.6fe02252.mp3\";","export default __webpack_public_path__ + \"static/media/Shape of You.5b915f48.mp3\";","export default __webpack_public_path__ + \"static/media/Cadillac.704f0c05.mp3\";","export default __webpack_public_path__ + \"static/media/Ayo.ed690ad5.mp3\";","export default __webpack_public_path__ + \"static/media/Movie.2b583995.mp3\";","export default __webpack_public_path__ + \"static/media/Coming Home.c063172e.mp3\";","export default __webpack_public_path__ + \"static/media/Boulevard of broken dreams.30184a4c.mp3\";","export default __webpack_public_path__ + \"static/media/Гипноз.a2a6b5b8.mp3\";","export default __webpack_public_path__ + \"static/media/Hit My Phone.468aae34.mp3\";","export default __webpack_public_path__ + \"static/media/CLOUT COBAIN  CLOUT CO13A1N.5b1f1720.mp3\";","export default __webpack_public_path__ + \"static/media/Mood.85484109.mp3\";","export default __webpack_public_path__ + \"static/media/ТЫ ГОРИШЬ КАК ОГОНЬ.e5c27654.mp3\";","export default __webpack_public_path__ + \"static/media/лбтд.ca049aa1.mp3\";","export default __webpack_public_path__ + \"static/media/On My Own.7d96c332.mp3\";","export default __webpack_public_path__ + \"static/media/Angel.3bda6e1f.mp3\";","export default __webpack_public_path__ + \"static/media/Loyal.c5aaabae.mp3\";","export default __webpack_public_path__ + \"static/media/Freaky Friday.0036b7a4.mp3\";","export default __webpack_public_path__ + \"static/media/Don't check on me.10b27dbf.mp3\";","export default __webpack_public_path__ + \"static/media/Intentions.d7f98e4b.mp3\";","export default __webpack_public_path__ + \"static/media/I'm the one.9fef9dce.mp3\";","export default __webpack_public_path__ + \"static/media/Yummy.dac00ec9.mp3\";","export default __webpack_public_path__ + \"static/media/Hold On.264abaa7.mp3\";","export default __webpack_public_path__ + \"static/media/Rich Love.cd0ab1c2.mp3\";","export default __webpack_public_path__ + \"static/media/No Vacancy.7298c78e.mp3\";","export default __webpack_public_path__ + \"static/media/Main Chick.1938e956.mp3\";","export default __webpack_public_path__ + \"static/media/Best Love Song.ba132a5c.mp3\";","export default __webpack_public_path__ + \"static/media/Tantra.a9e921b2.mp3\";","export default __webpack_public_path__ + \"static/media/Drunk In Love.261db7ba.mp3\";","export default __webpack_public_path__ + \"static/media/Roxanne.e09cd702.mp3\";","export default __webpack_public_path__ + \"static/media/Drinking Problem.242a7c1a.mp3\";","export default __webpack_public_path__ + \"static/media/I Can Fvcking Tell.831c76d1.mp3\";","export default __webpack_public_path__ + \"static/media/Can we kiss forever.a3ee0569.mp3\";","export default __webpack_public_path__ + \"static/media/Leck.60200232.mp3\";","export default __webpack_public_path__ + \"static/media/Need Somebody.b53be172.mp3\";","export default __webpack_public_path__ + \"static/media/I Chose You.c9a00b79.mp3\";","export default __webpack_public_path__ + \"static/media/I'm Moving To England.2a420fd3.mp3\";","export default __webpack_public_path__ + \"static/media/Earth.ffc7df51.mp3\";","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport seedDatabase from './seedDatabase';\r\n\r\nconsole.log(process.env.REACT_APP_FIREBASE_API_KEY)\r\nconst app = firebase.initializeApp({\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n\tappId:process.env.REACT_APP_FIREBASE_APP_ID,\r\n\tmeasurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n});\r\nexport const auth = app.auth()\r\nexport const storage = app.storage()\r\nexport const firestore = app.firestore()\r\n// seedDatabase(firestore)\r\nexport default app","export default function checkNumber(number, max, min = 0){\r\n\tif(number > max) return min\r\n\tif(number < min) return max\r\n\r\n\treturn number\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { auth, firestore } from '../firebase'\r\nimport firebase from 'firebase'\r\nimport { LoadingData } from '../components/Basic/LoadingData'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport const useAuth = () => {\r\n\treturn useContext(AuthContext)\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [currentUser, setCurrentUser] = useState({})\r\n\tconst [loading, setLoading] = useState(true)\r\n\tfunction login(email, password) {\r\n\t\treturn auth.signInWithEmailAndPassword(email, password)\r\n\t}\r\n\r\n\tfunction logout() {\r\n\t\treturn auth.signOut()\r\n\t}\r\n\r\n\tfunction signup(email, name, password, role, photoURL, imageColors) {\r\n\t\treturn auth.createUserWithEmailAndPassword(email, password)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tfirestore.collection('users')\r\n\t\t\t\t\t.doc(result.user.uid)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\t\tdisplayName: name,\r\n\t\t\t\t\t\tphotoURL: photoURL || \"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg\",\r\n\t\t\t\t\t\tisAuthor: parseInt(role) === 1,\r\n\t\t\t\t\t\tisVerified: parseInt(role) === 1,\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: 0,\r\n\t\t\t\t\t\townSongs: [],\r\n\t\t\t\t\t\townPlaylists: [],\r\n\t\t\t\t\t\taddedSongs: [],\r\n\t\t\t\t\t\taddedPlaylists: [],\r\n\t\t\t\t\t\taddedAuthors: [],\r\n\t\t\t\t\t\tchats: [],\r\n\t\t\t\t\t\tfriends: [],\r\n\t\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\t\tregDate: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t}\r\n\r\n\tasync function fetchUserInfo(userId) {\r\n\t\tlet dataObject = {}\r\n\r\n\t\treturn dataObject\r\n\t}\r\n\r\n\t// useEffect(() => {\r\n\t// \tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t// \t\tif (user) {\r\n\t// \t\t\tconst response = await firestore.collection('users').doc(user.uid).onSnapshot(snapshot => {\r\n\t// \t\t\t\tconst fullUserInfo = { ...user, ...snapshot.data() }\r\n\t// \t\t\t\tconsole.log(\"worked!\")\r\n\t// \t\t\t\tsetCurrentUser(fullUserInfo)\r\n\t// \t\t\t})\r\n\t// \t\t}\r\n\t// \t})\r\n\t// \treturn unsubscribe\r\n\t// }, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tconst response = await firestore.collection('users').doc(user.uid).get().then(snapshot => {\r\n\t\t\t\t\tconst fullUserInfo = { ...user, ...snapshot.data() }\r\n\t\t\t\t\tsetCurrentUser(fullUserInfo)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentUser(user)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn unsubscribe\r\n\t}, [])\r\n\t\r\n\r\n\tconst value = {\r\n\t\tcurrentUser,\r\n\t\tsetCurrentUser,\r\n\t\tlogin,\r\n\t\tsignup,\r\n\t\tlogout,\r\n\t\tloading,\r\n\t\tsetLoading\r\n\t}\r\n\treturn (\r\n\t\t<AuthContext.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n","import React, { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { LoadingData } from '../../components/Basic/LoadingData'\r\nimport { PersonTiny } from '../../components/Basic/PersonTiny'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport shuffleSongs from '../../functions/shuffleSongs'\r\nimport { useAuth } from '../AuthContext'\r\n\r\nconst SongContext = createContext(null)\r\n\r\nexport const useSong = () => {\r\n\treturn useContext(SongContext)\r\n}\r\n\r\nexport const SongProvider = ({ children }) => {\r\n\tconst { currentUser, loading, setLoading } = useAuth()\r\n\tconst [yourSongs, setYourSongs] = useState([])\r\n\tconst [yourPlaylists, setYourPlaylists] = useState([])\r\n\tconst [yourAuthors, setYourAuthors] = useState([])\r\n\tconst [yourFriends, setYourFriends] = useState([])\r\n\tconst [currentSongQueue, setCurrentSongQueue] = useState()\r\n\tconst [currentSong, setCurrentSong] = useState('')\r\n\tconst [currentSongInQueue, setCurrentSongInQueue] = useState(0)\r\n\tconst [currentSongPlaylistSource, setCurrentSongPlaylistSource] = useState({})\r\n\r\n\tconst [currentSongData, setCurrentSongData] = useState({})\r\n\r\n\tconst [imgColors, setImgColors] = useState([])\r\n\tconst [play, setPlay] = useState(false)\r\n\tconst [currentTime, setCurrentTime] = useState(0)\r\n\tconst [songDuration, setSongDuration] = useState(0)\r\n\tconst [repeatMode, setRepeatMode] = useState(1)\r\n\tconst [shuffleMode, setShuffleMode] = useState(0)\r\n\tconst [currentParagraph, setCurrentParagraph] = useState(0)\r\n\tconst [isThereKaraoke, setIsThereKaraoke] = useState(true)\r\n\tconst [openFullScreenPlayer, setOpenFullScreenPlayer] = useState(false)\r\n\tconst songRef = useRef(null)\r\n\tconst currentParagraphRef = useRef(null)\r\n\tconst inputRef = useRef(null)\r\n\tconst leftSideBarInputRef = useRef(null)\r\n\tconst [rightSideCurrentPage, setRightSideCurrentPage] = useState(0)\r\n\tconst [openMenu, setOpenMenu] = useState(false)\r\n\tfunction checkKaraoke() {\r\n\t\tif (currentSongData.lyrics !== undefined && currentSongData.lyrics.length === 0) return false\r\n\r\n\t\tif (currentSongData.lyrics !== undefined) {\r\n\t\t\tconsole.log(currentSongData.lyrics.length)\r\n\t\t\tif (currentSongData.lyrics[0].startTime === 'undefined') return false\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n\r\n\tfunction fetchYourFriends() {\r\n\t\tsetYourFriends([])\r\n\t\tif (currentUser.friends !== undefined) {\r\n\t\t\tconsole.log(currentUser.friends)\r\n\t\t\tcurrentUser.friends.forEach(async friendObj => {\r\n\t\t\t\tconst friend = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tconsole.log(friend)\r\n\t\t\t\tif (friendObj.status === 'added') {\r\n\t\t\t\t\tsetYourFriends(prev => [...prev, friend])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// async function fetchLastPlayedSong() {\r\n\t// \tconsole.log('ewqeqw')\r\n\t// \tlet songId = 0\r\n\t// \tconst userRef = firestore.collection('users').doc(currentUser.uid)\r\n\t// \tconst lastSong = userRef.get()\r\n\r\n\t// }\r\n\r\n\tfunction fetchQueue() {\r\n\t\tsetCurrentSongQueue([])\r\n\t\tif(currentUser.lastQueue){\r\n\t\t\tcurrentUser.lastQueue.songsList.forEach(async songId=>{\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetCurrentSongQueue(prev=>[songData, ...prev])\r\n\t\t\t})\r\n\t\t\tsetCurrentSongInQueue(currentUser.lastQueue.songsList.findIndex(songId => songId === currentSong))\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSongInitial() {\r\n\r\n\t\tif (currentUser.uid !== undefined) {\r\n\t\t\tconst tempSongObject = {\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsongSrc: \"\",\r\n\t\t\t\tauthors: [],\r\n\t\t\t\tcover: \"\",\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\treleaseDate: \"\",\r\n\t\t\t\tlyrics: [],\r\n\t\t\t\timageColors: []\r\n\t\t\t}\r\n\t\t\tconst curSong = currentUser.lastSongPlayed || currentUser.addedSongs[0] || tempSongObject.id\r\n\t\t\tconst curQueue = currentUser.lastQueue || { source: '/library', name: 'Your Library', image: currentUser.photoURL, songsList: yourSongs } || []\r\n\t\t\tsetCurrentSong(curSong)\r\n\t\t\tsetCurrentSongPlaylistSource(curQueue)\r\n\r\n\t\t\tif (curSong !== -1) {\r\n\t\t\t\tconst docRef = firestore.collection('songs').doc(curSong)\r\n\t\t\t\tconst docData = docRef.get()\r\n\t\t\t\t\t.then(doc => {\r\n\t\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongData(tempSongObject)\r\n\t\t\t\tsetImgColors([])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSong() {\r\n\t\tif (currentSong !== -1) {\r\n\t\t\tconst docRef = firestore.collection('songs').doc(currentSong)\r\n\t\t\tconst docData = docRef.get()\r\n\t\t\t\t.then(doc => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourSongs() {\r\n\t\tsetYourSongs([])\r\n\t\tif (currentUser.addedSongs) {\r\n\t\t\tcurrentUser.addedSongs.map((song, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"songs\").doc(song)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourSongs(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction fetchYourPlaylists() {\r\n\t\tsetYourPlaylists([])\r\n\t\tif (currentUser.ownPlaylists) {\r\n\t\t\tcurrentUser.ownPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourPlaylists(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (currentUser.addedPlaylists) {\r\n\t\t\tcurrentUser.addedPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourPlaylists(prev => [...prev, doc.data()])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourAuthors() {\r\n\t\tsetYourAuthors([])\r\n\t\tif (currentUser.addedAuthors) {\r\n\t\t\tcurrentUser.addedAuthors.map((authorId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourAuthors(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser) {\r\n\t\t\tsetLoading(true)\r\n\t\t\tfetchYourSongs()\r\n\t\t\tfetchCurrentSongInitial()\r\n\t\t\tfetchYourPlaylists()\r\n\t\t\tfetchYourFriends()\r\n\t\t\tfetchQueue()\r\n\t\t\tfetchYourAuthors()\r\n\t\t}\r\n\t}, [currentUser])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser && currentSong) {\r\n\t\t\tfetchCurrentSong()\r\n\t\t}\r\n\t}, [currentSong])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsThereKaraoke(checkKaraoke())\r\n\t}, [currentSongData.lyrics])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!loading) {\r\n\t\t\tif (shuffleMode) {\r\n\t\t\t\tlet shuffledSongsArray = shuffleSongs(currentSongQueue)\r\n\t\t\t\tsetCurrentSongQueue(shuffledSongsArray)\r\n\t\t\t\tsetCurrentSongInQueue(shuffledSongsArray.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongQueue(currentSongPlaylistSource.songsList)\r\n\t\t\t\tsetCurrentSongInQueue(currentSongPlaylistSource.songsList.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [shuffleMode])\r\n\tlet listenCountTimeOut = useRef()\r\n\tfunction playSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (play) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\r\n\t\tsetPlay(!play)\r\n\t}\r\n\r\n\tfunction updateListenCount() {\r\n\t\tconsole.log('listen Count Update')\r\n\t\tlistenCountTimeOut.current = setTimeout(() => {\r\n\t\t\tconsole.log('count added')\r\n\t\t\tlet listens = currentSongData.listens\r\n\t\t\tlistens++\r\n\t\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\t\tlistens: listens\r\n\t\t\t})\r\n\t\t}, songDuration * 1000 * 0.5)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(listenCountTimeOut.current)\r\n\t\tif (play) {\r\n\t\t\tupdateListenCount()\r\n\t\t}\r\n\t}, [play, currentSongData.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentParagraph(0)\r\n\t}, [currentSongData.id])\r\n\r\n\tfunction loadSongData(e) {\r\n\t\tsetCurrentTime(e.target.currentTime)\r\n\t\tsetSongDuration(e.target.duration)\r\n\t\tinputRef.current.max = e.target.duration\r\n\t\tif (window.innerWidth > 1000) leftSideBarInputRef.current.max = e.target.duration\r\n\t\tdocument.documentElement.style.setProperty('--inputRange', 0 + '%')\r\n\t\tif (play) { e.target.play() }\r\n\t\telse e.target.pause()\r\n\t}\r\n\r\n\tfunction defineCurrentParagraph() {\r\n\t\t//Well, I'm maybe not a great mathematician or smth, but I want to make this not linear, but binary, hence O(logN)\r\n\t\t// currentSongData.lyrics.find((el, i) => {\r\n\t\t// \tif (el.startTime <= songRef.current.currentTime) {\r\n\t\t// \t\tsetCurrentParagraph(i)\r\n\t\t// \t\treturn false\r\n\t\t// \t}\r\n\t\t// \t// currentParagraphRef.current.scrollIntoView()\r\n\t\t// \treturn true\r\n\t\t// })\r\n\r\n\t\tlet first = 0, last = currentSongData.lyrics.length - 1\r\n\t\tlet roundedTime = parseFloat(parseFloat(songRef.current.currentTime).toFixed(1))\r\n\t\twhile (first <= last) {\r\n\t\t\tlet midPoint = Math.floor((first + last) / 2)\r\n\t\t\tlet blockStartTime = parseFloat(parseFloat(currentSongData.lyrics[midPoint].startTime).toFixed(1))\r\n\t\t\tlet nextBlockStartTime = midPoint !== currentSongData.lyrics.length - 1 ? parseFloat(parseFloat(currentSongData.lyrics[midPoint + 1].startTime).toFixed(1)) : last\r\n\t\t\tif (currentSongData.lyrics[midPoint].startTime !== 'undefined') {\r\n\t\t\t\tif (roundedTime >= blockStartTime && roundedTime <= nextBlockStartTime) {\r\n\t\t\t\t\tsetCurrentParagraph(midPoint)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\telse if (blockStartTime < roundedTime) first = midPoint + 1\r\n\t\t\t\telse last = midPoint - 1\r\n\r\n\t\t\t}\r\n\t\t\telse return\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(rightSideCurrentPage === 2) defineCurrentParagraph()\r\n\t}, [rightSideCurrentPage])\r\n\r\n\tfunction defineCurrentParagraphLight() {\r\n\t\tif (currentParagraph !== (currentSongData.lyrics.length - 1) && parseFloat(currentSongData.lyrics[currentParagraph + 1].startTime) <= songRef.current.currentTime) {\r\n\t\t\t// console.log(parseFloat(currentSongData.lyrics[currentParagraph+1].startTime), songRef.current.currentTime)\r\n\t\t\treturn setCurrentParagraph(currentParagraph + 1)\r\n\t\t}\r\n\t}\r\n\tfunction playing(event) {\r\n\r\n\t\tif (event.target.currentTime === songDuration) {\r\n\t\t\tif (repeatMode === 0) {\r\n\t\t\t\tsongRef.current.pause()\r\n\t\t\t\tsetPlay(false)\r\n\t\t\t\treturn prevSong()\r\n\t\t\t}\r\n\t\t\telse if (repeatMode === 1) {\r\n\t\t\t\tif (currentSongQueue.length === 1) {\r\n\t\t\t\t\tprevSong()\r\n\t\t\t\t\treturn songRef.current.play()\r\n\t\t\t\t}\r\n\t\t\t\treturn nextSong()\r\n\t\t\t}\r\n\t\t\tprevSong()\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\t\tsetCurrentTime(event.target.currentTime)\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer && openMenu) defineCurrentParagraphLight()\r\n\t\tdocument.documentElement.style\r\n\t\t\t.setProperty('--inputRange', (event.target.currentTime / songDuration) * 100 + '%');\r\n\t}\r\n\r\n\tasync function nextSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue + 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tasync function prevSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (currentTime > 5) {\r\n\t\t\tsongRef.current.currentTime = 0\r\n\t\t\tsetCurrentTime(0)\r\n\t\t\tsetCurrentParagraph(0)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue - 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tfunction changeCurrentTime(event, startTime = 0) {\r\n\t\tif (event.target.localName === 'div' || event.target.localName === \"p\") {\r\n\t\t\tsetCurrentTime(startTime)\r\n\t\t\tsongRef.current.currentTime = startTime\r\n\t\t\tdocument.documentElement.style\r\n\t\t\t\t.setProperty('--inputRange', (startTime / songDuration) * 100 + '%');\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) setCurrentParagraph(parseInt(event.target.id))\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\treturn\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetCurrentTime(event.target.value)\r\n\t\t\tsongRef.current.currentTime = event.target.value\r\n\t\t\tdocument.documentElement.style\r\n\t\t\t\t.setProperty('--inputRange', (event.target.value / songDuration) * 100 + '%');\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) defineCurrentParagraph()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction displayAuthors(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>{el.displayName}</Link>{(i === authorsList.length - 1 ? \"\" : separatingSign)}\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction displayAuthorsFull(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>\r\n\t\t\t\t\t\t<PersonTiny data = {el}/>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction findLen() {\r\n\t\tlet str = \"\"\r\n\t\tcurrentSongData.authors.forEach(el => {\r\n\t\t\tstr += el.displayName\r\n\t\t})\r\n\t\treturn str.length\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = currentSongData.name || 'Soundbubble'\r\n\t}, [currentSongData.name])\r\n\treturn (\r\n\t\t<SongContext.Provider value={\r\n\t\t\t{\r\n\t\t\t\tyourSongs,\r\n\t\t\t\tsetYourSongs,\r\n\t\t\t\tyourPlaylists,\r\n\t\t\t\tyourFriends,\r\n\t\t\t\tcurrentSongQueue,\r\n\t\t\t\tcurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongQueue,\r\n\t\t\t\tsetCurrentSongInQueue,\r\n\t\t\t\tplay,\r\n\t\t\t\tsetPlay,\r\n\t\t\t\tsongSrc: currentSongData.songSrc,\r\n\t\t\t\tcurrentTime,\r\n\t\t\t\tsetCurrentTime,\r\n\t\t\t\tsongDuration,\r\n\t\t\t\tsongRef,\r\n\t\t\t\tname: currentSongData.name,\r\n\t\t\t\tauthors: currentSongData.authors,\r\n\t\t\t\tlyrics: currentSongData.lyrics,\r\n\t\t\t\tcover: currentSongData.cover,\r\n\t\t\t\timgColors,\r\n\t\t\t\tsetImgColors,\r\n\t\t\t\tcurrentSong,\r\n\t\t\t\tsetCurrentSong,\r\n\t\t\t\trepeatMode,\r\n\t\t\t\tsetRepeatMode,\r\n\t\t\t\tshuffleMode,\r\n\t\t\t\tsetShuffleMode,\r\n\t\t\t\tinputRef,\r\n\t\t\t\tleftSideBarInputRef,\r\n\t\t\t\tisThereKaraoke,\r\n\t\t\t\trightSideCurrentPage,\r\n\t\t\t\tcurrentParagraph,\r\n\t\t\t\tcurrentParagraphRef,\r\n\t\t\t\tnextSong,\r\n\t\t\t\tprevSong,\r\n\t\t\t\tplaySong,\r\n\t\t\t\tplaying,\r\n\t\t\t\tdefineCurrentParagraph,\r\n\t\t\t\tsetRightSideCurrentPage,\r\n\t\t\t\tchangeCurrentTime,\r\n\t\t\t\tdisplayAuthors,\r\n\t\t\t\tdisplayAuthorsFull,\r\n\t\t\t\topenFullScreenPlayer,\r\n\t\t\t\tsetOpenFullScreenPlayer,\r\n\t\t\t\tloadSongData,\r\n\t\t\t\tfindLen,\r\n\t\t\t\tfetchYourSongs,\r\n\t\t\t\tsetOpenMenu,\r\n\t\t\t\topenMenu,\r\n\t\t\t\tcurrentSongData,\r\n\t\t\t\tsetCurrentSongData,\r\n\t\t\t\tsetIsThereKaraoke,\r\n\t\t\t\tcheckKaraoke,\r\n\t\t\t\tsetYourPlaylists,\r\n\t\t\t\tyourAuthors,\r\n\t\t\t\tsetYourAuthors\r\n\t\t\t}\r\n\t\t}>\r\n\t\t\t{!loading ?\r\n\t\t\t\tchildren :\r\n\t\t\t\t<LoadingData />\r\n\t\t\t}\r\n\t\t</SongContext.Provider>\r\n\t)\r\n}\r\n","export default function shuffleSongs(songsArray){\r\n\tconst randomIndexesArray = []\r\n\tconst newSongsNumbersArray = new Array(songsArray.length)\r\n\tlet counter = 0\r\n\twhile(counter < songsArray.length){\r\n\t\tconst randNum = Math.floor(Math.random()*(songsArray.length))\r\n\t\tif(!randomIndexesArray.includes(randNum)){\r\n\t\t\trandomIndexesArray.push(randNum)\r\n\t\t\tnewSongsNumbersArray[randNum] = songsArray[counter]\r\n\t\t\tcounter++\r\n\t\t}\r\n\t}\r\n\treturn newSongsNumbersArray\r\n}","\r\nfunction amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nfunction toDateTime(secs) {\r\n\t// console.log(\"ewqeqw\")\r\n\tvar t = new Date(1970, 0, 1); // Epoch\r\n\tt.setSeconds(secs);\r\n\treturn t;\r\n}\r\n\r\nexport default function displayDate(stringDate, displayMode = 0){\r\n\tconst Months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\r\n\tlet newDate = !isNaN(stringDate)?stringDate.seconds?toDateTime(stringDate.seconds + 10800):toDateTime((stringDate/1000) + 10800):new Date(stringDate)\r\n\tif(displayMode === 0){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() \r\n\t}\r\n\r\n\tif(displayMode === 1){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate()\r\n\t}\r\n\r\n\tif(displayMode === 2){\r\n\t\treturn amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n\r\n\tif(displayMode === 3){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() + \" at \" + amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n}","import React from 'react'\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { useHistory } from 'react-router'\r\n\r\nexport const BackBtn = ({color = \"\"}) => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"BackBtn\">\r\n\t\t\t<button onClick={() => history.goBack()} style = {color.length?{color:color}:{}}>\r\n\t\t\t\t<FiArrowLeft />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Denzel-Curry.84494049.jpg\";","export default __webpack_public_path__ + \"static/media/Morgenshtern.2047a5bb.jpg\";","export default __webpack_public_path__ + \"static/media/Tyomcha.1a7e66ed.jpg\";","export default __webpack_public_path__ + \"static/media/yvng-swag.e9572d73.jpg\";","export default __webpack_public_path__ + \"static/media/chris-brown.256f093e.jpg\";","export default __webpack_public_path__ + \"static/media/tyga.38622b96.jpg\";","export default __webpack_public_path__ + \"static/media/diddy.5dd4ad63.jpg\";","export default __webpack_public_path__ + \"static/media/greenday.656475fd.jpg\";","export default __webpack_public_path__ + \"static/media/johny-koch.5c8fed82.jpg\";","export default __webpack_public_path__ + \"static/media/andro.38ce0477.jpg\";","export default __webpack_public_path__ + \"static/media/qontrast.452f5fe9.jpg\";","export default __webpack_public_path__ + \"static/media/jaden.c4c50d52.jpg\";","export default __webpack_public_path__ + \"static/media/kid-cudi.ff281840.png\";","export default __webpack_public_path__ + \"static/media/dirty-money.2644bf3e.jpg\";","export default __webpack_public_path__ + \"static/media/OneRepublic.d5d9b523.jpg\";","export default __webpack_public_path__ + \"static/media/t-pain.da79c258.jpg\";","export default __webpack_public_path__ + \"static/media/Kid-ink.4a8065f2.jpg\";","export default __webpack_public_path__ + \"static/media/Chance-the-rapper.672005ab.jpg\";","export default __webpack_public_path__ + \"static/media/Bob.6bb6be52.jpg\";","export default __webpack_public_path__ + \"static/media/Lil-dicky.2fc4ceab.png\";","export default __webpack_public_path__ + \"static/media/Arizona-zervas.78d1344a.jpg\";","export default __webpack_public_path__ + \"static/media/Andy-panda.6f59b7ec.jpg\";","export default __webpack_public_path__ + \"static/media/Adriana-proenza.2fc46e8e.jpg\";","import denzel from '../images/authors/Denzel-Curry.jpg'\r\nimport morgen from '../images/authors/Morgenshtern.jpg'\r\nimport eldjey from '../images/Cadillac.jpg'\r\nimport tyomcha from '../images/authors/Tyomcha.jpg'\r\nimport yvngswag from '../images/authors/yvng-swag.jpg'\r\nimport crhisbrown from '../images/authors/chris-brown.jpg'\r\nimport tyga from '../images/authors/tyga.jpg'\r\nimport diddy from '../images/authors/diddy.jpg'\r\nimport bluelake from '../images/authors/bluelake.jpg'\r\nimport greenday from '../images/authors/greenday.jpg'\r\nimport johnykoch from '../images/authors/johny-koch.jpg'\r\nimport andro from '../images/authors/andro.jpg'\r\nimport qontrast from '../images/authors/qontrast.jpg'\r\nimport jaden from '../images/authors/jaden.jpg'\r\nimport kidcudi from '../images/authors/kid-cudi.png'\r\nimport dirtymoney from '../images/authors/dirty-money.jpg'\r\nimport justinBieber from '../images/authors/justin-bieber.png'\r\nimport miyagi from '../images/Buster-Keaton.jpeg'\r\nimport oneRepublic from '../images/authors/OneRepublic.jpg'\r\nimport tPain from '../images/authors/t-pain.jpg'\r\nimport kidInk from '../images/authors/Kid-ink.jpg'\r\nimport chanceTheRapper from '../images/authors/Chance-the-rapper.jpg'\r\nimport Bob from '../images/authors/Bob.jpg'\r\nimport LilDicky from '../images/authors/Lil-dicky.png'\r\nimport arizonaZervas from '../images/authors/Arizona-zervas.jpg'\r\nimport andyPanda from '../images/authors/Andy-panda.jpg'\r\nimport adrianaProezna from '../images/authors/Adriana-proenza.jpg'\r\nimport quavo from '../images/authors/quavo.jpg'\r\nimport fettyWap from '../images/authors/Fetty-wap.png'\r\nexport const authors = [\r\n\t{\r\n\t\tid:0, \r\n\t\tname:'MORGENSHTERN', \r\n\t\timage:morgen,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 123,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t0\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\tname:'Элджей', \r\n\t\timage:eldjey,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 100,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t0\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\tname:'Ed Sheeran', \r\n\t\timage:'https://cdns-images.dzcdn.net/images/artist/f4daf253b92a1a9646844c5162e2a968/264x264.jpg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 93,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t1\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\tname:'Nate Good', \r\n\t\timage:'https://is1-ssl.mzstatic.com/image/thumb/Features114/v4/2f/5d/0f/2f5d0f3e-349f-77e8-3878-7efe934f5183/pr_source.png/800x800bb.jpeg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 54,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\tname:'Bluelake', \r\n\t\timage:bluelake,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 14,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\tname:'Johny Koch', \r\n\t\timage:johnykoch,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 68,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\tname:'Greenday', \r\n\t\timage:greenday,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 34,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:7, \r\n\t\tname:'Andro', \r\n\t\timage:andro,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 72,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:8, \r\n\t\tname:'QONTRAST', \r\n\t\timage:qontrast,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 71,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:9, \r\n\t\tname:'Hiro', \r\n\t\timage:\"https://is2-ssl.mzstatic.com/image/thumb/Features114/v4/8f/24/99/8f249900-47f1-4942-4749-713973f58dde/pr_source.png/190x190cc-60.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 25,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:10, \r\n\t\tname:'Yvng Swag', \r\n\t\timage:yvngswag,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 51,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:11, \r\n\t\tname:'Slava Marlow', \r\n\t\timage:\"https://upload.wikimedia.org/wikipedia/commons/c/cb/Slava_Marlow.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 34,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:12, \r\n\t\tname:'кис-кис', \r\n\t\timage:\"https://i1.sndcdn.com/artworks-vkNIueBuHJ2fSa1D-fRw8mA-t500x500.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 44,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:13, \r\n\t\tname:'Jaden', \r\n\t\timage:jaden,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 74,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:14, \r\n\t\tname:'Kid Cudi', \r\n\t\timage:kidcudi,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 61,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:15, \r\n\t\tname:'Miyagi', \r\n\t\timage:miyagi,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 102,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:16, \r\n\t\tname:'Chris Brown', \r\n\t\timage:crhisbrown,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 41,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:17, \r\n\t\tname:'Tyga', \r\n\t\timage:tyga,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 80,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:18, \r\n\t\tname:'Tanir', \r\n\t\timage: \"https://i.scdn.co/image/92455c398cf7be1eda78df4f1de572ade87aa95e\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 89,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:19, \r\n\t\tname:'Tyomcha', \r\n\t\timage: tyomcha,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 92,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:20, \r\n\t\tname:'Diddy', \r\n\t\timage:diddy,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 105,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:21, \r\n\t\tname:'Dirty Money', \r\n\t\timage:dirtymoney,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 10,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:22, \r\n\t\tname:'Denzel Curry', \r\n\t\timage:denzel,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 170,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:23, \r\n\t\tname:'Lil Dicky', \r\n\t\timage:LilDicky,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 134,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:24, \r\n\t\tname:'Justin Bieber', \r\n\t\timage:justinBieber,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 251,\r\n\t\tsubscribers:50,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:25, \r\n\t\tname:'Lil Wayne', \r\n\t\timage:\"https://static01.nyt.com/images/2020/11/19/arts/17lilwayne/17lilwayne-mediumSquareAt3X.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 10,\r\n\t\tsubscribers:50,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:26, \r\n\t\tname:'OneRepublic', \r\n\t\timage:oneRepublic,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:100,\r\n\t\tsongs:[\r\n\t\t\t22\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:27, \r\n\t\tname:'Seeb', \r\n\t\timage:\"https://pbs.twimg.com/profile_images/1354787716123262976/FbiITgXt_400x400.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:100,\r\n\t\tsongs:[\r\n\t\t\t22\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:28, \r\n\t\tname:'T-Pain', \r\n\t\timage:tPain,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:100,\r\n\t\tsongs:[\r\n\t\t\t22\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:29, \r\n\t\tname:'Andy Panda', \r\n\t\timage:andyPanda,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:30, \r\n\t\tname:'Kostya Doloz', \r\n\t\timage:'https://sun9-66.userapi.com/impf/c636628/v636628089/46fc5/jZmb1Eadwqs.jpg?size=960x1280&quality=96&sign=ee424378e70207bd5f8ab2aa5a669b81&type=album',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:31, \r\n\t\tname:'Lil Magnum', \r\n\t\timage:'https://sun9-59.userapi.com/impg/ABnwxJFpZUNHG9-dbMnKEH-cT8YGWdpZ5DvSbA/Vr_Dkiu--VQ.jpg?size=1620x2160&quality=96&sign=7685b9ae04fed10f41f56729c93e6d89&type=album',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:32, \r\n\t\tname:'Dj Khaled', \r\n\t\timage:'https://cdn.smehost.net/2020sonymusiccouk-ukprod/wp-content/uploads/2017/05/c16367f4d6cf286d282eaffd0d3b9928-1040x1040.jpg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:33, \r\n\t\tname:'Quavo', \r\n\t\timage:quavo,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:34, \r\n\t\tname:'Chance the Rapper', \r\n\t\timage:chanceTheRapper,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:35, \r\n\t\tname:'Kid Ink', \r\n\t\timage:kidInk,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:36, \r\n\t\tname:'B.O.B', \r\n\t\timage:Bob,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:37, \r\n\t\tname:'27CLUB', \r\n\t\timage:\"https://is1-ssl.mzstatic.com/image/thumb/Music113/v4/0a/55/67/0a5567bf-63ad-9a26-5029-8742b18f8d4e/pr_source.png/800x800bb.jpeg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 23,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t46\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:38, \r\n\t\tname:'Arizona Zervas', \r\n\t\timage:arizonaZervas,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:39, \r\n\t\tname:'SAINt JHN', \r\n\t\timage:\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/SAINt_JHN_2018.jpg/1200px-SAINt_JHN_2018.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:40, \r\n\t\tname:'Kina', \r\n\t\timage:\"https://cdns-images.dzcdn.net/images/artist/ba417fffce8682b5094d732ad3d49765/264x264.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:41, \r\n\t\tname:'Adriana Proenza', \r\n\t\timage:adrianaProezna,\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:42, \r\n\t\tname:'Fetty Wap', \r\n\t\timage:fettyWap,\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:43, \r\n\t\tname:'Imanbek', \r\n\t\timage:\"https://cdn1.img.sputniknews-uz.com/img/07e5/03/0f/17749204_227:0:768:541_1920x0_80_0_0_f4e2bfe387d8690c6cb3fc128dcaed57.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:44, \r\n\t\tname:'KDDK', \r\n\t\timage:\"https://www.bongminesentertainment.com/wp-content/uploads/2021/01/KDDK-press-photo.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:45, \r\n\t\tname:'Brian O\\'Connor', \r\n\t\timage:'https://n1s1.hsmedia.ru/42/0f/52/420f52159635528d6c9113041a35a7f3/300x300_21_70fe4fecaff57e56a94b2397a6ddf682@620x620_0xc0a839a2_10034582461461587506.jpeg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:46, \r\n\t\tname:'Aurora Lane', \r\n\t\timage:'https://citaty.info/files/characters/181456.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:47, \r\n\t\tname:'Leonardo', \r\n\t\timage:'https://i.quotev.com/img/q/u/19/5/18/7pk32vqtql.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:48, \r\n\t\tname:'Aubrey Miller', \r\n\t\timage:'https://thumbs.dfs.ivi.ru/storage28/contents/8/b/8a3578d0280ffbb0de11e7fc6cb6f6.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:49, \r\n\t\tname:'Peter Parker', \r\n\t\timage:'https://stuki-druki.com/aforizms/Andrew-Garfield-01.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:50, \r\n\t\tname:'Tayler Durden', \r\n\t\timage:'https://i.guim.co.uk/img/media/44eddd0655bf11d1a7b029f15439f9f7b9efb201/181_28_2208_1324/master/2208.jpg?width=1200&height=1200&quality=85&auto=format&fit=crop&s=431814d186eb7fc54568cb7442a58f27',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:51, \r\n\t\tname:'Dave Hodgman', \r\n\t\timage:'https://i.pinimg.com/originals/fb/ab/f0/fbabf08ce7d0f8ed467a737d88ef2433.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:52, \r\n\t\tname:\"XUITCASECITY\", \r\n\t\timage:'https://images.squarespace-cdn.com/content/v1/56f1aeae7da24fd2594ac9e1/1542717650261-VIDWSX14VA6NGAQL32Z1/ke17ZwdGBToddI8pDm48kK60W-ob1oA2Fm-j4E_9NQB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0kD6Ec8Uq9YczfrzwR7e2Mh5VMMOxnTbph8FXiclivDQnof69TlCeE0rAhj6HUpXkw/Xuitcasecity+by+Icon+PR',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 13,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:53, \r\n\t\tname:\"Hanz Zimmer\", \r\n\t\timage:'https://i1.sndcdn.com/artworks-000068635202-eb0j3j-t500x500.jpg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 13,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n]","export default \"data:image/jpeg;base64,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\"","export default __webpack_public_path__ + \"static/media/quavo.931877b3.jpg\";","export default __webpack_public_path__ + \"static/media/Fetty-wap.6389d241.png\";","import React, {useEffect} from 'react'\r\nimport { authors } from '../../data/authors'\r\n\r\nexport const SmallImages = ({imagesList, borderColor = \"#fff\"}) => {\r\n\treturn (\r\n\t\t<div className = \"SmallImages\" style = {{marginRight:-7*(imagesList.length-1)}}>\r\n\t\t\t{imagesList.map((image, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"smallImgContainer\" style = {{border:`3px solid ${borderColor}`, transform:`translateX(${-15*index}px)`}} key = {index}>\r\n\t\t\t\t\t\t<img src={image} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function rightFormanForBigNumber(number){\r\n\tif(number < 1000) return number\r\n\r\n\tif(number < 1000000) return parseFloat(number/1000).toFixed(1) + 'K'\r\n\r\n\tif(number < 1000000000) return parseFloat(number / 1000000).toFixed(1) + 'M'\r\n}","import React, { useContext, useState } from 'react'\r\n\r\nconst ModalContext = React.createContext()\r\n\r\nexport const useModal = () =>{\r\n\treturn useContext(ModalContext)\r\n}\r\n\r\nexport const ModalClassProvider = ({children}) => {\r\n\tconst [openModal, setOpenModal] = useState(false)\r\n\tconst [content, setContent] = useState(<h1>Test</h1>)\r\n\t\r\n\tfunction toggleModal(){\r\n\t\tsetOpenModal(!openModal)\r\n\t}\r\n\r\n\tconst value = {\r\n\t\topenModal,\r\n\t\tsetOpenModal,\r\n\t\ttoggleModal, \r\n\t\tsetContent, \r\n\t\tcontent\r\n\t}\r\n\treturn (\r\n\t\t<ModalContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ModalContext.Provider>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nexport const useOutsideClick = (ref, setFunc) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tsetFunc(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n}\r\n","export default function getUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\tconst piece = (Math.random() * 16) | 0;\r\n\t\tconst elem = c === 'x' ? piece : (piece & 0x3) | 0x8;\r\n\t\treturn elem.toString(16);\r\n\t});\r\n}\r\n","import { firestore } from \"../firebase\"\r\nimport getUID from \"./getUID\"\r\n\r\nexport const createChat = async (admins, participants, chatUID = getUID(), chatName, chatImage) => {\r\n\tfirestore.collection('chats').doc(chatUID).set({\r\n\t\tchatImage:chatImage,\r\n\t\tchatName:chatName,\r\n\t\tid:chatUID,\r\n\t\tmessages:[],\r\n\t\tparticipants:participants,\r\n\t\twallpaper:'undefined',\r\n\t\tadmin:participants.length > 2? admins:undefined,\r\n\t\tfullySeenBy:[],\r\n\t\ttyping:[]\r\n\t})\r\n\r\n\tparticipants.map(async personId=>{\r\n\t\tlet chatInfo = (await firestore.collection('users').doc(personId).get()).data().chats\r\n\t\tchatInfo.push(chatUID)\r\n\t\tfirestore.collection('users').doc(personId).update({\r\n\t\t\tchats:chatInfo\r\n\t\t})\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\nimport getUID from \"./getUID\"\r\n\r\nexport const findChatURL = async (friendId, currentUser, setShouldCreate, setFriendChatId) => {\r\n\tlet foundChat = false\r\n\tlet chatId = 0\r\n\tif (currentUser.chats) {\r\n\t\tconst chatInfo = (await firestore.collection('chats').where('participants', \"==\", [friendId, currentUser.uid]).get())\r\n\t\tconst chatInfo2 = (await firestore.collection('chats').where('participants', \"==\", [currentUser.uid, friendId]).get())\r\n\t\tchatInfo.docs.forEach(chat => {\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(false)\r\n\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\tchatId = chat.data().id\r\n\t\t})\r\n\t\tchatInfo2.docs.forEach(chat => {\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(false)\r\n\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\tchatId = chat.data().id\r\n\t\t})\r\n\r\n\t\tif (!foundChat) {\r\n\t\t\tconst random = getUID()\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(true)\r\n\t\t\tsetFriendChatId(random)\r\n\t\t\tchatId = random\r\n\t\t}\r\n\t\treturn chatId\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { FiMessageCircle } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport { findChatURL } from '../../functions/findChatURL'\r\n\r\nexport const ChatWithFriendButton = ({ data, color }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL(data.uid, currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [data.uid])\r\n\r\n\treturn (\r\n\t\t<Link to={`/chat/${friendChatId}`} style = {{display:'block', width:'fit-content', textDecoration: \"none\"}}>\r\n\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, data.uid], friendChatId) }} style = {{background:color}} className = \"ChatWithFriendButton\"><FiMessageCircle /> Messages</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const LoadingCircle = ({top = '20%'}) => {\r\n\treturn (\r\n\t\t<div className = \"LoadingCircle\" style = {{top:top}}>\r\n\t\t\t<img src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiSearch, FiX} from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { BackBtn } from './BackBtn'\r\nimport { LoadingCircle } from './LoadingCircle'\r\n\r\nexport const SearchBar = ({value, setValue, setAllFoundSongs, setResultPlaylists, setResultAuthorList, focus = false, defaultSearchMode = undefined, inputText = \"Search for songs or for people\",defaultSongsListValue}) => {\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [foundAnything, setFoundAnything] = useState(false)\r\n\tconst [searchMode, setSearchMode] = useState(0)\r\n\tconst inputRef = useRef(null)\r\n\tlet typingTimeout\r\n\r\n\tasync function findSongs(){\r\n\t\tconst foundItemTempArray = []\r\n\t\tlet response = firestore.collection('songs')\r\n\t\t\t.where('name', \"==\", value)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tif(defaultSongsListValue && defaultSongsListValue.length){\r\n\t\t\t\tif(defaultSongsListValue.map(song=>song.id).includes(item.id)) foundItemTempArray.push(item.data())\r\n\t\t\t}\r\n\t\t\telse foundItemTempArray.push(item.data())\r\n\t\t})\r\n\r\n\t\tif(foundItemTempArray.length !== 0 && searchMode === 0 && defaultSearchMode === undefined) {\r\n\t\t\tfoundItemTempArray.forEach(async song=>{\r\n\t\t\t\tconst authorsIdsArray = (await firestore.collection('songs').doc(song.id).get()).data().authors\r\n\t\t\t\tauthorsIdsArray.forEach(async (author, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst authorData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\tsetResultAuthorList(prev=>[...prev, authorData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetAllFoundSongs(foundItemTempArray)\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length !== 0)setFoundAnything(true)\r\n\t}\r\n\r\n\tasync function findAuthors(){\r\n\t\tconst foundItemTempArray = []\r\n\t\tconst response = firestore.collection('users')\r\n\t\t\t.where('displayName', \"==\", value)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tfoundItemTempArray.push(item.data())\r\n\t\t})\r\n\t\tif(defaultSearchMode === undefined && foundItemTempArray.length !== 0 && searchMode === 0) {\r\n\t\t\t\r\n\t\t\tfoundItemTempArray.forEach(async author=>{\r\n\t\t\t\tconst songsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownSongs\r\n\t\t\t\tconst albumsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownPlaylists\r\n\t\t\t\tsongsIdsArray.forEach(async (songId, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\t\t\tsetAllFoundSongs(prev=>[...prev, songData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\talbumsIdsArray.forEach(async (albumId, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst albumData = (await firestore.collection('playlists').doc(albumId).get()).data()\r\n\t\t\t\t\t\tsetResultPlaylists(prev=>[...prev, albumData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetResultAuthorList(foundItemTempArray)\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length !== 0)setFoundAnything(true)\r\n\t}\r\n\r\n\tasync function findPlaylists(){\r\n\t\tconst foundItemTempArray = []\r\n\t\tconst response = firestore.collection('playlists')\r\n\t\t\t.where('name', \"==\", value).where('isPrivate', '==', false)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tfoundItemTempArray.push(item.data())\r\n\t\t})\r\n\t\tif(foundItemTempArray.length !== 0 && searchMode === 0) {\r\n\t\t\t\r\n\t\t\tfoundItemTempArray.forEach(async playlist=>{\r\n\t\t\t\tconst songsIdsArray = (await firestore.collection('playlists').doc(playlist.id).get()).data().authors\r\n\t\t\t\tsongsIdsArray.forEach(async (author, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst songData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\tsetResultAuthorList(prev=>[...prev, songData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetResultPlaylists(foundItemTempArray)\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length !== 0)setFoundAnything(true)\r\n\t}\r\n\r\n\tfunction findSomething() {\r\n\t\tsetLoading(true)\r\n\t\tsetFoundAnything(false)\r\n\t\tif(value !== \"\"){\r\n\r\n\t\t\tif(defaultSearchMode === undefined){\r\n\t\t\t\tif(searchMode === 0 || searchMode === 1) {\r\n\t\t\t\t\tfindSongs()\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif(searchMode === 0 || searchMode === 2) \r\n\t\t\t\t{\r\n\t\t\t\t\tfindAuthors()\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif(searchMode === 0 || searchMode === 3) \r\n\t\t\t\t{\r\n\t\t\t\t\tfindPlaylists()\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tswitch(defaultSearchMode){\r\n\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\tfindSongs()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\tfindPlaylists()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"authors\":\r\n\t\t\t\t\t\tfindAuthors()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tfindSongs()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(defaultSongsListValue !== undefined) setAllFoundSongs(defaultSongsListValue)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\tsetMessage('Not found')\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(focus) inputRef.current.focus()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSomething()\r\n\t}, [searchMode])\r\n\r\n\t\r\n\treturn (\r\n\t\t<div> \r\n\t\t\t<div className=\"searchBar\">\r\n\t\t\t\t<div className=\"searchBarElement\">\r\n\t\t\t\t\t<BackBtn />\r\n\t\t\t\t\t<span onClick={() => value.length ? setValue(\"\") : null}>{value.length ? <FiX /> : <FiSearch />}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input \r\n\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\tplaceholder={inputText} \r\n\t\t\t\t\tvalue={value} \r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value)} \r\n\t\t\t\t\tonKeyUp={() => timerUpFunc(findSomething)} \r\n\t\t\t\t\tonKeyDown={() => {clearTimeout(typingTimeout)} } \r\n\t\t\t\t\tref = {inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"searchFilters\" style = {defaultSearchMode !== undefined?{display:'none'}:{}}>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(0)} style = {searchMode === 0?{background:'var(--lightBlue)'}:{}}>All</button>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(1)} style = {searchMode === 1?{background:'var(--lightBlue)'}:{}}>Songs</button>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(2)} style = {searchMode === 2?{background:'var(--lightBlue)'}:{}}>Authors</button>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(3)} style = {searchMode === 3?{background:'var(--lightBlue)'}:{}}>Playlists</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t{loading ?\r\n\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px', marginTop:'40px' }}>\r\n\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t!foundAnything && value.length !== 0?<h2>{message}</h2>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport shareWithFriends from '../../functions/shareWithManyFriends'\r\nimport { PersonTiny } from './PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const FriendsListToShareWith = ({ item, whatToShare = 'song' }) => {\r\n\tconst { yourFriends } = useSong()\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [shared, setShared] = useState(false)\r\n\tconst { toggleModal } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [foundPeople, setFoundPeople] = useState([])\r\n\tfunction removeFriendFromList(data) {\r\n\t\tconst filtered = chosenFriends.filter(peopleId => peopleId !== data.uid)\r\n\t\treturn setChosenFriends(filtered)\r\n\t}\r\n\r\n\tfunction addFriend(data) {\r\n\t\tif (!chosenFriends.some(personId => personId === data.uid)) {\r\n\t\t\treturn setChosenFriends(prev => [...prev, data.uid])\r\n\t\t}\r\n\r\n\t\tremoveFriendFromList(data)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (shared) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleModal()\r\n\t\t\t\tsetShared(false)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}, [shared])\r\n\r\n\r\n\treturn (\r\n\t\t<div className='FriendsListToShareWith'>\r\n\t\t\t{shared ?\r\n\t\t\t\t<div className=\"successMessageSent\">\r\n\t\t\t\t\t<IoIosCheckmarkCircleOutline />\r\n\t\t\t\t\tSong has sent!\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundPeople} defaultSearchMode={\"authors\"} inputText = {\"Search for friends\"}/>\r\n\t\t\t{/* <h2>Share with friends</h2> */}\r\n\t\t\t<div>\r\n\t\t\t\t{foundPeople.length > 0 ?\r\n\t\t\t\t\tfoundPeople.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} showChoose chosenArray={chosenFriends} onClick={() => addFriend(data)} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}):\r\n\t\t\t\t\tyourFriends.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} showChoose chosenArray={chosenFriends} onClick={() => addFriend(data)} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Your message\" style={{ margin: 0 }} onChange={e => setMessageText(e.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"shareBtn\"\r\n\t\t\t\t\tstyle={!chosenFriends.length ?\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (chosenFriends.length > 0) {\r\n\t\t\t\t\t\t\tshareWithFriends(chosenFriends, currentUser, (whatToShare === 'author' ? item.uid : item.id), whatToShare, messageText);\r\n\t\t\t\t\t\t\tsetShared(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\tShare with {chosenFriends.length} {chosenFriends.length > 1 ? \"friends\" : \"friend\"}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\";\r\nimport { createChat } from \"./createChat\";\r\nimport { findChatURL } from \"./findChatURL\";\r\nimport getUID from \"./getUID\";\r\n\r\nexport default function shareWithFriends(shareList, currentUser, itemId, whatToShare, messageText = \"\") {\r\n\r\n\tshareList.map(async userId=>{\r\n\t\tconst chatId = findChatURL(userId, currentUser, ()=>null, ()=>null)\r\n\t\tchatId.then(async (res)=>{\r\n\t\t\tlet chatData = (await firestore.collection('chats').doc(res).get()).data()\r\n\t\t\tif(chatData !== undefined){\r\n\t\t\t\tswitch(whatToShare){\r\n\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\tattachedSongs: [itemId],\r\n\t\t\t\t\t\t\tattachedAlbums: [],\r\n\t\t\t\t\t\t\tattachedAuthors: [],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\tattachedSongs: [],\r\n\t\t\t\t\t\t\tattachedAlbums: [itemId],\r\n\t\t\t\t\t\t\tattachedAuthors: [],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\tattachedSongs: [],\r\n\t\t\t\t\t\t\tattachedAlbums: [],\r\n\t\t\t\t\t\t\tattachedAuthors: [itemId],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\tattachedSongs: [itemId],\r\n\t\t\t\t\t\t\tattachedAlbums: [],\r\n\t\t\t\t\t\t\tattachedAuthors: [],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tfirestore.collection('chats').doc(res).update({\r\n\t\t\t\t\tmessages: chatData.messages\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconst chatUID = getUID()\r\n\t\t\t\tcreateChat([currentUser.uid, userId], chatUID).then(async ()=>{\r\n\t\t\t\t\tchatData = (await firestore.collection('chats').doc(chatUID).get()).data()\r\n\t\t\t\t\tswitch(whatToShare){\r\n\t\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\t\tattachedSongs: [itemId],\r\n\t\t\t\t\t\t\t\tattachedAlbums: [],\r\n\t\t\t\t\t\t\t\tattachedAuthors: [],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\t\tattachedSongs: [],\r\n\t\t\t\t\t\t\t\tattachedAlbums: [itemId],\r\n\t\t\t\t\t\t\t\tattachedAuthors: [],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\t\tattachedSongs: [],\r\n\t\t\t\t\t\t\t\tattachedAlbums: [],\r\n\t\t\t\t\t\t\t\tattachedAuthors: [itemId],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tchatData.messages.push({\r\n\t\t\t\t\t\t\t\tid: chatData.messages.length,\r\n\t\t\t\t\t\t\t\tsender: currentUser.uid,\r\n\t\t\t\t\t\t\t\tmessage: messageText,\r\n\t\t\t\t\t\t\t\tsentTime: new Date().toString(),\r\n\t\t\t\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\t\t\t\tattachedSongs: [itemId],\r\n\t\t\t\t\t\t\t\tattachedAlbums: [],\r\n\t\t\t\t\t\t\t\tattachedAuthors: [],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirestore.collection('chats').doc(chatUID).update({\r\n\t\t\t\t\t\tmessages: chatData.messages\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\r\n\t\t\t\r\n\t\t})\r\n\t})\r\n\r\n\t\r\n}","import React from 'react'\r\n\r\nexport const RadioBtn = ({currentActive, id, label, onClick}) => {\r\n\treturn (\r\n\t\t<div className = \"RadioBtn\" id = {id} onClick = {onClick}>\r\n\t\t\t<span className = \"radioLabel\" style = {currentActive === id?{color:'var(--blue)', opacity:1, fontWeight:'bold'}:{}}>\r\n\t\t\t\t{label}\r\n\t\t\t</span>\r\n\t\t\t<span className = \"radioCircle\" style = {currentActive === id?{background:'var(--blue)'}:{}}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ColorCircles = ({play}) => {\r\n\treturn (\r\n\t\t<div className = 'ColorCircles' style = {!play?{opacity:0, transform:\"scale(.95)\"}:{}}>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export const friends = {\r\n\t\"30\":[\r\n\t\t31, 45, 46, 47, 48, 49, 50, 51\r\n\t]\r\n}","export const chat = {\r\n\t\"1234561231\":{\r\n\t\tid:\"1234561231\",\r\n\t\tparticipants:[30, 31],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[23, 12, 22],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[3],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'1',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0, 1, 5],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:1,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[4],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:3,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:0,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:4,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:0,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:5,\r\n\t\t\t\tsender:31,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:4,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:6,\r\n\t\t\t\tsender:31,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:1,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:7,\r\n\t\t\t\tsender:31,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:2,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[2],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t]\r\n\t},\r\n\t\"5147654342\":{\r\n\t\tid:\"5147654342\",\r\n\t\tparticipants:[30, 34],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'1',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[4],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:34,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:1,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[5],\r\n\t\t\t},\r\n\t\t]\r\n\t},\r\n\t\"1456526216\":{\r\n\t\tid:\"1456526216\",\r\n\t\tparticipants:[30, 45],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:45,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:45,\r\n\t\t\t\tmessage:'1',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:45,\r\n\t\t\t\tmessage:'2',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[4],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:3,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'2',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[3],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t]\r\n\t},\r\n\t\"1431626216\":{\r\n\t\tid:\"1431626216\",\r\n\t\tparticipants:[30, 48],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:48,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'4',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[20],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\r\n\t\t]\r\n\t},\r\n\t\"1435324567\":{\r\n\t\tid:\"1435324567\",\r\n\t\tparticipants:[30, 49],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:48,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'4',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[20],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\r\n\t\t]\r\n\t},\r\n\t\"1435324517\":{\r\n\t\tid:\"1435324517\",\r\n\t\tparticipants:[30, 50],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t]\r\n\t},\r\n\r\n}","export default function createRandomId(len = 10) {\r\n\tlet str = \"\"\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tlet randNum = Math.floor(Math.random() * 10)\r\n\t\tstr += randNum\r\n\t}\r\n\treturn str\r\n}","import { chat } from \"../data/chat\"\r\nimport createRandomId from \"./createRandomId\"\r\n\r\nfunction createChat(id, songId, albumId = null, authorId = null) {\r\n\tconst randId = createRandomId()\r\n\tchat[randId] =\r\n\t{\r\n\t\tid: randId,\r\n\t\tparticipants: [30, parseInt(id)],\r\n\t\timage: '',\r\n\t\tmessages: [\r\n\t\t\t{\r\n\t\t\t\tid: 0,\r\n\t\t\t\tsender: 30,\r\n\t\t\t\tmessage: '',\r\n\t\t\t\tsentTime: new Date(),\r\n\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\tattachedSongs: [songId],\r\n\t\t\t\tattachedAlbums: albumId !== null? [albumId]:[],\r\n\t\t\t\tattachedAuthors: authorId !== null? [authorId]:[],\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n\r\nexport default function shareWithOneFriend(e, songId, albumId = null, authorId = null) {\r\n\tconsole.log(\"id:\",e.target.id, \"songId:\", songId)\r\n\tlet isThereChat = false\r\n\tObject.keys(chat).forEach((chatId) => {\r\n\t\tif (chat[chatId].participants.includes(parseInt(e.target.id)) && chat[chatId].participants.includes(30)) {\r\n\t\t\tisThereChat = true\r\n\t\t\tchat[chatId].messages.push(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: chat[chatId].messages.length,\r\n\t\t\t\t\tsender: 30,\r\n\t\t\t\t\tmessage: '',\r\n\t\t\t\t\tsentTime: new Date(),\r\n\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\tattachedSongs: [songId],\r\n\t\t\t\t\tattachedAlbums: albumId !== null? [albumId]:[],\r\n\t\t\t\t\tattachedAuthors: authorId !== null? [authorId]:[],\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t})\r\n\r\n\tif (!isThereChat) createChat(e.target.id, songId, albumId, authorId)\r\n}","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from '../FullScreenPlayer/colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { FiCheck, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { songs } from '../../data/songs'\r\nimport { MdPlaylistAdd } from 'react-icons/md'\r\nimport { friends } from '../../data/friends'\r\nimport { authors } from '../../data/authors'\r\nimport shareWithOneFriend from '../../functions/shareWithOneFriend'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nexport const SongItemChoice = ({ song, listOfSongs, setListOfSongs, showListens = false, listens = 0, isNewSong = false }) => {\r\n\tconst { setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setYourSongs, yourPlaylists, currentSongQueue, setCurrentSongInQueue, fetchYourSongs } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst {currentUser} = useAuth()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\tfunction addSongToList() {\r\n\t\tif(!listOfSongs.includes(song.id)){\r\n\t\t\treturn setListOfSongs(prev=>[...prev, song.id])\r\n\t\t}\r\n\r\n\t\tlet filteredList = listOfSongs.filter(el=>el !== song.id)\r\n\t\tsetListOfSongs(filteredList)\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToLibrary(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (currentUser.addedSongs.includes(song.id)) {\r\n\t\t\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\taddedSongs:newList\r\n\t\t\t})\r\n\t\t\tfetchYourSongs()\r\n\t\t\tsetOpenMoreWindow(false)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet newList = currentUser.addedSongs\r\n\t\tnewList.push(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedSongs:newList\r\n\t\t})\r\n\t\tfetchYourSongs()\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToPlaylist(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\t\tyourPlaylists[e.target.id].songs = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tyourPlaylists[e.target.id].songs.push(song.id)\r\n\t}\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\tNew\r\n\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'SongItem ' + (listOfSongs.includes(song.id) ? \"inList\" : \"\")} onClick={addSongToList} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t{song.name}\r\n\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t<button onClick={addOrDeleteSongToLibrary}>\r\n\t\t\t\t\t{!currentUser.addedSongs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{openMoreWindow ?\r\n\t\t\t\t(\r\n\t\t\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToLibrary}>{currentUser.addedSongs.includes(song.id) ? <span><FiTrash2 />Delete</span> : <span><FiPlusCircle />Add</span>}</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\t\t\t\t\tif (!playlist.isAlbum && playlist.authors.includes(30))\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToPlaylist} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{!yourPlaylists[key].songs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<MdPlaylistAdd />Add to playlist\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t{friends['30'].map((friendId, key) => {\r\n\t\t\t\t\t\t\t\t\tconst friend = authors[friendId]\r\n\t\t\t\t\t\t\t\t\tif (key < 3)\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={(e)=>shareWithOneFriend(e, song.id)} key={key} id={friendId}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItemImgWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={friend.image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{friend.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiInfo />Info</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) :\r\n\t\t\t\tnull\r\n\t\t\t}\r\n\r\n\t\t</div >\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const addSongToLibrary = (e, song, currentUser) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = []\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tif (!currentUser.addedAuthors.includes(authorId)) {\r\n\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t}\r\n\t})\r\n\tlet newList = currentUser.addedSongs\r\n\tnewList.push(song.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: [...finalAuthorsUIDS, ...currentUser.addedAuthors]\r\n\t})\r\n\r\n\tfinalAuthorsUIDS.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers++\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n}","export default function filterArrayWithArray(whatToFilter, withWhatToFilter){\r\n\treturn whatToFilter.filter(\r\n\t\tfunction (e) {\r\n\t\t\treturn this.indexOf(e) < 0;\r\n\t\t},\r\n\t\twithWhatToFilter\r\n\t);\r\n}","import { firestore } from \"../firebase\"\r\nimport filterArrayWithArray from \"./filterArrayWithArray\"\r\n\r\nexport const deleteSongFromLibrary = (e, song, currentUser, yourSongs) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = [] // массив авторов, песни которых еще остались после удаления выбранной песни\r\n\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tyourSongs.forEach(songObj => {\r\n\t\t\tif (newList.includes(songObj.id) && songObj.authors.find(a => a.uid === authorId)) {\r\n\t\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst filtered = filterArrayWithArray(songAuthorsUIDS, finalAuthorsUIDS) // массив людей, которых нужно убрать из библиотеки\r\n\tconst finalFilteredAuthors = filterArrayWithArray(currentUser.addedAuthors, filtered) // массив людей, оставшихся в библиотеке\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: finalFilteredAuthors\r\n\t})\r\n\r\n\tfiltered.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers--\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n\t\r\n}","import { useAuth } from \"../../functionality/AuthContext\"\r\nimport { addSongToLibrary } from \"../../functions/addSongToLibrary\"\r\nimport { deleteSongFromLibrary } from \"../../functions/deleteSongFromLibrary\"\r\nimport {FiPlusCircle, FiTrash2} from 'react-icons/fi'\r\nimport { useSong } from \"../../functionality/SongPlay/SongContext\"\r\nexport default function AddOrDeleteButtonFull({song}) {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {yourSongs} = useSong()\r\n\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\treturn <span onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t<FiPlusCircle />\r\n\t\t\tAdd\r\n\t\t</span>\r\n\t}\r\n\telse {\r\n\t\treturn <span onClick={(e) => deleteSongFromLibrary(e, song, currentUser, yourSongs)}>\r\n\t\t\t<FiTrash2 />\r\n\t\t\tDelete\r\n\t\t</span>\r\n\t}\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const PersonTinyVerticalItem = ({person}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t<div className = \"PersonTinyVerticalItem\">\r\n\t\t\t\t<div className=\"personTinyImage\">\r\n\t\t\t\t\t<img src={person.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"personTinyName\">\r\n\t\t\t\t\t{person.displayName}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\nimport { firestore } from '../../firebase';\r\nimport { PersonTinyVerticalItem } from './PersonTinyVerticalItem'\r\n\r\nexport const PersonTinyList = ({data, title}) => {\r\n\tconst [listOfPeople, setListOfPeople] = useState([])\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(listOfPeople.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfPeople])\r\n\r\n\tfunction fetchFriends(){\r\n\t\tsetListOfPeople([])\r\n\t\tdata.friends.forEach(async personObj => {\r\n\t\t\tif(personObj.status === 'added'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(personObj.uid).get()).data()\r\n\t\t\t\tsetListOfPeople(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetListOfPeople([])\r\n\t\tfetchFriends()\r\n\t}, [data.uid])\r\n\treturn listOfPeople.length > 0? (\r\n\t\t<div className = 'PersonTinyList'>\r\n\t\t\t{title && <h2>{title}</h2>}\r\n\t\t\t<div style = {{position:'relative'}}>\t\r\n\t\t\t\t<div className=\"personTinyListWrapper\" ref = {wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t\t{listOfPeople.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { PersonTinyList } from '../AuthorPage/PersonTinyList'\r\nimport {CgMusicNote} from 'react-icons/cg'\r\nimport {PersonTinyVerticalItem} from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nexport const SongInfo = ({song}) => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tconst {displayAuthors} = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisSong] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisSong(){\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisSong([])\r\n\t\tconst people = await firestore.collection('users').where('addedSongs', 'array-contains', songData.id).get()\r\n\t\tpeople.forEach(person=>{\r\n\t\t\tif(currentUser.friends.find(friend=>friend.uid === person.data().uid)) setFriendsThatHaveThisSong(prev=>[...prev, person.data()])\r\n\t\t\tconsole.log(person.data())\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(song !== undefined) setSongData(song)\r\n\t}, [song && song.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisSong()\r\n\t}, [songData.id])\r\n\r\n\treturn (\r\n\t\t<div className = 'SongInfo'>\r\n\t\t\t<div className=\"songImage\">\r\n\t\t\t\t<img src={songData.cover} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className = \"songInfoContent\">\r\n\t\t\t\t<h3 style = {{color:songData.imageColors[0]}}>{songData.name}</h3>\r\n\t\t\t\t<span>{displayAuthors(songData.authors, ', ')}</span>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center', opacity:'0.6', fontSize:'.9em', position:\"relative\"}} className = \"listensAndDate\">\r\n\t\t\t\t\t<p className = \"infoListens\" style = {{marginRight:'15px', position:'relative'}}>{songData.listens} <CgMusicNote /></p>\r\n\t\t\t\t\t<span>{displayDate(songData.releaseDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style = {{margin:'10px 0'}}>{friendsThatHaveThisSong.length > 0? 'Friends that listen that song': 'None of your friends listens this'}</h4>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t{friendsThatHaveThisSong.length <= 0?<button className = \"shareBtn\" style = {{minHeight:'35px', background:songData.imageColors[0]}} onClick = {()=>{setContent(<FriendsListToShareWith item = {songData} whatToShare = {'song'}/>)}}>Share</button>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function shortWord(word, len = 50){\r\n\treturn word.substr(0, len) + (word.length > len?\"...\":\"\")\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport const addOrDeleteSongToPlaylist = (e, playlistId, song, yourPlaylists) => {\r\n\r\n\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\tconst newSongsList = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\tyourPlaylists[e.target.id].songs = newSongsList\r\n\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\tsongs: newSongsList\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n\tconst newSongsList = yourPlaylists[e.target.id].songs\r\n\tnewSongsList.unshift(song.id)\r\n\tyourPlaylists[e.target.id].songs = newSongsList\r\n\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\tsongs: newSongsList\r\n\t})\r\n}","import React, { useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { addOrDeleteSongToPlaylist } from '../../functions/addOrDeleteSongToPlaylist'\r\nimport {FiPlusCircle, FiCheck} from 'react-icons/fi'\r\nexport const AddToPlaylists = ({song}) => {\r\n\tconst {yourPlaylists, currentSongData} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setsongData] = useState(song || currentSongData)\r\n\treturn (\r\n\t\t<div className = \"AddToPlaylists\">\r\n\t\t\t<div style = {{display:'flex', flexDirection:'column'}}>\r\n\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={(e) => addOrDeleteSongToPlaylist(e, playlist.id, songData, yourPlaylists)} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t{!playlist.songs.includes(songData.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from './colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { FiCheck, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { MdKeyboardArrowRight, MdPlaylistAdd } from 'react-icons/md'\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { IoIosCheckmarkCircle, IoIosRadioButtonOff } from 'react-icons/io'\r\nimport { deleteSongFromLibrary } from '../../functions/deleteSongFromLibrary'\r\nimport { addSongToLibrary } from '../../functions/addSongToLibrary'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {AddToPlaylists} from './AddToPlaylists'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nexport const SongItem = ({ song, localIndex, showListens = false, isNewSong = false, listOfChosenSongs, setListOfSongs }) => {\r\n\tconst { yourSongs, setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setCurrentSongInQueue } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst { currentUser } = useAuth()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction chooseSongItem() {\r\n\t\tsetCurrentSong(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: song.id\r\n\t\t})\r\n\t\tsetCurrentSongInQueue(localIndex)\r\n\t\tif (song.id === currentSong && play) {\r\n\t\t\tsongRef.current.pause();\r\n\t\t\tsetPlay(false)\r\n\t\t\t// clearTimeout(listenCountTimeOut)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsongRef.current.play();\r\n\t\tsetPlay(true)\r\n\t}\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(song.listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\tfunction addOrDeleteButton() {\r\n\t\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\t\treturn <button onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <button onClick={(e) => deleteSongFromLibrary(e, song, currentUser, yourSongs)}>\r\n\t\t\t\t<FiCheck />\r\n\t\t\t</button>\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenSongs} setListOfChosenItems = {setListOfSongs} itemId = {song.id}/>\r\n\t\t\t<div className={'SongItem ' + (song.id === currentSong && play ? \"playingNow\" : \"\")} onClick={chooseSongItem} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t{shortWord(song.name, window.innerWidth > 1000?30:17) }\r\n\t\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t\t{addOrDeleteButton()}\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song = {song}/></div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t\t<AddToPlaylists song = {song}/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div >\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const MoreBtn = ({func, lenOfList, maxLen = 5, boolVal}) => {\r\n\treturn (\r\n\t\t<div onClick = {lenOfList > maxLen?func:null} className = \"MoreBtn\" style = {lenOfList <= maxLen?{display:'none'}:{}}>\r\n\t\t\t<button style = {boolVal?{background:'var(--pink)', color:'#ff8db2'}:{}}>\r\n\t\t\t\t{boolVal?\"Close\":\"More\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { MoreBtn } from './MoreBtn'\r\n\r\nexport const TitleWithMoreBtn = ({title, func, boolVal, lenOfList, maxLen = 5, marginBottom = 0}) => {\r\n\treturn lenOfList !== 0?(\r\n\t\t<div className=\"topTitle\">\r\n\t\t\t<h2 style = {{marginBottom:marginBottom}}>{title}</h2>\r\n\t\t\t<MoreBtn func={func} boolVal={boolVal} lenOfList={lenOfList} maxLen = {maxLen}/>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SearchBar } from './SearchBar'\r\nimport { TitleWithMoreBtn } from './TitleWithMoreBtn'\r\n\r\nexport const SongList = ({ listOfSongs, source, title = \"\", showListens = false, isNewSong = false, showCount = false, listOfChosenSongs, setListOfSongs, showSearch = false }) => {\r\n\tconst { setCurrentSongQueue, setCurrentSongPlaylistSource } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [showMoreSongs, setShowMoreSongs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displaySongs, setDisplaySongs] = useState(listOfSongs)\r\n\tuseEffect(() => {\r\n\t\tsetDisplaySongs(listOfSongs)\r\n\t}, [listOfSongs])\r\n\t\r\n\tfunction setQueueInSongList() {\r\n\t\tif(source !== 'no'){\r\n\t\t\tsetCurrentSongQueue(listOfSongs)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tconst listSongsIds = listOfSongs.map(song => song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"SongList\" onClick={setQueueInSongList}>\r\n\t\t\t{title.length !== 0 ? <TitleWithMoreBtn title={title} func={() => setShowMoreSongs(!showMoreSongs)} boolVal={showMoreSongs} lenOfList={listOfSongs.length} /> : null}\r\n\t\t\t{showSearch?<SearchBar value = {searchValue} setValue = {setSearchValue} allFoundSongs = {displaySongs} setAllFoundSongs = {setDisplaySongs} defaultSearchMode = {\"songs\"} defaultSongsListValue = {listOfSongs} inputText = {\"Search for songs\"}/>:null}\r\n\t\t\t{displaySongs.map((song, index) => {\r\n\t\t\t\tif (title.length !== 0) {\r\n\t\t\t\t\tif (showMoreSongs) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (index < 5) {\r\n\t\t\t\t\t\t\treturn <span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const CustomizeAlbum = ({ playlist }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(playlist.name)\r\n\tconst [playlistCover, setPlaylistCover] = useState(playlist.image)\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(playlist.authors)\r\n\tconst [releaseDate, setReleaseDate] = useState(playlist.creationDate)\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState(playlist.songs)\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(playlist.isAlbum?1:0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(playlist.isPrivate ? 1 : 0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(playlist.imageColors)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (songsSearch.length === 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tconsole.log(songId)\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetLoadingSongs(false)\r\n\t\t\t\tconsole.log(songData)\r\n\t\t\t\tsetAllSongs(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t}\r\n\t}, [songsSearch])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend => { if (friend.status === 'added') return friend.uid })\r\n\t\tconst response = currentUser.isAdmin ?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue) :\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (chosenAuthors.length > playlist.authors.length) {\r\n\t\t\tconst newAuthors = chosenAuthors.filter(author => { return !playlist.authors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(playlist.id)\r\n\t\t\t\tconsole.log(authorPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(chosenAuthors.length < playlist.authors.length){\r\n\t\t\tconst newAuthors = playlist.authors.filter(author => { return !chosenAuthors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tconst filteredPlaylists = authorPlaylists.filter(playlistId => playlistId !== playlist.id)\r\n\t\t\t\tconsole.log(filteredPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: filteredPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfirestore.collection('playlists').doc(playlist.id).update(\r\n\t\t\t{\r\n\t\t\t\tid: playlist.id,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: playlist.listens,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:playlist.subscribers,\r\n\t\t\t\tisAlbum:playlistStatus === 1,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate == true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\t// console.log([5, 4, 2, 1])\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={() => timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Search for songs\" value={songsSearch} onChange={(e) => setSongsSearch(e.target.value)} onKeyDown={findSongs} onKeyUp={() => timerUpFunc(findSongs)} onKeyDown={() => { return clearTimeout(typingTimeout) }} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<SongList listOfSongs={allSongs} source={'no'} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// allSongs.map((data, index) => {\r\n\t\t\t\t\t\t\t// return (\r\n\t\t\t\t\t\t\t// \t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Update playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const addAuthorToLibrary = async (authorData , currentUser) => {\r\n\tconst addedAuthors = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedAuthors\r\n\taddedAuthors.push(authorData.uid)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedAuthors: addedAuthors\r\n\t})\r\n\tlet subscribers = authorData.subscribers\r\n\tsubscribers++\r\n\tfirestore.collection('users').doc(authorData.uid).update({\r\n\t\tsubscribers: subscribers\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport default function addFriend(friendData, currentUser){\r\n\tconst updatedDataForFriend = friendData.friends\r\n\tconst updatedDataForCurrentUser = currentUser.friends\r\n\tupdatedDataForFriend.push({status:'requested', uid:currentUser.uid})\r\n\tupdatedDataForCurrentUser.push({status:'awaiting', uid:friendData.uid})\r\n\r\n\tfirestore.collection('users').doc(friendData.uid).update({\r\n\t\tfriends:updatedDataForFriend\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends:updatedDataForCurrentUser\r\n\t})\r\n\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport displayDate from '../../functions/displayDate'\r\n\r\nexport const LastSeen = ({userUID}) => {\r\n\tconst [lastSeen, setLastSeen] = useState(\"\")\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t\tif(doc.data().online === undefined) setLastSeen(\"offline\")\r\n\t\t\t\telse if(!isOnline) setLastSeen(\"last seen \" + displayDate(doc.data().online, 3))\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<span>Online</span>:<span>{lastSeen}</span>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiEdit2, FiFlag, FiHeadphones, FiInfo, FiMoreVertical, FiPlusCircle, FiSettings, FiShare, FiTrash, FiUserCheck, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { SmallImages } from './SmallImages'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { IoMdExit } from 'react-icons/io'\r\nimport { firestore } from '../../firebase'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { CgCheckO, CgLock } from 'react-icons/cg'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { ChatWithFriendButton } from './ChatWithFriendButton'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai'\r\nimport { BiLoaderAlt } from 'react-icons/bi'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { CustomizeAlbum } from '../AlbumPage/CustomizeAlbum'\r\nimport { addAuthorToLibrary } from '../../functions/addAuthorToLibrary'\r\nimport addFriend from '../../functions/addFriend'\r\nimport { LastSongListened } from './LastSongListened'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nexport const Header = ({ data, headerColors }) => {\r\n\tconst { displayAuthors, setYourPlaylists } = useSong()\r\n\tconst [albumAuthors, setAlbumAuthors] = useState([])\r\n\tconst [authorsImages, setAuthorsImages] = useState([])\r\n\tconst { currentUser, logout } = useAuth()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst isFriend = currentUser.friends.find(friend=>(friend.uid === data.uid && friend.status === 'added'))\r\n\tconst moreWindowRef = useRef(null)\r\n\tuseOutsideClick(moreWindowRef, setOpenMoreWindow)\r\n\tasync function fetchAuthorsData() {\r\n\t\tif (data.authors !== undefined && !albumAuthors.length) {\r\n\t\t\tconst ids = data.authors.map(author => author.uid)\r\n\t\t\tconst response = firestore.collection(\"users\").where(\"uid\", \"in\", ids)\r\n\t\t\tconst authrorsData = await response.get();\r\n\t\t\tauthrorsData.docs.forEach((a) => {\r\n\t\t\t\tconsole.log(a.data())\r\n\t\t\t\tsetAlbumAuthors(prev => [...prev, a.data()])\r\n\t\t\t\tsetAuthorsImages(prev => [...prev, a.data().photoURL])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [data])\r\n\r\n\tfunction displayCreationDateIfExists() {\r\n\t\treturn data.creationDate !== undefined ?\r\n\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t<span>{displayDate(data.creationDate)}</span>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction isAlbumOrIsAuthor() {\r\n\t\treturn data.authors !== undefined ? data.isAlbum ? <h5>Album</h5> : <h5>Playlist</h5> : data.isAuthor ? <h5>Author</h5> : <h5>User {data.authors === undefined && isFriend?<LastSeen userUID = {data.uid}/>:null}</h5>\r\n\t}\r\n\r\n\tfunction showCreatorsIfExist() {\r\n\t\treturn data.authors !== undefined ?\r\n\t\t\t<div className=\"headerAuthorsImagesAndNames\">\r\n\t\t\t\t<SmallImages imagesList={authorsImages} borderColor={headerColors[2]} />\r\n\t\t\t\t<div className=\"headerAuthors\">{displayAuthors(albumAuthors, \", \")}</div>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction findIfIsVerified() {\r\n\t\treturn data.isVerified ? <ImCheckmark style={{ color: headerColors[0] }} /> : null\r\n\t}\r\n\r\n\tasync function addPlaylistToLibrary() {\r\n\t\tconst addedPlaylists = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedPlaylists\r\n\t\taddedPlaylists.push(data.id)\r\n\t\tsetYourPlaylists(prev => [data.id, ...prev])\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedPlaylists: addedPlaylists\r\n\t\t})\r\n\t}\r\n\r\n\t\r\n\r\n\t\r\n\r\n\tfunction deleteFriend(){\r\n\r\n\t}\r\n\r\n\tfunction whatButtonToRender() {\r\n\t\tif (data.authors) {\r\n\t\t\tif (currentUser.ownPlaylists.includes(data.id)) return <button><FiTrash /></button>\r\n\t\t\telse if (currentUser.addedPlaylists.includes(data.id)) return <button><CgCheckO /></button>\r\n\t\t\telse return <button onClick={addPlaylistToLibrary}><FiPlusCircle /></button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (currentUser.addedAuthors.includes(data.uid)) return <button><CgCheckO /></button>\r\n\t\t\telse if (currentUser.uid === data.uid) return <button onClick = {()=>{toggleModal();setContent(<h2>Settings here</h2>)}}><FiSettings /></button>\r\n\t\t\telse if(!data.isAuthor && currentUser.friends.find(friend=>friend.uid === data.uid && friend.status === 'added')) return <button onClick={deleteFriend}><FiUserCheck /></button>\r\n\t\t\telse if(!data.isAuthor && currentUser.friends.find(friend=>((friend.uid === data.uid) && (friend.status === 'awaiting')))) return <button onClick={addFriend}><BiLoaderAlt style = {{animation:'loading 1s infinite linear'}}/></button>\r\n\t\t\telse if(!data.isAuthor) return <button onClick={()=>addFriend(data, currentUser)}><FiUserPlus /></button>\r\n\t\t\telse return <button onClick={()=>addAuthorToLibrary(data, currentUser)}><FiPlusCircle /></button>\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findIfIsPrivate() {\r\n\t\treturn data.isPrivate ? <CgLock /> : null\r\n\t}\r\n\r\n\tfunction editButton(){\r\n\t\treturn data.authors && data.authors.find(person => person.uid === currentUser.uid)?<button onClick = {()=>{toggleModal(); setContent(<CustomizeAlbum playlist = {data}/>)}} className = \"customizeAlbumBtn\"><FiEdit2/></button>:null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Header\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[2]}, ${headerColors[0]})` } : { background: 'var(--yellowAndPinkGrad)' }}>\r\n\t\t\t<div className=\"headerBtns\" style={{ background: headerColors[2] }}>\r\n\t\t\t\t<BackBtn />\r\n\t\t\t\t<div className=\"headerBackBtn\">\r\n\t\t\t\t\t{whatButtonToRender()}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"headerMoreBtn\" ref = {moreWindowRef}>\r\n\t\t\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t\t\t\t\t\t{/* <div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToLibrary}>{currentUser.addedSongs.includes(song.id) ? <span><FiTrash2 />Delete</span> : <span><FiPlusCircle />Add</span>}</div> */}\r\n\t\t\t\t\t\t\t\t{/* <div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToPlaylist} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!yourPlaylists[key].songs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<FriendsListToShareWith item = {data} whatToShare = {data.authors !== undefined ?'playlist':'author'}/>)}}>\r\n\t\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal();setContent(<h2>test</h2>)}}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.uid === data.uid ?\r\n\t\t\t\t\t\t<button onClick={logout} >\r\n\t\t\t\t\t\t\t<IoMdExit />\r\n\t\t\t\t\t\t</button> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorsImage\" style={data.authors === undefined ? { animation: \"floatingBorderRadius 10s infinite ease-in-out\" } : {}}>\r\n\t\t\t\t<img src={data.photoURL || data.image} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorInfo\">\r\n\t\t\t\t<div className=\"headerAuthorsName\">\r\n\t\t\t\t\t{isAlbumOrIsAuthor()}\r\n\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', margin: \"2px 0 10px 0\" }}>\r\n\t\t\t\t\t\t<h1>{data.displayName || data.name}</h1>\r\n\t\t\t\t\t\t{findIfIsVerified()}\r\n\t\t\t\t\t\t{findIfIsPrivate()}\r\n\t\t\t\t\t\t{editButton()}\r\n\t\t\t\t\t\t{/* <LastSongListened data = {data}/> */}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showCreatorsIfExist()}\r\n\t\t\t\t<div className=\"headerListenersAndSubs\">\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\" title={(data.listens ?? data.numberOfListenersPerMonth) + ' listeners per month'}>\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.listens ?? data.numberOfListenersPerMonth)}</span>\r\n\t\t\t\t\t\t<FiHeadphones />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\" title={data.subscribers + ' subscribers'}>\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.subscribers)}</span>\r\n\t\t\t\t\t\t<FiUserPlus />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{displayCreationDateIfExists()}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isFriend?<ChatWithFriendButton data = {data} color = {headerColors[3]}/>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport {Header} from '../components/AuthorPage/Header'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { SongList } from '../components/Basic/SongList'\r\nexport const AlbumPage = () => {\r\n\tconst match = useRouteMatch('/albums/:albumId')\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { albumId } = match.params\r\n\tconst [albumData, setAlbumData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAlbumsData() {\r\n\t\tconst response = firestore.collection(\"playlists\").doc(albumId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAlbumData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t} else {\r\n\t\t\t\t console.log(\"No such document!\");\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif(albumData.length !== 0){\r\n\t\t\talbumData.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAlbumsData()\r\n\t}, [albumId])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSongsInAlbum()\r\n\t}, [albumData])\r\n\r\n\treturn (\r\n\t\t<div className = \"AlbumPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t{\r\n\t\t\t\tloading?<LoadingCircle top = {'50%'}/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data = {albumData} headerColors = {headerColors} setHeaderColors = {setHeaderColors}/>\r\n\t\t\t\t\t<SongList listOfSongs = {playlistSongs} source = {{source:`/albums/${albumData.id}`,name:albumData.name, image:albumData.image, songsList:playlistSongs}} showSearch defaultSearchMode = {\"songs\"}/>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nexport const AddPlaylist = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(\"\")\r\n\tconst [playlistCover, setPlaylistCover] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin?[{uid:currentUser.uid, photoURL:currentUser.photoURL, displayName:currentUser.displayName}]:[])\r\n\tconst [releaseDate, setReleaseDate] = useState(currentUser.isAdmin?\"\":new Date().toString())\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState([])\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\t\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend=>{if(friend.status === 'added') return friend.uid})\r\n\t\tconst response = currentUser.isAdmin?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue):\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tfirestore.collection('playlists').doc(uid).set(\r\n\t\t\t{\r\n\t\t\t\tid: uid,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:0,\r\n\t\t\t\tisAlbum:playlistStatus,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\t\tchosenAuthors.forEach(async author=>{\r\n\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\tconst authorData = authorRef.data()\r\n\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\tauthorPlaylists.push(uid)\r\n\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\townPlaylists:authorPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<form onSubmit={addPlaylistToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={()=>timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid?null:removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Search for songs\" value={songsSearch} onChange={(e) => setSongsSearch(e.target.value)} onKeyDown={findSongs} onKeyUp={() => timerUpFunc(findSongs)} onKeyDown={() => { return clearTimeout(typingTimeout) }} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\tallSongs.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor?\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t</label>:null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../../firebase'\r\nexport const DownloadPhotoButton = ({setErrorMessage, setImageLocalPath, downloadedPhoto, setDownloadedPhoto, place}) => {\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/' || place === 'chatCovers/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<label className=\"downloadFile\">\r\n\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\tDownload song cover\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"photoLoadLine\" style={downloadedPhoto !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, place, setDownloadedPhoto)} />\r\n\t\t</label>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ErrorPlate = ({errorMessage}) => {\r\n\treturn errorMessage && (\r\n\t\t<div className=\"Alert\">\r\n\t\t\t{errorMessage}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport getUID from '../../functions/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../Basic/ErrorPlate'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\n\r\nexport const AddSong = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(\"\")\r\n\tconst [songCover, setSongCover] = useState(\"\")\r\n\tconst [songSrc, setSongSrc] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(\"\")\r\n\tconst [lyrics, setLyrics] = useState([])\r\n\tconst [imageLocalPath, setImageLocalPath] = useState(\"\")\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [lyricsObject, setLyricsObject] = useState([])\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst response = firestore.collection(\"users\")\r\n\t\t\t.where(\"displayName\", \"==\", authorsInputValue)\r\n\t\t// .where('isAuthor', '==', true)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\r\n\tfunction transformLyricsToArrayOfObjects(e) {\r\n\t\tconst arrayOfParagraphs = []\r\n\t\tlet startSubstr = 0\r\n\t\tfor (let i = 0; i < lyrics.length; i++) {\r\n\t\t\tif (lyrics[i] === '\\n' || lyrics[i + 1] === undefined) {\r\n\r\n\t\t\t\tarrayOfParagraphs.push({\r\n\t\t\t\t\tstartTime: 'undefined',\r\n\t\t\t\t\ttext: lyrics.substr(startSubstr, i - startSubstr)\r\n\t\t\t\t})\r\n\t\t\t\tstartSubstr = i + 1\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetLyricsObject(arrayOfParagraphs)\r\n\t}\r\n\r\n\tasync function addSongToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tlet uid = getUID()\r\n\t\tconsole.log(lyricsObject)\r\n\t\tsetErrorMessage(\"\")\r\n\t\tif (songName.length === 0) setErrorMessage(\"Song has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Song has to have at least 1 author')\r\n\t\telse if (songCover.length === 0) setErrorMessage('You didn\\'t load song cover')\r\n\t\telse if (songSrc.length === 0) setErrorMessage('You didn\\'t load song file')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a song')\r\n\t\telse {\r\n\t\t\tfirestore.collection('songs').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tsongSrc: songSrc,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\tcover: songCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\treleaseDate: releaseDate,\r\n\t\t\t\t\tlyrics: lyricsObject,\r\n\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetSongCover('')\r\n\t\t\t\tsetSongName('')\r\n\t\t\t\tsetSongSrc('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\tauthorSongs.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(imageColors)\r\n\t}, [imageColors])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\t// const tempArr = imageColors; tempArr[i] = e.taget.value;\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={addSongToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter song name\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={() => timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{/* <label>\r\n\t\t\t\t\t<h3>Add to albums and playlists</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} onKeyDown={findAuthors} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t</label> */}\r\n\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\r\n\t\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage = {setErrorMessage} setImageLocalPath = {setImageLocalPath} downloadedPhoto = {songCover} setDownloadedPhoto = {setSongCover} place = {'songsImages/'}/>\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload song file\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={songSrc !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songs/', setSongSrc)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" placeholder={\"Add song lyrics\"} onKeyDown={transformLyricsToArrayOfObjects} onChange={(e) => setLyrics(e.target.value)}></textarea>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add song</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Slider = ({pages, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"Slider\">\r\n\t\t\t{pages.map((pageName, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = {\"sliderItem \" + (index === currentPage?\"current\":\"\")} key = {index} onClick = {()=>setCurrentPage(index)}>\r\n\t\t\t\t\t\t{pageName}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiPlus, FiXCircle } from 'react-icons/fi'\r\nimport { auth, firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport getUID from '../../functions/getUID'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\nimport { AddSong } from '../AddWindow/AddSong'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const AddWindow = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAddSongWindow, setOpenAddSongWindow] = useState(false)\r\n\tconst [currentSliderPage, setCurrentSliderPage] = useState(0)\r\n\tconst sliderPages = [<AddSong/>, <AddPlaylist/>]\r\n\treturn (((currentUser.isAdmin) || (data.isAuthor)) && (data.uid === currentUser.uid)) ?\r\n\t\t(\r\n\t\t\t<div className=\"AddSong\">\r\n\t\t\t\t<button onClick={() => setOpenAddSongWindow(!openAddSongWindow)} style={openAddSongWindow ? { background: 'var(--red)' } : {}} className = \"openAddSongWindowBtn\">\r\n\t\t\t\t\t<FiPlus style={openAddSongWindow ? { transform: 'rotate(45deg)' } : {}} />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"addSongWindow\" style={openAddSongWindow ? { display: 'flex' } : {}}>\r\n\t\t\t\t\t<Slider pages = {['Song', 'Playlists']} currentPage = {currentSliderPage} setCurrentPage = {setCurrentSliderPage}/>\r\n\t\t\t\t\t{sliderPages[currentSliderPage]}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) :\r\n\t\tnull\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiX } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const FriendRequestItem = ({person, addFriend, rejectFriend}) => {\r\n\treturn (\r\n\t\t<div className = 'FriendRequestItem'>\r\n\t\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t\t<div className = \"friendRequestImageAndName\">  \r\n\t\t\t\t\t<div className=\"requestImage\">\r\n\t\t\t\t\t\t<img src={person.photoURL} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3>{person.displayName}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"requestButtons\">\r\n\t\t\t\t<button style = {{color:'var(--green)'}} onClick = {()=>addFriend(person.uid)}>\r\n\t\t\t\t\t<FiCheck/>\r\n\t\t\t\t\t<span>Add</span> \r\n\t\t\t\t</button>\r\n\t\t\t\t<button style = {{color:'var( --lightRed)'}} onClick = {()=>rejectFriend(person.uid)}>\r\n\t\t\t\t\t<FiX/>\r\n\t\t\t\t\t<span>Reject</span> \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { FriendRequestItem } from './FriendRequestItem'\r\n\r\nexport const FriendRequest = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendRequests, setFriendRequests] = useState([])\r\n\tfunction fetchFriendRequests(){\r\n\t\tcurrentUser.friends.forEach(async (friendObj)=>{\r\n\t\t\tif(friendObj.status === 'requested'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tsetFriendRequests(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendRequests()\r\n\t}, [])\r\n\r\n\tfunction addFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"added\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"added\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\r\n\t\tcurrentUser['friends'] = friendsList\r\n\t}\r\n\r\n\tfunction rejectFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"rejected\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"rejected\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{friendRequests.map((person, index)=>{\r\n\t\t\t\treturn <FriendRequestItem person = {person} key = {index} addFriend = {addFriend} rejectFriend = {rejectFriend}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\";\r\n\r\nexport const findAuthorsAlbums = async (authorsData, setAuthorsPlaylists, currentUserUID, setLoading) => {\r\n\tsetAuthorsPlaylists([])\r\n\tconst tempArray = []\r\n\tif (authorsData.ownPlaylists !== undefined && authorsData.ownPlaylists.length !== 0) {\r\n\t\tauthorsData.ownPlaylists.forEach(async (playlistId, index) => {\r\n\t\t\tconst playlistData = (await firestore.collection(\"playlists\").doc(playlistId).get()).data()\r\n\t\t\tif (playlistData && (!playlistData.isPrivate || (authorsData.uid === currentUserUID && playlistData.isPrivate))) tempArray.push(playlistData)\r\n\t\t\tif (index === authorsData.ownPlaylists.length-1) {\r\n\t\t\t\ttempArray.sort((a, b) => new Date(b.creationDate).getTime() - new Date(a.creationDate).getTime())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetAuthorsPlaylists(tempArray)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}","export default function normalizeString(str){\r\n\treturn str.replace(/\\s/g, '-').toLowerCase()\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nexport const PlaylistItem = ({playlist, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst playlistDate = new Date(playlist.creationDate)\r\n\tconst {currentUser} = useAuth()\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tconst source = {source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs}\r\n\t\t\tconst listSongsIds = playlistSongs.map(song => song.id)\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastSongPlayed: playlistSongs[0].id,\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} style = {{textDecoration:'none'}} className = \"playlistWrapper\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAlbums} setListOfChosenItems = {setListOfChosenAlbums} itemId = {playlist.id}/>\r\n\t\t\t<div className=\"playlistItem\">\r\n\t\t\t\t{playlist.image?<img src={playlist.image} alt=\"\" />:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t{/* {!playlist.isAlbum?<h2>{playlist.name}</h2>:null} */}\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<h4 style = {{display:'flex', alignItems:'center', margin:'5px 0'}}>\r\n\t\t\t\t{shortWord(playlist.name, 15)} \r\n\t\t\t\t<span style = {{fontSize:\".6em\", opacity:.6, fontWeight:'500', marginLeft:'7px'}}>\r\n\t\t\t\t\t{playlist.isAlbum?playlist.songs.length === 1?\"single\":'album':'playlist'}\r\n\t\t\t\t</span>\r\n\t\t\t</h4>\r\n\t\t\t<h5 style = {{margin:'5px 0'}}>{playlistDate.getFullYear()}</h5>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { LoadingCircle } from './LoadingCircle'\r\n\r\nexport const AlbumList = ({listOfAlbums, title = \"\", loading = true, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\t// console.log(listOfAlbums)\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 220\r\n\t\tsetScrollLeft(prev - 220)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 220\r\n\t\tsetScrollLeft(prev + 220)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAlbums.length > 0 && !loading){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAlbums])\r\n\treturn listOfAlbums.length > 0?\r\n\t\tloading?<LoadingCircle/>:\r\n\t\t(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAlbums.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key={index} listOfChosenAlbums = {listOfChosenAlbums} setListOfChosenAlbums = {setListOfChosenAlbums}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { findAuthorsAlbums } from '../../functions/findAuthorsAlbums'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\n\r\nexport const Playlists = ({ authorsData }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [authorsPlaylists, setAuthorsPlaylists] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsAlbums(authorsData, setAuthorsPlaylists, currentUser.uid, setLoading)\r\n\t}, [authorsData.ownPlaylists])\r\n\r\n\treturn <AlbumList listOfAlbums = {authorsPlaylists} title = {\"Albums\"} loading = {loading}/>\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nfunction findSimilarArtistsNames(authorsSongsArr, authorsData, setSimilarAuthors) {\r\n\tlet peopleArray = []\r\n\tauthorsSongsArr.forEach((song) => {\r\n\t\tlet newAuthors = song.authors\r\n\t\tif (newAuthors.length !== 0) {\r\n\t\t\tpeopleArray.push(newAuthors)\r\n\t\t}\r\n\t})\r\n\tpeopleArray = peopleArray.flat()\r\n\tconst uniqueAuthorsSet = new Set(peopleArray.map(people=>people.uid).filter(id=>id!==authorsData.uid))\r\n\tconst uniqueAuthorsIdsArray = Array.from(uniqueAuthorsSet)\r\n\tconst uniqueAuthorsDataArray = []\r\n\tfor (let i = 0; i < uniqueAuthorsIdsArray.length; i++) {\r\n\t\tfor (let j = 0; j < peopleArray.length; j++) {\r\n\t\t\tif(uniqueAuthorsIdsArray[i] === peopleArray[j].uid){\r\n\t\t\t\tuniqueAuthorsDataArray.push(peopleArray[j])\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tsetSimilarAuthors(uniqueAuthorsDataArray)\r\n\treturn uniqueAuthorsDataArray\r\n}\r\n\r\nexport default async function findSimilarArtists(authorsData, setSimilarAuthors) {\r\n\tif (authorsData !== undefined && authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\tconst authorsSongsArray = []\r\n\t\tconst response = firestore.collection(\"songs\").where(\"id\", \"in\", authorsData.ownSongs)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tauthorsSongsArray.push(item.data())\r\n\t\t})\r\n\t\treturn findSimilarArtistsNames(authorsSongsArray, authorsData, setSimilarAuthors)\r\n\t}\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\n\r\nexport const AuthorItemBig = ({data, listOfChosenAuthors, setListOfChosenAuthors}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${data.uid}`} className = \"AuthorItemBig\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAuthors} setListOfChosenItems = {setListOfChosenAuthors} itemId = {data.uid}/>\r\n\t\t\t<div >\r\n\t\t\t\t<div className = \"AuthorItemBigImage\">\r\n\t\t\t\t\t<img src={data.photoURL} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3>{data.displayName}</h3>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\n\r\nexport const AuthorsList = ({ listOfAuthors, title = \"\", listOfChosenAuthors, setListOfChosenAuthors }) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAuthors.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAuthors])\r\n\treturn listOfAuthors.length > 0?(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAuthors.map((author) => {\r\n\t\t\t\t\treturn <AuthorItemBig data={author} key={author.uid} listOfChosenAuthors = {listOfChosenAuthors} setListOfChosenAuthors = {setListOfChosenAuthors}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current !== null && wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport findSimilarArtists from '../../functions/findSimilarArtists'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const SimilarArtists = ({ data }) => {\r\n\tconst [similarArtists, setSimilarArtists] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSimilarArtists(data, setSimilarArtists)\r\n\t}, [data])\r\n\treturn (\r\n\t\t<AuthorsList listOfAuthors = {similarArtists} title = {\"Similar Authors\"}/>\r\n\t)\r\n}\r\n","export default function findIfSongIsNew(song){\r\n\tconst songReleaseDate = new Date(song.releaseDate)\r\n\t//1 814 400 000 - 3 weeks\r\n\tif((new Date().getTime() - songReleaseDate.getTime()) < 1814400000) return true\r\n\r\n\treturn false\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport findIfSongIsNew from '../../functions/findIfSongIsNew'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const TopSongs = ({ authorId, authorsData, headerColors }) => {\r\n\tconst [popularSongs, setPopularSongs] = useState([])\r\n\tconst [newSongs, setNewSongs] = useState([])\r\n\r\n\tasync function findAuthorsSongs() {\r\n\t\tsetPopularSongs([])\r\n\t\tconst tempArray = []\r\n\t\tif (authorsData.isAuthor) {\r\n\t\t\tif (authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\t\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\t\ttempArray.push(songData)\r\n\t\t\t\t\tif (findIfSongIsNew(songData) && !newSongs.includes(songData)) setNewSongs(prevSongs => [...prevSongs, songData])\r\n\t\t\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\t\t\ttempArray.sort((a, b) => b.listens - a.listens)\r\n\t\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tauthorsData.addedSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\ttempArray.unshift(songData)\r\n\t\t\t\tif(index === authorsData.addedSongs.length - 1){\r\n\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsSongs()\r\n\t\tsetNewSongs([])\r\n\t}, [authorsData.ownSongs])\r\n\r\n\treturn authorsData.isAuthor ?\r\n\t\t(<div className=\"TopSongs\">\r\n\t\t\t<SongList listOfSongs={newSongs} source={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: newSongs }} isNewSong />\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={\"Popular Songs\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t</div>) :\r\n\t\t(\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName + \"'s Library\", image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={authorsData.displayName + \"'s Library\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { AddWindow } from '../components/AuthorPage/AddWindow'\r\nimport { FriendRequest } from '../components/AuthorPage/FriendRequest'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { PersonTinyList } from '../components/AuthorPage/PersonTinyList'\r\nimport { Playlists } from '../components/AuthorPage/Playlists'\r\nimport { SimilarArtists } from '../components/AuthorPage/SimilarArtists'\r\nimport { TopSongs } from '../components/AuthorPage/TopSongs'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport \"../styles/AuthorPage.css\"\r\nexport const AuthorPage = () => {\r\n\tconst match = useRouteMatch('/authors/:authorId')\r\n\tconst {currentUser} = useAuth()\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { authorId } = match.params\r\n\tconst [authorsData, setAuthorsData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAuthorsData() {\r\n\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAuthorsData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t\t setLoading(false)\r\n\t\t\t} else {\r\n\t\t\t\t console.log(\"No such document!\");\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [authorId])\r\n\treturn (\r\n\t\t<div className=\"AuthorPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{loading?\r\n\t\t\t\t<LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data={authorsData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t{currentUser.uid === authorsData.uid?<FriendRequest/>:null} \r\n\t\t\t\t\t<AddWindow data={authorsData} />\r\n\t\t\t\t\t<TopSongs author={authorId} authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{authorsData.friends && !authorsData.isAuthor?<PersonTinyList data = {authorsData} title = {\"Friends\"}/>:null}\r\n\t\t\t\t\t<Playlists authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauthorsData.isAuthor?\r\n\t\t\t\t\t\t<SimilarArtists data={authorsData} />:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\nimport { Slider } from '../Tools/Slider'\r\nexport const AttachmentList = ({ chatId }) => {\r\n\tconst [attachmentList, setAttachmentList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [sliderCurrentPage, setSliderCurrentPage] = useState(0)\r\n\tconst attachmentContent = [\r\n\t\t<SongList listOfSongs={attachmentList} source={{ source: `/chat/${chatId}`, name: `Chat with ${chatId}`, image: \"\", songsList: attachmentList }} />,\r\n\t\t<AuthorsList listOfAuthors={attachmentList} />,\r\n\t\t<AlbumList listOfAlbums={attachmentList} loading={loading} />\r\n\t]\r\n\tasync function fetchAttachedData(attachedType, firebaseCollection) {\r\n\t\t\r\n\t\tconst chatData = await firestore.collection('chats').doc(chatId).get()\r\n\t\tchatData.data().messages.forEach(message => {\r\n\t\t\tif (message[attachedType].length > 0) {\r\n\t\t\t\tmessage[attachedType].forEach(async itemId => {\r\n\t\t\t\t\tfirestore.collection(firebaseCollection).doc(itemId).get().then(songData=>{\r\n\t\t\t\t\t\tsetAttachmentList(prev => [...prev, songData.data()])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tswitch (sliderCurrentPage) {\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchAttachedData('attachedSongs', 'songs').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tfetchAttachedData('attachedAuthors', 'users').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchAttachedData('attachedAlbums', 'playlists').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [sliderCurrentPage])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachmentList([])\r\n\t}, [chatId])\r\n\r\n\tconsole.log(attachmentList)\r\n\r\n\treturn (\r\n\t\t<div className=\"AttachmentList\">\r\n\t\t\t<Slider pages={[\"Songs\", \"Authors\", \"Playlists\"]} currentPage={sliderCurrentPage} setCurrentPage={(page)=>{setSliderCurrentPage(page); setLoading(true); setAttachmentList([])}} />\r\n\t\t\t{loading ? <LoadingCircle /> :\r\n\t\t\t\tattachmentList.length > 0 ? attachmentContent[sliderCurrentPage] : <h2>Nothing here</h2>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchFirebaseData = (setLoading, collection, list, setState, sortCondition, whereCondFP, whereCondSP, whereCondTP, deps = []) => {\r\n\r\n\tasync function fetchData() {\r\n\t\tconst tempArray = []\r\n\t\tif (list === undefined) {\r\n\t\t\tif (whereCondFP !== undefined) {\r\n\t\t\t\tconsole.log(\"chatInfo\")\r\n\t\t\t\tconst items = await firestore.collection(collection).where(whereCondFP, whereCondSP, whereCondTP).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\tconst items = await firestore.collection(collection).get()\r\n\t\t\t\tconsole.log(\"wallpaper\")\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait list.forEach(async (itemId, index) => {\r\n\t\t\t\tconst itemData = (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t\t\ttempArray.push(itemData)\r\n\t\t\t\tconsole.log(tempArray)\r\n\t\t\t\tif(index === list.length - 1){\r\n\t\t\t\t\tif(sortCondition !== undefined){\r\n\t\t\t\t\t\ttempArray.sort(sortCondition)\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\treturn tempArray\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tsetState([])\r\n\t\tfetchData().then((res)=>{\r\n\t\t\tif(list === undefined) {\r\n\t\t\t\tsetState(res)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}, deps)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { useFetchDocs } from '../../hooks/useFetchDocs'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FiSettings, FiVolume2} from 'react-icons/fi'\r\nimport { BiCrown } from 'react-icons/bi'\r\nimport {ImAttachment} from 'react-icons/im'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const ChatInfo = ({ data }) => {\r\n\tconst [participants, setParticipants] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [chatNameValue, setChatNameValue] = useState(data.chatName)\r\n\tconst {setContent} = useModal()\r\n\tconst [participantsPage, setParticipantsPage] = useState(0)\r\n\tuseFetchDocs(setLoading, data.participants, setParticipants, [data.id])\t\r\n\treturn(\r\n\t\t<div className=\"ChatInfo\">\r\n\t\t\t<div className=\"chatInfoImageAndName\">\r\n\t\t\t\t<div className=\"chatInfoImage\">\r\n\t\t\t\t\t<img src={data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" className = \"standartInput\" value = {chatNameValue} onChange = {(e)=>setChatNameValue(e.target.value)}/>\r\n\t\t\t\t\t<div className = \"chatInfoButtons\">\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiSettings/>\r\n\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\" onClick = {()=>setContent(<AttachmentList chatId = {data.id}/>)}>\r\n\t\t\t\t\t\t\t<ImAttachment/>\r\n\t\t\t\t\t\t\t{shortWord(\"Attachments\", 7)} \r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiVolume2/>\r\n\t\t\t\t\t\t\tSound\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<h4>Chat participants</h4>\r\n\t\t\t<Slider pages = {['All participants', \"Administrators\"]} currentPage = {participantsPage} setCurrentPage = {setParticipantsPage}/>\r\n\t\t\t{!loading?participants.map(person => {\r\n\t\t\t\tif(participantsPage === 1){\r\n\t\t\t\t\tif(data.admins.includes(person.uid)) return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t\t}\r\n\t\t\t\telse return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t}):<LoadingCircle/>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchDocs = (setLoading, listOfItems, setList, deps) => {\r\n\tfunction fetchItem(){\r\n\t\tlistOfItems.forEach(async itemId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(itemId).get()).data()\r\n\t\t\tsetList(prev=>[...prev, personData])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchItem()\r\n\t\treturn ()=>fetchItem()\r\n\t}, deps)\r\n}\r\n","import React from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const WallpaperItem = ({chatId, image, currentWallpaper}) => {\r\n\tfunction changeChatWallpaper(){\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\twallpaper:image\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className = {\"WallpaperItem \" + (image === currentWallpaper?\"active\":\"\")} onClick = {changeChatWallpaper} style = {image === \"undefined\"?{background:'var(--playlistsColor)'}:{}}>\r\n\t\t\t{image !== \"undefined\" ?<img src={image} alt=\"\" />:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { WallpaperItem } from './WallpaperItem'\r\n\r\nexport const Wallpapers = ({chatId, currentWallpaper}) => {\r\n\tconst [wallpaperList, setWallpaperList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading,'chatWallpapers', undefined, setWallpaperList)\r\n\tconsole.log(wallpaperList)\r\n\treturn !loading?(\r\n\t\t<div className='Wallpapers'>\r\n\t\t\t<h2>Wallpapers</h2>\r\n\t\t\t<div className=\"wallpapreWrapper\">\r\n\t\t\t\t<WallpaperItem chatId = {chatId} image={\"undefined\"}/>\r\n\t\t\t\t{wallpaperList.map((wallpaper, index) => {\r\n\t\t\t\t\treturn <WallpaperItem chatId = {chatId} image={wallpaper.image} key={wallpaper.id} currentWallpaper = {currentWallpaper}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):<LoadingCircle/>\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiFolder, FiImage, FiMoreHorizontal, FiSearch, FiTrash, FiInfo } from 'react-icons/fi'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { ChatInfo } from './ChatInfo'\r\nimport { Wallpapers } from './Wallpapers'\r\n\r\nexport const ChatMoreBtn = ({chatId, currentWallpaper, data}) => {\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst chatMoreBtnRef = useRef(null)\r\n\tuseOutsideClick(chatMoreBtnRef, setOpenMoreWindow)\r\n\treturn (\r\n\t\t<div className=\"ChatMoreBtn\" ref = {chatMoreBtnRef}>\r\n\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t<FiMoreHorizontal />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"chatHeaderMenuWindow\" style = {!openMoreWindow?{display:'none'}:{}}>\r\n\t\t\t\t{data.participants.length > 2? <div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<FiInfo/>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</div>:null}\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiSearch/>\r\n\t\t\t\t\t<span>Search messages</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<AttachmentList chatId = {chatId}/>)}}>\r\n\t\t\t\t\t<FiFolder/>\r\n\t\t\t\t\t<span>Attachments</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<Wallpapers chatId = {chatId} currentWallpaper = {currentWallpaper}/>)}}>\r\n\t\t\t\t\t<FiImage/>\r\n\t\t\t\t\t<span>Change wallpaper</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiTrash/>\r\n\t\t\t\t\t<span>Delete chat</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { ChatMoreBtn } from './ChatMoreBtn'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { ChatInfo } from './ChatInfo'\r\nexport const ChatHeader = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = data.participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t\tsetHeaderColors(person.imageColors)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data.chatName === \"\") {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [data.id])\r\n\treturn (\r\n\t\t<div className=\"ChatHeader\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[0]}, ${headerColors[1]})` } : { background: `linear-gradient(45deg, grey, lightgrey)` }}>\r\n\t\t\t<BackBtn />\r\n\t\t\t{data.participants.length === 2 ? <Link className=\"chatHeaderImageAndName\" to={`/authors/${otherPerson.uid}`}>\r\n\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t<img src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Link> :\r\n\t\t\t\t<div className=\"chatHeaderImageAndName\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t\t<img src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<ChatMoreBtn chatId={data.id} data={data} currentWallpaper={data.wallpaper} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function findWhatToWriteInResponseToItem(referedMessage){\r\n\treturn referedMessage.attachedSongs.length ? \"Audio\":\r\n\treferedMessage.attachedAlbums.length? \"Album\":\r\n\treferedMessage.attachedAuthors.length?\"Author\":\r\n\treferedMessage.inResponseToMessage && referedMessage.inResponseToMessage.length?\"Forwarded message\":\"\"\r\n}","import React from 'react'\r\n\r\nexport const SeenByCircle = ({listOfSeen}) => {\r\n\treturn (\r\n\t\t<div className = \"SeenByCircle\" style = {listOfSeen !== undefined? listOfSeen.length <= 1?{opacity:'1', visibility:'visible'}:{}:null}></div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { authors } from '../../data/authors'\r\nimport { chat } from '../../data/chat'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/findWhatToWriteInResponseItem'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SeenByCircle } from './SeenByCircle'\r\n\r\nexport const MessageItem = ({ messageData, chatId, scrollToMessageRef, setScrollToMessageId, scrollToMessageId, showPhoto = true, otherMessages, inResponseToMessageArr, setInResponseToMessageArr }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { message, attachedAlbums, attachedSongs, attachedAuthors, sender, inResponseToMessage, id, sentTime } = messageData\r\n\tconst [userThatSentMessage, setUserThatSentMessage] = useState({})\r\n\tconst messageSentTime = displayDate(sentTime, 2)\r\n\tconst [attachedSongsData, setAttachedSongsData] = useState([])\r\n\tconst [attachedAuthorsData, setAttachedAuthorsData] = useState([])\r\n\tconst [attachedPlaylistsData, setAttachedPlaylistsData] = useState([])\r\n\tconst [inResponseToMessagesData, setInResponseToMessagesData] = useState([])\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst messageRef = useRef()\r\n\tconst isVisible = useOnScreen(messageRef)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(messageData.seenBy !== undefined){\r\n\t\t\tif(messageData.seenBy.length === 1 && currentUser.uid !== messageData.sender){\r\n\t\t\t\tconst tempMessages = otherMessages\r\n\t\t\t\ttempMessages[messageData.id].seenBy.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\tmessages:tempMessages\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isVisible])\r\n\r\n\tasync function fetchSentMessageUser() {\r\n\t\tconst user = (await firestore.collection('users').doc(messageData.sender).get()).data()\r\n\t\tsetUserThatSentMessage(user)\r\n\t}\r\n\r\n\tfunction fetchAttachedData(list, place, setFunc) {\r\n\t\treturn list.forEach(async (itemId) => {\r\n\t\t\tlet itemData = (await firestore.collection(place).doc(itemId).get()).data()\r\n\t\t\tsetFunc(prev => [...prev, itemData])\r\n\t\t})\r\n\t}\r\n\r\n\tfunction inResponseMessagesFetch() {\r\n\t\tif (inResponseToMessage !== null) {\r\n\t\t\tinResponseToMessage.forEach(async messageId => {\r\n\t\t\t\tsetInResponseToMessagesData(prev => [...prev, otherMessages[messageId]])\r\n\t\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[messageId].sender).get()).data().displayName\r\n\t\t\t\tsetInResponseNames(prev => [name, ...prev])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSentMessageUser()\r\n\t\tfetchAttachedData(attachedSongs, 'songs', setAttachedSongsData)\r\n\t\tfetchAttachedData(attachedAuthors, 'users', setAttachedAuthorsData)\r\n\t\tfetchAttachedData(attachedAlbums, 'playlists', setAttachedPlaylistsData)\r\n\t\tinResponseMessagesFetch()\r\n\t}, [])\r\n\r\n\tfunction addMessageToResponseList() {\r\n\t\tif (!inResponseToMessageArr.includes(id)) {\r\n\t\t\tsetInResponseToMessageArr(prev => [...prev, id])\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst emojis = [<FcLike />, <AiFillFire />, <AiFillLike />]\r\n\treturn (\r\n\t\t<div className={\"MessageItem \" + (sender === currentUser.uid ? 'your' : '')} ref={id === scrollToMessageId ? scrollToMessageRef : messageRef} style={showPhoto ? { paddingBottom: '15px' } : {}}>\r\n\t\t\t<div className=\"messageItemImage\">\r\n\t\t\t\t{showPhoto ?\r\n\t\t\t\t\t<img src={userThatSentMessage.photoURL} alt=\"\" /> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t\t<div className=\"messageItemBody\" style={id === scrollToMessageId ? { animation: 'showResponseMessage .5s forwards' } : showPhoto ? { borderRadius: 'var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px' } : {}}>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n\t\t\t\t\t<h5 className=\"messageUserName\">{userThatSentMessage.displayName}</h5>\r\n\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{messageSentTime}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{inResponseToMessage !== null ?\r\n\t\t\t\t\tinResponseToMessagesData.map((messageData, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" onClick={() => setScrollToMessageId(messageData.id)}>\r\n\t\t\t\t\t\t\t\t<span style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t\t\t\t\t<h5 style={messageData.sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>\r\n\t\t\t\t\t\t\t\t\t\t{inResponseNames[index]}\r\n\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{displayDate(messageData.sentTime, 2)}</div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{messageData.message}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(messageData)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{message}</p>\r\n\t\t\t\t\t{attachedSongsData.map((song, key) => {\r\n\t\t\t\t\t\treturn <SongItem song={song} localIndex={key} key={key} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedPlaylistsData.map((album, index) => {\r\n\t\t\t\t\t\treturn <PlaylistItem playlist={album} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedAuthorsData.map((author, index) => {\r\n\t\t\t\t\t\treturn <AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<SeenByCircle listOfSeen = {messageData.seenBy}/>\r\n\t\t\t<button className=\"respondToMessageBtn\" onClick={addMessageToResponseList}>\r\n\t\t\t\t<BiShare />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nexport default function useOnScreen(ref) {\r\n\r\n\tconst [isIntersecting, setIntersecting] = useState(false)\r\n \r\n\tconst observer = new IntersectionObserver(\r\n\t  ([entry]) => setIntersecting(entry.isIntersecting)\r\n\t)\r\n \r\n\tuseEffect(() => {\r\n\t  observer.observe(ref.current)\r\n\t  // Remove the observer as soon as the component is unmounted\r\n\t  return () => { observer.disconnect() }\r\n\t}, [])\r\n \r\n\treturn isIntersecting\r\n }","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { MessageItem } from './MessageItem'\r\n\r\nexport const MessageField = ({message, index, messageList, chatId, inResponseToMessage, setInResponseToMessage, scrollToMessageRef, scrollToMessageId, setScrollToMessageId, setDateRefsArray}) => {\r\n\tconst [showPhoto, setShowPhoto] = useState(false)\r\n\tconst [showDate, setShowDate] = useState(false)\r\n\tconst dateRef = useRef(null)\r\n\tuseEffect(() => {\r\n\t\tif (index === messageList.length - 1) setShowPhoto(true)\r\n\t\telse if (messageList[index + 1].sender !== messageList[index].sender) setShowPhoto(true)\r\n\t\telse if (displayDate(messageList[index + 1].sentTime) !== displayDate(messageList[index].sentTime)) setShowPhoto(true)\r\n\t\r\n\t\tif (index === 0) setShowDate(true)\r\n\t\telse if (displayDate(messageList[index].sentTime) !== displayDate(messageList[index - 1].sentTime)) {\r\n\t\t\tsetShowDate(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dateRef.current !== null) {\r\n\t\t\tsetDateRefsArray(prev=>[...prev, dateRef])\r\n\t\t}\r\n\t}, [showDate])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showDate ?  <div ref = {dateRef} style={{ width: '100%', display: 'flex', justifyContent: 'center', alignItems: \"center\", padding: \"10px 0\" }}>{displayDate(message.sentTime)}</div> : null}\r\n\t\t\t<MessageItem\r\n\t\t\t\tmessageData={message}\r\n\t\t\t\tchatId={chatId}\r\n\t\t\t\tkey={message.id}\r\n\t\t\t\tscrollToMessageRef={scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId={scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId={setScrollToMessageId}\r\n\t\t\t\tshowPhoto={showPhoto}\r\n\t\t\t\totherMessages={messageList}\r\n\t\t\t\tinResponseToMessageArr={inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessageArr={setInResponseToMessage}\r\n\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { MessageField } from './MessageField'\r\n\r\nexport const DisplayChatMessages = ({chatId, messageList, inResponseToMessage, setInResponseToMessage, messagesWindowRef, setDateRefsArray}) => {\r\n\tconst scrollToMessageRef = useRef(null)\r\n\tconst [scrollToMessageId, setScrollToMessageId] = useState(-1)\r\n\tuseEffect(() => {\r\n\t\tif (scrollToMessageId !== -1) {\r\n\t\t\tmessagesWindowRef.current.scrollTo(0, scrollToMessageRef.current.offsetTop - 65 < 0 ? 0 : scrollToMessageRef.current.offsetTop - 65)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetScrollToMessageId(-1)\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}, [scrollToMessageId])\r\n\r\n\treturn messageList.length?<>\r\n\t\t{messageList.map((message, index)=>{\r\n\t\t\treturn <MessageField \r\n\t\t\t\tmessage = {message} \r\n\t\t\t\tindex = {index} \r\n\t\t\t\tkey = {message.id} \r\n\t\t\t\tmessageList = {messageList} \r\n\t\t\t\tchatId = {chatId} \r\n\t\t\t\tinResponseToMessage = {inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessage = {setInResponseToMessage}\r\n\t\t\t\tscrollToMessageRef = {scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId = {scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId = {setScrollToMessageId}\r\n\t\t\t\tsetDateRefsArray = {setDateRefsArray}\r\n\t\t\t/>\r\n\t\t})}\r\n\t</>:null\r\n}\r\n","import React from 'react'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nexport const AttachedItemsInChatInput = ({attachedItems, setAttachedItems, icon}) => {\r\n\tfunction removeItemFromAttached(attachedItems, setItems, itemId) {\r\n\t\tsetItems(attachedItems.filter(id => id !== itemId))\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"AttachedItemsInChatInput\">\r\n\t\t\t{attachedItems.map((itemId, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"attachedSongItem\" key={itemId}>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t<span>{itemId}</span>\r\n\t\t\t\t\t\t<button className=\"removeMessageFromResponse\" onClick={() => removeItemFromAttached(attachedItems, setAttachedItems, itemId)}>\r\n\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport { MdSend } from 'react-icons/md'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/findWhatToWriteInResponseItem'\r\nimport { auth, firestore } from '../../firebase'\r\nimport { sendMessage } from '../../functions/sendMessage'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { AttachedItemsInChatInput } from '../ChatPage/AttachedItemsInChatInput'\r\n\r\nexport const ChatInput = ({ chatId, chatData, messageText, setMessageText, inResponseToMessage, setInResponseToMessage, otherMessages }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAttachWindow, setOpenAttachWindow] = useState(false)\r\n\tconst { yourSongs, yourAuthors, yourPlaylists } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [allFoundSongs, setAllFoundSongs] = useState(yourSongs)\r\n\tconst [searchSongList, setSearchSongList] = useState([])\r\n\tconst [attachedSongs, setAttachedSongs] = useState([])\r\n\tconst [attachedAlbums, setAttachedAlbums] = useState([])\r\n\tconst [attachedAuthors, setAttachedAuthors] = useState([])\r\n\tconst [resultPlaylists, setResultPlaylists] = useState(yourPlaylists)\r\n\tconst [resultAuthorList, setResultAuthorList] = useState(yourAuthors)\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst [attachedSongsNames, setAttachedSongsNames] = useState([])\r\n\tconst attachWindowRef = useRef(null)\r\n\tuseOutsideClick(attachWindowRef, setOpenAttachWindow)\r\n\r\n\tfunction sendMessageFull() {\r\n\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, attachedSongs, attachedAlbums, attachedAuthors, inResponseToMessage);\r\n\t\tsetMessageText(\"\");\r\n\t\tsetAttachedSongs([]);\r\n\t\tsetAttachedAuthors([]);\r\n\t\tsetAttachedAlbums([]);\r\n\t\tsetInResponseToMessage([])\r\n\t\tsetOpenAttachWindow(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (searchValue.length === 0) {\r\n\t\t\tsetAllFoundSongs(yourSongs)\r\n\t\t}\r\n\t}, [searchValue])\r\n\r\n\tfunction removeMessageFromResponseList(messageId) {\r\n\t\tsetInResponseToMessage(inResponseToMessage.filter(id => id !== messageId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(messageText.length === 0){\r\n\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\ttyping:chatData.typing.filter(id=>id !== currentUser.uid)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(!chatData.typing.includes(currentUser.uid)){\r\n\t\t\t\tconst tempArray = chatData.typing\r\n\t\t\t\ttempArray.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\ttyping:tempArray\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [messageText])\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInResponseNames([])\r\n\t\tinResponseToMessage.forEach(async id => {\r\n\r\n\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[id].sender).get()).data().displayName\r\n\t\t\tsetInResponseNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [inResponseToMessage.length])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachedSongsNames([])\r\n\t\tattachedSongs.forEach(async id => {\r\n\t\t\tconst name = (await firestore.collection('songs').doc(id).get()).data().name\r\n\t\t\tsetAttachedSongsNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [attachedSongs.length])\r\n\r\n\treturn (\r\n\t\t<div className=\"chatInput\" style={openAttachWindow ? { borderRadius: \"0 0 var(--standartBorderRadius) var(--standartBorderRadius)\", transition: \".2s\" } : {}} ref={attachWindowRef}>\r\n\t\t\t<div className=\"attachWindow\" style={openAttachWindow ? { height: \"400px\", opacity: '1' } : {}} >\r\n\t\t\t\t{openAttachWindow ?\r\n\t\t\t\t\t<div style={openAttachWindow ? { maxHeight: '100%', overflowY: 'auto' } : { display: 'none' }}>\r\n\t\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\tsetValue={setSearchValue}\r\n\t\t\t\t\t\t\tsetAllFoundSongs={setAllFoundSongs}\r\n\t\t\t\t\t\t\tsetResultPlaylists={setResultPlaylists}\r\n\t\t\t\t\t\t\tsetResultAuthorList={setResultAuthorList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SongList listOfSongs={allFoundSongs} source={'no'} listOfChosenSongs={attachedSongs} setListOfSongs={setAttachedSongs} />\r\n\t\t\t\t\t\t<AuthorsList listOfAuthors={resultAuthorList} listOfChosenAuthors={attachedAuthors} setListOfChosenAuthors={setAttachedAuthors} />\r\n\t\t\t\t\t\t<AlbumList listOfAlbums={resultPlaylists} loading={false} listOfChosenAlbums={attachedAlbums} setListOfChosenAlbums={setAttachedAlbums} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inResponseArea\" style={inResponseToMessage.length || attachedSongsNames.length || attachedAuthors.length || attachedAlbums.length ? {} : { height: '0', padding: '0', opacity: '0', top: \"0\", visibility: 'hidden' }}>\r\n\t\t\t\t<div className=\"responseMessages\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{inResponseToMessage.map((id, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" key={id}>\r\n\t\t\t\t\t\t\t\t<h5 style={otherMessages[id].sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>{inResponseNames[index]}</h5>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{shortWord(otherMessages[id].message, 35)}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(otherMessages[id])}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button onClick={() => removeMessageFromResponseList(id)} className=\"removeMessageFromResponse\">\r\n\t\t\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedSongs} setAttachedItems = { setAttachedSongs} icon = {<CgMusicNote />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAuthors} setAttachedItems = { setAttachedAuthors} icon = {<FiUser />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAlbums} setAttachedItems = { setAttachedAlbums} icon = {<BiAlbum />}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"attachAndEmojis\">\r\n\t\t\t\t<div className=\"attachBtn\">\r\n\t\t\t\t\t<button onClick={() => { setOpenAttachWindow(!openAttachWindow) }}>\r\n\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" style={{ background: 'var(--lightGrey)', border: 'none', outline: 'none', minHeight: '100%' }} value={messageText} onChange={(e) => { setMessageText(e.target.value) }} onKeyUp={(e) => { if (e.key === 'Enter') { sendMessageFull() } }} />\r\n\t\t\t\t<div className=\"emojis\">\r\n\t\t\t\t\t<div className=\"emojiItem\">\r\n\t\t\t\t\t\t<FcLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--red)' }}>\r\n\t\t\t\t\t\t<AiFillFire />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--lightBlue)' }}>\r\n\t\t\t\t\t\t<AiFillLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<button className=\"sendBtn\" onClick={() => { sendMessageFull() }}>\r\n\t\t\t\t<MdSend />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const sendMessage = (chatId, chatData, sender, messageText, attachedSongs = [], attachedAlbums = [], attachedAuthors = [], inResponseToMessage) => {\r\n\tif (messageText.length !== 0 || attachedSongs.length !== 0 || attachedAlbums.length !== 0 || attachedAuthors.length !== 0 || inResponseToMessage) {\r\n\t\tconst tempMessages = chatData.messages\r\n\r\n\t\ttempMessages.push({\r\n\t\t\tid: chatData.messages.length,\r\n\t\t\tsender: sender,\r\n\t\t\tmessage: messageText,\r\n\t\t\tsentTime: new Date().toString(),\r\n\t\t\tinResponseToMessage: inResponseToMessage || null,\r\n\t\t\tattachedSongs: attachedSongs,\r\n\t\t\tattachedAlbums: attachedAlbums,\r\n\t\t\tattachedAuthors: attachedAuthors,\r\n\t\t\tseenBy:[sender]\r\n\t\t})\r\n\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\tmessages: tempMessages\r\n\t\t})\r\n\t}\r\n}","import React from 'react'\r\nimport displayDate from '../../functions/displayDate'\r\n\r\nexport const DateOnTop = ({date}) => {\r\n\treturn (\r\n\t\t<div className = \"DateOnTop\">\r\n\t\t\t{displayDate(date)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {SmallImages} from '../AuthorPage/SmallImages'\r\nexport const TypingAnimation = ({ typingPeople }) => {\r\n\tconst [typingPeopleData, setTypingPeopleData] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tsetTypingPeopleData([])\r\n\t\ttypingPeople.map(async personId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(personId).get()).data()\r\n\t\t\tif(personData.uid !== currentUser.uid) setTypingPeopleData(prev=>[...prev, personData])\r\n\t\t})\r\n\t}, [typingPeople])\r\n\treturn typingPeopleData.length > 0 ? (\r\n\t\t<div className = \"typingWrapper\">\r\n\t\t\t<SmallImages imagesList = {typingPeopleData.map(person=>person.photoURL)} borderColor = {'var(--navItemColor)'}/>\r\n\t\t\t<div className=\"TypingAnimation\">\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React, { createRef } from 'react'\r\nimport { useState } from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport { ChatHeader } from '../components/ChatPage/ChatHeader'\r\nimport { MessageItem } from '../components/ChatPage/MessageItem'\r\nimport { DisplayChatMessages } from '../components/ChatPage/DisplayChatMessages'\r\nimport { useRef } from 'react'\r\nimport { ChatInput } from '../components/AuthorPage/ChatInput'\r\nimport { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport displayDate from '../functions/displayDate'\r\nimport { DateOnTop } from '../components/ChatPage/DateOnTop'\r\nimport { TypingAnimation } from '../components/ChatPage/TypingAnimation'\r\nexport const DialoguePage = () => {\r\n\tconst match = useRouteMatch('/chat/:chatId')\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatId } = match.params\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [chatData, setChatData] = useState([])\r\n\tconst scrollToBottomElementRef = useRef(null)\r\n\tconst messagesWindowRef = useRef(null)\r\n\t\r\n\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tconst [messageList, setMessageList] = useState([])\r\n\tconst [inResponseToMessage, setInResponseToMessage] = useState([])\r\n\tconst [currentDateOnTop, setCurrentDateOnTop] = useState(\"\")\r\n\tconst [dateRefsArray, setDateRefsArray] = useState([])\r\n\tconst history = useHistory()\r\n\tconst scrollToMyRef = () => {\r\n\t\tconst scroll = messagesWindowRef.current.scrollHeight - messagesWindowRef.current.clientHeight;\r\n\t\tmessagesWindowRef.current.scrollTo(0, scroll);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('chats').doc(chatId)\r\n\t\t\t.onSnapshot(snapshot => {\r\n\t\t\t\tsetChatData(snapshot.data())\r\n\t\t\t\tsetMessageList(snapshot.data().messages)\r\n\t\t\t\tsetCurrentDateOnTop(snapshot.data().messages.length?snapshot.data().messages[0].sentTime:new Date().toString())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, chatId])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatData.participants !== undefined) {\r\n\t\t\tif (!chatData.participants.includes(currentUser.uid)) history.push('/chat')\r\n\t\t}\r\n\t}, [chatData])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (messagesWindowRef.current !== null && messageList.length > 0) scrollToMyRef()\r\n\t}, [messageList])\r\n\r\n\tfunction findTopDate(e){\r\n\t\tdateRefsArray.forEach(ref=>{\r\n\t\t\tif(ref.current !== null) {\r\n\t\t\t\tif(ref.current.offsetTop - 70 <= e.target.scrollTop) setCurrentDateOnTop(ref.current.innerHTML)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"DialoguePage\">\r\n\t\t\t{\r\n\t\t\t\tloading ?\r\n\t\t\t\t\t<LoadingCircle /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ChatHeader data={chatData} />\r\n\t\t\t\t\t\t<DateOnTop date = {currentDateOnTop}/>\r\n\t\t\t\t\t\t<div className=\"chatMessagesWindow\" ref={messagesWindowRef} onScroll = {findTopDate}>\r\n\t\t\t\t\t\t\t<DisplayChatMessages chatId = {chatId} messageList = {messageList} inResponseToMessage = {inResponseToMessage} setInResponseToMessage = {setInResponseToMessage} messagesWindowRef = {messagesWindowRef} setDateRefsArray = {setDateRefsArray}/>\r\n\t\t\t\t\t\t\t<span className=\"scrollToBottomElement\" ref={scrollToBottomElementRef}></span>\r\n\t\t\t\t\t\t\t<TypingAnimation typingPeople = {chatData.typing}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ChatInput \r\n\t\t\t\t\t\t\tchatId={chatId} \r\n\t\t\t\t\t\t\tchatData = {chatData}\r\n\t\t\t\t\t\t\tmessageText={messageText} \r\n\t\t\t\t\t\t\tsetMessageText={setMessageText} \r\n\t\t\t\t\t\t\tinResponseToMessage = {inResponseToMessage} \r\n\t\t\t\t\t\t\tsetInResponseToMessage = {setInResponseToMessage} \r\n\t\t\t\t\t\t\totherMessages = {messageList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t{chatData.wallpaper !== \"undefined\"?<img src={chatData.wallpaper} alt=\"\" style = {{position:'absolute', top:\"-30px\", left:\"-30px\", width:'calc(100% + 60px)', height:'calc(100% + 65px)', zIndex:'-1', outline:'none'}}/>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export const LOGIN_ROUTE = '/login'\r\nexport const SIGNUP_ROUTE = '/signup'\r\nexport const HOME_ROUTE = '/home'\r\nexport const LIBRARY_ROUTE = '/library'\r\nexport const SEARCH_ROUTE = '/search'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const NOTFOUND_ROUTE = '/no-such-page'","import React from 'react'\r\n\r\nexport const BlurredBg = () => {\r\n\treturn (\r\n\t\t<div className = \"BlurredBg\">\r\n\t\t\t<div className=\"circle circle1\"></div>\r\n\t\t\t<div className=\"circle circle2\"></div>\r\n\t\t\t<div className=\"circle circle3\"></div>\r\n\t\t\t<div className=\"circle circle4\"></div>\r\n\t\t\t<div className=\"circle circle5\"></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nexport const TitleAndLogo = ({title}) => {\r\n\treturn (\r\n\t\t<div className=\"titleAndLogo\">\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<h1>{title}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi'\r\nimport { authors } from '../../data/authors'\r\nimport { playlists } from '../../data/playlists'\r\nimport { songs } from '../../data/songs'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport {LoadingCircle} from '../Basic/LoadingCircle'\r\nimport { BlurredBg } from '../SignIn-Up/BlurredBg'\r\nexport const MainBanner = () => {\r\n\tconst [bannerColors, setBannerColors] = useState([])\r\n\tconst [currentSliderPage, setcurrentSliderPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\t\r\n\tconst [topAuthor, setTopAuthor] = useState({})\r\n\tconst [topSong, setTopSong] = useState({})\r\n\tconst [topAlbum, setTopAlbum] = useState({})\r\n\t\r\n\tasync function findTop(setFunc, list, criterion) {\r\n\t\tconst response = await (await firestore.collection(list).orderBy(criterion, 'desc').get()).docs[0].data()\r\n\t\tsetFunc(response)\r\n\t\tsetBannerColors(prev=>[...prev, response.imageColors[0]])\r\n\t\tif(list === 'playlists') setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindTop(setTopAuthor, 'users', 'subscribers')\r\n\t\tfindTop(setTopSong, 'songs', 'listens')\r\n\t\tfindTop(setTopAlbum, 'playlists', 'listens')\r\n\t\t\r\n\t}, [])\r\n\t// function findCurrentPicture(){\r\n\t// \tif(currentSliderPage === 0){\r\n\t// \t\treturn topAuthor.image\r\n\t// \t}\r\n\r\n\t// \tif(currentSliderPage === 1){\r\n\t// \t\treturn topSong.cover\r\n\t// \t}\r\n\r\n\t// \treturn topAlbum.image\r\n\t// }\r\n\treturn (\r\n\t\t<div className = \"MainBanner\" style = {{background:bannerColors[currentSliderPage], boxShadow:`0 0 50px ${bannerColors[currentSliderPage] + 'ab'}`}}>\r\n\t\t\t{loading? <LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 0?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular artist on platform</h3>\r\n\t\t\t\t\t\t\t<AuthorItemBig data = {topAuthor}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 1?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular song on platform</h3>\r\n\t\t\t\t\t\t\t<SongItem song = {topSong} localIndex = {0} showListens/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 2?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular album on platform</h3>\r\n\t\t\t\t\t\t\t<PlaylistItem playlist = {topAlbum}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"sliderBtns\">\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage-1, 2, 0))}><BiChevronLeft/></button>\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage+1, 2, 0))}><BiChevronRight/></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<BlurredBg circleColor = \"#fff\"/>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport findIfSongIsNew from '../../functions/findIfSongIsNew'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\n\r\nexport const RecentSongs = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recentSongs, setRecentSongs] = useState([])\r\n\tfunction findRecentSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async songId=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(findIfSongIsNew(songData) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecentSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(yourAuthors !== undefined && yourAuthors.length !== 0 && recentSongs.length === 0) findRecentSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<SongList listOfSongs = {recentSongs} source = {{source: `/home`, name: \"New Songs\", image: \"\", songsList: recentSongs}} title = {\"New Songs\"} isNewSong/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport findSimilarArtists from '../../functions/findSimilarArtists'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const RecommendedAuthors = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recommendationAuthors, setRecommendationAuthors] = useState([])\r\n\r\n\tconst [uniqueAuthors, setUniqueAuthors] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tif (yourAuthors !== undefined) {\r\n\t\t\tyourAuthors.forEach((author) => {\r\n\t\t\t\tfindSimilarArtists(author, setRecommendationAuthors)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\trecommendationAuthors.forEach(author=>{\r\n\t\t\tconst uniqueAuthorsUIDSArray = uniqueAuthors.map(author=>author.uid)\r\n\t\t\tif(!currentUser.addedAuthors.includes(author.uid) && !uniqueAuthorsUIDSArray.includes(author.uid)){\r\n\t\t\t\tsetUniqueAuthors(prev=>[...prev, author])\r\n\t\t\t}\r\n\t\t})\r\n}, [recommendationAuthors])\r\n\treturn (\r\n\t\t<div className = \"RecommendedAuthors\">\r\n\t\t\t<AuthorsList listOfAuthors = {uniqueAuthors} title = {\"Recommended Authors\"}/>\r\n\t\t\t{/* <h2>Recommended Authors</h2>\r\n\t\t\t<div className=\"artistsWrapper\">\r\n\t\t\t\t{uniqueAuthors.map((author, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {useSong} from '../../functionality/SongPlay/SongContext'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const RecommendedSongs = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [recommendedSongs, setRecommendedSongs] = useState([])\r\n\tfunction fetchRecommendedSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async (songId)=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(!currentUser.addedSongs.includes(songId) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecommendedSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// tempSongArray.sort((songA, songB)=>songB.listens - songA.listens)\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRecommendedSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = 'RecommendedSongs'>\r\n\t\t\t<SongList listOfSongs = {recommendedSongs} source = {{source: `/home`, name: \"Recommended Songs\", image: \"\", songsList: recommendedSongs}} title = {\"Recommended Songs\"}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/wave2.f62cb572.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useEffect } from 'react'\r\nexport const LibraryPlaylistItem = ({playlist}) => {\r\n\tconst playlistDate = new Date(playlist.creationDate)\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource({source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t<div className=\"library playlistItem\">\r\n\t\t\t\t{playlist.image?<img src={playlist.image} alt=\"\" />:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t<h2 style = {{background:playlist.imageColors[2]}}>{shortWord(playlist.name, 10) }</h2>\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport wave from '../../images/wave2.svg'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {LibraryPlaylistItem} from '../../components/LibraryPage/LibraryPlaylistItem'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const SongsPage = () => {\r\n\tconst {yourSongs, yourPlaylists } = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\treturn (\r\n\t\t<div className = \"SongsPage\">\r\n\t\t\t<div className=\"playLists\">\r\n\t\t\t\t<div className=\"playlistContent\">\r\n\t\t\t\t\t{yourPlaylists.map((p, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LibraryPlaylistItem playlist = {p} key = {index}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"playlistsBackground\">\r\n\t\t\t\t\t<img src={wave} alt=\"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"yourSongsList\">\r\n\t\t\t\t<SongList listOfSongs = {yourSongs} source = {{ source: '/library', name: \"Your Library\", image: currentUser.photoURL, songsList: yourSongs}} showSearch/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\n\r\nexport const CreatePlaylistPage = () => {\r\n\treturn (\r\n\t\t<div className = 'CreatePlaylistPage'>\r\n\t\t\t<AddPlaylist/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport {PlaylistItem} from '../AuthorPage/PlaylistItem'\r\nimport {BiFolderPlus} from 'react-icons/bi'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { CreatePlaylistPage } from './CreatePlaylistPage'\r\nexport const PlaylistsPage = () => {\r\n\tconst {yourPlaylists} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"PlaylistsPage\">\r\n\t\t\t<button className = \"createPlaylistBtn\" onClick = {()=>{toggleModal(); setContent(<CreatePlaylistPage/>)}}>\r\n\t\t\t\t<BiFolderPlus/>\r\n\t\t\t\tCreate Playlist\r\n\t\t\t</button>\r\n\t\t\t<div className=\"playlistsContainer\">\r\n\t\t\t\t{yourPlaylists && yourPlaylists.map((playlist, index)=>{\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport {AuthorItemBig} from '../AuthorPage/AuthorItemBig'\r\nexport const AuthorsPage = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\treturn (\r\n\t\t<div className = \"AuthorsPage\">\r\n\t\t\t<div className=\"authorsContainer\">\r\n\t\t\t\t{yourAuthors.map((authorData)=>{\r\n\t\t\t\t\treturn <AuthorItemBig data = {authorData} key = {authorData.uid}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const IsUserOnlineCircle = ({userUID}) => {\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<div className = \"onlineCircle\"></div>:null\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { findAmountOfUnseenMessages } from '../../functions/findAmountOfUnseenMessages'\r\nexport const AmountOfUnseenMessages = ({amountOfUnseen}) => {\r\n\t\r\n\treturn amountOfUnseen !== 0?(\r\n\t\t<div className = \"AmountOfUnseenMessages\">\r\n\t\t\t{amountOfUnseen}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiMusic, FiUser } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {BsDot} from 'react-icons/bs'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { SeenByCircle } from './SeenByCircle'\r\nexport const LastSentMessage = ({ messages }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [lastAttachedItem, setLastAttachedItem] = useState(\"\")\r\n\tconst [shouldPutDot, setShouldPutDot] = useState(false)\r\n\tconst [lastMessage, setLastMessage] = useState(\"\")\r\n\tconst messageIcons = [null, <FiMusic />, <BiAlbum />, <FiUser />]\r\n\tconst [lastIcon, setLastIcon] = useState(0)\r\n\tasync function findWhatToWriteUnderName() {\r\n\t\tif (messages !== undefined) {\r\n\t\t\tconst lastAttachedItem = messages[messages.length - 1]\r\n\t\t\tsetLastMessage(str => str += lastAttachedItem.message)\r\n\t\t\tsetShouldPutDot(lastAttachedItem.message.length !== 0) \r\n\t\t\tif (lastAttachedItem.attachedSongs.length) {\r\n\t\t\t\tconst songName = (await firestore.collection('songs').doc(lastAttachedItem.attachedSongs[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(1)\r\n\t\t\t\tsetLastAttachedItem(str => str += songName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAlbums.length) {\r\n\t\t\t\tconst playlistName = (await firestore.collection('playlists').doc(lastAttachedItem.attachedAlbums[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(2)\r\n\t\t\t\tsetLastAttachedItem(str => str +=playlistName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAuthors.length) {\r\n\t\t\t\tconst authorName = (await firestore.collection('users').doc(lastAttachedItem.attachedAuthors[0]).get()).data().displayName\r\n\t\t\t\tsetLastIcon(3)\r\n\t\t\t\tsetLastAttachedItem(str => str +=authorName)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindWhatToWriteUnderName()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className=\"messageShowOutside\">\r\n\t\t\t{messages[messages.length - 1].sender === currentUser.uid?<span style = {{marginRight:'5px'}}>You:</span>:null}\r\n\t\t\t{shortWord(lastMessage, 30)}\r\n\t\t\t{shouldPutDot && lastAttachedItem.length?<BsDot/>:null}\r\n\t\t\t{messageIcons[lastIcon]}\r\n\t\t\t{lastAttachedItem}\r\n\t\t\t<SeenByCircle listOfSeen = {messages[messages.length - 1].seenBy}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { findAmountOfUnseenMessages } from '../../functions/findAmountOfUnseenMessages'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\nimport { AmountOfUnseenMessages } from './AmountOfUnseenMessages'\r\nimport { LastSentMessage } from './LastSentMessage'\r\n\r\nexport const ChatItem = ({ chatData }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatName, chatImage, participants, messages } = chatData\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [amountOfUnseen, setAmountOfUnseen] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountOfUnseen(findAmountOfUnseenMessages(messages, currentUser))\r\n\t}, [])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName === '') {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [])\r\n\treturn chatData?(\r\n\t\t<Link to={`/chat/${chatData.id}`}>\r\n\t\t\t<div className={\"ChatItem \" + (amountOfUnseen > 0?\"unseen\":\"\")} >\r\n\t\t\t\t<div className=\"chatItemImage\">\r\n\t\t\t\t\t<img src={chatImage || otherPerson.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<IsUserOnlineCircle userUID = {otherPerson.uid}/>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<h4 style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n\t\t\t\t\t\t<span>{chatName || otherPerson.displayName}</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{messages.length?<span style={{ opacity: '.6', fontWeight: '500', fontSize: '.8em' }}>{displayDate(messages[messages.length - 1].sentTime, chatData && ( Date.now() - new Date(messages[messages.length - 1].sentTime).getTime()) > 86000000 ? 0 : 2)}</span>:null}\r\n\t\t\t\t\t\t\t<AmountOfUnseenMessages amountOfUnseen = {amountOfUnseen}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t{messages.length?<p style={messages[messages.length - 1].sender !== currentUser.uid ? { color: '#fff' } : {}}>{<LastSentMessage messages={messages} />}</p>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t):null\r\n}\r\n","export function findAmountOfUnseenMessages(messages, currentUser) {\r\n\treturn messages.reduce((accum, message)=>{\r\n\t\tif(message.sender !== currentUser.uid){\r\n\t\t\tif(message.seenBy !== undefined){\r\n\t\t\t\tif(!message.seenBy.includes(currentUser.uid)){\r\n\t\t\t\t\tconsole.log(\"i'm here\")\r\n\t\t\t\t\treturn ++accum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn accum\r\n\t}, 0)\r\n}","import React, { useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\n\r\nexport const ModalWindow = ({children, ...restProps}) => {\r\n\tconst {openModal, setOpenModal, content} = useModal()\r\n\tconst modalRef = useRef(null)\r\n\tuseOutsideClick(modalRef, setOpenModal)\r\n\treturn (\r\n\t\t<div className = \"modal_darkBg\" style = {!openModal?{opacity:0, visibility:'hidden', transform:'scale(.95)'}:{}} >\r\n\t\t\t<div className = \"ModalWindow\" {...restProps} ref = {modalRef}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport getUID from '../../functions/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../Basic/ErrorPlate'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const CreateChat = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [foundFriends, setFoundFriends] = useState(yourFriends)\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst [chatCover, setChatCover] = useState(\"\")\r\n\tconst [chatName, setChatName] = useState(\"\")\r\n\tconst [errorMessage, setRrrorMessage] = useState(\"\")\r\n\tconst chatId = getUID()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className=\"CreateChat\">\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundFriends} focus inputText={\"Search for friends\"} defaultSearchMode={\"authors\"} />\r\n\t\t\t{foundFriends.map(friend => {\r\n\t\t\t\treturn <PersonTiny data={friend} chosenArray={chosenFriends} setChosenArray={setChosenFriends} />\r\n\t\t\t})}\r\n\t\t\t{chosenFriends.length > 1 ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" style={{ marginBottom: '10px' }} className=\"standartInput\" placeholder={\"Enter chat name\"} value={chatName} onChange={e => setChatName(e.target.value)} />\r\n\t\t\t\t\t<DownloadPhotoButton setErrorMessage={setRrrorMessage} setImageLocalPath={() => { return null }} downloadedPhoto={chatCover} setDownloadedPhoto={setChatCover} place={'chatCovers/'} />\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t<button className=\"addSongBtn\" onClick = {()=>{createChat([currentUser.uid, ...chosenFriends], chatId, chatName, chatCover); history.push(`/chat/${chatId}`)}}>Create Chat</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, LOGIN_ROUTE, SEARCH_ROUTE, SIGNUP_ROUTE } from \"./utils/consts\";\r\nimport {LogInPage} from './pages/LogInPage'\r\nimport {SignUpPage} from './pages/SignUpPage'\r\nimport { Home } from \"./pages/Home\";\r\nimport { SearchPage } from \"./pages/SearchPage\";\r\nimport { LibraryPage } from \"./pages/LibraryPage\";\r\nimport { ChatPage } from \"./pages/ChatPage\";\r\nexport const publicRoutes = [\r\n\t{\r\n\t\tpath:LOGIN_ROUTE,\r\n\t\tComponent:LogInPage,\r\n\t},\r\n\t{\r\n\t\tpath:SIGNUP_ROUTE,\r\n\t\tComponent:SignUpPage,\r\n\t}\r\n]\r\n\r\nexport const privateRoutes = [\r\n\t{\r\n\t\tpath:HOME_ROUTE,\r\n\t\tComponent:Home,\r\n\t},\r\n\t{\r\n\t\tpath:LIBRARY_ROUTE,\r\n\t\tComponent:LibraryPage,\r\n\t},\r\n\t{\r\n\t\tpath:SEARCH_ROUTE,\r\n\t\tComponent:SearchPage,\r\n\t},\r\n\t{\r\n\t\tpath:CHAT_ROUTE,\r\n\t\tComponent:ChatPage,\r\n\t}\r\n]","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { HOME_ROUTE, LOGIN_ROUTE, SIGNUP_ROUTE } from '../utils/consts'\r\n\r\nexport const LogInPage = () => {\r\n\tconst {login} = useAuth()\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst isValid = email.length !== 0 && password.length !== 0\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tsetLoading(true)\r\n\t\t\tsetErrorMessage('')\r\n\t\t\tawait login(email, password)\r\n\t\t} catch{\r\n\t\t\tsetErrorMessage('Some error happend')\r\n\t\t}\r\n\r\n\t\tsetLoading(false)\r\n\t}\r\n\treturn (\r\n\t\t<div className = \"In-Up-Container\">\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<TitleAndLogo title=\"Log In\"/>\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Enter your password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" disabled = {loading}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {SIGNUP_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tCreate new account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../styles/SignIn-Up.css'\r\nimport { Link } from 'react-router-dom'\r\nimport {HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { RadioBtn } from '../components/SignIn-Up/RadioBtn'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nexport const SignUpPage = () => {\r\n\tconst [currentRoleChoice, setCurrentRoleChoice] = useState(1)\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst {signup} = useAuth()\r\n\tconst [photoURL, setPhotoURL] = useState(\"\")\r\n\tconst isValid = email.length !== 0 && password.length !== 0 && name.length !== 0\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tasync function onFileChange(e){\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(`usersImages/${file.name}`)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetPhotoURL(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tsetLoading(true)\r\n\t\t\tsetErrorMessage('')\r\n\t\t\tawait signup(email, name, password, currentRoleChoice, photoURL, imageColors)\r\n\t\t} catch{\r\n\t\t\tsetErrorMessage(\"Some error happend\")\r\n\t\t}\r\n\r\n\t\tsetLoading(false)\r\n\t}\r\n\tconsole.log(imageColors)\r\n\treturn (\r\n\t\t<div className=\"In-Up-Container\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<TitleAndLogo title = \"Sign Up\"/>\r\n\t\t\t\t\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" onChange = {(e)=>setName(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Create a password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div style = {{display:'flex', width:'100%', justifyContent:'center', margin:'5px 0 15px 0'}}>\r\n\t\t\t\t\t\t<RadioBtn label = \"User\" onClick = {()=>setCurrentRoleChoice(0)} currentActive = {currentRoleChoice} id = {0}/>\r\n\t\t\t\t\t\t<RadioBtn label = \"Author\" onClick = {()=>setCurrentRoleChoice(1)} currentActive = {currentRoleChoice} id = {1}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className = \"downloadFile\">\r\n\t\t\t\t\t\t<div className = \"downloadPhoto\">\r\n\t\t\t\t\t\t\t<span className = \"downloadBtnText\">\r\n\t\t\t\t\t\t\t\t<AiOutlineCloudDownload/>\r\n\t\t\t\t\t\t\t\tDownload photo\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className=\"photoLoadLine\" style = {photoURL !== ''?{width:'100%'}:{}}></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange = {onFileChange}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" type = \"submit\" disabled = {loading}>\r\n\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {LOGIN_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tAlready have the account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../styles/HomePage.css'\r\nimport { MainBanner } from '../components/HomePage/MainBanner'\r\nimport { RecentSongs } from '../components/HomePage/RecentSongs'\r\nimport { RecommendedAuthors } from '../components/HomePage/RecommendedAuthors'\r\nimport { RecommendedSongs } from '../components/HomePage/RecommendedSongs'\r\nimport { firestore } from '../firebase'\r\nimport {useCollectionData} from 'react-firebase-hooks/firestore'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { SongList } from '../components/Basic/SongList'\r\nimport { SongItem } from '../components/FullScreenPlayer/SongItem'\r\nimport { DefaultPlaylists } from '../components/HomePage/DefaultPlaylists'\r\nexport const Home = () => {\r\n\tconst [songList, setSongList] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tfunction fetchData(){\r\n\t\tconsole.log(currentUser.lastQueue.songsList)\r\n\t\tcurrentUser.lastQueue.songsList.forEach(async songId=>{\r\n\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\tsetSongList(prev=>[...prev, songData])\r\n\t\t})\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchData()\r\n\t}, [])\r\nreturn (\r\n\t<div style={{ animation: 'zoomIn .2s forwards' }} className=\"HomePage\">\r\n\t\t<MainBanner />\r\n\t\t<RecommendedSongs/>\r\n\t\t<RecommendedAuthors/>\r\n\t\t{/* <DefaultPlaylists/> */}\r\n\t\t<RecentSongs/>\r\n\t</div>\r\n)\r\n}\r\n","import React, { useState } from 'react'\r\nimport \"../styles/LibraryPage.css\"\r\nimport { Slider } from '../components/Tools/Slider'\r\nimport { SongsPage } from '../components/LibraryPage/SongsPage'\r\nimport { PlaylistsPage } from '../components/LibraryPage/PlaylistsPage'\r\nimport { AuthorsPage } from '../components/LibraryPage/AuthorsPage'\r\n\r\nexport const LibraryPage = () => {\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst libraryPages = [<SongsPage/>, <PlaylistsPage/>, <AuthorsPage/>]\r\n\treturn (\r\n\t\t<div className=\"LibraryPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t<Slider pages = {['Songs', \"Playlists\", \"Authors\"]} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t{libraryPages[currentPage]}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport \"../styles/SearchPage.css\"\r\nimport { PlaylistItem } from '../components/AuthorPage/PlaylistItem'\r\nimport { useSong } from '../functionality/SongPlay/SongContext'\r\nimport { BackBtn } from '../components/Basic/BackBtn'\r\nimport { FiSearch, FiX } from 'react-icons/fi'\r\nimport { TitleWithMoreBtn } from '../components/Basic/TitleWithMoreBtn'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { SearchBar } from '../components/Basic/SearchBar'\r\nimport {AuthorItemBig} from '../components/AuthorPage/AuthorItemBig'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { SongList } from '../components/Basic/SongList'\r\nimport { AuthorsList } from '../components/Basic/AuthorsList'\r\nimport { AlbumList } from '../components/Basic/AlbumList'\r\nexport const SearchPage = () => {\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [resultSongList, setResultSongList] = useState([])\r\n\tconst [resultAuthorList, setResultAuthorList] = useState([])\r\n\tconst [resultAlbumList, setResultAlbumList] = useState([])\r\n\tconst [shadowColor, setShadowColor] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetResultSongList([])\r\n\t\tsetResultAuthorList([])\r\n\t\tsetResultAlbumList([])\r\n\t}, [searchValue])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(resultSongList.length !== 0){\r\n\t\t\tsetShadowColor(resultSongList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAuthorList.length !== 0){\r\n\t\t\tsetShadowColor(resultAuthorList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAlbumList.length !== 0){\r\n\t\t\tsetShadowColor(resultAlbumList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse setShadowColor(\"\")\r\n\t}, [resultSongList, resultAuthorList, resultAlbumList])\r\n\treturn (\r\n\t\t<div className=\"SearchPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<SearchBar\r\n\t\t\t\tvalue={searchValue}\r\n\t\t\t\tsetValue = {setSearchValue}\r\n\t\t\t\tallFoundSongs = {resultSongList}\r\n\t\t\t\tsetAllFoundSongs = {setResultSongList}\r\n\t\t\t\tsetResultPlaylists = {setResultAlbumList}\r\n\t\t\t\tsetResultAuthorList = {setResultAuthorList}\r\n\t\t\t\tfocus\r\n\t\t\t/>\r\n\r\n\t\t\t<SongList listOfSongs = {resultSongList} source = {{ source: '/search', name: \"Search\", image: \"https://lh3.googleusercontent.com/proxy/PJSN5iZPJhIuQKV-efbS0KD_HoL9nu4cyDmwOfWatZdeOyLBsEtosSWHTw4aK9ZKhrTEW2LGZCGxmH9vYFYx_PT16PIrETeNqijSxA\", songsList:resultSongList }} title = {\"Songs\"} showListens/>\r\n\t\t\t<AuthorsList listOfAuthors = {resultAuthorList} title = {\"Authors\"}/>\r\n\t\t\t<AlbumList listOfAlbums = {resultAlbumList} title = {\"Albums and Playlists\"} loading = {false}/>\r\n\t\t\t<div className=\"colorfullShadow\" style={{ background: shadowColor }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { ChatItem } from '../components/ChatPage/ChatItem'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport '../styles/ChatPage.css'\r\nimport { ModalWindow } from '../components/Basic/ModalWindow'\r\nimport { useFetchFirebaseData } from '../hooks/fetchFirebaseData'\r\nimport {FiPlus} from 'react-icons/fi'\r\nimport { useModal } from '../functionality/ModalClass'\r\nimport {CreateChat} from '../components/ChatPage/CreateChat'\r\nexport const ChatPage = () => {\r\n\tconst [yourChats, setYourChats] = useState([])\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tuseFetchFirebaseData(setLoading, 'chats', currentUser.chats, setYourChats, (a, b)=>{if(b.messages.length && a.messages.length) return new Date(b.messages[b.messages.length - 1].sentTime).getTime() - new Date(a.messages[a.messages.length - 1].sentTime).getTime()})\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards', minHeight: \"100%\" }}>\r\n\t\t\t<div style = {{marginBottom:'10px', display:'flex', alignItems:'start', width:'100%'}}>\r\n\r\n\t\t\t\t<button className = \"standartButton\" onClick = {()=>{toggleModal();setContent(<CreateChat/>)}}>\r\n\t\t\t\t\t<FiPlus/>\r\n\t\t\t\t\tCreate chat\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{loading ?\r\n\t\t\t\t<LoadingCircle />\r\n\t\t\t\t:\r\n\t\t\t\t<div className=\"chatsWrapper\">\r\n\t\t\t\t\t{yourChats.map((chat, index) => {\r\n\t\t\t\t\t\tconsole.log(chat)\r\n\t\t\t\t\t\treturn <ChatItem chatData={chat} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { AlbumPage } from '../pages/AlbumPage'\r\nimport { AuthorPage } from '../pages/AuthorPage'\r\nimport { DialoguePage } from '../pages/DialoguePage'\r\nimport { privateRoutes, publicRoutes } from '../routes'\r\nimport { HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nexport const ContentRouter = () => {\r\n\tconst user = false\r\n\t\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<Route path={'/authors/:authorId'} component={AuthorPage} exact/>\r\n\t\t\t<Route path={'/albums/:albumId'} component={AlbumPage} exact/>\r\n\t\t\t<Route path={'/chat/:chatId'} component={DialoguePage} exact/>\r\n\t\t\t{privateRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={HOME_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","function amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nexport default function correctTimeDisplay(seconds) {\r\n\treturn amountOfZeros(Math.floor(seconds / 60)) + \":\" + amountOfZeros(Math.floor(seconds % 60))\r\n}","import React from 'react'\r\nimport { FaBackward, FaForward, FaPause, FaPlay } from 'react-icons/fa'\r\nimport { TiArrowRepeat, TiArrowShuffle } from 'react-icons/ti'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport correctTimeDisplay from '../../functions/correctTimeDisplay'\r\nimport { ColorCircles } from './colorCircles'\r\n\r\nexport const Player = ({inputRef, textLimit = 18}) => {\r\n\tconst { \r\n\t\tfindLen,  \r\n\t\tcurrentTime, \r\n\t\tchangeCurrentTime, \r\n\t\tsongDuration, \r\n\t\tsetRepeatMode, \r\n\t\trepeatMode, \r\n\t\tplay, \r\n\t\tprevSong, \r\n\t\tplaySong, \r\n\t\tnextSong, \r\n\t\tsetShuffleMode, \r\n\t\tshuffleMode, \r\n\t\tdisplayAuthors,\r\n\t\tname, \r\n\t\tauthors, \r\n\t\tcover} = useSong()\r\n\treturn (\r\n\t\t<div className=\"player\">\r\n\t\t\t<div className=\"playerUpperSide\">\r\n\t\t\t\t<div className=\"songCover\">\r\n\t\t\t\t\t<img src={cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"nameAndAuthors\">\r\n\t\t\t\t\t<h2 title={name.length > textLimit ? name : null} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={name.length > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{name}</div>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h3 title={authors.map((el) => ' ' + el.displayName)} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={findLen() > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{displayAuthors()}</div>\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"controlPanel\">\r\n\t\t\t\t<input type=\"range\" min=\"0\" ref={inputRef} step=\"1\" value={currentTime} onChange={(event)=>{changeCurrentTime(event)}} />\r\n\t\t\t\t<div className=\"startAndEndTime\">\r\n\t\t\t\t\t<span>{correctTimeDisplay(currentTime)}</span>\r\n\t\t\t\t\t<span>{correctTimeDisplay(songDuration)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<button className=\"shuffleBtn\" onClick={() => setShuffleMode(checkNumber(shuffleMode + 1, 1))} style={shuffleMode ? { background: 'var(--transparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowShuffle style={shuffleMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={prevSong}><FaBackward /></button>\r\n\t\t\t\t\t<button onClick={playSong}>{play ? <FaPause /> : <FaPlay />}</button>\r\n\t\t\t\t\t<button onClick={nextSong}><FaForward /></button>\r\n\t\t\t\t\t<button className=\"repeatBtn\" onClick={() => setRepeatMode(checkNumber(repeatMode + 1, 2))} style={repeatMode ? { background: 'var(--transparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowRepeat style={repeatMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t\t<span style={repeatMode === 2 ? { opacity: 1 } : {}}></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { BiMusic, BiSearch } from \"react-icons/bi\";\r\nimport { FiHome, FiMessageCircle } from \"react-icons/fi\";\r\nimport { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, SEARCH_ROUTE } from \"../utils/consts\";\r\n\r\nexport const leftSideBar = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<FiHome/>,\r\n\t\ttitle:'Home',\r\n\t\tlink:HOME_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiMusic/>,\r\n\t\ttitle:'Library',\r\n\t\tlink:LIBRARY_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<BiSearch/>,\r\n\t\ttitle:'Search',\r\n\t\tlink:SEARCH_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<FiMessageCircle/>,\r\n\t\ttitle:'Chat',\r\n\t\tlink:CHAT_ROUTE\r\n\t},\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const MobileControlBarItem = ({element, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<Link to = {element.link} className = 'MobileControlBarItem' onClick = {()=>setCurrentPage(element.id)} style = {element.id === currentPage?{color:'var(--blue)'}:{}}>\t\r\n\t\t\t{element.icon}\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../../styles/BottomControlBar.css'\r\nimport {leftSideBar} from '../../data/leftSideBar'\r\nimport { MobileControlBarItem } from '../BottomControlBar/MobileControlBarItem'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { BiUserCircle } from 'react-icons/bi'\r\nimport normalizeString from '../../functions/normalizeString'\r\nexport const BottomControlBar = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst userElement = {\r\n\t\ticon:<BiUserCircle/>,\r\n\t\tlink:`/authors/${currentUser.uid}`,\r\n\t}\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.pathname.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(window.location.pathname.includes(currentUser.uid)) return true\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined?0:page.id \r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className = \"BottomControlBar\">\r\n\t\t\t{leftSideBar.map((el, i)=>{\r\n\t\t\t\treturn <MobileControlBarItem element = {el} key = {i} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t})}\r\n\t\t\t<MobileControlBarItem element = {userElement} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BottomControlBar } from './BottomControlBar'\r\n\r\nexport const FullBottomSide = () => {\r\n\tconst {setOpenFullScreenPlayer} = useSong()\r\n\treturn (\r\n\t\t<div className = \"FullBottomSide\">\r\n\t\t\t<span onClick = {()=>setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t<Player textLimit = {25}/>\r\n\t\t\t</span>\r\n\t\t\t<BottomControlBar/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Loading = ({currentTime, timeSpan, id}) => {\r\n\treturn (\r\n\t\t<div className = \"Loading\" id = {id}>\r\n\t\t\t<div className=\"outer\" style = {{pointerEvents:'none'}}>\r\n\t\t\t\t<div className=\"inner\" style = {currentTime/timeSpan < 1?{width:(currentTime/timeSpan)*100 + \"%\"}:{width:0 + \"%\", opacity:'0'}}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { Share } from '../components/FullScreenPlayer/Share';\r\nimport { Options } from '../components/FullScreenPlayer/Options';\r\nimport { Lyrics } from '../components/FullScreenPlayer/Lyrics';\r\nimport { Queue } from '../components/FullScreenPlayer/Queue';\r\nimport { BiDotsVerticalRounded, BiShare } from 'react-icons/bi';\r\nimport {RiPlayListFill} from 'react-icons/ri'\r\nimport {FiAlignLeft} from 'react-icons/fi'\r\nimport { TiDocumentText } from 'react-icons/ti';\r\nimport { AuthorsList } from '../components/FullScreenPlayer/AuthorsList';\r\nimport { SongInfo } from '../components/Basic/SongInfo';\r\nimport { AddToPlaylists } from '../components/FullScreenPlayer/AddToPlaylists';\r\nexport const rightSide = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<BiShare/>,\r\n\t\ttitle:'Share',\r\n\t\tcomponent:Share\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiDotsVerticalRounded/>,\r\n\t\ttitle:'More',\r\n\t\tcomponent:Options\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<TiDocumentText/>,\r\n\t\ttitle:'Lyrics',\r\n\t\tcomponent:Lyrics\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<RiPlayListFill/>,\r\n\t\ttitle:'Queue',\r\n\t\tcomponent:Queue\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\ticon:null,\r\n\t\ttitle:'Go To Authors',\r\n\t\tcomponent:AuthorsList\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\ticon:null,\r\n\t\ttitle:'Add to playlist',\r\n\t\tcomponent:AddToPlaylists\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\ticon:null,\r\n\t\ttitle:'Info',\r\n\t\tcomponent:SongInfo\r\n\t},\r\n]","import React, { useState } from 'react'\r\nimport { FaFacebookF, FaTelegramPlane, FaVk } from 'react-icons/fa'\r\nimport { FiCopy } from 'react-icons/fi'\r\nimport { AiFillInstagram } from 'react-icons/ai'\r\nimport { ImWhatsapp } from 'react-icons/im'\r\nimport { friends } from '../../data/friends'\r\nimport { HiSearch } from 'react-icons/hi'\r\nimport { BiCheckCircle } from 'react-icons/bi'\r\nimport { chat } from '../../data/chat'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { authors } from '../../data/authors'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nexport const Share = () => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst socialMedia = [\r\n\t\t<ImWhatsapp />,\r\n\t\t<FaFacebookF />,\r\n\t\t<FaTelegramPlane />,\r\n\t\t<FaVk />,\r\n\t\t<AiFillInstagram />\r\n\t]\r\n\treturn (\r\n\t\t<div className=\"Share\">\r\n\t\t\t<button className=\"shareCopyLink\">\r\n\t\t\t\t<FiCopy />\r\n\t\t\t\tCopy link\r\n\t\t\t</button>\r\n\t\t\t<div className=\"shareOnSocial\">\r\n\t\t\t\t{socialMedia.map((social, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"shareSocialIcon\" key={index}>\r\n\t\t\t\t\t\t\t{social}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sharePeopleShort\">\r\n\t\t\t\t<FriendsListToShareWith item = {currentSongData} whatToShare = {'song'}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {MdPlaylistAdd} from 'react-icons/md'\r\nimport { BiAlbum, BiHeart, BiInfoCircle, BiPlusCircle, BiUserCircle } from \"react-icons/bi\";\r\nimport {FiTrash2, FiPlusCircle, FiInfo} from 'react-icons/fi'\r\nimport { useAuth } from '../../functionality/AuthContext';\r\nimport { useSong } from '../../functionality/SongPlay/SongContext';\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton';\r\nexport const Options = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {currentSongData, setRightSideCurrentPage} = useSong()\r\n\treturn (\r\n\t\t<div className='Options'>\r\n\t\t\t<div className='OptionItem' >\r\n\t\t\t\t<AddOrDeleteButtonFull song = {currentSongData}/>\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(4)}>\r\n\t\t\t\t<BiUserCircle />\r\n\t\t\t\tGo to author\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(5)}>\r\n\t\t\t\t<MdPlaylistAdd />\r\n\t\t\t\tAdd to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(6)}>\r\n\t\t\t\t<FiInfo/>\r\n\t\t\t\tInfo\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Loading } from './Loading'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { Slider } from '../Tools/Slider'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nexport const Lyrics = () => {\r\n\tconst { setIsThereKaraoke, currentSongData, setCurrentSongData, isThereKaraoke, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, currentSong, lyrics, rightSideCurrentPage, openFullScreenPlayer } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [inputKaraokeTime, setInputKaraokeTime] = useState(0)\r\n\tconst [karaokeModeratorTimes, setKaraokeModeratorTimes] = useState([])\r\n\tconst [lyricsModeratorMode, setLyricsModeratorMode] = useState(0)\r\n\tconst [canUpdateLyrics, setCanUpdateLyrics] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) currentParagraphRef.current.scrollIntoView()\r\n\t}, [currentParagraph])\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(lyrics[0] && lyrics[0].startTime !== 'undefined'){\r\n\t\t\tlyrics.forEach(paragraph => {\r\n\t\t\t\tkaraokeModeratorTimes.push(paragraph.startTime)\r\n\t\t\t});\r\n\t\t\tsetCanUpdateLyrics(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet tempSongData = currentSongData\r\n\t\t// console.log(tempSongData)\r\n\t\tif (tempSongData !== undefined && inputKaraokeTime !== 0) {\r\n\t\t\ttempSongData.lyrics.forEach((paragraph, index) => {\r\n\t\t\t\tparagraph.startTime = karaokeModeratorTimes[index] || 'undefined'\r\n\t\t\t})\r\n\t\t\tsetCurrentSongData(tempSongData)\r\n\t\t\tsetIsThereKaraoke(true)\r\n\t\t}\r\n\r\n\t\tif(!currentSongData.lyrics.some(paragraph=>paragraph.startTime === 'undefined')) setCanUpdateLyrics(true)\r\n\t\telse setCanUpdateLyrics(false)\r\n\t}, [inputKaraokeTime])\r\n\tfunction updateLyrics() {\r\n\t\t//TODO: add if statement to prevent adding lyrics time spans to not everysingle paragraph block\r\n\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\tlyrics: currentSongData.lyrics\r\n\t\t})\r\n\t}\r\n\r\n\t// console.log(currentSongData)\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Lyrics\">\r\n\t\t\t{\r\n\t\t\t\tcurrentUser.isAdmin ?\r\n\t\t\t\t\t<Slider pages={['Listen mode', 'Edit Mode']} currentPage={lyricsModeratorMode} setCurrentPage={setLyricsModeratorMode} /> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tisThereKaraoke ?\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i} id = {i}  onClick={(e) => changeCurrentTime(e, el.startTime)} style={play ? currentParagraph === i ? {} : Math.abs(currentParagraph - i) < 2 ? { opacity: .5, filter: 'blur(1px)' } : { opacity: .2, filter: 'blur(2px)' } : {}} ref={currentParagraph === i ? currentParagraphRef : null} >\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t<span onClick={e => e.stopPropagation()}>{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} </span>\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>{addLyricsBlock(i, 'up')}}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>{addLyricsBlock(i, 'down')}}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tel.text === \"@loading\" ?\r\n\t\t\t\t\t\t\t\t\t\t<Loading currentTime={currentTime - lyrics[i].startTime} timeSpan={lyrics[i + 1].startTime - lyrics[i].startTime} id = {i}/>\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\tel.text === \"@end\" ? <></>\r\n\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t<p key={i} id = {i} style={currentParagraph === i ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t{} : window.innerWidth > 1000 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMath.abs(currentParagraph - i) < 2 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ transform: 'scale(.8) translateX(-58px)' } : { transform: 'scale(.75) translateX(-78px)' } :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMath.abs(currentParagraph - i) < 2 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ transform: 'scale(.8) translateX(-11.5%)' } : { transform: 'scale(.75) translateX(-15.6%)' }}>{el.text}</p>\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} \r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'up')}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'down')}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<p>{el.text}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<h6 className={\"lyricsAuthors \" + (currentParagraph === lyrics.length - 1 ? \"active\" : \"\")}>Authors:  {displayAuthors()}</h6>\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<button onClick={canUpdateLyrics?updateLyrics:null} className=\"updateLyricsBtn\" style = {!canUpdateLyrics?{opacity:0.3}:{}}>Update Lyrics</button> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { SongItem } from './SongItem'\r\n\r\nexport const Queue = () => {\r\n\tconst { currentSongQueue, currentSongPlaylistSource, setOpenFullScreenPlayer } = useSong()\r\n\treturn (\r\n\t\t<div className=\"Queue\">\r\n\t\t\t<div className=\"queueNowIsPlaying\">\r\n\t\t\t\t<h5 style={{ marginTop: 2 }}>\r\n\t\t\t\t\tNow is playing:\r\n\t\t\t\t\t<Link onClick={() => setOpenFullScreenPlayer(false)} to={currentSongPlaylistSource.source} className=\"queueAlbumName\">\r\n\t\t\t\t\t\t<div className=\"queueImage\">\r\n\t\t\t\t\t\t\t<img src={currentSongPlaylistSource.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>{shortWord(currentSongPlaylistSource.name, 25)}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t\t{currentSongQueue.map((song, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SongItem song={song} localIndex={index} key={index} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\n\r\nexport const AuthorsList = () => {\r\n\tconst { displayAuthorsFull } = useSong()\r\n\treturn (\r\n\t\t<div className=\"rightSideAuthorsList\" >\r\n\t\t\t<div className=\"rightSideAuthorsListCentralBlock\">\r\n\t\t\t\t{displayAuthorsFull()}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../../App.css';\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { BiChevronLeft } from 'react-icons/bi'\r\nimport { rightSide } from '../../data/playerRightSide'\r\nimport { Player } from '../FullScreenPlayer/Player';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { useSong } from '../../functionality/SongPlay/SongContext';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport {useSwipeable} from 'react-swipeable'\r\nimport checkNumber from '../../functions/checkNumber';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\n\r\nexport default function FullScreenPlayer() {\r\n  const {\r\n    imgColors,\r\n    inputRef,\r\n    rightSideCurrentPage,\r\n    setRightSideCurrentPage,\r\n    openFullScreenPlayer,\r\n    setOpenFullScreenPlayer,\r\n    lyrics,\r\n    openMenu,\r\n    setOpenMenu\r\n  } = useSong()\r\n  \r\n  const lyricsRef = useRef(null)\r\n  const [transformTransition, setTransformTransition] = useState(0.05)\r\n  const [mobileMenuTransition, setMobileMenuTransition] = useState(0)\r\n  // const [swipeDown, setSwipeDown] = useState(false)\r\n  const [deltaY, setDeltaY] = useState(0)\r\n  const [deltaYMobileMenu, setDeltaYMobileMenu] = useState(0)\r\n  const mobileContentScroll = useRef()\r\n  // setup ref for your usage\r\n  const mobileMenuRef = React.useRef();\r\n  useOutsideClick(mobileMenuRef, setOpenMenu)\r\n  const handlers = useSwipeable({\r\n    // onSwiped: (eventData) => {setSwipeDown(eventData.dir === 'Down')},\r\n    onSwiping: (event) => { if (event.deltaY > 0) setDeltaY(event.deltaY); }\r\n  })\r\n\r\n  // setup ref for your usage\r\n  const bgRef = React.useRef();\r\n\r\n  const handlersForMobileMenu = useSwipeable({\r\n    onSwiping: (event) => {event.event.stopPropagation();if (openMenu && mobileContentScroll.current.scrollTop === 0 &&  event.deltaY > 0) setDeltaYMobileMenu(event.deltaY); else if (!openMenu && event.deltaY < 0) setDeltaYMobileMenu(event.deltaY) },\r\n    onSwipedLeft:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage+1, 3))},\r\n    onSwipedRight:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage-1, 3))}\r\n  })\r\n  \r\n\r\n  function returnToInitialMobileMenu() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setMobileMenuTransition(0)\r\n    dropDelta = setTimeout(() => {\r\n      setMobileMenuTransition(0.2)\r\n      setDeltaYMobileMenu(0)\r\n    }, 300)\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    if (deltaY > 150) {\r\n      setOpenFullScreenPlayer(false)\r\n    }\r\n  }, [deltaY])\r\n\r\n  useEffect(() => {\r\n    if (!openMenu && deltaYMobileMenu < -100) {\r\n      setOpenMenu(true)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else if (openMenu && deltaYMobileMenu > 150) {\r\n      setOpenMenu(false)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else {\r\n      returnToInitialMobileMenu()\r\n    }\r\n  }, [deltaYMobileMenu])\r\n\r\n  \r\n\r\n  function returnToInitial() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setTransformTransition(0.2)\r\n    dropDelta = setTimeout(() => {\r\n      setDeltaY(0)\r\n      setTransformTransition(0)\r\n    }, 100)\r\n  }\r\n\r\n  const refPassthroughBg = (el) => {\r\n    handlers.ref(el);\r\n    bgRef.current = el;\r\n  }\r\n\r\n  const refPassthroughMobileMenu = (el) => {\r\n    handlersForMobileMenu.ref(el);\r\n    mobileMenuRef.current = el;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (imgColors.length !== 0) {\r\n      document.documentElement.style.setProperty('--themeColor', imgColors[1]);\r\n      document.documentElement.style.setProperty('--themeColor2', imgColors[0]);\r\n      document.documentElement.style.setProperty('--themeColor3', imgColors[2]);\r\n      document.documentElement.style.setProperty('--themeColor4', imgColors[5]);\r\n      document.documentElement.style.setProperty('--themeColorTransparent', imgColors[0] + '6e');\r\n    }\r\n  }, [imgColors])\r\n\r\n\r\n  function rightSideContent(currentPage) {\r\n    let RightSidePage = rightSide[currentPage].component\r\n    return (<RightSidePage />)\r\n  }\r\n\r\n  function noLyrics() {\r\n    return lyrics.length === 0\r\n  }\r\n\r\n  function changeRightSidePage(el) {\r\n    if (el.id === 2 && noLyrics()) return null\r\n    setMobileMenuTransition(0.2)\r\n    setRightSideCurrentPage(el.id);\r\n    setOpenMenu(true)\r\n  }\r\n  return (\r\n    <div className=\"bg\"\r\n      style={\r\n        openFullScreenPlayer ?\r\n          {\r\n            top: 0,\r\n            opacity: 1,\r\n            visibility: 'visible',\r\n            zIndex: 10,\r\n            transform: `translateY(${deltaY}px)`,\r\n            borderRadius: `${deltaY < 20 ? deltaY : 20}px ${deltaY < 20 ? deltaY : 20}px 0 0`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          } :\r\n          {\r\n            transform: `translateY(${deltaY}px)`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          }\r\n      }\r\n      ref={refPassthroughBg}\r\n      {...handlers}\r\n      onTouchEnd={returnToInitial}\r\n    >\r\n\r\n      <div className=\"auroraWrapper\">\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n      </div>\r\n      \r\n      <div className=\"closeFullScreen\" onClick={() => { setOpenFullScreenPlayer(false) }}>\r\n        {window.innerWidth > 1000 ? <HiChevronDown /> : <FiMinus style={{ opacity: .6 }} />}\r\n      </div>\r\n      <div className=\"FullScreenPlayer\">\r\n\r\n        <div className=\"leftSide\" style={!openMenu ? { width: '100%' } : {}}>\r\n          <Player inputRef={inputRef} />\r\n        </div>\r\n        {window.innerWidth > 1000 ?\r\n          <div className=\"rightSideWrapper\" style={!openMenu ? { transform: 'translateX(calc(100% - 90px))', width: 0 } : {}}>\r\n            <button className=\"menuBtn\" style={openMenu ? { transform: 'rotate(180deg)' } : { opacity: 0, visibility: 'hidden' }} onClick={() => setOpenMenu(!openMenu)}><BiChevronLeft /></button>\r\n            <div className=\"rightSideControl\">\r\n              {rightSide.map((el, i) => {\r\n                return (\r\n                  <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--themeColor)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={() => changeRightSidePage(el)}>\r\n                    {el.icon}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"rightSide\" ref={lyricsRef} style={!openMenu ? { display: 'none' } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div> :\r\n          <div className=\"mobilePlayerMenu\" {...handlersForMobileMenu} ref={refPassthroughMobileMenu} style={\r\n            openMenu ?\r\n              {\r\n                top: `calc(100% - calc(70vh + 55px) + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n\r\n              } :\r\n              {\r\n                top: `calc(100% - 55px + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n              }\r\n\r\n          }\r\n          // onTouchStart = {returnToInitialMobileMenu}\r\n          >\r\n            <div className=\"mobilePlayerMenuClose\">\r\n              <FiMinus style={{ opacity: .6, width: '50px' }} onClick={() => setOpenMenu(!openMenu)} />\r\n            </div>\r\n            <div className=\"controlIconsWrapper\">\r\n              {rightSide.map((el, i) => {\r\n                if(i <= 3){\r\n                  return (\r\n                    <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--transparentWhite)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={(e) => changeRightSidePage(el)}>\r\n                      {el.title}\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n            <div className=\"mobilePlayerMenuContent\" ref = {mobileContentScroll} style = {!openMenu?{opacity:0}:{}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NavigationItem({id, title, icon, link, currentPage, setCurrentPage}) {\r\n\treturn (\r\n\t\t<Link to = {link}>\r\n\t\t\t<div className={\"NavigationItem \" + (id === currentPage?\"active\":\"\")} onClick={() => setCurrentPage(id)}>\r\n\t\t\t\t<div className=\"icon\">{icon}</div>\r\n\t\t\t\t<b>{title}</b>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FiMessageCircle, FiUser } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport { findChatURL } from '../../functions/findChatURL'\r\nimport getUID from '../../functions/getUID'\r\nimport shareWithOneFriend from '../../functions/shareWithOneFriend'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\n\r\nexport const Person = ({index, friend}) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL(friend.uid, currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [])\r\n\tconst {currentSong} = useSong()\r\n\treturn (\r\n\t\t<div className=\"person\" key={index} id={friend.uid} >\r\n\t\t\t<div className=\"personBtns\">\r\n\t\t\t\t<Link to={`/chat/${friendChatId}`}>\r\n\t\t\t\t\t<button onClick = {()=>{if(shouldCreate) createChat([currentUser.uid, friend.uid] ,friendChatId)}}><FiMessageCircle /></button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={`/authors/${friend.uid}`}>\r\n\t\t\t\t\t<button><FiUser /></button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={(e) => shareWithOneFriend(e, currentSong)}><BiShare /></button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pesronImg\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t<img src={friend.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<IsUserOnlineCircle userUID = {friend.uid}/>\r\n\t\t\t<div className=\"personName\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t{friend.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiPlayCircle, FiPlusCircle, FiShare } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\n\r\nexport const TinyPlaylist = ({playlist}) => {\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"TinyPlaylist\">\r\n\t\t\t<div className=\"TinyPlaylistBtns\">\r\n\t\t\t\t<button onClick = {()=>{toggleModal();setContent(<FriendsListToShareWith item = {playlist} whatToShare = {\"playlist\"}/>)}}><FiShare/></button>\r\n\t\t\t\t<button><FiPlusCircle/></button>\r\n\t\t\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t\t\t<button><BiAlbum /></button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button><FiPlayCircle/></button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"TinyPlaylistImg\">\r\n\t\t\t\t<img src={playlist.image} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div style = {{display:'flex', flexDirection:'column'}}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{shortWord(playlist.name, 15) }\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style = {{fontSize:'0.8em', color:'grey', fontWeight:'500'}}>\r\n\t\t\t\t\t{playlist.isAlbum?\"album\":\"playlist\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const NotificationCircle = () => {\r\n\treturn (\r\n\t\t<div className = \"NotificationCircle\"></div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { leftSideBar } from '../../data/leftSideBar'\r\nimport NavigationItem from '../LeftsideBar/NavigationItem'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nimport '../../styles/LeftsideBar.css'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BiFolderPlus, BiFullscreen} from 'react-icons/bi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { Person } from '../LeftsideBar/Person'\r\nimport { CreatePlaylistPage } from '../LibraryPage/CreatePlaylistPage'\r\nimport { TinyPlaylist } from '../LeftsideBar/TinyPlaylist'\r\nimport { NotificationCircle } from './NotificationCircle'\r\nexport const LeftsideBar = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {\r\n\t\tleftSideBarInputRef,\r\n\t\tsetOpenFullScreenPlayer,\r\n\t\tcurrentSongData,\r\n\t\tyourFriends,\r\n\t\tyourPlaylists\r\n\t} = useSong()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [currentFriendToPlaylistPage, setCurrentFriendToPlaylistPage] = useState(0)\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.pathname.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div className=\"LeftsideBar\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t\t\t<h3>Soundbubble</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t<Link to={`/authors/${currentUser.uid}`}>\r\n\t\t\t\t\t<div className=\"person\">\r\n\t\t\t\t\t\t{currentUser.friends.some(friend=>friend.status === 'requested')?<NotificationCircle/>:null}\r\n\t\t\t\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t\t\t\t<img src={currentUser.photoURL} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"personName\">\r\n\t\t\t\t\t\t\t{currentUser.displayName}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"NavigationPanel\">\r\n\t\t\t\t{leftSideBar.map(({ id, title, icon, link }, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavigationItem key={index} id={id} title={title} icon={icon} link={link} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer friendsAndPlaylists\">\r\n\t\t\t\t<span style={{display: !currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromBottom .2s forwards' }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tyourFriends.length > 0?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t{yourFriends.map((friend, index) => {\r\n\t\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Person index={friend.uid} friend={friend}/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<h4 className=\"seeMoreBtn\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={currentSongData} whatToShare = {\"song\"}/>) }}>See more</h4>\r\n\t\t\t\t\t\t</>:\r\n\t\t\t\t\t\t<h4 style = {{position:'absolute', left:'50%', top:\"50%\", transform:'translate(-50%, -50%)', width:'100%', display:'flex', alignItems:'center', justifyContent:'center'}}>No friends added</h4>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{display: currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromTop .2s forwards' }}>\r\n\t\t\t\t\t{yourPlaylists.map((playlist, index) => {\r\n\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\treturn <TinyPlaylist playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }} style = {{margin:'5px 0'}}>\r\n\t\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\t\tCreate Playlist\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"upAndDownBtns\">\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(0)} style={!currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronUp /></button>\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(1)} style={currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronDown /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t<div className=\"littlePlayer\">\r\n\t\t\t\t\t<Player textLimit={15} inputRef={leftSideBarInputRef} />\r\n\t\t\t\t\t<div className=\"fullScreenBtn\" onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t\t\t<BiFullscreen />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { ContentRouter } from '../../routers/ContentRouter'\r\nimport { FullBottomSide } from '../Mobile/FullBottomSide'\r\nimport FullScreenPlayer from './FullScreenPlayer'\r\nimport { LeftsideBar } from './LeftsideBar'\r\nimport { ModalWindow } from './ModalWindow'\r\nimport '../../styles/FullScreenPlayer.css'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\n\r\nexport const ContentWrapper = () => {\r\n\tconst { songRef, loadSongData, playing, songSrc } = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst fiveMinutes = 300000 // ten minutes, or whatever makes sense for your app\r\n\tconst [intervalExciter, setIntervalExciter] = useState(true)\r\n\t// \"maintain connection\"\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t\t\tsetIntervalExciter(!intervalExciter)\r\n\t\t}, fiveMinutes)\r\n\t\treturn () => clearInterval(interval);\r\n\t }, [intervalExciter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t}, [])\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<audio src={songSrc} ref={songRef} onLoadedData={loadSongData} onTimeUpdate={playing} ></audio>\r\n\t\t\t<div className=\"Wrapper\">\r\n\t\t\t\t{window.innerWidth > 1000 ? <LeftsideBar /> : <FullBottomSide />}\r\n\t\t\t\t<div className=\"Content\">\r\n\t\t\t\t\t<ContentRouter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalWindow />\r\n\t\t\t</div>\r\n\t\t\t<FullScreenPlayer />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { ContentWrapper } from '../components/Basic/ContentWrapper'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { publicRoutes } from '../routes'\r\nimport { LOGIN_ROUTE} from '../utils/consts'\r\nexport const AppRouter = () => {\r\n\tconst {currentUser} = useAuth()\r\n\treturn currentUser ?\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t<Route path='/' component = {ContentWrapper} />\r\n\t\t</Switch>\r\n\t):\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t{publicRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={LOGIN_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","import './App.css';\r\nimport React from 'react'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { AppRouter } from './routers/AppRouter';\r\nexport default function App() {\r\n  \r\n\r\n  return (\r\n    <HashRouter basename = \"/\">\r\n      <AppRouter/>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { AuthProvider } from './functionality/AuthContext';\r\nimport { ModalClassProvider } from './functionality/ModalClass';\r\nimport { SongProvider } from './functionality/SongPlay/SongContext';\r\nReactDOM.render(\r\n  \r\n  <React.StrictMode>\r\n    <AuthProvider>\r\n      <SongProvider>\r\n        <ModalClassProvider>\r\n          <App />\r\n        </ModalClassProvider>\r\n      </SongProvider>\r\n    </AuthProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}