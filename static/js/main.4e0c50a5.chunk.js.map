{"version":3,"sources":["images/Logo3.svg","components/Loading/LoadingData.jsx","components/Basic/AddToListCircle.jsx","components/Basic/PersonTiny.jsx","firebase.js","functions/other/checkNumber.js","functions/other/shuffleSongs.js","hooks/useConditionFunc.js","functions/other/normalizeString.js","functions/find/findVariantsOfName.js","contexts/AuthContext.jsx","contexts/ModalContext.jsx","functions/fetch/fetchItemsList.js","functions/add/addSongToHistory.js","contexts/SongContext.jsx","functions/check/checkKaraoke.js","utils/consts.js","components/MessagePlates/ErrorPlate.jsx","components/Loading/FullScreenLoading.jsx","components/SignIn-Up/BlurredBg.jsx","components/SignIn-Up/TitleAndLogo.jsx","components/SignIn-Up/RadioBtn.jsx","components/AuthorPage/AuthorItemBig.jsx","functions/other/shortWord.js","contexts/ScreenContext.jsx","hooks/usePlaylistSongs.js","components/Playlist/DeletedPlaylist.jsx","components/AuthorPage/PlaylistItem.jsx","components/FullScreenPlayer/colorCircles.jsx","functions/other/rightFormatForBigNumber.js","hooks/useOutsideClick.js","functions/add/addSongToLibrary.js","functions/other/filterArrayWithArray.js","functions/other/deleteSongFromLibrary.js","components/FullScreenPlayer/AddOrDeleteSongButton.jsx","functions/other/getUID.js","functions/create/createChat.js","functions/find/findChatURL.js","functions/other/sendMessage.js","functions/other/shareWithManyFriends.js","components/Loading/LoadingCircle.jsx","components/Basic/SearchBar.jsx","hooks/useFindSomething.js","components/Basic/FriendsListToShareWith.jsx","functions/display/displayDate.js","components/AuthorPage/PersonTinyVerticalItem.jsx","components/Basic/SongInfo.jsx","hooks/useAddOrDeleteSong.js","components/Basic/Hint.jsx","components/Playlist/AddToPlaylistItem.jsx","components/FullScreenPlayer/AddToPlaylists.jsx","functions/display/displayAuthorsStr.js","functions/other/transformLyricsToArrayOfObject.js","components/AdminAndAuthor/EditSong.jsx","components/Windows/SongItemMoreWindow.jsx","components/FullScreenPlayer/AuthorsList.jsx","components/Windows/SongItemMobileMoreWindow.jsx","components/FullScreenPlayer/SongItem.jsx","components/HomePage/MainBanner.jsx","functions/find/findIfSongIsNew.js","components/Buttons/MoreBtn.jsx","components/Basic/TitleWithMoreBtn.jsx","components/Lists/SongList.jsx","components/HomePage/RecentSongs.jsx","functions/find/findSimilarArtists.js","components/Lists/AuthorsList.jsx","components/HomePage/RecommendedAuthors.jsx","components/MessagePlates/ImportantMessage.jsx","components/HomePage/RecommendedSongs.jsx","components/HomePage/Top15Songs.jsx","components/Lists/AlbumList.jsx","components/Tools/Slider.jsx","images/wave2.svg","components/LibraryPage/LibraryPlaylistItem.jsx","functions/find/findVisiblePlaylists.js","components/LibraryPage/SongsPage.jsx","components/Basic/SongItemChoice.jsx","components/AddWindow/AddPlaylist.jsx","components/LibraryPage/CreatePlaylistPage.jsx","components/LibraryPage/PlaylistsPage.jsx","components/LibraryPage/AuthorsPage.jsx","components/Basic/IsUserOnlineCircle.jsx","components/ChatPage/AmountOfUnseenMessages.jsx","components/ChatPage/SeenByCircle.jsx","components/ChatPage/LastSentMessage.js","components/ChatPage/ChatItem.js","functions/find/findAmountOfUnseenMessages.js","components/Basic/DownloadPhotoButton.jsx","components/ChatPage/CreateChat.jsx","components/Basic/BackBtn.jsx","components/ChatPage/AttachmentList.jsx","components/ChatPage/ChatInfo.jsx","hooks/useFetchDocs.js","components/ChatPage/WallpaperItem.jsx","components/ChatPage/Wallpapers.jsx","hooks/fetchFirebaseData.js","components/ChatPage/ChatMoreBtn.js","components/Basic/LastSeen.jsx","components/ChatPage/ChatHeader.js","functions/find/findWhatToWriteInResponseItem.js","components/ChatPage/AttachedItemsInChatInput.jsx","components/AuthorPage/ChatInput.jsx","components/ChatPage/DateOnTop.jsx","hooks/useOnScreen.js","components/Basic/SongItemLoading.jsx","components/ChatPage/MessageItem.js","components/ChatPage/MessageField.jsx","components/ChatPage/DisplayChatMessages.jsx","components/AuthorPage/SmallImages.jsx","components/ChatPage/TypingAnimation.jsx","components/ChatPage/ChatMessagesWindow.jsx","components/AuthorPage/ChatWithFriendButton.jsx","components/AlbumPage/CustomizeAlbum.jsx","components/AuthorPage/CustomizeAuthor.jsx","functions/add/addAuthorToLibrary.js","functions/add/addFriend.js","functions/add/addPlaylistToLibrary.js","functions/other/removePlaylistFromLibrary.js","components/Settings/GeneralSettings.jsx","components/Settings/SettingsList.jsx","components/Buttons/SeeMoreRoundButton.jsx","components/Lists/TinyPersonsList.jsx","components/Info/AlbumInfo.jsx","components/Info/AuthorInfo.jsx","components/Windows/AuthorMoreWindow.jsx","hooks/useAlbumAuthors.js","components/AuthorPage/Header.jsx","functions/delete/deletePlaylist.js","functions/other/quitPlaylist.js","functions/delete/deleteFriend.js","components/AddWindow/AddSong.jsx","components/AdminAndAuthor/AddWindow.jsx","components/AuthorPage/FriendRequestItem.jsx","components/AuthorPage/FriendRequest.jsx","components/AuthorPage/PersonTinyList.jsx","functions/find/findAuthorsAlbums.js","components/AuthorPage/Playlists.jsx","components/AuthorPage/SimilarArtists.jsx","components/AuthorPage/TopSongs.jsx","routes.js","pages/LogInPage.jsx","pages/SignUpPage.jsx","pages/Home.jsx","pages/LibraryPage.jsx","pages/SearchPage.jsx","pages/ChatPage.jsx","pages/PageNotFound.jsx","pages/DialoguePage.jsx","hooks/useRealTimeMessages.js","pages/AlbumPage.jsx","pages/AuthorPage.jsx","pages/HistoryPage.jsx","routers/ContentRouter.js","functions/other/correctTimeDisplay.js","functions/find/findLenOfAuthors.js","components/FullScreenPlayer/Player.jsx","data/leftSideBar.js","components/BottomControlBar/MobileControlBarItem.js","components/Mobile/BottomControlBar.jsx","components/Mobile/FullBottomSide.jsx","components/FullScreenPlayer/Loading.jsx","components/FullScreenPlayer/LyricsParagraph.jsx","data/playerRightSide.js","components/FullScreenPlayer/Share.jsx","components/FullScreenPlayer/Options.jsx","components/FullScreenPlayer/Lyrics.jsx","components/FullScreenPlayer/Queue.jsx","components/Basic/FullScreenPlayer.jsx","components/LeftsideBar/NavigationItem.jsx","components/LeftsideBar/Person.jsx","components/LeftsideBar/TinyPlaylist.jsx","components/Basic/NotificationCircle.jsx","components/Basic/LeftsideBar.jsx","components/Basic/ModalWindow.jsx","components/Windows/ConfirmWindow.jsx","hooks/useMediaMetadata.js","components/Basic/ContentWrapper.jsx","hooks/useUpdateListenCount.js","routers/AppRouter.js","App.js","index.js"],"names":["LoadingData","className","loading","src","Logo","alt","AddToListCircle","listOfChosenItems","setListOfChosenItems","itemId","undefined","onClick","e","preventDefault","includes","type","filteredList","filter","el","style","color","prev","PersonTiny","data","chosenArray","setChosenArray","restProps","uid","photoURL","displayName","app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","storage","firestore","checkNumber","number","max","min","shuffleSongs","songsArray","randomIndexesArray","newSongsNumbersArray","Array","length","counter","randNum","Math","floor","random","push","useConditionFunc","currentUser","fetchFunc","changeCondition","dep","useEffect","JSON","stringify","normalizeString","str","replace","toLowerCase","findVariantsOfName","name","variantsOfName","personName","i","substr","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","setCurrentUser","userId","setUserId","setLoading","searchValue","setSearchValue","collection","doc","onSnapshot","user","onAuthStateChanged","a","value","login","email","password","setError","signInWithEmailAndPassword","then","catch","err","message","signup","role","imageColors","createUserWithEmailAndPassword","result","set","isAuthor","parseInt","isVerified","numberOfListenersPerMonth","ownSongs","ownPlaylists","addedSongs","addedPlaylists","addedAuthors","lastSongPlayed","chats","friends","subscribers","regDate","FieldValue","serverTimestamp","place","history","logout","signOut","Provider","ModalContext","useModal","ModalClassProvider","openModal","setOpenModal","content","setContent","isOpenConfirm","setIsOpenConfirm","confirmText","rejectText","onConfirmL","onReject","confirmContent","setConfirmContent","closeConfirm","toggleModal","openConfirm","question","onConfirm","fetchItemsList","list","setList","resManipulation","res","lastFunc","lengthRestrict","assignMode","tempArray","map","get","Promise","all","finalResult","temp","forEach","item","find","addSongToHistory","songId","songsList","unshift","update","SongContext","useSong","SongProvider","yourSongs","setYourSongs","yourPlaylists","setYourPlaylists","yourAuthors","setYourAuthors","yourFriends","setYourFriends","currentSongQueue","setCurrentSongQueue","currentSong","setCurrentSong","currentSongInQueue","setCurrentSongInQueue","currentSongPlaylistSource","setCurrentSongPlaylistSource","inputRange","setInputRange","id","currentSongData","setCurrentSongData","imgColors","setImgColors","play","setPlay","currentTime","setCurrentTime","songDuration","setSongDuration","repeatMode","setRepeatMode","shuffleMode","setShuffleMode","currentParagraph","setCurrentParagraph","isThereKaraoke","setIsThereKaraoke","openFullScreenPlayer","setOpenFullScreenPlayer","songRef","useRef","currentParagraphRef","inputRef","leftSideBarInputRef","rightSideCurrentPage","setRightSideCurrentPage","openMenu","setOpenMenu","fetchQueue","lastQueue","findIndex","fetchYourSongs","slice","reverse","fetchCurrentSongInitial","tempSongObject","songSrc","authors","cover","listens","releaseDate","lyrics","curSong","curQueue","source","image","docRef","exists","songData","error","console","log","defineCurrentParagraph","first","last","roundedTime","parseFloat","current","toFixed","midPoint","blockStartTime","startTime","nextBlockStartTime","correctSongNumber","currentSongId","playlistId","String","concat","friend","status","obj","shuffledSongsArray","song","document","title","nextSong","prevSong","playSong","pause","playing","event","target","defineCurrentParagraphLight","changeCurrentTime","localName","displayAuthors","authorsList","separatingSign","to","stopPropagation","displayAuthorsFull","loadSongData","duration","window","innerWidth","LOGIN_ROUTE","SIGNUP_ROUTE","HOME_ROUTE","LIBRARY_ROUTE","SEARCH_ROUTE","CHAT_ROUTE","HISTORY_ROUTE","ErrorPlate","errorMessage","FullScreenLoading","opacity","visibility","BlurredBg","TitleAndLogo","RadioBtn","currentActive","label","fontWeight","background","AuthorItemBig","listOfChosenAuthors","setListOfChosenAuthors","shortWord","word","len","ScreenContext","useScreen","ScreenProvider","screenWidth","setScreenWidth","innerHeight","screenHeight","setScreenHeight","isMobile","setIsMobile","handleResize","addEventListener","removeEventListener","usePlaylistSongs","playlist","playlistSongs","setPlaylistSongs","listSongsIds","songs","albumSong","DeletedPlaylist","textDecoration","display","justifyContent","alignItems","width","height","margin","PlaylistItem","listOfChosenAlbums","setListOfChosenAlbums","playlistDate","Date","creationDate","playSongsInPlaylist","backgroundImage","fontSize","marginLeft","isAlbum","getFullYear","ColorCircles","transform","rightFormanForBigNumber","useOutsideClick","ref","setFunc","handleClickOutside","contains","addSongToLibrary","songAuthorsUIDS","author","finalAuthorsUIDS","authorId","newList","filterArrayWithArray","whatToFilter","withWhatToFilter","this","indexOf","deleteSongFromLibrary","songNum","songObj","filtered","finalFilteredAuthors","AddOrDeleteButtonFull","getUID","c","piece","toString","createChat","participants","chatUID","chatName","chatImage","admins","messages","wallpaper","typing","personId","chatInfo","findChatURL","allParticipants","setShouldCreate","setFriendChatId","foundChat","chatId","where","docs","chat","count","every","sendMessage","chatData","sender","messageText","attachedSongs","attachedAlbums","attachedAuthors","inResponseToMessage","tempMessages","sentTime","seenBy","shareWithFriends","shareList","whatToShare","sortedFriends","resolve","LoadingCircle","top","SearchBar","setValue","setAllFoundSongs","setResultPlaylists","setResultAuthorList","focus","defaultSearchMode","inputText","defaultSongsListValue","defaultAuthorsListValue","defaultPlaylistsListValue","searchMode","setSearchMode","setMessage","foundAnything","setFoundAnything","findItem","defaultList","foundItemTempArray","normalizedSearch","itemData","realData","isPrivate","authorsIdsArray","sort","b","songsIdsArray","albumsIdsArray","findSomething","useFindSomething","marginTop","placeholder","onChange","onKeyDown","key","position","FriendsListToShareWith","chosenFriends","setChosenFriends","setMessageText","shared","setShared","foundPeople","setFoundPeople","setTimeout","overflowY","maxHeight","index","maxWidth","amountOfZeros","toDateTime","secs","t","setSeconds","displayDate","stringDate","displayMode","Months","newDate","isNaN","seconds","getMonth","getDate","getHours","getMinutes","PersonTinyVerticalItem","person","SongInfo","setSongData","friendsThatHaveThisSong","setFriendsThatHaveThisSong","findFriendsThatHaveThisSong","marginRight","minHeight","useAddOrDeleteSong","isAdded","setIsAdded","response","newSongsList","sortedPlaylists","Hint","text","direction","AddToPlaylistItem","addFunc","AddToPlaylists","flexDirection","displayAuthorsStr","authorslist","separator","lenLimit","authorsString","join","transformLyricsToArrayOfObjects","arrayOfParagraphs","startSubstr","EditSong","songName","setSongName","songAuthors","setSongAuthors","songCover","setSongCover","setImageColors","setLyrics","foundAuthors","setFoundAuthors","setErrorMessage","removeAuthorFromList","people","marginBottom","borderRadius","padding","manuallyChangeColor","isAdmin","some","addAuthor","authorRef","authorData","authorSongs","filteredSongs","SongItemMoreWindow","openMoreWindow","moreWindowPosRelativeToViewport","bottom","AuthorsList","listOfAuthors","SongItemMobileMoreWindow","SongItem","localIndex","showListens","isNewSong","listOfChosenSongs","setListOfSongs","setOpenMoreWindow","setMoreWindowPosRelativeToViewport","currentItemRef","getBoundingClientRect","MainBanner","bannerColors","setBannerColors","currentSliderPage","setcurrentSliderPage","topAuthor","setTopAuthor","topSong","setTopSong","topAlbum","setTopAlbum","findTop","criterion","orderBy","limit","findIfSongIsNew","songReleaseDate","getTime","MoreBtn","func","lenOfList","maxLen","boolVal","TitleWithMoreBtn","SongList","listOfSongs","showCount","showSearch","displayIfEmpty","showhistory","showMoreSongs","setShowMoreSongs","displaySongs","setDisplaySongs","allFoundSongs","RecentSongs","recentSongs","setRecentSongs","tempSongsIds","findRecentSongs","findSimilarArtistsNames","authorsSongsArr","authorsData","setSimilarAuthors","peopleArray","newAuthors","flat","uniqueAuthorsSet","Set","uniqueAuthorsIdsArray","from","uniqueAuthorsDataArray","j","findSimilarArtists","authorsSongsArray","scrollLeft","setScrollLeft","wrapperRef","shouldRenderRightArrow","setShouldRenderRightArrow","scrollWidth","offsetWidth","onScroll","RecommendedAuthors","recommendationAuthors","setRecommendationAuthors","uniqueAuthors","setUniqueAuthors","uniqueAuthorsUIDSArray","ImportantMessage","button","RecommendedSongs","recommendedSongs","setRecommendedSongs","fetchRecommendedSongs","Top15Songs","topSongs","setTopSongs","AlbumList","listOfAlbums","Slider","pages","currentPage","setCurrentPage","pageName","LibraryPlaylistItem","split","findVisiblePlaylists","SongsPage","playlistsVisible","setPlaylistsVisible","p","left","wave","SongItemChoice","AddPlaylist","typingTimeout","playlistName","setPlaylistName","playlistCover","setPlaylistCover","authorsInputValue","setAuthorsInputValue","allAuthors","setAllAuthors","chosenAuthors","setChosenAuthors","setReleaseDate","songsSearch","setSongsSearch","allSongs","setAllSongs","chosenSongs","setChosenSongs","playlistStatus","setPlaylistStatus","isPlaylistPrivate","setIsPlaylistPrivate","loadingAuthors","setLoadingAuthors","loadingSongs","imageLocalPath","setImageLocalPath","findAuthors","friendsIds","file","files","URL","createObjectURL","storageRef","fileRef","child","put","getDownloadURL","authorPlaylists","getColors","colors","onSubmit","required","onKeyUp","clearTimeout","removeSongFromList","onFileChange","CreatePlaylistPage","PlaylistsPage","playlistsDisplay","setPlaylistsDisplay","AuthorsPage","setDisplayAuthors","IsUserOnlineCircle","userUID","isOnline","setIsOnline","unsubscribe","fiveMinutesAgo","online","AmountOfUnseenMessages","amountOfUnseen","SeenByCircle","listOfSeen","LastSentMessage","lastAttachedItem","setLastAttachedItem","shouldPutDot","setShouldPutDot","lastMessage","setLastMessage","messageIcons","lastIcon","setLastIcon","authorName","findWhatToWriteUnderName","ChatItem","otherPerson","setOtherPerson","setAmountOfUnseen","otherPersonId","reduce","accum","findAmountOfUnseenMessages","fetchOtherPerson","now","DownloadPhotoButton","downloadedPhoto","setDownloadedPhoto","btnText","isValid","validExtensions","ext","ex","CreateChat","foundFriends","setFoundFriends","chatCover","setChatCover","setChatName","setRrrorMessage","useHistory","shouldCreate","friendChatId","BackBtn","goBack","AttachmentList","attachmentList","setAttachmentList","sliderCurrentPage","setSliderCurrentPage","attachmentContent","fetchAttachedData","attachedType","firebaseCollection","page","ChatInfo","setParticipants","chatNameValue","setChatNameValue","newChatPhoto","setNewChatPhoto","newImageLocalPath","setNewImageLocalPath","newImageColors","setNewImageColors","participantsPage","setParticipantsPage","showUpdateBtn","setShowUpdateBtn","listOfItems","deps","fetchItem","personData","useFetchDocs","trim","WallpaperItem","currentWallpaper","Wallpapers","wallpaperList","setWallpaperList","setState","sortCondition","whereCondFP","whereCondSP","whereCondTP","fetchData","useFetchFirebaseData","ChatMoreBtn","chatMoreBtnRef","LastSeen","lastSeen","setLastSeen","ChatHeader","headerColors","setHeaderColors","findWhatToWriteInResponseToItem","referedMessage","AttachedItemsInChatInput","attachedItems","setAttachedItems","icon","setItems","removeItemFromAttached","ChatInput","setInResponseToMessage","otherMessages","openAttachWindow","setOpenAttachWindow","setAttachedSongs","setAttachedAlbums","setAttachedAuthors","resultPlaylists","resultAuthorList","inResponseNames","setInResponseNames","attachedSongsNames","setAttachedSongsNames","attachWindowRef","sendMessageFull","transition","messageId","border","outline","DateOnTop","date","useOnScreen","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","disconnect","SongItemLoading","MessageItem","messageData","scrollToMessageRef","setScrollToMessageId","scrollToMessageId","showPhoto","inResponseToMessageArr","setInResponseToMessageArr","userThatSentMessage","setUserThatSentMessage","messageSentTime","attachedSongsData","setAttachedSongsData","attachedAuthorsData","setAttachedAuthorsData","attachedPlaylistsData","setAttachedPlaylistsData","inResponseToMessagesData","setInResponseToMessagesData","messageRef","isVisible","swipeDeltaX","setSwipeDeltaX","transformTransition","setTransformTransition","handlers","useSwipeable","onSwiping","deltaX","addMessageToResponseList","returnToInitial","dropDelta","fetchSentMessageUser","paddingBottom","onTouchEnd","animation","album","MessageField","messageList","setDateRefsArray","setShowPhoto","showDate","setShowDate","dateRef","DisplayChatMessages","messagesWindowRef","scrollTo","offsetTop","SmallImages","imagesList","borderColor","TypingAnimation","typingPeople","typingPeopleData","setTypingPeopleData","ChatMessagesWindow","findTopDate","scroll","scrollHeight","clientHeight","scrollToBottom","ChatWithFriendButton","CustomizeAlbum","setLoadingSongs","filteredPlaylists","CustomizeAuthor","authorCover","setAuthorCover","addAuthorToLibrary","addFriend","friendData","updatedDataForFriend","updatedDataForCurrentUser","addPlaylistToLibrary","playlistData","removePlaylistFromLibrary","GeneralSettings","SettingsList","settingsList","settingItem","SeeMoreRoundButton","TinyPersonsList","listOfPeople","AlbumInfo","friendsThatHaveThisAlbum","setFriendsThatHaveThisAlbum","findFriendsThatHaveThisAlbum","AuthorInfo","setFriendsThatHaveThisAuthor","findFriendsThatHaveThisAuthor","AuthorMoreWindow","useAlbumAuthors","albumAuthors","setAlbumAuthors","authorsImages","setAuthorsImages","ids","authrorsData","tempArrayAuthors","tempArrayImages","fetchAuthorsData","Header","isFriend","moreWindowRef","personFilteredPlaylists","pId","delete","quitPlaylist","filteredUserFriends","filteredOtherUserFriends","deleteFriend","AddSong","setSongSrc","showSuccessMessage","setShowSuccessMessage","loadingSong","setLoadingSong","AddWindow","openAddSongWindow","setOpenAddSongWindow","setCurrentSliderPage","sliderPages","FriendRequestItem","rejectFriend","FriendRequest","friendRequests","setFriendRequests","friendsList","otherUserFriendList","arrOfReqs","friendObj","fetchFriendRequests","PersonTinyList","setListOfPeople","personObj","findAuthorsAlbums","setAuthorsPlaylists","currentUserUID","Playlists","authorsPlaylists","SimilarArtists","similarArtists","setSimilarArtists","TopSongs","popularSongs","setPopularSongs","newSongs","setNewSongs","prevSongs","findAuthorsSongs","publicRoutes","path","Component","setEmail","setPassword","disabled","currentRoleChoice","setCurrentRoleChoice","setName","setPhotoURL","privateRoutes","libraryPages","resultSongList","setResultSongList","resultAlbumList","setResultAlbumList","shadowColor","setShadowColor","yourChats","setYourChats","match","useRouteMatch","params","dateRefsArray","setChatData","setMessageList","currentDateOnTop","setCurrentDateOnTop","snapshot","scrollTop","innerHTML","useRealTimeMessages","albumId","albumData","setAlbumData","fetchAlbumsData","setAuthorsData","historySongsIds","setHistorySongsIds","historySongs","setHistorySongs","ContentRouter","component","exact","correctTimeDisplay","findLenOfAuthors","Player","textLimit","linkToAuthors","overflow","whiteSpace","step","onMouseUp","leftSideBar","link","MobileControlBarItem","element","BottomControlBar","userElement","location","hash","FullBottomSide","Loading","timeSpan","pointerEvents","LyricsParagraph","lyricsModeratorMode","karaokeModeratorTimes","setKaraokeModeratorTimes","setInputKaraokeTime","inputKaraokeTime","paragraphRef","paragraphStyle","abs","addLyricsBlock","indexOfRelativeElement","tempTimes","splice","convertedToNumber","inputKaraoke","rightSide","socialMedia","social","setLyricsModeratorMode","canUpdateLyrics","setCanUpdateLyrics","scrollIntoView","paragraph","tempSongData","FullScreenPlayer","lyricsRef","mobileMenuTransition","setMobileMenuTransition","deltaY","setDeltaY","deltaYMobileMenu","setDeltaYMobileMenu","mobileContentScroll","mobileMenuRef","bgRef","handlersForMobileMenu","onSwipedLeft","onSwipedRight","returnToInitialMobileMenu","rightSideContent","RightSidePage","noLyrics","changeRightSidePage","documentElement","setProperty","zIndex","NavigationItem","Person","sendAnimation","setSendAnimation","loadingSendSong","setLoadingSendSong","shareWithManyFriends","TinyPlaylist","backgroundPosition","backgroundSize","NotificationCircle","LeftsideBar","currentFriendToPlaylistPage","setCurrentFriendToPlaylistPage","alignSelf","ModalWindow","modalRef","ConfirmWindow","confirmRef","closeComfirm","useMediaMetadata","updatePositionState","navigator","mediaSession","setPositionState","playbackRate","pauseSong","metadata","MediaMetadata","artist","artwork","sizes","setActionHandler","ContentWrapper","intervalExciter","setIntervalExciter","updateListenCount","listenCountTimeOut","sourceId","listedData","useUpdateListenCount","interval","setInterval","clearInterval","onLoadedData","onTimeUpdate","onEnded","AppRouter","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4e0c50a5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo3.fc53f4ac.svg\";","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const LoadingData = () => {\r\n\treturn (\r\n\t\t<div className = \"LoadingData\">\r\n\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {IoIosCheckmarkCircle, IoIosRadioButtonOff} from 'react-icons/io'\r\n\r\nexport const AddToListCircle = ({listOfChosenItems, setListOfChosenItems, itemId}) => {\r\n\treturn listOfChosenItems !== undefined ? (\r\n\t\t<div onClick = {e=>e.preventDefault()}>\r\n\t\t\t{\r\n\t\t\t\tlistOfChosenItems.includes(itemId) ?\r\n\t\t\t\t\t<button type=\"button\" onClick={(e) => { let filteredList = listOfChosenItems.filter(el => el !== itemId); setListOfChosenItems(filteredList) }} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosCheckmarkCircle style={{ color: 'var(--lightBlue)' }} />\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button type=\"button\" onClick={() => setListOfChosenItems(prev => [...prev, itemId])} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosRadioButtonOff />\r\n\t\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React from 'react'\r\nimport { AddToListCircle } from './AddToListCircle'\r\nexport const PersonTiny = ({data, chosenArray, setChosenArray, ...restProps}) => {\r\n\treturn (\r\n\t\t<div className=\"person\" {...restProps}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {chosenArray} setListOfChosenItems = {setChosenArray} itemId = {data.uid}/>\r\n\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t<img loading = \"lazy\" src={data.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"personName\">\r\n\t\t\t\t{data.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport 'firebase/analytics'\r\nimport seedDatabase from './seedDatabase';\r\n\r\nconst app = firebase.initializeApp({\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n\tappId:process.env.REACT_APP_FIREBASE_APP_ID,\r\n\tmeasurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n});\r\nfirebase.analytics();\r\nexport const auth = app.auth()\r\nexport const storage = app.storage()\r\nexport const firestore = app.firestore()\r\n// seedDatabase(firestore)\r\nexport default app","export default function checkNumber(number, max, min = 0){\r\n\tif(number > max) return min\r\n\tif(number < min) return max\r\n\r\n\treturn number\r\n}","export default function shuffleSongs(songsArray){\r\n\tconst randomIndexesArray = []\r\n\tconst newSongsNumbersArray = new Array(songsArray.length)\r\n\tlet counter = 0\r\n\twhile(counter < songsArray.length){\r\n\t\tconst randNum = Math.floor(Math.random()*(songsArray.length))\r\n\t\tif(!randomIndexesArray.includes(randNum)){\r\n\t\t\trandomIndexesArray.push(randNum)\r\n\t\t\tnewSongsNumbersArray[randNum] = songsArray[counter]\r\n\t\t\tcounter++\r\n\t\t}\r\n\t}\r\n\treturn newSongsNumbersArray\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useConditionFunc = (currentUser, fetchFunc, changeCondition, dep) => {\r\n\tuseEffect(() => {\r\n\t\tif(currentUser.uid){\r\n\t\t\tif (changeCondition) {\r\n\t\t\t\tfetchFunc()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [JSON.stringify(dep)])\r\n}\r\n","export default function normalizeString(str){\r\n\treturn str.replace(/\\s/g, '').replace(/[,'._/]/g, '').replace(/-/g, '').toLowerCase()\r\n}","import normalizeString from \"../other/normalizeString\"\r\n\r\nexport const findVariantsOfName = (name) => {\r\n\tlet variantsOfName = []\r\n\tlet personName = normalizeString(name)\r\n\tfor (let i = 1; i < personName.length + 1; i++) {\r\n\t\tvariantsOfName.push(personName.substr(0, i))\r\n\t}\r\n\treturn variantsOfName\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { auth, firestore } from '../firebase'\r\nimport firebase from 'firebase'\r\nimport { LoadingData } from '../components/Loading/LoadingData'\r\nimport { findVariantsOfName } from '../functions/find/findVariantsOfName'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport const useAuth = () => {\r\n\treturn useContext(AuthContext)\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [currentUser, setCurrentUser] = useState({})\r\n\tconst [userId, setUserId] = useState(null)\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tfunction login(email, password, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.signInWithEmailAndPassword(email, password).then().catch(err => {\r\n\t\t\tsetError(err.message)\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction logout() {\r\n\t\treturn auth.signOut()\r\n\t}\r\n\r\n\tfunction signup(email, name, password, role, photoURL, imageColors, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.createUserWithEmailAndPassword(email, password)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tfirestore.collection('users')\r\n\t\t\t\t\t.doc(result.user.uid)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\t\tdisplayName: name,\r\n\t\t\t\t\t\tphotoURL: photoURL || \"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg\",\r\n\t\t\t\t\t\tisAuthor: parseInt(role) === 1,\r\n\t\t\t\t\t\tisVerified: parseInt(role) === 1,\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: 0,\r\n\t\t\t\t\t\townSongs: [],\r\n\t\t\t\t\t\townPlaylists: [],\r\n\t\t\t\t\t\taddedSongs: [],\r\n\t\t\t\t\t\taddedPlaylists: [],\r\n\t\t\t\t\t\taddedAuthors: [],\r\n\t\t\t\t\t\tlastSongPlayed: \"\",\r\n\t\t\t\t\t\tchats: [],\r\n\t\t\t\t\t\tfriends: [],\r\n\t\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\t\tregDate: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t\t})\r\n\t\t\t\tfirestore.collection('search').doc(result.user.uid).set({\r\n\t\t\t\t\tplace: 'users',\r\n\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\tvariantsOfName: findVariantsOfName(name)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tfirestore.collection('history').doc(result.user.uid).set({\r\n\t\t\t\t\thistory:[]\r\n\t\t\t\t})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(userId !== null){\r\n\t\t\tconst unsubscribe = firestore.collection('users').doc(userId).onSnapshot(user => {\r\n\t\t\t\tif (user.data()) {\r\n\t\t\t\t\tif(currentUser.uid === undefined){\r\n\t\t\t\t\t\tsetCurrentUser(user.data())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn unsubscribe\r\n\t\t}\r\n\t}, [firestore, userId])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tsetUserId(user.uid)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetUserId(null)\r\n\t\t\t\tsetCurrentUser({})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn unsubscribe\r\n\t}, [])\r\n\r\n\r\n\tconst value = {\r\n\t\tcurrentUser,\r\n\t\tsetCurrentUser,\r\n\t\tlogin,\r\n\t\tsignup,\r\n\t\tlogout,\r\n\t\tloading,\r\n\t\tsetLoading,\r\n\t\tsearchValue, \r\n\t\tsetSearchValue\r\n\t}\r\n\treturn (\r\n\t\t<AuthContext.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n","import React, { useContext, useState } from 'react'\r\n\r\nconst ModalContext = React.createContext()\r\n\r\nexport const useModal = () =>{\r\n\treturn useContext(ModalContext)\r\n}\r\n\r\nexport const ModalClassProvider = ({children}) => {\r\n\tconst [openModal, setOpenModal] = useState(false)\r\n\tconst [content, setContent] = useState(<h1>Test</h1>)\r\n\tconst [isOpenConfirm, setIsOpenConfirm] = useState(false)\r\n\tconst [confirmContent, setConfirmContent] = useState({confirmText:\"Confirm Action\", rejectText:\"Cancel\", onConfirmL:()=>{return null}, onReject:()=>{return null}})\r\n\tfunction toggleModal(){\r\n\t\tsetOpenModal(!openModal)\r\n\t}\r\n\t\r\n\t//{question:question, confirmText:..., rejectText:..., onConfirm..., onReject:...}\r\n\tfunction openConfirm(question, confirmText, rejectText = \"Cancel\", onConfirm, onReject = closeConfirm){\r\n\t\tsetIsOpenConfirm(true)\r\n\t\tsetConfirmContent({question:question, confirmText:confirmText, rejectText:rejectText, onConfirm:onConfirm, onReject:onReject})\r\n\t}\r\n\r\n\tfunction closeConfirm(){\r\n\t\tsetIsOpenConfirm(false)\r\n\t}\r\n\r\n\tconst value = {\r\n\t\topenModal,\r\n\t\tsetOpenModal,\r\n\t\ttoggleModal, \r\n\t\tsetContent, \r\n\t\tcontent,\r\n\t\tisOpenConfirm,\r\n\t\tsetIsOpenConfirm,\r\n\t\topenConfirm,\r\n\t\tcloseConfirm,\r\n\t\tconfirmContent\r\n\t}\r\n\treturn (\r\n\t\t<ModalContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ModalContext.Provider>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const fetchItemsList = (list, collection, setList, resManipulation = (res) => res, lastFunc = () => null, lengthRestrict, assignMode = 0) => {\r\n\tif (list?.length) {\r\n\t\tconst tempArray = list.map(async (itemId, i) => {\r\n\t\t\treturn (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t})\r\n\t\tPromise.all(tempArray).then(res => {\r\n\t\t\tlet finalResult = resManipulation(res)\r\n\t\t\tif(finalResult?.length > lengthRestrict) finalResult.length = lengthRestrict\r\n\t\t\tif(assignMode === 0) setList(finalResult)\r\n\t\t\telse setList(prev=>{\r\n\t\t\t\tlet temp = []\r\n\t\t\t\tfinalResult.forEach(item=>{\r\n\t\t\t\t\tif(!prev.find(el=>el.uid === item['uid' || 'id'])){\r\n\t\t\t\t\t\ttemp.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn [...prev, ...temp]\r\n\t\t\t})\r\n\t\t\tlastFunc()\r\n\t\t})\r\n\t}\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const addSongToHistory = (songId, currentUser) => {\r\n\tfirestore.collection('history').doc(currentUser.uid).get().then(res=>{\r\n\t\tconst songsList = res.data().history\r\n\t\tif(songsList[0] !== songId) songsList.unshift(songId)\r\n\t\tif(songsList.length > 30) songsList.length = 30\r\n\r\n\t\tfirestore.collection('history').doc(currentUser.uid).update({\r\n\t\t\thistory:songsList\r\n\t\t})\r\n\t})\r\n}","import React, { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { LoadingData } from '../components/Loading/LoadingData'\r\nimport { PersonTiny } from '../components/Basic/PersonTiny'\r\nimport { firestore } from '../firebase'\r\nimport checkNumber from '../functions/other/checkNumber'\r\nimport shuffleSongs from '../functions/other/shuffleSongs'\r\nimport { useConditionFunc } from '../hooks/useConditionFunc'\r\nimport { useAuth } from './AuthContext'\r\nimport { useModal } from './ModalContext'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\nimport { checkKaraoke } from '../functions/check/checkKaraoke'\r\nimport { addSongToHistory } from '../functions/add/addSongToHistory'\r\nconst SongContext = createContext(null)\r\n\r\nexport const useSong = () => {\r\n\treturn useContext(SongContext)\r\n}\r\n\r\nexport const SongProvider = ({ children }) => {\r\n\tconst { currentUser, loading, setLoading } = useAuth()\r\n\tconst { setOpenModal } = useModal()\r\n\tconst [yourSongs, setYourSongs] = useState([])\r\n\tconst [yourPlaylists, setYourPlaylists] = useState([])\r\n\tconst [yourAuthors, setYourAuthors] = useState([])\r\n\tconst [yourFriends, setYourFriends] = useState([])\r\n\tconst [currentSongQueue, setCurrentSongQueue] = useState([])\r\n\tconst [currentSong, setCurrentSong] = useState(-1)\r\n\tconst [currentSongInQueue, setCurrentSongInQueue] = useState(0)\r\n\tconst [currentSongPlaylistSource, setCurrentSongPlaylistSource] = useState({})\r\n\tconst [inputRange, setInputRange] = useState(0)\r\n\tconst [currentSongData, setCurrentSongData] = useState({ id: -1 })\r\n\r\n\tconst [imgColors, setImgColors] = useState([])\r\n\tconst [play, setPlay] = useState(false)\r\n\tconst [currentTime, setCurrentTime] = useState(0)\r\n\tconst [songDuration, setSongDuration] = useState(0)\r\n\tconst [repeatMode, setRepeatMode] = useState(1)\r\n\tconst [shuffleMode, setShuffleMode] = useState(0)\r\n\tconst [currentParagraph, setCurrentParagraph] = useState(0)\r\n\tconst [isThereKaraoke, setIsThereKaraoke] = useState(false)\r\n\tconst [openFullScreenPlayer, setOpenFullScreenPlayer] = useState(false)\r\n\tconst songRef = useRef(null)\r\n\tconst currentParagraphRef = useRef(null)\r\n\tconst inputRef = useRef(null)\r\n\tconst leftSideBarInputRef = useRef(null)\r\n\tconst [rightSideCurrentPage, setRightSideCurrentPage] = useState(0)\r\n\tconst [openMenu, setOpenMenu] = useState(false)\r\n\t\r\n\tfunction fetchYourFriends() { fetchItemsList(currentUser.friends.filter(friend => friend.status === 'added').map(obj => obj.uid), 'users', setYourFriends) }\r\n\r\n\tfunction fetchQueue() { fetchItemsList(currentUser?.lastQueue.songsList, 'songs', setCurrentSongQueue, (res) => res, () => setCurrentSongInQueue(currentUser.lastQueue.songsList.findIndex(songId => songId === currentUser.lastSongPlayed))) }\r\n\r\n\tfunction fetchYourSongs() { fetchItemsList(currentUser.addedSongs.slice(0).reverse(), 'songs', setYourSongs, (res) => res, fetchQueue) }\r\n\r\n\tfunction fetchYourAuthors() { fetchItemsList(currentUser.addedAuthors, 'users', setYourAuthors) }\r\n\r\n\tasync function fetchCurrentSongInitial() {\r\n\t\tif (currentUser.uid !== undefined) {\r\n\t\t\tconst tempSongObject = {\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsongSrc: \"\",\r\n\t\t\t\tauthors: [],\r\n\t\t\t\tcover: \"\",\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\treleaseDate: \"\",\r\n\t\t\t\tlyrics: [],\r\n\t\t\t\timageColors: []\r\n\t\t\t}\r\n\t\t\tconst curSong = currentUser.lastSongPlayed || currentUser.addedSongs[0] || tempSongObject.id\r\n\t\t\tconst curQueue = currentUser.lastQueue || { source: '/library', name: 'Your Library', image: currentUser.photoURL, songsList: yourSongs } || []\r\n\t\t\tsetCurrentSong(curSong)\r\n\t\t\tsetCurrentSongPlaylistSource(curQueue)\r\n\r\n\t\t\tif (curSong !== -1) {\r\n\t\t\t\tconst docRef = firestore.collection('songs').doc(curSong)\r\n\t\t\t\tconst docData = docRef.get()\r\n\t\t\t\t\t.then(doc => {\r\n\t\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongData(tempSongObject)\r\n\t\t\t\tsetImgColors([])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSong() {\r\n\t\tif (currentSong !== -1) {\r\n\t\t\tfirestore.collection('songs').doc(currentSong).get().then(doc => {\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\telse fetchCurrentSongInitial()\r\n\t}\r\n\r\n\tfunction fetchYourPlaylists() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.ownPlaylists) {\r\n\t\t\tcurrentUser.ownPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.push(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.ownPlaylists.length - 1) setYourPlaylists(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (currentUser.addedPlaylists) {\r\n\t\t\tcurrentUser.addedPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.push(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedPlaylists.length - 1) setYourPlaylists(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseConditionFunc(currentUser, fetchYourSongs, currentUser.addedSongs && (currentUser.addedSongs.length !== yourSongs.length), [currentUser.addedSongs])\r\n\tuseConditionFunc(currentUser, fetchYourPlaylists, currentUser.ownPlaylists && String(currentUser.ownPlaylists.concat(currentUser.addedPlaylists)) !== String(yourPlaylists), [currentUser.ownPlaylists])\r\n\tuseConditionFunc(currentUser, fetchYourFriends, currentUser.friends && String(currentUser.friends.filter(obj => obj.status === 'added')) !== String(yourFriends), [currentUser.friends])\r\n\tuseConditionFunc(currentUser, fetchYourAuthors, currentUser.addedAuthors && (currentUser.addedAuthors.length !== yourAuthors.length), [currentUser.addedAuthors])\r\n\tuseConditionFunc(currentUser, fetchCurrentSong, currentUser && (currentSongData.id === -1 || (currentSong || currentUser.lastSongPlayed)), [currentSong, currentUser.lastSongPlayed])\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (currentUser.uid === undefined) {\r\n\t\t\tsetCurrentSongData({ id: -1 })\r\n\t\t\tsetCurrentSong(-1)\r\n\t\t\tsetCurrentSongQueue([])\r\n\t\t\tsetYourAuthors([])\r\n\t\t\tsetYourSongs([])\r\n\t\t\tsetYourFriends([])\r\n\t\t\tsetYourPlaylists([])\r\n\t\t}\r\n\t}, [currentUser.uid])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsThereKaraoke(checkKaraoke(currentSongData.lyrics))\r\n\t}, [currentSongData.lyrics])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!loading) {\r\n\t\t\tif (shuffleMode) {\r\n\t\t\t\tlet shuffledSongsArray = shuffleSongs(currentSongQueue)\r\n\t\t\t\tsetCurrentSongQueue(shuffledSongsArray)\r\n\t\t\t\tsetCurrentSongInQueue(shuffledSongsArray.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongQueue(currentSongPlaylistSource.songsList)\r\n\t\t\t\tsetCurrentSongInQueue(currentSongPlaylistSource.songsList.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [shuffleMode])\r\n\t\r\n\tfunction playSong() {\r\n\t\tconsole.log(play)\r\n\t\tif (play) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\r\n\t\tsetPlay(!play)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentParagraph(0)\r\n\t}, [currentSongData.id])\r\n\r\n\tfunction loadSongData(e) {\r\n\t\tsetCurrentTime(e.target.currentTime)\r\n\t\tsetSongDuration(e.target.duration)\r\n\t\tinputRef.current.max = e.target.duration\r\n\t\tif (window.innerWidth > 1000) leftSideBarInputRef.current.max = e.target.duration\r\n\t\tsetInputRange(0)\r\n\t\tif (play) { e.target.play() }\r\n\t\telse e.target.pause()\r\n\t}\r\n\r\n\tfunction defineCurrentParagraph() {\r\n\t\t//Binary Search\r\n\t\tlet first = 0, last = currentSongData.lyrics.length - 1\r\n\t\tlet roundedTime = parseFloat(parseFloat(songRef.current.currentTime).toFixed(1))\r\n\t\twhile (first <= last) {\r\n\t\t\tlet midPoint = Math.floor((first + last) / 2)\r\n\t\t\tlet blockStartTime = parseFloat(parseFloat(currentSongData.lyrics[midPoint].startTime).toFixed(1))\r\n\t\t\tlet nextBlockStartTime = midPoint !== currentSongData.lyrics.length - 1 ? parseFloat(parseFloat(currentSongData.lyrics[midPoint + 1].startTime).toFixed(1)) : last\r\n\t\t\tif (currentSongData.lyrics[midPoint].startTime !== 'undefined') {\r\n\t\t\t\tif (roundedTime >= blockStartTime && roundedTime <= nextBlockStartTime) {\r\n\t\t\t\t\tsetCurrentParagraph(midPoint)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\telse if (blockStartTime < roundedTime) first = midPoint + 1\r\n\t\t\t\telse last = midPoint - 1\r\n\r\n\t\t\t}\r\n\t\t\telse return\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (rightSideCurrentPage === 2) defineCurrentParagraph()\r\n\t}, [rightSideCurrentPage])\r\n\r\n\tfunction defineCurrentParagraphLight() {\r\n\t\tif (currentParagraph !== (currentSongData.lyrics.length - 1) && parseFloat(currentSongData.lyrics[currentParagraph + 1].startTime) <= songRef.current.currentTime) {\r\n\t\t\treturn setCurrentParagraph(currentParagraph + 1)\r\n\t\t}\r\n\t}\r\n\tfunction playing(event) {\r\n\t\tsetCurrentTime(event.target.currentTime)\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer && openMenu) defineCurrentParagraphLight()\r\n\t\tsetInputRange((event.target.currentTime / songDuration) * 100)\r\n\t}\r\n\r\n\tasync function nextSong() {\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue + 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\taddSongToHistory(currentSongId, currentUser)\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tasync function prevSong() {\r\n\t\tif (currentTime > 5) {\r\n\t\t\tsongRef.current.currentTime = 0\r\n\t\t\tsetCurrentTime(0)\r\n\t\t\tsetCurrentParagraph(0)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue - 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\taddSongToHistory(currentSongId, currentUser)\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tfunction changeCurrentTime(event, startTime = 0) {\r\n\t\tif (event.target.localName === 'div' || event.target.localName === \"p\") {\r\n\t\t\tif (startTime !== undefined) {\r\n\t\t\t\tsetCurrentTime(startTime)\r\n\t\t\t\tsongRef.current.currentTime = startTime\r\n\t\t\t\tsetInputRange((startTime / songDuration) * 100)\r\n\t\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) setCurrentParagraph(parseInt(event.target.id))\r\n\t\t\t\tsongRef.current.play()\r\n\t\t\t\tsetPlay(true)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetCurrentTime(event.target.value)\r\n\t\t\tsongRef.current.currentTime = event.target.value\r\n\t\t\tsetInputRange((event.target.value / songDuration) * 100)\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) defineCurrentParagraph()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction displayAuthors(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>{el.displayName}</Link>{(i === authorsList.length - 1 ? \"\" : separatingSign)}\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction displayAuthorsFull(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false); setOpenModal(false) }}>\r\n\t\t\t\t\t\t<PersonTiny data={el} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = currentSongData.name || 'Soundbubble'\r\n\t}, [currentSongData.name])\r\n\treturn (\r\n\t\t<SongContext.Provider value={\r\n\t\t\t{\r\n\t\t\t\tyourSongs,\r\n\t\t\t\tsetYourSongs,\r\n\t\t\t\tyourPlaylists,\r\n\t\t\t\tyourFriends,\r\n\t\t\t\tcurrentSongQueue,\r\n\t\t\t\tcurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongQueue,\r\n\t\t\t\tsetCurrentSongInQueue,\r\n\t\t\t\tplay,\r\n\t\t\t\tsetPlay,\r\n\t\t\t\tsongSrc: currentSongData.songSrc,\r\n\t\t\t\tcurrentTime,\r\n\t\t\t\tsetCurrentTime,\r\n\t\t\t\tsongDuration,\r\n\t\t\t\tsongRef,\r\n\t\t\t\tname: currentSongData.name,\r\n\t\t\t\tauthors: currentSongData.authors,\r\n\t\t\t\tlyrics: currentSongData.lyrics,\r\n\t\t\t\tcover: currentSongData.cover,\r\n\t\t\t\timgColors,\r\n\t\t\t\tsetImgColors,\r\n\t\t\t\tcurrentSong,\r\n\t\t\t\tsetCurrentSong,\r\n\t\t\t\trepeatMode,\r\n\t\t\t\tsetRepeatMode,\r\n\t\t\t\tshuffleMode,\r\n\t\t\t\tsetShuffleMode,\r\n\t\t\t\tinputRef,\r\n\t\t\t\tleftSideBarInputRef,\r\n\t\t\t\tisThereKaraoke,\r\n\t\t\t\trightSideCurrentPage,\r\n\t\t\t\tcurrentParagraph,\r\n\t\t\t\tcurrentParagraphRef,\r\n\t\t\t\tnextSong,\r\n\t\t\t\tprevSong,\r\n\t\t\t\tplaySong,\r\n\t\t\t\tplaying,\r\n\t\t\t\tdefineCurrentParagraph,\r\n\t\t\t\tsetRightSideCurrentPage,\r\n\t\t\t\tchangeCurrentTime,\r\n\t\t\t\tdisplayAuthors,\r\n\t\t\t\tdisplayAuthorsFull,\r\n\t\t\t\topenFullScreenPlayer,\r\n\t\t\t\tsetOpenFullScreenPlayer,\r\n\t\t\t\tloadSongData,\r\n\t\t\t\tfetchYourSongs,\r\n\t\t\t\tsetOpenMenu,\r\n\t\t\t\topenMenu,\r\n\t\t\t\tcurrentSongData,\r\n\t\t\t\tsetCurrentSongData,\r\n\t\t\t\tsetIsThereKaraoke,\r\n\t\t\t\tsetYourPlaylists,\r\n\t\t\t\tyourAuthors,\r\n\t\t\t\tsetYourAuthors,\r\n\t\t\t\tinputRange\r\n\t\t\t}\r\n\t\t}>\r\n\t\t\t{!loading ?\r\n\t\t\t\tchildren :\r\n\t\t\t\t<LoadingData />\r\n\t\t\t}\r\n\t\t</SongContext.Provider>\r\n\t)\r\n}\r\n","export function checkKaraoke(lyrics) {\r\n\tif (lyrics !== undefined && lyrics.length === 0) return false\r\n\r\n\tif (lyrics !== undefined) {\r\n\t\tif (lyrics[0].startTime === 'undefined') return false\r\n\t}\r\n\r\n\treturn true\r\n}\r\n","export const LOGIN_ROUTE = '/login'\r\nexport const SIGNUP_ROUTE = '/signup'\r\nexport const HOME_ROUTE = '/home'\r\nexport const LIBRARY_ROUTE = '/library'\r\nexport const SEARCH_ROUTE = '/search'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const NOTFOUND_ROUTE = '/not-found'\r\nexport const HISTORY_ROUTE = '/history'\r\n\r\nexport const TEMPLATE_CHAT = '/chat/:chatId'\r\nexport const TEMPLATE_ALBUM = '/albums/:albumId'\r\nexport const TEMPLATE_AUTHOR = '/authors/:authorId'","import React from 'react'\r\n\r\nexport const ErrorPlate = ({errorMessage}) => {\r\n\treturn errorMessage && (\r\n\t\t<div className=\"Alert\">\r\n\t\t\t{errorMessage}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const FullScreenLoading = ({loading}) => {\r\n\treturn (\r\n\t\t<div className = \"FullScreenLoading\" style = {loading?{}:{opacity:'0', visibility:'hidden'}}>\r\n\t\t\t<img loading = \"lazy\" src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const BlurredBg = () => {\r\n\treturn (\r\n\t\t<div className = \"BlurredBg\">\r\n\t\t\t<div className=\"circle circle1\"></div>\r\n\t\t\t<div className=\"circle circle2\"></div>\r\n\t\t\t<div className=\"circle circle3\"></div>\r\n\t\t\t<div className=\"circle circle4\"></div>\r\n\t\t\t<div className=\"circle circle5\"></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nexport const TitleAndLogo = ({title}) => {\r\n\treturn (\r\n\t\t<div className=\"titleAndLogo\">\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<h1>{title}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const RadioBtn = ({currentActive, id, label, onClick}) => {\r\n\treturn (\r\n\t\t<div className = \"RadioBtn\" id = {id} onClick = {onClick}>\r\n\t\t\t<span className = \"radioLabel\" style = {currentActive === id?{color:'var(--blue)', opacity:1, fontWeight:'bold'}:{}}>\r\n\t\t\t\t{label}\r\n\t\t\t</span>\r\n\t\t\t<span className = \"radioCircle\" style = {currentActive === id?{background:'var(--blue)'}:{}}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\n\r\nexport const AuthorItemBig = ({data, listOfChosenAuthors, setListOfChosenAuthors}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${data.uid}`} className = \"AuthorItemBig\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAuthors} setListOfChosenItems = {setListOfChosenAuthors} itemId = {data.uid}/>\r\n\t\t\t<div >\r\n\t\t\t\t<div className = \"AuthorItemBigImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={data.photoURL} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3>{data.displayName}</h3>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","export default function shortWord(word, len = 50){\r\n\treturn word.substr(0, len) + (word.length > len?\"...\":\"\")\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\n\r\nconst ScreenContext = React.createContext()\r\n\r\nexport const useScreen = () =>{\r\n\treturn useContext(ScreenContext)\r\n}\r\n\r\nexport const ScreenProvider = ({children}) => {\r\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth)\r\n\tconst [screenHeight, setScreenHeight] = useState(window.innerHeight)\r\n\tconst [isMobile, setIsMobile] = useState(window.innerWidth < 1000)\r\n\tfunction handleResize() {\r\n\t\tsetScreenWidth(window.innerWidth)\r\n\t\tsetScreenHeight(window.innerHeight)\r\n\t\tsetIsMobile(window.innerWidth < 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('resize', handleResize)\r\n\t\treturn ()=>{\r\n\t\t\twindow.removeEventListener('resize', handleResize)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst value = {\r\n\t\tscreenWidth,\r\n\t\tscreenHeight,\r\n\t\tisMobile\r\n\t}\r\n\treturn (\r\n\t\t<ScreenContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ScreenContext.Provider>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const usePlaylistSongs = (playlist, playlistSongs, setPlaylistSongs) => {\r\n\tconst {currentSongPlaylistSource, playSong, setCurrentSongQueue, setCurrentSong, setPlay, songRef, setCurrentSongInQueue, setCurrentSongPlaylistSource} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif (playlist.length !== 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev => [...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e) {\r\n\t\te.preventDefault()\r\n\t\tif (currentSongPlaylistSource.name === playlist.name) {\r\n\t\t\tplaySong()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (playlistSongs.length) {\r\n\t\t\tconst source = { source: `/albums/${playlist.id}`, name: playlist.name, image: playlist.image, songsList: playlistSongs }\r\n\t\t\tconst listSongsIds = playlistSongs.map(song => song.id)\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastSongPlayed: playlistSongs[0].id,\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn playChosenPlaylist\r\n}\r\n","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const DeletedPlaylist = () => {\r\n\treturn (\r\n\t\t<div style={{ textDecoration: 'none' }} className=\"playlistWrapper\">\r\n\t\t\t<div className=\"playlistItem\" style={{ background: `var(--playlistsColor)`, display:'flex', justifyContent:'center', alignItems:'center' }}>\r\n\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" style = {{width:'70px', height:'70px', filter:'grayscale(80%)'}}/>\r\n\t\t\t</div>\r\n\t\t\t<h4 style={{ display: 'flex', alignItems: 'center', margin: '5px 0' }}>\r\n\t\t\t\tPlaylist was deleted\r\n\t\t\t</h4>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { DeletedPlaylist } from '../Playlist/DeletedPlaylist'\r\nexport const PlaylistItem = ({playlist = null, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst playlistDate = new Date(playlist?.creationDate)\r\n\tconst {isMobile} = useScreen()\r\n\tconst {currentSongPlaylistSource, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\treturn playlist !== null?(\r\n\t\t<Link to={`/albums/${playlist.id}`} style = {{textDecoration:'none'}} className = \"playlistWrapper\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAlbums} setListOfChosenItems = {setListOfChosenAlbums} itemId = {playlist.id}/>\r\n\t\t\t<div className=\"playlistItem\" style = {{backgroundImage:`url(${playlist.image})`}}>\r\n\t\t\t\t{!playlist.image?<h1>{shortWord(playlist.name, 13)}</h1>:null}\r\n\t\t\t\t{/* {!playlist.isAlbum?<h2>{playlist.name}</h2>:null} */}\r\n\t\t\t\t<button onClick = {playSongsInPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<h4 style = {{display:'flex', alignItems:'center', margin:'5px 0'}}>\r\n\t\t\t\t{shortWord(playlist.name, isMobile?10:15)} \r\n\t\t\t\t<span style = {{fontSize:\".6em\", opacity:.6, fontWeight:'500', marginLeft:'7px'}}>\r\n\t\t\t\t\t{playlist.isAlbum?playlist.songs.length === 1?\"single\":'album':'playlist'}\r\n\t\t\t\t</span>\r\n\t\t\t</h4>\r\n\t\t\t<h5 style = {{margin:'5px 0'}}>{playlistDate.getFullYear()}</h5>\r\n\t\t</Link>\r\n\t):<DeletedPlaylist/>\r\n}\r\n","import React from 'react'\r\n\r\nexport const ColorCircles = ({play}) => {\r\n\treturn (\r\n\t\t<div className = 'ColorCircles' style = {!play?{opacity:0, transform:\"scale(.95)\"}:{}}>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function rightFormanForBigNumber(number){\r\n\tif(number < 1000) return number\r\n\r\n\tif(number < 1000000) return parseFloat(number/1000).toFixed(1) + 'K'\r\n\r\n\tif(number < 1000000000) return parseFloat(number / 1000000).toFixed(1) + 'M'\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useOutsideClick = (ref, setFunc) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tsetFunc(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const addSongToLibrary = (e, song, currentUser, setCurrentUser) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = []\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tif (!currentUser.addedAuthors.includes(authorId)) {\r\n\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t}\r\n\t})\r\n\tlet newList = currentUser.addedSongs\r\n\tnewList.push(song.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: [...finalAuthorsUIDS, ...currentUser.addedAuthors]\r\n\t})\r\n\r\n\tfinalAuthorsUIDS.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers++\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n}","export default function filterArrayWithArray(whatToFilter, withWhatToFilter){\r\n\treturn whatToFilter.filter(\r\n\t\tfunction (e) {\r\n\t\t\treturn this.indexOf(e) < 0;\r\n\t\t},\r\n\t\twithWhatToFilter\r\n\t);\r\n}","import { firestore } from \"../../firebase\"\r\nimport filterArrayWithArray from \"./filterArrayWithArray\"\r\n\r\nexport const deleteSongFromLibrary = (e, song, currentUser, yourSongs) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = [] // массив авторов, песни которых еще остались после удаления выбранной песни\r\n\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tyourSongs.forEach(songObj => {\r\n\t\t\tif (newList.includes(songObj.id) && songObj.authors.find(a => a.uid === authorId)) {\r\n\t\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst filtered = filterArrayWithArray(songAuthorsUIDS, finalAuthorsUIDS) // массив людей, которых нужно убрать из библиотеки\r\n\tconst finalFilteredAuthors = filterArrayWithArray(currentUser.addedAuthors, filtered) // массив людей, оставшихся в библиотеке\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: finalFilteredAuthors\r\n\t})\r\n\r\n\tfiltered.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers--\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n\t\r\n}","import { useAuth } from \"../../contexts/AuthContext\"\r\nimport { addSongToLibrary } from \"../../functions/add/addSongToLibrary\"\r\nimport { deleteSongFromLibrary } from \"../../functions/other/deleteSongFromLibrary\"\r\nimport {FiPlusCircle, FiTrash2} from 'react-icons/fi'\r\nimport { useSong } from \"../../contexts/SongContext\"\r\nimport { useModal } from \"../../contexts/ModalContext\"\r\nexport default function AddOrDeleteButtonFull({song}) {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {yourSongs} = useSong()\r\n\tconst {openConfirm, setOpenModal} = useModal()\r\n\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\treturn <span onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t<FiPlusCircle />\r\n\t\t\tAdd\r\n\t\t</span>\r\n\t}\r\n\telse {\r\n\t\treturn <span onClick = {(e)=>{e.stopPropagation();setOpenModal(false);openConfirm(\"You sure you want to delete this song from library?\", \"Yes, delete it\", \"No, just kidding\", (e) => deleteSongFromLibrary(e, song, currentUser, yourSongs))}}>\r\n\t\t\t<FiTrash2 />\r\n\t\t\tDelete\r\n\t\t</span>\r\n\t}\r\n}","export default function getUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\tconst piece = (Math.random() * 16) | 0;\r\n\t\tconst elem = c === 'x' ? piece : (piece & 0x3) | 0x8;\r\n\t\treturn elem.toString(16);\r\n\t});\r\n}\r\n","import { firestore } from \"../../firebase\"\r\nimport getUID from \"../other/getUID\"\r\n\r\nexport const createChat = async ( participants, chatUID = getUID(), chatName = \"\", chatImage = \"\", admins = [], imageColors = []) => {\r\n\tfirestore.collection('chats').doc(chatUID).set({\r\n\t\tchatImage:chatImage,\r\n\t\tchatName:chatName,\r\n\t\tid:chatUID,\r\n\t\tmessages:[],\r\n\t\tparticipants:participants,\r\n\t\twallpaper:'undefined',\r\n\t\tadmins:participants.length > 2? admins:[],\r\n\t\ttyping:[],\r\n\t\timageColors:imageColors\r\n\t})\r\n\r\n\tparticipants.map(async personId=>{\r\n\t\tlet chatInfo = (await firestore.collection('users').doc(personId).get()).data().chats\r\n\t\tchatInfo.push(chatUID)\r\n\t\tfirestore.collection('users').doc(personId).update({\r\n\t\t\tchats:chatInfo\r\n\t\t})\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\nimport getUID from \"../other/getUID\"\r\n\r\nexport const findChatURL = async (allParticipants, currentUser, setShouldCreate, setFriendChatId) => {\r\n\tlet foundChat = false\r\n\tlet chatId = 0\r\n\tif (currentUser.chats) {\r\n\t\t// Принцип работы таков: он ищет все чаты, в которых есть юзер. Затем он проходит по ним. Затем он проходит по выбранным друзьям\r\n\t\t// Если он находит, что друг есть в списке участников чата, добавляет к count 1, если нет, сразу выходит из цикла учатсников\r\n\t\t// После завершения цикла он проверяет, если количество совпадений + 1 (потому что в массив друзей не входит сам пользователь) равно\r\n\t\t// длине конкретного чата и если количество совпадений равно длине поступившего изначально массива участников, тогда нужный чат найден\r\n\t\tconst chatsWhereUserIn = await firestore.collection('chats').where('participants', 'array-contains', currentUser.uid).get()\r\n\t\tchatsWhereUserIn.docs.forEach(chat=>{\r\n\t\t\tlet count = 0\r\n\t\t\tallParticipants.every(personId=>{\r\n\t\t\t\tif(chat.data().participants.includes(personId)){\r\n\t\t\t\t\tcount++\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse return false\r\n\t\t\t})\t\t\t\r\n\t\t\tif(count + 1 === chat.data().participants.length && count === allParticipants.length){\r\n\t\t\t\tfoundChat = true\r\n\t\t\t\tsetShouldCreate(false)\r\n\t\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\t\tchatId = chat.data().id\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\telse return true\r\n\t\t})\r\n\r\n\t\tif (!foundChat) {\r\n\t\t\tconst random = getUID()\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(true)\r\n\t\t\tsetFriendChatId(random)\r\n\t\t\tchatId = random\r\n\t\t}\r\n\t\treturn chatId\r\n\t}\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const sendMessage = (chatId, chatData, sender, messageText, attachedSongs = [], attachedAlbums = [], attachedAuthors = [], inResponseToMessage) => {\r\n\tif (messageText.length !== 0 || attachedSongs.length !== 0 || attachedAlbums.length !== 0 || attachedAuthors.length !== 0 || inResponseToMessage) {\r\n\t\tconst tempMessages = chatData?.messages || []\r\n\r\n\t\ttempMessages.push({\r\n\t\t\tid: tempMessages.length,\r\n\t\t\tsender: sender,\r\n\t\t\tmessage: messageText,\r\n\t\t\tsentTime: new Date().toString(),\r\n\t\t\tinResponseToMessage: inResponseToMessage || null,\r\n\t\t\tattachedSongs: attachedSongs,\r\n\t\t\tattachedAlbums: attachedAlbums,\r\n\t\t\tattachedAuthors: attachedAuthors,\r\n\t\t\tseenBy: [sender]\r\n\t\t})\r\n\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\tmessages: tempMessages\r\n\t\t})\r\n\t}\r\n}","import { firestore } from \"../../firebase\";\r\nimport { createChat } from \"../create/createChat\";\r\nimport { findChatURL } from \"../find/findChatURL\";\r\nimport getUID from \"./getUID\";\r\nimport { sendMessage } from \"./sendMessage\";\r\n\r\nexport default function shareWithFriends(shareList, currentUser, itemId, whatToShare, messageText = \"\") {\r\n\t//Сделать через функцию sendMessage\r\n\tshareList.map(async userId => {\r\n\t\t//Сортировка по последнему отправлению\r\n\t\tconst sortedFriends = [{uid:userId, status:'added'}, ...currentUser.friends.filter(obj => obj.uid !== userId)]\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:sortedFriends\r\n\t\t})\r\n\t\tPromise.resolve(findChatURL([userId], currentUser, () => null, () => null)).then(async chatId => {\r\n\t\t\tlet chatData = (await firestore.collection('chats').doc(chatId).get()).data()\r\n\t\t\tconsole.log(chatId, chatData)\r\n\t\t\tif (chatData !== undefined) {\r\n\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst chatUID = getUID()\r\n\t\t\t\tcreateChat([currentUser.uid, userId], chatUID).then(async () => {\r\n\t\t\t\t\tchatData = (await firestore.collection('chats').doc(chatUID).get()).data()\r\n\t\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\r\n}","import React from 'react'\r\n\r\nexport const LoadingCircle = ({top = '20%'}) => {\r\n\treturn (\r\n\t\t<div className = \"LoadingCircle\" style = {{top:top}}>\r\n\t\t\t<img loading = \"lazy\" src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiSearch, FiXCircle } from 'react-icons/fi'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { useFindSomething } from '../../hooks/useFindSomething'\r\nexport const SearchBar = ({ value, setValue, setAllFoundSongs, setResultPlaylists, setResultAuthorList, focus = false, defaultSearchMode = undefined, inputText = \"Search for songs or for people\", defaultSongsListValue, defaultAuthorsListValue, defaultPlaylistsListValue }) => {\r\n\r\n\tconst [searchMode, setSearchMode] = useState(0)\r\n\tconst inputRef = useRef(null)\r\n\tconst [findSomething, message, loading, foundAnything] = useFindSomething(\r\n\t\tvalue,\r\n\t\tsetAllFoundSongs,\r\n\t\tsetResultAuthorList,\r\n\t\tsetResultPlaylists,\r\n\t\tdefaultSearchMode,\r\n\t\tsearchMode,\r\n\t\tdefaultSongsListValue,\r\n\t\tdefaultAuthorsListValue,\r\n\t\tdefaultPlaylistsListValue\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (focus) inputRef.current.focus()\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div style={{ marginTop: '10px', width: '100%' }} className = \"searchBarWrapper\">\r\n\t\t\t<div className=\"searchBar\">\r\n\t\t\t\t<div className=\"searchBarElement\">\r\n\t\t\t\t\t<FiSearch />\r\n\t\t\t\t\t<span onClick={() => value.length ? setValue(\"\") : null}>{value.length ? <FiXCircle /> : null}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={inputText}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value)}\r\n\t\t\t\t\tonKeyDown={e => { if (e.key === 'Enter') findSomething() }}\r\n\t\t\t\t\tref={inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"searchFilters\" style={defaultSearchMode !== undefined ? { display: 'none' } : {}}>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(0)} style={searchMode === 0 ? { background: 'var(--lightBlue)' } : {}}>All</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(1)} style={searchMode === 1 ? { background: 'var(--lightBlue)' } : {}}>Songs</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(2)} style={searchMode === 2 ? { background: 'var(--lightBlue)' } : {}}>Authors</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(3)} style={searchMode === 3 ? { background: 'var(--lightBlue)' } : {}}>Playlists</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t{loading ?\r\n\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px', marginTop: '40px' }}>\r\n\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t!foundAnything && value.length !== 0 ? <h2>{message}</h2> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase';\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList';\r\nimport normalizeString from '../functions/other/normalizeString';\r\n\r\nexport const useFindSomething = (value, setAllFoundSongs,setResultAuthorList, setResultPlaylists, defaultSearchMode, searchMode, defaultSongsListValue, defaultAuthorsListValue, defaultPlaylistsListValue) => {\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [foundAnything, setFoundAnything] = useState(false)\r\n\tasync function findItem(place, defaultList = [], setList) {\r\n\t\tconst foundItemTempArray = []\r\n\t\tlet normalizedSearch = normalizeString(value);\r\n\t\tconst itemsList = await firestore.collection('search').where('variantsOfName', \"array-contains\", normalizedSearch).get();\r\n\t\titemsList.docs.forEach(async item => {\r\n\t\t\tconst itemData = item.data()\r\n\t\t\tif (itemData.place === place) {\r\n\t\t\t\tconst realData = (await firestore.collection(itemData.place).doc(itemData.uid).get()).data()\r\n\t\t\t\tif (defaultList !== undefined && defaultList.length) {\r\n\t\t\t\t\tif (defaultList.map(song => song.id || song.uid).includes(itemData.uid)) foundItemTempArray.push(realData)\r\n\t\t\t\t}\r\n\t\t\t\telse if (!realData.isPrivate) foundItemTempArray.push(realData)\r\n\t\t\t\tif (defaultSearchMode === undefined && searchMode === 0 && foundItemTempArray.length !== 0) {\r\n\t\t\t\t\tswitch (itemData.place) {\r\n\t\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\t\tfor (let i = 0; i < foundItemTempArray.length; i++) {\r\n\t\t\t\t\t\t\t\tconst authorsIdsArray = realData.authors\r\n\t\t\t\t\t\t\t\tfetchItemsList(authorsIdsArray.map(author=>author.uid), 'users', setResultAuthorList, (res) => res.sort((a, b) => b.subscribers - a.subscribers), undefined, undefined, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"users\":\r\n\t\t\t\t\t\t\tfor (let i = 0; i < foundItemTempArray.length; i++) {\r\n\t\t\t\t\t\t\t\tconst songsIdsArray = realData.ownSongs\r\n\t\t\t\t\t\t\t\tconst albumsIdsArray = realData.ownPlaylists\r\n\t\t\t\t\t\t\t\tfetchItemsList(songsIdsArray, 'songs', setAllFoundSongs, (res) => res.sort((a, b) => b.listens - a.listens), () => null, 3, 1)\r\n\t\t\t\t\t\t\t\tfetchItemsList(albumsIdsArray, 'playlists', setResultPlaylists, (res) => res.sort((a, b) => b.listens - a.listens), () => null, 3, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\t\tfor (let i = 0; i < foundItemTempArray.length; i++) {\r\n\t\t\t\t\t\t\t\tconst authorsIdsArray = realData.authors\r\n\t\t\t\t\t\t\t\tfetchItemsList(authorsIdsArray.map(author=>author.uid), 'users', setResultAuthorList, (res) => res.sort((a, b) => b.subscribers - a.subscribers), undefined, undefined, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsetMessage('Wrong search mode')\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetList(foundItemTempArray)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tif (foundItemTempArray.length !== 0) setFoundAnything(true)\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t\tif (foundItemTempArray.length === 0) { setList([]) }\r\n\t}\r\n\r\n\tfunction findSomething() {\r\n\t\tif (value.length !== 0) {\r\n\t\t\tsetLoading(true)\r\n\t\t\tsetFoundAnything(false)\r\n\t\t\tif (defaultSearchMode === undefined) {\r\n\t\t\t\tif (searchMode === 0 || searchMode === 1) {\r\n\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 2) {\r\n\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 3) {\r\n\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tswitch (defaultSearchMode) {\r\n\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"authors\":\r\n\t\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(value.length === 0){\r\n\t\t\tif (defaultSongsListValue !== undefined) setAllFoundSongs(defaultSongsListValue)\r\n\t\t\tif (defaultAuthorsListValue !== undefined) setResultAuthorList(defaultAuthorsListValue)\r\n\t\t\tif (defaultPlaylistsListValue !== undefined) setResultPlaylists(defaultPlaylistsListValue)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}, [value])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSomething()\r\n\t}, [searchMode])\r\n\r\n\treturn [findSomething, message, loading, foundAnything]\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shareWithFriends from '../../functions/other/shareWithManyFriends'\r\nimport { PersonTiny } from './PersonTiny'\r\nimport { SearchBar } from './SearchBar'\r\nexport const FriendsListToShareWith = ({ item, whatToShare = 'song' }) => {\r\n\tconst { yourFriends } = useSong()\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [shared, setShared] = useState(false)\r\n\tconst { toggleModal } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [foundPeople, setFoundPeople] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (shared) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleModal()\r\n\t\t\t\tsetShared(false)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}, [shared])\r\n\r\n\r\n\treturn (\r\n\t\t<div className='FriendsListToShareWith'>\r\n\t\t\t{shared ?\r\n\t\t\t\t<div className=\"successMessageSent\">\r\n\t\t\t\t\t<IoIosCheckmarkCircleOutline />\r\n\t\t\t\t\tSong has sent!\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<div style = {{overflowY:'auto', maxHeight:'300px'}}>\t\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundPeople} defaultAuthorsListValue = {yourFriends} defaultSearchMode={\"authors\"} inputText = {\"Search for friends\"}/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{foundPeople.length > 0 ?\r\n\t\t\t\t\t\tfoundPeople.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}):\r\n\t\t\t\t\t\tyourFriends.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Your message\" style={{ margin: 0 }} onChange={e => setMessageText(e.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"shareBtn\"\r\n\t\t\t\t\tstyle={!chosenFriends.length ?\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (chosenFriends.length > 0) {\r\n\t\t\t\t\t\t\tshareWithFriends(chosenFriends, currentUser, (whatToShare === 'author' ? item.uid : item.id), whatToShare, messageText);\r\n\t\t\t\t\t\t\tsetShared(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\tShare with {chosenFriends.length} {chosenFriends.length > 1 ? \"friends\" : \"friend\"}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","\r\nfunction amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nfunction toDateTime(secs) {\r\n\tvar t = new Date(1970, 0, 1); // Epoch\r\n\tt.setSeconds(secs);\r\n\treturn t;\r\n}\r\n\r\nexport default function displayDate(stringDate, displayMode = 0){\r\n\tconst Months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\r\n\tlet newDate = !isNaN(stringDate)?stringDate.seconds?toDateTime(stringDate.seconds + 10800):toDateTime((stringDate/1000) + 10800):new Date(stringDate)\r\n\tif(displayMode === 0){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() \r\n\t}\r\n\r\n\tif(displayMode === 1){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate()\r\n\t}\r\n\r\n\tif(displayMode === 2){\r\n\t\treturn amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n\r\n\tif(displayMode === 3){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() + \" at \" + amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const PersonTinyVerticalItem = ({person}) => {\r\n\tconst {setOpenModal} = useModal()\r\n\treturn (\r\n\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t<div className = \"PersonTinyVerticalItem\" onClick = {()=>setOpenModal(false)}>\r\n\t\t\t\t<div className=\"personTinyImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={person.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"personTinyName\">\r\n\t\t\t\t\t{person.displayName}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport {CgMusicNote} from 'react-icons/cg'\r\nimport {PersonTinyVerticalItem} from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nexport const SongInfo = ({song}) => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst {setContent} = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tconst {displayAuthors, yourFriends} = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisSong] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisSong(){\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisSong([])\r\n\t\tyourFriends.forEach(friend=>{\r\n\t\t\tif(friend.addedSongs.includes(songData.id)) setFriendsThatHaveThisSong(prev=>[...prev, friend])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(song !== undefined) setSongData(song)\r\n\t}, [song && song.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisSong()\r\n\t}, [songData.id])\r\n\r\n\treturn (\r\n\t\t<div className = 'SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${songData.cover})` }}></div>\r\n\t\t\t<div className = \"songInfoContent\">\r\n\t\t\t\t<h3 style = {{color:songData.imageColors[0]}}>{songData.name}</h3>\r\n\t\t\t\t<span>{displayAuthors(songData.authors, ', ')}</span>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center', opacity:'0.6', fontSize:'.9em', position:\"relative\"}} className = \"listensAndDate\">\r\n\t\t\t\t\t<p className = \"infoListens\" style = {{marginRight:'15px', position:'relative'}}>{songData.listens} <CgMusicNote /></p>\r\n\t\t\t\t\t<span>{displayDate(songData.releaseDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style = {{margin:'10px 0'}}>{friendsThatHaveThisSong.length > 0? 'Friends that listen that song': 'None of your friends listens this'}</h4>\r\n\t\t\t\t{!loading?<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 0?friendsThatHaveThisSong.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t}):<button className = \"shareBtn\" style = {{minHeight:'35px', background:songData.imageColors[0]}} onClick = {()=>{setContent(<FriendsListToShareWith item = {songData} whatToShare = {'song'}/>)}}>Share</button>}\r\n\t\t\t\t</div>:\r\n\t\t\t\t<div style = {{position:'relative', height:'50px'}}><LoadingCircle top = {\"50%\"}/></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useAddOrDeleteSong = (playlistId, songId) => {\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [isAdded, setIsAdded] = useState(false)\r\n\tconst { currentUser } = useAuth()\r\n\tconst { currentSong } = useSong()\r\n\tconst songData = songId || currentSong\r\n\t\tuseEffect(() => {\r\n\t\t\tconst response = firestore.collection('playlists').doc(playlistId).onSnapshot(res => {\r\n\t\t\t\tif(res.exists) setPlaylistSongs(res.data().songs)\r\n\t\t\t})\r\n\t\t\treturn () => response()\r\n\t\t}, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsAdded(playlistSongs.includes(songData))\r\n\t}, [playlistSongs, songData])\r\n\r\n\tfunction addOrDelete() {\r\n\t\tif (playlistSongs.length > 0 && playlistId !== undefined) {\r\n\t\t\tif (playlistSongs.includes(songData)) {\r\n\t\t\t\tconst newSongsList = playlistSongs.filter(songNum => songNum !== songData)\r\n\t\t\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\t\t\tsongs: newSongsList\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst newSongsList = playlistSongs\r\n\t\t\tnewSongsList.unshift(songData)\r\n\t\t\tconsole.log(playlistId)\r\n\t\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\t\tsongs: newSongsList\r\n\t\t\t})\r\n\r\n\t\t\tconst sortedPlaylists = [playlistId, ...currentUser.ownPlaylists.filter(id => id !== playlistId)]\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\townPlaylists: sortedPlaylists\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn [addOrDelete, isAdded]\r\n}\r\n","import React from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\n\r\nexport const Hint = ({text, direction = \"top\", ...restProps}) => {\r\n\tconst {isMobile} = useScreen()\r\n\treturn !isMobile?(\r\n\t\t<div className = {\"Hint \" + direction} {...restProps}>\r\n\t\t\t<h5>{text}</h5>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiPlusCircle } from 'react-icons/fi'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const AddToPlaylistItem = ({playlist, song}) => {\r\n\tconst [addFunc, isAdded] = useAddOrDeleteSong(playlist.id, song.id)\r\n\treturn (\r\n\t\t<div className=\"songItemMenuWindowItem\" onClick={addFunc}>\r\n\t\t\t{!isAdded ? <>\r\n\t\t\t\t<Hint text={`Add \"${song.name}\" to playlist`} />\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</> :\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Hint text={`Remove ${song.name} from playlist`} />\r\n\t\t\t\t\t<FiCheck />\r\n\t\t\t\t</>}\r\n\t\t\t{playlist.name}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { AddToPlaylistItem } from '../Playlist/AddToPlaylistItem'\r\nexport const AddToPlaylists = ({ song }) => {\r\n\tconst { yourPlaylists, currentSongData } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\t\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tuseEffect(() => {\r\n\t\tif (song?.id) {\r\n\t\t\tsetSongData(song)\r\n\t\t}\r\n\t}, [song?.id])\r\n\treturn (\r\n\t\t<div className=\"AddToPlaylists\">\r\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t{yourPlaylists.length ? yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<AddToPlaylistItem playlist = {playlist} song = {songData}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}) : <div className = \"songItemMenuWindowItem\">No playlists created</div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import shortWord from \"../other/shortWord\"\r\n\r\nexport const displayAuthorsStr = (authorslist, separator = ' & ', lenLimit = 100) =>{\r\n\tconst authorsString = authorslist?.map(author=>author.displayName).join(separator)\r\n\treturn authorsString?shortWord(authorsString, lenLimit):\"\"\r\n}","export function transformLyricsToArrayOfObjects(lyrics) {\r\n\tconst arrayOfParagraphs = []\r\n\tlet startSubstr = 0\r\n\tfor (let i = 0; i < lyrics.length; i++) {\r\n\t\tif (lyrics[i] === '\\n' || lyrics[i + 1] === undefined) {\r\n\t\t\tarrayOfParagraphs.push({\r\n\t\t\t\tstartTime: 'undefined',\r\n\t\t\t\ttext: lyrics.substr(startSubstr, i - startSubstr)\r\n\t\t\t})\r\n\t\t\tstartSubstr = i + 1\r\n\t\t}\r\n\t}\r\n\treturn arrayOfParagraphs\r\n}","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { firestore } from '../../firebase'\r\nimport { transformLyricsToArrayOfObjects } from '../../functions/other/transformLyricsToArrayOfObject'\r\nexport const EditSong = ({ song }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(song.name)\r\n\tconst [songAuthors, setSongAuthors] = useState(song.authors)\r\n\tconst [songCover, setSongCover] = useState(song.cover)\r\n\tconst [imageColors, setImageColors] = useState(song.imageColors)\r\n\tconst [lyrics, setLyrics] = useState(song.lyrics.map(obj => obj.text).join('\\n'))\r\n\tconst [foundAuthors, setFoundAuthors] = useState([])\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetSongName(song.name)\r\n\t\tsetSongAuthors(song.authors)\r\n\t\tsetSongCover(song.cover)\r\n\t\tsetImageColors(song.imageColors)\r\n\t\tsetLyrics(song.lyrics.map(obj => obj.text).join('\\n'))\r\n\t}, [song.id])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\tfunction updateSong() {\r\n\t\tif (songName.length === 0) {\r\n\t\t\tsetErrorMessage(\"Name shouldn't be empty\")\r\n\t\t}\r\n\t\telse if (songAuthors.length === 0) {\r\n\t\t\tsetErrorMessage(\"Song has to have at least 1 author\")\r\n\t\t}\r\n\t\telse if (songCover.length === 0) {\r\n\t\t\tsetErrorMessage(\"Song has to have cover\")\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (songAuthors.length > song.authors.length) {\r\n\t\t\t\tconst newAuthors = songAuthors.filter(author => { return !song.authors.find(a => a.uid === author.uid) })\r\n\t\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\t\tauthorSongs.push(song.id)\r\n\t\t\t\t\tconsole.log(authorSongs)\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse if(songAuthors.length < song.authors.length){\r\n\t\t\t\tconst newAuthors = song.authors.filter(author => { return !songAuthors.find(a => a.uid === author.uid) })\r\n\t\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\t\tconst filteredSongs = authorSongs.filter(songId => songId !== song.id)\r\n\t\t\t\t\tconsole.log(filteredSongs)\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\townSongs: filteredSongs\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfirestore.collection('songs').doc(song.id).update(\r\n\t\t\t\t{\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tauthors: songAuthors,\r\n\t\t\t\t\timage: songCover,\r\n\t\t\t\t\timageColors:imageColors,\r\n\t\t\t\t\tlyrics:transformLyricsToArrayOfObjects(lyrics)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = songAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setSongAuthors(filtered)\r\n\t}\r\n\tfunction addAuthor(data) {\r\n\t\tif (!songAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setSongAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"SongInfo\" style={{ flexDirection: 'column', marginBottom: '10px' }}>\r\n\t\t\t\t<h3>Song cover</h3>\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={songCover} alt=\"\" className=\"songImage\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ background: `linear-gradient(-135deg, ${imageColors[0]}, ${imageColors[5]}`, width: '100%', borderRadius: 'var(--standartBorderRadius2)', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n\t\t\t\t\t\t<h4 style={{ color: imageColors[1] }}>{songName}</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t<input type=\"text\" className=\"standartInput\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Authors</h3>\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundAuthors} defaultSearchMode={\"authors\"} />\r\n\t\t\t\t<div className=\"songAuthorsList\">\r\n\t\t\t\t\t{songAuthors.map((author) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t{foundAuthors.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={songAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Lyrics</h3>\r\n\t\t\t\t<textarea type=\"text\" className=\"standartInput\" style={{ height: '200px', fontWeight:'500' }} value={lyrics} onChange={(e) => setLyrics(e.target.value)} />\r\n\t\t\t</div>\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t<button className=\"addSongBtn\" onClick={updateSong}>Update Song</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { BiEditAlt } from 'react-icons/bi';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { EditSong } from '../AdminAndAuthor/EditSong';\r\nexport const SongItemMoreWindow = ({ openMoreWindow, song, moreWindowPosRelativeToViewport }) => {\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\treturn openMoreWindow ? (\r\n\t\t(\r\n\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t{currentUser.isAdmin ? <div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<EditSong song = {song}/>)}}><BiEditAlt />Edit</div> : null}\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t<AddToPlaylists song={song} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t) : null\r\n\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\n\r\nexport const AuthorsList = ({listOfAuthors}) => {\r\n\tconst { displayAuthorsFull } = useSong()\r\n\treturn (\r\n\t\t<div className=\"rightSideAuthorsList\" >\r\n\t\t\t<div className=\"rightSideAuthorsListCentralBlock\">\r\n\t\t\t\t{displayAuthorsFull(listOfAuthors)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag, FiUsers } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { BiEditAlt } from 'react-icons/bi';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { AuthorsList } from '../FullScreenPlayer/AuthorsList'\r\nimport { EditSong } from '../AdminAndAuthor/EditSong';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nexport const SongItemMobileMoreWindow = ({ song }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\treturn (\r\n\t\t<div className=\"SongItemMobileMoreWindow\">\r\n\t\t\t<div className=\"simpleSongElement\" style = {{background:song.imageColors[0]}}>\r\n\t\t\t\t<div className=\"simpleSongElementImage\" >\r\n\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>{song.name}</span>\r\n\t\t\t</div>\r\n\t\t\t{currentUser.isAdmin ? <div className=\"songItemMenuWindowItem\" onClick = {()=>{setContent(<EditSong song = {song}/>)}}><BiEditAlt />Edit</div> : null}\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>setContent(<AddToPlaylists song={song} />)}>\r\n\t\t\t\t<MdPlaylistAdd />Add to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<AuthorsList listOfAuthors={song.authors} title={\"Authors\"} />) }}><FiUsers />Authors</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from './colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { FiX, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { MdKeyboardArrowRight, MdPlaylistAdd } from 'react-icons/md'\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { deleteSongFromLibrary } from '../../functions/other/deleteSongFromLibrary'\r\nimport { addSongToLibrary } from '../../functions/add/addSongToLibrary'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {AddToPlaylists} from './AddToPlaylists'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { SongItemMoreWindow } from '../Windows/SongItemMoreWindow'\r\nimport { SongItemMobileMoreWindow } from '../Windows/SongItemMobileMoreWindow'\r\nimport { addSongToHistory } from '../../functions/add/addSongToHistory'\r\nexport const SongItem = ({ song, localIndex, showListens = false, isNewSong = false, listOfChosenSongs, setListOfSongs, position }) => {\r\n\tconst { yourSongs, setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setCurrentSongInQueue } = useSong()\r\n\tconst {isMobile} = useScreen()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst { currentUser, setCurrentUser } = useAuth()\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction chooseSongItem() {\r\n\t\tsetCurrentSong(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: song.id\r\n\t\t})\r\n\t\t\r\n\t\tsetCurrentSongInQueue(localIndex)\r\n\t\tif (song.id === currentSong && play) {\r\n\t\t\tsongRef.current.pause();\r\n\t\t\tsetPlay(false)\r\n\t\t\t// clearTimeout(listenCountTimeOut)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsongRef.current.play();\r\n\t\tsetPlay(true)\r\n\r\n\t\taddSongToHistory(song.id, currentUser)\r\n\t}\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(position || e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(song.listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\tfunction addOrDeleteButton() {\r\n\t\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\t\treturn <button onClick={(e) => addSongToLibrary(e, song, currentUser, setCurrentUser)} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"add song\"}/>\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <button onClick = {(e)=>{e.stopPropagation();openConfirm(`You sure you want to delete \"${song.name}\" from library?`, \"Yes, delete it\", \"No, just kidding\", (e) => {deleteSongFromLibrary(e, song, currentUser, yourSongs);closeConfirm()})}} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"delete song\"}/>\r\n\t\t\t\t<FiX />\r\n\t\t\t</button>\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenSongs} setListOfChosenItems = {setListOfSongs} itemId = {song.id}/>\r\n\t\t\t<div className={'SongItem ' + (song.id === currentSong && play ? \"playingNow\" : \"\")} onClick={chooseSongItem} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t{shortWord(song.name, window.innerWidth > 1000?30:17) }\r\n\t\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{!isMobile?<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>:<div className=\"songItemAuthor\">{displayAuthorsStr(song.authors, ' & ', 30)}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMoreBtn\" >\r\n\t\t\t\t\t{addOrDeleteButton()}\r\n\t\t\t\t\t<button onClick={isMobile?(e)=>{e.stopPropagation();toggleModal();setContent(<SongItemMobileMoreWindow song = {song}/>)}:openSongItemMoreWindow}>\r\n\t\t\t\t\t\t<Hint text = {\"more\"}/>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<SongItemMoreWindow openMoreWindow = {openMoreWindow} song = {song} moreWindowPosRelativeToViewport = {moreWindowPosRelativeToViewport}/>\r\n\t\t\t</div >\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/other/checkNumber'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport {LoadingCircle} from '../Loading/LoadingCircle'\r\nimport { BlurredBg } from '../SignIn-Up/BlurredBg'\r\nexport const MainBanner = () => {\r\n\tconst [bannerColors, setBannerColors] = useState([])\r\n\tconst [currentSliderPage, setcurrentSliderPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\t\r\n\tconst [topAuthor, setTopAuthor] = useState({})\r\n\tconst [topSong, setTopSong] = useState({})\r\n\tconst [topAlbum, setTopAlbum] = useState({})\r\n\t\r\n\tasync function findTop(setFunc, list, criterion) {\r\n\t\tconst response = (await firestore.collection(list).orderBy(criterion, 'desc').limit(1).get()).docs[0].data()\r\n\t\tsetFunc(response)\r\n\t\tsetBannerColors(prev=>[...prev, response.imageColors[0]])\r\n\t\tif(list === 'playlists') setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindTop(setTopAuthor, 'users', 'subscribers')\r\n\t\tfindTop(setTopSong, 'songs', 'listens')\r\n\t\tfindTop(setTopAlbum, 'playlists', 'listens')\r\n\t\t\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = \"MainBanner\" style = {{background:bannerColors[currentSliderPage]}}>\r\n\t\t\t{loading? <LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 0?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular artist on platform</h3>\r\n\t\t\t\t\t\t\t<AuthorItemBig data = {topAuthor}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 1?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular song on platform</h3>\r\n\t\t\t\t\t\t\t<SongItem song = {topSong} localIndex = {0} showListens/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 2?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular album on platform</h3>\r\n\t\t\t\t\t\t\t<PlaylistItem playlist = {topAlbum}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"sliderBtns\">\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage-1, 2, 0))}><BiChevronLeft/></button>\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage+1, 2, 0))}><BiChevronRight/></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <BlurredBg circleColor = \"#fff\"/> */}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function findIfSongIsNew(song){\r\n\tconst songReleaseDate = new Date(song.releaseDate)\r\n\t//1 814 400 000 - 3 weeks\r\n\tif((new Date().getTime() - songReleaseDate.getTime()) < 1814400000) return true\r\n\r\n\treturn false\r\n}","import React from 'react'\r\n\r\nexport const MoreBtn = ({func, lenOfList, maxLen = 5, boolVal}) => {\r\n\treturn (\r\n\t\t<div onClick = {lenOfList > maxLen?func:null} className = \"MoreBtn\" style = {lenOfList <= maxLen?{display:'none'}:{}}>\r\n\t\t\t<button style = {boolVal?{background:'var(--pink)', color:'#ff8db2'}:{}}>\r\n\t\t\t\t{boolVal?\"Close\":\"More\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { MoreBtn } from '../Buttons/MoreBtn'\r\n\r\nexport const TitleWithMoreBtn = ({title, func, boolVal, lenOfList, maxLen = 5, marginBottom = 0}) => {\r\n\treturn lenOfList !== 0?(\r\n\t\t<div className=\"topTitle\" style = {{margin:'10px 0'}}>\r\n\t\t\t<h2 style = {{margin:marginBottom}}>{title}</h2>\r\n\t\t\t<MoreBtn func={func} boolVal={boolVal} lenOfList={lenOfList} maxLen = {maxLen}/>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { FaPlay, } from 'react-icons/fa'\r\nimport { TiArrowShuffle , TiMediaPlay} from 'react-icons/ti'\r\nimport { FaHistory} from 'react-icons/fa'\r\nimport { BsPlayFill} from 'react-icons/bs'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { TitleWithMoreBtn } from '../Basic/TitleWithMoreBtn'\r\nimport shuffleSongs from '../../functions/other/shuffleSongs'\r\nimport { Link } from 'react-router-dom'\r\nimport { HISTORY_ROUTE } from '../../utils/consts'\r\n\r\nexport const SongList = ({ listOfSongs, source, title = \"\", showListens = false, isNewSong = false, showCount = false, listOfChosenSongs, setListOfSongs, showSearch = false, displayIfEmpty, showhistory = false }) => {\r\n\tconst { setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSong } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [showMoreSongs, setShowMoreSongs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displaySongs, setDisplaySongs] = useState(listOfSongs)\r\n\tuseEffect(() => {\r\n\t\tsetDisplaySongs(listOfSongs)\r\n\t}, [listOfSongs])\r\n\t\r\n\tfunction setQueueInSongList() {\r\n\t\tif(source !== 'no' && listOfSongs.length !== 0){\r\n\t\t\tsetCurrentSongQueue(listOfSongs)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tconst listSongsIds = listOfSongs.map(song => song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playShuffledList(e){\r\n\t\te.stopPropagation()\r\n\t\tlet newList = shuffleSongs(listOfSongs)\r\n\t\tconsole.log(newList)\r\n\t\tsetCurrentSongQueue(newList)\r\n\t\tsetCurrentSongPlaylistSource(source)\r\n\t\tconst listSongsIds = newList.map(song => song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastQueue: {\r\n\t\t\t\timage: source.image,\r\n\t\t\t\tname: source.name,\r\n\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\tsource: source.source\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetCurrentSong(newList[0].id)\r\n\t\tplaySong()\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className=\"SongList\" onClick={setQueueInSongList}>\r\n\t\t\t{title.length !== 0 ? <TitleWithMoreBtn title={title} func={() => setShowMoreSongs(!showMoreSongs)} boolVal={showMoreSongs} lenOfList={listOfSongs.length} /> : null}\r\n\t\t\t{showSearch?<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t<SearchBar value = {searchValue} setValue = {setSearchValue} allFoundSongs = {displaySongs} setAllFoundSongs = {setDisplaySongs} defaultSearchMode = {\"songs\"} defaultSongsListValue = {listOfSongs} inputText = {\"Search for songs\"}/>\r\n\t\t\t\t{showhistory?<Link to = {HISTORY_ROUTE}><button className = \"standartButton\" style = {{marginTop:'10px', marginBottom:'0', height:'44px', width:'44px', padding:'0', marginLeft:'6px', background:'var(--playlistsColor)'}}><FaHistory style = {{marginRight:'0'}}/></button></Link>:null}\r\n\t\t\t</div>:null}\r\n\t\t\t{/* {showControls?\r\n\t\t\t\t<div className = \"listControlButtons\">\r\n\t\t\t\t\t<button className = \"standartButton\"><BsPlayFill /></button>\r\n\t\t\t\t\t<button className = \"standartButton\" onClick = {playShuffledList}><TiArrowShuffle /></button>\r\n\t\t\t\t</div> :null\r\n\t\t\t} */}\r\n\t\t\t{displaySongs.map((song, index) => {\r\n\t\t\t\tif (title.length !== 0) {\r\n\t\t\t\t\tif (showMoreSongs) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (index < 5) {\r\n\t\t\t\t\t\t\treturn <span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t<div style = {{display:\"flex\", justifyContent:'center'}}>{listOfSongs.length === 0?displayIfEmpty:null}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findIfSongIsNew from '../../functions/find/findIfSongIsNew'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\n\r\nexport const RecentSongs = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recentSongs, setRecentSongs] = useState([])\r\n\tfunction findRecentSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async songId=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(findIfSongIsNew(songData) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecentSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(yourAuthors !== undefined && yourAuthors.length !== 0 && recentSongs.length === 0) findRecentSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<SongList listOfSongs = {recentSongs} source = {{source: `/home`, name: \"New Songs\", image: \"\", songsList: recentSongs}} title = {\"New Songs\"} isNewSong/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nfunction findSimilarArtistsNames(authorsSongsArr, authorsData, setSimilarAuthors) {\r\n\tlet peopleArray = []\r\n\tauthorsSongsArr.forEach((song) => {\r\n\t\tlet newAuthors = song.authors\r\n\t\tif (newAuthors.length !== 0) {\r\n\t\t\tpeopleArray.push(newAuthors)\r\n\t\t}\r\n\t})\r\n\tpeopleArray = peopleArray.flat()\r\n\tconst uniqueAuthorsSet = new Set(peopleArray.map(people=>people.uid).filter(id=>id!==authorsData.uid))\r\n\tconst uniqueAuthorsIdsArray = Array.from(uniqueAuthorsSet)\r\n\tconst uniqueAuthorsDataArray = []\r\n\tfor (let i = 0; i < uniqueAuthorsIdsArray.length; i++) {\r\n\t\tfor (let j = 0; j < peopleArray.length; j++) {\r\n\t\t\tif(uniqueAuthorsIdsArray[i] === peopleArray[j].uid){\r\n\t\t\t\tuniqueAuthorsDataArray.push(peopleArray[j])\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tsetSimilarAuthors(uniqueAuthorsDataArray)\r\n\treturn uniqueAuthorsDataArray\r\n}\r\n\r\nexport default async function findSimilarArtists(authorsData, setSimilarAuthors) {\r\n\tif (authorsData !== undefined && authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\tconst authorsSongsArray = []\r\n\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\tauthorsSongsArray.push(songData)\r\n\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\treturn findSimilarArtistsNames(authorsSongsArray, authorsData, setSimilarAuthors)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t}\r\n}\r\n\r\n\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\n\r\nexport const AuthorsList = ({ listOfAuthors, title = \"\", listOfChosenAuthors, setListOfChosenAuthors }) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAuthors.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAuthors])\r\n\treturn listOfAuthors.length > 0?(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAuthors.map((author) => {\r\n\t\t\t\t\treturn <AuthorItemBig data={author} key={author.uid} listOfChosenAuthors = {listOfChosenAuthors} setListOfChosenAuthors = {setListOfChosenAuthors}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current !== null && wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findSimilarArtists from '../../functions/find/findSimilarArtists'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\n\r\nexport const RecommendedAuthors = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recommendationAuthors, setRecommendationAuthors] = useState([])\r\n\r\n\tconst [uniqueAuthors, setUniqueAuthors] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tif (yourAuthors !== undefined) {\r\n\t\t\tyourAuthors.forEach((author) => {\r\n\t\t\t\tfindSimilarArtists(author, setRecommendationAuthors)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\trecommendationAuthors.forEach(author=>{\r\n\t\t\tconst uniqueAuthorsUIDSArray = uniqueAuthors.map(author=>author.uid)\r\n\t\t\tif(!currentUser.addedAuthors.includes(author.uid) && !uniqueAuthorsUIDSArray.includes(author.uid)){\r\n\t\t\t\tsetUniqueAuthors(prev=>[...prev, author])\r\n\t\t\t}\r\n\t\t})\r\n}, [recommendationAuthors])\r\n\treturn (\r\n\t\t<div className = \"RecommendedAuthors\">\r\n\t\t\t<AuthorsList listOfAuthors = {uniqueAuthors} title = {\"Recommended Authors\"}/>\r\n\t\t\t{/* <h2>Recommended Authors</h2>\r\n\t\t\t<div className=\"artistsWrapper\">\r\n\t\t\t\t{uniqueAuthors.map((author, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ImportantMessage = ({message, image, button}) => {\r\n\treturn (\r\n\t\t<div className = \"importantMessage\">\r\n\t\t\t<div>\r\n\t\t\t\t{image?<img loading = \"lazy\" src={image} alt=\"\" />:null}\r\n\t\t\t\t<h3>{message}</h3>\r\n\t\t\t\t{button?button:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {useSong} from '../../contexts/SongContext'\r\nimport { SongList } from '../Lists/SongList'\r\nimport {ImportantMessage} from '../MessagePlates/ImportantMessage'\r\nexport const RecommendedSongs = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [recommendedSongs, setRecommendedSongs] = useState([])\r\n\tfunction fetchRecommendedSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(!currentUser.addedSongs.includes(songId) && !tempSongsIds.includes(songData.id) && index <= 3){\r\n\t\t\t\t\tsetRecommendedSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// tempSongArray.sort((songA, songB)=>songB.listens - songA.listens)\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRecommendedSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = 'RecommendedSongs'>\r\n\t\t\t<SongList listOfSongs = {recommendedSongs} source = {{source: `/home`, name: \"Recommended Songs\", image: \"\", songsList: recommendedSongs}} title = {\"Recommended Songs\"} displayIfEmpty = {<ImportantMessage message = {\"No songs recommended. Add favorite authors so we could know what to recommend\"} image = {\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\"}/>}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SongList } from '../Lists/SongList'\r\n\r\nexport const Top15Songs = () => {\r\n\tconst [topSongs, setTopSongs] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tfunction fetchTopSongs(){\r\n\t\tfirestore.collection('songs').orderBy('listens', 'desc').limit(15).get().then(res=>{\r\n\t\t\tres.docs.forEach(song=>{\r\n\t\t\t\tsetTopSongs(prev=>[...prev, song.data()])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchTopSongs()\r\n\t}, [])\r\n\treturn !loading?(\r\n\t\t<SongList \r\n\t\t\tlistOfSongs = {topSongs} \r\n\t\t\tsource = {{source:`/home`,name:\"Top 15 Songs\", image:\"https://media.istockphoto.com/vectors/fire-icon-illustration-for-design-stock-vector-vector-id931601050?k=6&m=931601050&s=170667a&w=0&h=fhRQfwwsW6aXK9OSDM-yj842SFFl2Q9ll6ch-xCK5es=\", songsList:topSongs}}\r\n\t\t\ttitle = {'Top 15 Songs'}\r\n\t\t\tshowListens\t\r\n\t\t\tshowCount\r\n\t\t/>\r\n\t):<LoadingCircle/>\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\n\r\nexport const AlbumList = ({listOfAlbums, title = \"\", loading = true, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 220\r\n\t\tsetScrollLeft(prev - 220)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 220\r\n\t\tsetScrollLeft(prev + 220)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAlbums.length > 0 && !loading){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAlbums])\r\n\treturn listOfAlbums.length > 0?\r\n\t\tloading?<LoadingCircle/>:\r\n\t\t(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAlbums.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key={index} listOfChosenAlbums = {listOfChosenAlbums} setListOfChosenAlbums = {setListOfChosenAlbums}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\n\r\nexport const Slider = ({pages, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"Slider\">\r\n\t\t\t{pages.map((pageName, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = {\"sliderItem \" + (index === currentPage?\"current\":\"\")} key = {index} onClick = {()=>setCurrentPage(index)}>\r\n\t\t\t\t\t\t{pageName}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/wave2.f62cb572.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useEffect } from 'react'\r\nexport const LibraryPlaylistItem = ({playlist}) => {\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource({source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} className = \"playlistWrapper\">\r\n\t\t\t<div className=\"library playlistItem\" style = {{backgroundImage:`url(${playlist.image})`}}>\r\n\t\t\t\t{playlist.image?null:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t<h2 style = {{background:playlist.imageColors[2]}}>{shortWord(playlist.name, 10) }</h2>\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","export const findVisiblePlaylists = (screenWidth) => {\r\n\tif(screenWidth < 1990 && screenWidth >= 1780) return 7\r\n\telse if(screenWidth < 1780 && screenWidth >= 1570) return 6\r\n\telse if(screenWidth < 1570 && screenWidth >= 1360) return 5\r\n\telse if(screenWidth < 1360 && screenWidth >= 1150) return 4\r\n\telse if(screenWidth < 1150 && screenWidth >= 1000) return 3\r\n\telse if(screenWidth < 1000 && screenWidth >= 892) return 6\r\n\telse if(screenWidth < 892 && screenWidth >= 754) return 5\r\n\telse if(screenWidth < 754 && screenWidth >= 614) return 4\r\n\telse if(screenWidth < 614 && screenWidth >= 464) return 3\r\n\telse return 2\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport wave from '../../images/wave2.svg'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { LibraryPlaylistItem } from './LibraryPlaylistItem'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { findVisiblePlaylists } from '../../functions/find/findVisiblePlaylists'\r\nexport const SongsPage = () => {\r\n\tconst { yourSongs, yourPlaylists, setYourSongs } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst {screenWidth} = useScreen()\r\n\tconst [playlistsVisible, setPlaylistsVisible] = useState(findVisiblePlaylists(screenWidth))\r\n\tuseEffect(() => {\r\n\t\tsetPlaylistsVisible(findVisiblePlaylists(screenWidth))\r\n\t}, [screenWidth])\r\n\treturn (\r\n\t\t<div className=\"SongsPage\">\r\n\t\t\t<div className=\"playLists\">\r\n\t\t\t\t<div className=\"playlistContent\">\r\n\t\t\t\t\t{yourPlaylists.length?yourPlaylists.map((p, index) => {\r\n\t\t\t\t\t\tif(index < playlistsVisible){\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<LibraryPlaylistItem playlist={p} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}):<h3 style = {{position:'absolute', left:'50%', top:'40%', transform:'translate(-50%, -50%)'}}>You don't have playlists</h3>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"playlistsBackground\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={wave} alt=\"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"yourSongsList\">\r\n\t\t\t\t<SongList listOfSongs={yourSongs} source={{ source: '/library', name: \"Your Library\", image: currentUser.photoURL, songsList: yourSongs }} showSearch showhistory displayIfEmpty={<h3>Your library is empty</h3>} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from '../FullScreenPlayer/colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { FiCheck, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nexport const SongItemChoice = ({ song, listOfSongs, setListOfSongs, showListens = false, listens = 0, isNewSong = false }) => {\r\n\tconst { setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setYourSongs, yourPlaylists, currentSongQueue, setCurrentSongInQueue, fetchYourSongs } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst {currentUser} = useAuth()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\tfunction addSongToList() {\r\n\t\tif(!listOfSongs.includes(song.id)){\r\n\t\t\treturn setListOfSongs(prev=>[...prev, song.id])\r\n\t\t}\r\n\r\n\t\tlet filteredList = listOfSongs.filter(el=>el !== song.id)\r\n\t\tsetListOfSongs(filteredList)\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToLibrary(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (currentUser.addedSongs.includes(song.id)) {\r\n\t\t\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\taddedSongs:newList\r\n\t\t\t})\r\n\t\t\tfetchYourSongs()\r\n\t\t\tsetOpenMoreWindow(false)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet newList = currentUser.addedSongs\r\n\t\tnewList.push(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedSongs:newList\r\n\t\t})\r\n\t\tfetchYourSongs()\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToPlaylist(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\t\tyourPlaylists[e.target.id].songs = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tyourPlaylists[e.target.id].songs.push(song.id)\r\n\t}\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\tNew\r\n\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'SongItem ' + (listOfSongs.includes(song.id) ? \"inList\" : \"\")} onClick={addSongToList} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t{song.name}\r\n\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t<button onClick={addOrDeleteSongToLibrary}>\r\n\t\t\t\t\t{!currentUser.addedSongs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/find/findVariantsOfName'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const AddPlaylist = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(\"\")\r\n\tconst [playlistCover, setPlaylistCover] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin?[{uid:currentUser.uid, photoURL:currentUser.photoURL, displayName:currentUser.displayName}]:[])\r\n\tconst [releaseDate, setReleaseDate] = useState(currentUser.isAdmin?\"\":new Date().toString())\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState([])\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\t\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend=>{if(friend.status === 'added') return friend.uid})\r\n\t\tconst response = currentUser.isAdmin?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue):\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tfirestore.collection('playlists').doc(uid).set(\r\n\t\t\t{\r\n\t\t\t\tid: uid,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:0,\r\n\t\t\t\tisAlbum:playlistStatus,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\t\tchosenAuthors.forEach(async author=>{\r\n\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\tconst authorData = authorRef.data()\r\n\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\tauthorPlaylists.push(uid)\r\n\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\townPlaylists:authorPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\tplace:'playlists',\r\n\t\t\tuid:uid,\r\n\t\t\tvariantsOfName:findVariantsOfName(playlistName)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<form onSubmit={addPlaylistToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={()=>timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid?null:removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<SearchBar value = {songsSearch} setValue = {setSongsSearch} setAllFoundSongs = {setAllSongs} defaultSearchMode = {'songs'}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\tallSongs.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor?\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t</label>:null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\n\r\nexport const CreatePlaylistPage = () => {\r\n\treturn (\r\n\t\t<div className = 'CreatePlaylistPage'>\r\n\t\t\t<AddPlaylist/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { BiFolderPlus } from 'react-icons/bi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { CreatePlaylistPage } from './CreatePlaylistPage'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { useState } from 'react'\r\nexport const PlaylistsPage = () => {\r\n\tconst { yourPlaylists } = useSong()\r\n\tconst [playlistsDisplay, setPlaylistsDisplay] = useState(yourPlaylists)\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\treturn (\r\n\t\t<div className=\"PlaylistsPage\">\r\n\t\t\t<div style = {{display:'flex'}} className = \"searchAndCreatePlaylist\">\r\n\t\t\t\t<SearchBar value = {searchValue} setValue = {setSearchValue} setResultPlaylists = {setPlaylistsDisplay} defaultSearchMode = {'playlists'} defaultPlaylistsListValue = {yourPlaylists}/>\r\n\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }}>\r\n\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\tCreate Playlist\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"playlistsContainer\">\r\n\t\t\t\t{playlistsDisplay && playlistsDisplay.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist={playlist} key={playlist.id} />\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {AuthorItemBig} from '../AuthorPage/AuthorItemBig'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const AuthorsPage = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displayAuthors, setDisplayAuthors] = useState(yourAuthors)\r\n\treturn (\r\n\t\t<div className = \"AuthorsPage\">\r\n\t\t\t<SearchBar value = {searchValue} setValue = {setSearchValue} setResultAuthorList = {setDisplayAuthors} defaultSearchMode = {\"authors\"} defaultAuthorsListValue = {yourAuthors}/>\r\n\t\t\t<div className=\"authorsContainer\">\r\n\t\t\t\t{displayAuthors.map((authorData)=>{\r\n\t\t\t\t\treturn <AuthorItemBig data = {authorData} key = {authorData.uid}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const IsUserOnlineCircle = ({userUID}) => {\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<div className = \"onlineCircle\"></div>:null\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAmountOfUnseenMessages } from '../../functions/find/findAmountOfUnseenMessages'\r\nexport const AmountOfUnseenMessages = ({amountOfUnseen}) => {\r\n\t\r\n\treturn amountOfUnseen !== 0?(\r\n\t\t<div className = \"AmountOfUnseenMessages\">\r\n\t\t\t{amountOfUnseen}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\n\r\nexport const SeenByCircle = ({listOfSeen}) => {\r\n\treturn (\r\n\t\t<div className = \"SeenByCircle\" style = {listOfSeen !== undefined? listOfSeen.length <= 1?{opacity:'1', visibility:'visible'}:{}:null}></div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiMusic, FiUser } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {BsDot} from 'react-icons/bs'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { SeenByCircle } from './SeenByCircle'\r\nexport const LastSentMessage = ({ messages }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [lastAttachedItem, setLastAttachedItem] = useState(\"\")\r\n\tconst [shouldPutDot, setShouldPutDot] = useState(false)\r\n\tconst [lastMessage, setLastMessage] = useState(\"\")\r\n\tconst messageIcons = [null, <FiMusic />, <BiAlbum />, <FiUser />]\r\n\tconst [lastIcon, setLastIcon] = useState(0)\r\n\tasync function findWhatToWriteUnderName() {\r\n\t\tif (messages !== undefined) {\r\n\t\t\tconst lastAttachedItem = messages[messages.length - 1]\r\n\t\t\tsetLastMessage(str => str += lastAttachedItem.message)\r\n\t\t\tsetShouldPutDot(lastAttachedItem.message.length !== 0) \r\n\t\t\tif (lastAttachedItem.attachedSongs.length) {\r\n\t\t\t\tconst songName = (await firestore.collection('songs').doc(lastAttachedItem.attachedSongs[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(1)\r\n\t\t\t\tsetLastAttachedItem(str => str += songName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAlbums.length) {\r\n\t\t\t\tconst playlistName = (await firestore.collection('playlists').doc(lastAttachedItem.attachedAlbums[0]).get())\r\n\t\t\t\tif(playlistName.exists) setLastAttachedItem(str => str +=playlistName.data().name)\r\n\t\t\t\telse setLastAttachedItem(str => str +=\"Deleted Album \")\r\n\t\t\t\tsetLastIcon(2)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAuthors.length) {\r\n\t\t\t\tconst authorName = (await firestore.collection('users').doc(lastAttachedItem.attachedAuthors[0]).get()).data().displayName\r\n\t\t\t\tsetLastIcon(3)\r\n\t\t\t\tsetLastAttachedItem(str => str +=authorName)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindWhatToWriteUnderName()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className=\"messageShowOutside\">\r\n\t\t\t{messages[messages.length - 1].sender === currentUser.uid?<span style = {{marginRight:'5px'}}>You:</span>:null}\r\n\t\t\t{shortWord(lastMessage, 30)}\r\n\t\t\t{shouldPutDot && lastAttachedItem.length?<BsDot/>:null}\r\n\t\t\t{messageIcons[lastIcon]}\r\n\t\t\t{lastAttachedItem}\r\n\t\t\t<SeenByCircle listOfSeen = {messages[messages.length - 1].seenBy}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { findAmountOfUnseenMessages } from '../../functions/find/findAmountOfUnseenMessages'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\nimport { AmountOfUnseenMessages } from './AmountOfUnseenMessages'\r\nimport { LastSentMessage } from './LastSentMessage'\r\n\r\nexport const ChatItem = ({ chatData }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatName, chatImage, participants, messages } = chatData\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [amountOfUnseen, setAmountOfUnseen] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountOfUnseen(findAmountOfUnseenMessages(messages, currentUser))\r\n\t}, [])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName === '') {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [])\r\n\treturn chatData?(\r\n\t\t<Link to={`/chat/${chatData.id}`}>\r\n\t\t\t<div className={\"ChatItem \" + (amountOfUnseen > 0?\"unseen\":\"\")} >\r\n\t\t\t\t<div className=\"chatItemImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={chatImage || otherPerson.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<IsUserOnlineCircle userUID = {otherPerson.uid}/>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<h4 style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n\t\t\t\t\t\t<span>{chatName || otherPerson.displayName}</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{messages.length?<span style={{ opacity: '.6', fontWeight: '500', fontSize: '.8em' }}>{displayDate(messages[messages.length - 1].sentTime, chatData && ( Date.now() - new Date(messages[messages.length - 1].sentTime).getTime()) > 86000000 ? 0 : 2)}</span>:null}\r\n\t\t\t\t\t\t\t<AmountOfUnseenMessages amountOfUnseen = {amountOfUnseen}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t{messages.length?<p style={messages[messages.length - 1].sender !== currentUser.uid ? { color: '#fff' } : {}}>{<LastSentMessage messages={messages} />}</p>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t):null\r\n}\r\n","export function findAmountOfUnseenMessages(messages, currentUser) {\r\n\treturn messages.reduce((accum, message)=>{\r\n\t\tif(message.sender !== currentUser.uid){\r\n\t\t\tif(message.seenBy !== undefined){\r\n\t\t\t\tif(!message.seenBy.includes(currentUser.uid)){\r\n\t\t\t\t\tconsole.log(\"i'm here\")\r\n\t\t\t\t\treturn ++accum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn accum\r\n\t}, 0)\r\n}","import React from 'react'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../../firebase'\r\nexport const DownloadPhotoButton = ({setErrorMessage, setImageLocalPath, downloadedPhoto, setDownloadedPhoto, place, btnText = \"Download song cover\"}) => {\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/' || place === 'chatCovers/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<label className=\"downloadFile\">\r\n\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t{btnText}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"photoLoadLine\" style={downloadedPhoto !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, place, setDownloadedPhoto)} />\r\n\t\t</label>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport {findChatURL} from '../../functions/find/findChatURL'\r\nexport const CreateChat = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [foundFriends, setFoundFriends] = useState(yourFriends)\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst [chatCover, setChatCover] = useState(\"\")\r\n\tconst [chatName, setChatName] = useState(\"\")\r\n\tconst [errorMessage, setRrrorMessage] = useState(\"\")\r\n\tconst chatId = getUID()\r\n\tconst history = useHistory()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tuseEffect(() => {\r\n\t\tif(chosenFriends.length >= 1){\r\n\t\t\tfindChatURL(chosenFriends, currentUser, setShouldCreate, setFriendChatId)\r\n\t\t}\r\n\t}, [chosenFriends])\r\n\treturn (\r\n\t\t<div className=\"CreateChat\">\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundFriends} focus inputText={\"Search for friends\"} defaultSearchMode={\"authors\"} />\r\n\t\t\t{foundFriends.map(friend => {\r\n\t\t\t\treturn <PersonTiny data={friend} chosenArray={chosenFriends} setChosenArray={setChosenFriends} />\r\n\t\t\t})}\r\n\t\t\t{chosenFriends.length > 1 && shouldCreate ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" style={{ marginBottom: '10px' }} className=\"standartInput\" placeholder={\"Enter chat name\"} value={chatName} onChange={e => setChatName(e.target.value)} />\r\n\t\t\t\t\t<DownloadPhotoButton setErrorMessage={setRrrorMessage} setImageLocalPath={() => { return null }} downloadedPhoto={chatCover} setDownloadedPhoto={setChatCover} place={'chatCovers/'} btnText = {\"Download chat image\"}/>\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t{chosenFriends.length >= 1?<button className=\"addSongBtn\" onClick = {()=>{if(shouldCreate) {createChat([currentUser.uid, ...chosenFriends], chatId, chatName, chatCover, [currentUser.uid]); history.push(`/chat/${chatId}`)} else history.push(`/chat/${friendChatId}`)}}>{shouldCreate?\"Create Chat\":\"Go to chat\"}</button>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { useHistory } from 'react-router'\r\nimport { Hint } from './Hint'\r\nexport const BackBtn = ({color = \"\"}) => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"BackBtn\">\r\n\t\t\t<button onClick={() => history.goBack()} style = {color.length?{color:color}:{}}>\r\n\t\t\t\t<Hint text = {\"go back\"} direction = {\"bottom\"}/>\r\n\t\t\t\t<FiArrowLeft />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\nimport { Slider } from '../Tools/Slider'\r\nimport { fetchItemsList } from '../../functions/fetch/fetchItemsList'\r\nexport const AttachmentList = ({ chatId }) => {\r\n\tconst [attachmentList, setAttachmentList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [sliderCurrentPage, setSliderCurrentPage] = useState(0)\r\n\tconst attachmentContent = [\r\n\t\t<SongList listOfSongs={attachmentList} source={{ source: `/chat/${chatId}`, name: `Chat with ${chatId}`, image: \"\", songsList: attachmentList }} />,\r\n\t\t<AuthorsList listOfAuthors={attachmentList} />,\r\n\t\t<AlbumList listOfAlbums={attachmentList} loading={loading} />\r\n\t]\r\n\tasync function fetchAttachedData(attachedType, firebaseCollection) {\r\n\t\tconst chatData = await firestore.collection('chats').doc(chatId).get()\r\n\t\tchatData.data().messages.forEach(message => {\r\n\t\t\tif (message[attachedType].length > 0) {\r\n\t\t\t\tfetchItemsList(message[attachedType], firebaseCollection, setAttachmentList, (res) => res, () => setLoading(false), message[attachedType].length, 1)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tswitch (sliderCurrentPage) {\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchAttachedData('attachedSongs', 'songs').then(() => setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tfetchAttachedData('attachedAuthors', 'users').then(() => setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchAttachedData('attachedAlbums', 'playlists').then(() => setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [sliderCurrentPage])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachmentList([])\r\n\t}, [chatId])\r\n\r\n\treturn (\r\n\t\t<div className=\"AttachmentList\">\r\n\t\t\t<Slider pages={[\"Songs\", \"Authors\", \"Playlists\"]} currentPage={sliderCurrentPage} setCurrentPage={(page) => { setSliderCurrentPage(page); setLoading(true); setAttachmentList([]) }} />\r\n\t\t\t{loading ? <LoadingCircle /> :\r\n\t\t\t\tattachmentList.length > 0 ? attachmentContent[sliderCurrentPage] : <h2>Nothing here</h2>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useFetchDocs } from '../../hooks/useFetchDocs'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FiSettings} from 'react-icons/fi'\r\nimport {MdModeEdit} from 'react-icons/md'\r\nimport {RiVolumeUpLine } from 'react-icons/ri'\r\nimport {ImAttachment} from 'react-icons/im'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { Slider } from '../Tools/Slider'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\n\r\nexport const ChatInfo = ({ data }) => {\r\n\tconst [participants, setParticipants] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [chatNameValue, setChatNameValue] = useState(data.chatName)\r\n\tconst [newChatPhoto, setNewChatPhoto] = useState(data.chatImage)\r\n\tconst [newImageLocalPath, setNewImageLocalPath] = useState(\"\")\r\n\tconst [newImageColors, setNewImageColors] = useState(data.imageColors || [])\r\n\tconst {setContent} = useModal()\r\n\tconst [participantsPage, setParticipantsPage] = useState(0)\r\n\tconst [showUpdateBtn, setShowUpdateBtn] = useState(false)\r\n\tuseFetchDocs(setLoading, data.participants, setParticipants, [data.id])\t\r\n\tuseEffect(() => {\r\n\t\tif(chatNameValue.trim() !== data.chatName.trim() || newChatPhoto !== data.chatImage){\r\n\t\t\tsetShowUpdateBtn(true)\r\n\t\t}\r\n\t\telse setShowUpdateBtn(false)\r\n\t}, [chatNameValue, newChatPhoto])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChatNameValue(data.chatName)\r\n\t}, [data.id])\r\n\r\n\tfunction updateChatInfo(){\r\n\t\tfirestore.collection('chats').doc(data.id).update({\r\n\t\t\tchatName:chatNameValue,\r\n\t\t\tchatImage:newChatPhoto,\r\n\t\t\timageColors:newImageColors\r\n\t\t})\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetNewImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\treturn(\r\n\t\t<div className=\"ChatInfo\">\r\n\t\t\t<ColorExtractor src = {newImageLocalPath} getColors = {(colors)=>setNewImageColors(colors)}/>\r\n\t\t\t<div className=\"chatInfoImageAndName\">\r\n\t\t\t\t<div className=\"chatInfoImage\">\r\n\t\t\t\t\t<label className = \"changePhoto\">\r\n\t\t\t\t\t\t<MdModeEdit/>\r\n\t\t\t\t\t\tChange photo\r\n\t\t\t\t\t\t<input type=\"file\" style = {{display:'none'}} onChange = {(e)=>onFileChange(e, 'chatCovers/', setNewChatPhoto)}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<img loading = \"lazy\" src={newChatPhoto} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" className = \"standartInput\" value = {chatNameValue} onChange = {(e)=>setChatNameValue(e.target.value)}/>\r\n\t\t\t\t\t<div className = \"chatInfoButtons\">\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiSettings/>\r\n\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\" onClick = {()=>setContent(<AttachmentList chatId = {data.id}/>)}>\r\n\t\t\t\t\t\t\t<ImAttachment/>\r\n\t\t\t\t\t\t\t{shortWord(\"Attachments\", 7)} \r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<RiVolumeUpLine/>\r\n\t\t\t\t\t\t\tSound\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showUpdateBtn?<button className = \"standartButton\" onClick = {updateChatInfo}>Update Chat</button>:null}\r\n\t\t\t</div>\r\n\t\t\t<h4>Chat participants</h4>\r\n\t\t\t<Slider pages = {['All participants', \"Administrators\"]} currentPage = {participantsPage} setCurrentPage = {setParticipantsPage}/>\r\n\t\t\t{!loading?participants.map(person => {\r\n\t\t\t\tif(participantsPage === 1){\r\n\t\t\t\t\tif(data.admins.includes(person.uid)) return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t\t}\r\n\t\t\t\telse return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t}):<LoadingCircle/>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchDocs = (setLoading, listOfItems, setList, deps) => {\r\n\tfunction fetchItem(){\r\n\t\tlistOfItems.forEach(async itemId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(itemId).get()).data()\r\n\t\t\tsetList(prev=>[...prev, personData])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchItem()\r\n\t\treturn ()=>fetchItem()\r\n\t}, deps)\r\n}\r\n","import React from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const WallpaperItem = ({chatId, image, currentWallpaper}) => {\r\n\tfunction changeChatWallpaper(){\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\twallpaper:image\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className = {\"WallpaperItem \" + (image === currentWallpaper?\"active\":\"\")} onClick = {changeChatWallpaper} style = {image === \"undefined\"?{background:'var(--playlistsColor)'}:{}}>\r\n\t\t\t{image !== \"undefined\" ?<img loading = \"lazy\" src={image} alt=\"\" />:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { WallpaperItem } from './WallpaperItem'\r\n\r\nexport const Wallpapers = ({chatId, currentWallpaper}) => {\r\n\tconst [wallpaperList, setWallpaperList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading,'chatWallpapers', undefined, setWallpaperList)\r\n\tconsole.log(wallpaperList)\r\n\treturn !loading?(\r\n\t\t<div className='Wallpapers'>\r\n\t\t\t<h2>Wallpapers</h2>\r\n\t\t\t<div className=\"wallpapreWrapper\">\r\n\t\t\t\t<WallpaperItem chatId = {chatId} image={\"undefined\"}/>\r\n\t\t\t\t{wallpaperList.map((wallpaper, index) => {\r\n\t\t\t\t\treturn <WallpaperItem chatId = {chatId} image={wallpaper.image} key={wallpaper.id} currentWallpaper = {currentWallpaper}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):<LoadingCircle/>\r\n}\r\n","import { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchFirebaseData = (setLoading, collection, list, setState, sortCondition, whereCondFP, whereCondSP, whereCondTP, deps = []) => {\r\n\r\n\tasync function fetchData() {\r\n\t\tconst tempArray = []\r\n\t\tif (list === undefined) {\r\n\t\t\tif (whereCondFP !== undefined) {\r\n\t\t\t\tconst items = await firestore.collection(collection).where(whereCondFP, whereCondSP, whereCondTP).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\tconst items = await firestore.collection(collection).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait list.forEach(async (itemId, index) => {\r\n\t\t\t\tconst itemData = (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t\t\ttempArray.push(itemData)\r\n\t\t\t\tif(index === list.length - 1){\r\n\t\t\t\t\tif(sortCondition !== undefined){\r\n\t\t\t\t\t\ttempArray.sort(sortCondition)\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\treturn tempArray\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tsetState([])\r\n\t\tfetchData().then((res)=>{\r\n\t\t\tif(list === undefined) {\r\n\t\t\t\tsetState(res)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}, deps)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiFolder, FiImage, FiMoreHorizontal, FiSearch, FiTrash, FiInfo } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { ChatInfo } from './ChatInfo'\r\nimport { Wallpapers } from './Wallpapers'\r\n\r\nexport const ChatMoreBtn = ({chatId, currentWallpaper, data}) => {\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst chatMoreBtnRef = useRef(null)\r\n\tuseOutsideClick(chatMoreBtnRef, setOpenMoreWindow)\r\n\treturn (\r\n\t\t<div className=\"ChatMoreBtn\" ref = {chatMoreBtnRef}>\r\n\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t<FiMoreHorizontal />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"chatHeaderMenuWindow\" style = {!openMoreWindow?{display:'none'}:{}}>\r\n\t\t\t\t{data.participants.length > 2? <div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<FiInfo/>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</div>:null}\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiSearch/>\r\n\t\t\t\t\t<span>Search messages</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<AttachmentList chatId = {chatId}/>)}}>\r\n\t\t\t\t\t<FiFolder/>\r\n\t\t\t\t\t<span>Attachments</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<Wallpapers chatId = {chatId} currentWallpaper = {currentWallpaper}/>)}}>\r\n\t\t\t\t\t<FiImage/>\r\n\t\t\t\t\t<span>Change wallpaper</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiTrash/>\r\n\t\t\t\t\t<span>Delete chat</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport displayDate from '../../functions/display/displayDate'\r\n\r\nexport const LastSeen = ({userUID}) => {\r\n\tconst [lastSeen, setLastSeen] = useState(\"\")\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t\tif(doc.data().online === undefined) setLastSeen(\"offline\")\r\n\t\t\t\telse if(!isOnline) setLastSeen(\"last seen \" + displayDate(doc.data().online, 3))\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<span>Online</span>:<span>{lastSeen}</span>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { ChatMoreBtn } from './ChatMoreBtn'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { ChatInfo } from './ChatInfo'\r\nexport const ChatHeader = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [headerColors, setHeaderColors] = useState(data.chatName === \"\"?[]:data.imageColors)\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = data.participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t\tsetHeaderColors(person.imageColors)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data.chatName === \"\") {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [data.id])\r\n\treturn (\r\n\t\t<div className=\"ChatHeader\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[0]}, ${headerColors[1]})` } : { background: `linear-gradient(45deg, grey, lightgrey)` }}>\r\n\t\t\t<BackBtn />\r\n\t\t\t{data.participants.length === 2 ? <Link className=\"chatHeaderImageAndName\" to={`/authors/${otherPerson.uid}`}>\r\n\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Link> :\r\n\t\t\t\t<div className=\"chatHeaderImageAndName\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<ChatMoreBtn chatId={data.id} data={data} currentWallpaper={data.wallpaper} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function findWhatToWriteInResponseToItem(referedMessage){\r\n\treturn referedMessage.attachedSongs.length ? \"Audio\":\r\n\treferedMessage.attachedAlbums.length? \"Album\":\r\n\treferedMessage.attachedAuthors.length?\"Author\":\r\n\treferedMessage.inResponseToMessage && referedMessage.inResponseToMessage.length?\"Forwarded message\":\"\"\r\n}","import React from 'react'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nexport const AttachedItemsInChatInput = ({attachedItems, setAttachedItems, icon}) => {\r\n\tfunction removeItemFromAttached(attachedItems, setItems, itemId) {\r\n\t\tsetItems(attachedItems.filter(id => id !== itemId))\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"AttachedItemsInChatInput\">\r\n\t\t\t{attachedItems.map((itemId, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"attachedSongItem\" key={itemId}>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t<span>{itemId}</span>\r\n\t\t\t\t\t\t<button className=\"removeMessageFromResponse\" onClick={() => removeItemFromAttached(attachedItems, setAttachedItems, itemId)}>\r\n\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport { MdSend } from 'react-icons/md'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/find/findWhatToWriteInResponseItem'\r\nimport { auth, firestore } from '../../firebase'\r\nimport { sendMessage } from '../../functions/other/sendMessage'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { AttachedItemsInChatInput } from '../ChatPage/AttachedItemsInChatInput'\r\n\r\nexport const ChatInput = ({ chatId, chatData, messageText, setMessageText, inResponseToMessage, setInResponseToMessage, otherMessages }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAttachWindow, setOpenAttachWindow] = useState(false)\r\n\tconst { yourSongs, yourAuthors, yourPlaylists } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [allFoundSongs, setAllFoundSongs] = useState(yourSongs)\r\n\tconst [searchSongList, setSearchSongList] = useState([])\r\n\tconst [attachedSongs, setAttachedSongs] = useState([])\r\n\tconst [attachedAlbums, setAttachedAlbums] = useState([])\r\n\tconst [attachedAuthors, setAttachedAuthors] = useState([])\r\n\tconst [resultPlaylists, setResultPlaylists] = useState(yourPlaylists)\r\n\tconst [resultAuthorList, setResultAuthorList] = useState(yourAuthors)\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst [attachedSongsNames, setAttachedSongsNames] = useState([])\r\n\tconst attachWindowRef = useRef(null)\r\n\tuseOutsideClick(attachWindowRef, setOpenAttachWindow)\r\n\r\n\tfunction sendMessageFull() {\r\n\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, attachedSongs, attachedAlbums, attachedAuthors, inResponseToMessage);\r\n\t\tsetMessageText(\"\");\r\n\t\tsetAttachedSongs([]);\r\n\t\tsetAttachedAuthors([]);\r\n\t\tsetAttachedAlbums([]);\r\n\t\tsetInResponseToMessage([])\r\n\t\tsetOpenAttachWindow(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (searchValue.length === 0) {\r\n\t\t\tsetAllFoundSongs(yourSongs)\r\n\t\t}\r\n\t}, [searchValue])\r\n\r\n\tfunction removeMessageFromResponseList(messageId) {\r\n\t\tsetInResponseToMessage(inResponseToMessage.filter(id => id !== messageId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(messageText.length === 0){\r\n\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\ttyping:chatData.typing.filter(id=>id !== currentUser.uid)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(!chatData.typing.includes(currentUser.uid)){\r\n\t\t\t\tconst tempArray = chatData.typing\r\n\t\t\t\ttempArray.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\ttyping:tempArray\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [messageText])\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInResponseNames([])\r\n\t\tinResponseToMessage.forEach(async id => {\r\n\r\n\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[id].sender).get()).data().displayName\r\n\t\t\tsetInResponseNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [inResponseToMessage.length])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachedSongsNames([])\r\n\t\tattachedSongs.forEach(async id => {\r\n\t\t\tconst name = (await firestore.collection('songs').doc(id).get()).data().name\r\n\t\t\tsetAttachedSongsNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [attachedSongs.length])\r\n\r\n\treturn (\r\n\t\t<div className=\"chatInput\" style={openAttachWindow ? { borderRadius: \"0 0 var(--standartBorderRadius) var(--standartBorderRadius)\", transition: \".2s\" } : {}} ref={attachWindowRef}>\r\n\t\t\t<div className=\"attachWindow\" style={openAttachWindow ? { height: \"400px\", opacity: '1' } : {}} >\r\n\t\t\t\t{openAttachWindow ?\r\n\t\t\t\t\t<div style={openAttachWindow ? { maxHeight: '100%', overflowY: 'auto' } : { display: 'none' }}>\r\n\t\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\tsetValue={setSearchValue}\r\n\t\t\t\t\t\t\tsetAllFoundSongs={setAllFoundSongs}\r\n\t\t\t\t\t\t\tsetResultPlaylists={setResultPlaylists}\r\n\t\t\t\t\t\t\tsetResultAuthorList={setResultAuthorList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SongList listOfSongs={allFoundSongs} source={'no'} listOfChosenSongs={attachedSongs} setListOfSongs={setAttachedSongs} />\r\n\t\t\t\t\t\t<AuthorsList listOfAuthors={resultAuthorList} listOfChosenAuthors={attachedAuthors} setListOfChosenAuthors={setAttachedAuthors} />\r\n\t\t\t\t\t\t<AlbumList listOfAlbums={resultPlaylists} loading={false} listOfChosenAlbums={attachedAlbums} setListOfChosenAlbums={setAttachedAlbums} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inResponseArea\" style={inResponseToMessage.length || attachedSongsNames.length || attachedAuthors.length || attachedAlbums.length ? {} : { height: '0', padding: '0', opacity: '0', top: \"0\", visibility: 'hidden' }}>\r\n\t\t\t\t<div className=\"responseMessages\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{inResponseToMessage.map((id, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" key={id}>\r\n\t\t\t\t\t\t\t\t<h5 style={otherMessages[id].sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>{inResponseNames[index]}</h5>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{shortWord(otherMessages[id].message, 35)}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(otherMessages[id])}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button onClick={() => removeMessageFromResponseList(id)} className=\"removeMessageFromResponse\">\r\n\t\t\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedSongs} setAttachedItems = { setAttachedSongs} icon = {<CgMusicNote />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAuthors} setAttachedItems = { setAttachedAuthors} icon = {<FiUser />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAlbums} setAttachedItems = { setAttachedAlbums} icon = {<BiAlbum />}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"attachAndEmojis\">\r\n\t\t\t\t<div className=\"attachBtn\">\r\n\t\t\t\t\t<button onClick={() => { setOpenAttachWindow(!openAttachWindow) }}>\r\n\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" style={{ background: 'var(--lightGrey)', border: 'none', outline: 'none', minHeight: '100%' }} value={messageText} onChange={(e) => { setMessageText(e.target.value) }} onKeyUp={(e) => { if (e.key === 'Enter') { sendMessageFull() } }} />\r\n\t\t\t\t{/* <div className=\"emojis\">\r\n\t\t\t\t\t<div className=\"emojiItem\">\r\n\t\t\t\t\t\t<FcLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--red)' }}>\r\n\t\t\t\t\t\t<AiFillFire />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--lightBlue)' }}>\r\n\t\t\t\t\t\t<AiFillLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t\t<button className=\"sendBtn\" onClick={() => { sendMessageFull() }}>\r\n\t\t\t\t<MdSend />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport displayDate from '../../functions/display/displayDate'\r\n\r\nexport const DateOnTop = ({date}) => {\r\n\treturn (\r\n\t\t<div className = \"DateOnTop\">\r\n\t\t\t{displayDate(date)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nexport default function useOnScreen(ref) {\r\n\r\n\tconst [isIntersecting, setIntersecting] = useState(false)\r\n \r\n\tconst observer = new IntersectionObserver(\r\n\t  ([entry]) => setIntersecting(entry.isIntersecting)\r\n\t)\r\n \r\n\tuseEffect(() => {\r\n\t  observer.observe(ref.current)\r\n\t  // Remove the observer as soon as the component is unmounted\r\n\t  return () => { observer.disconnect() }\r\n\t}, [])\r\n \r\n\treturn isIntersecting\r\n }","import React from 'react'\r\n\r\nexport const SongItemLoading = () => {\r\n\treturn (\r\n\t\t<div className = \"SongItem SongItemLoading\">\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\"></div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\"></div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { useSwipeable } from 'react-swipeable'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/find/findWhatToWriteInResponseItem'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItemLoading } from '../Basic/SongItemLoading'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SeenByCircle } from './SeenByCircle'\r\n\r\nexport const MessageItem = ({ messageData, chatId, scrollToMessageRef, setScrollToMessageId, scrollToMessageId, showPhoto = true, otherMessages, inResponseToMessageArr, setInResponseToMessageArr }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {isMobile, screenHeight} = useScreen()\r\n\tconst { message, attachedAlbums, attachedSongs, attachedAuthors, sender, inResponseToMessage, id, sentTime } = messageData\r\n\tconst [userThatSentMessage, setUserThatSentMessage] = useState({})\r\n\tconst messageSentTime = displayDate(sentTime, 2)\r\n\tconst [attachedSongsData, setAttachedSongsData] = useState([])\r\n\tconst [attachedAuthorsData, setAttachedAuthorsData] = useState([])\r\n\tconst [attachedPlaylistsData, setAttachedPlaylistsData] = useState([])\r\n\tconst [inResponseToMessagesData, setInResponseToMessagesData] = useState([])\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst messageRef = useRef()\r\n\tconst isVisible = useOnScreen(messageRef)\r\n\tconst [swipeDeltaX, setSwipeDeltaX] = useState(0)\r\n\tconst [transformTransition, setTransformTransition] = useState(0)\r\n\tconst handlers = useSwipeable({ onSwiping: (event) => {if(event.deltaX < 0) setSwipeDeltaX(event.deltaX)} })\r\n\tconst refPassthrough = (el) => {\r\n\t\t// call useSwipeable ref prop with el\r\n\t\thandlers.ref(el);\r\n\r\n\t\t// set myRef el so you can access it yourself\r\n\t\tmessageRef.current = el;\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (messageData.seenBy !== undefined) {\r\n\t\t\tif (currentUser.uid !== messageData.sender && isVisible) {\r\n\t\t\t\tif (!messageData.seenBy.includes(currentUser.uid)) {\r\n\t\t\t\t\tconst tempMessages = otherMessages\r\n\t\t\t\t\ttempMessages[messageData.id].seenBy.push(currentUser.uid)\r\n\t\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\t\tmessages: tempMessages\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isVisible])\r\n\r\n\tasync function fetchSentMessageUser() {\r\n\t\tconst user = (await firestore.collection('users').doc(messageData.sender).get()).data()\r\n\t\tsetUserThatSentMessage(user)\r\n\t}\r\n\r\n\tfunction fetchAttachedData(list, place, setFunc) {\r\n\t\treturn list.forEach(async (itemId) => {\r\n\t\t\tlet itemData = (await firestore.collection(place).doc(itemId).get())\r\n\t\t\tif(itemData.exists) setFunc(prev => [...prev, itemData.data()])\r\n\t\t\telse setFunc(prev => [...prev, null])\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tfunction inResponseMessagesFetch() {\r\n\t\tif (inResponseToMessage !== null) {\r\n\t\t\tinResponseToMessage.forEach(async messageId => {\r\n\t\t\t\tsetInResponseToMessagesData(prev => [...prev, otherMessages[messageId]])\r\n\t\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[messageId].sender).get()).data().displayName\r\n\t\t\t\tsetInResponseNames(prev => [name, ...prev])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSentMessageUser()\r\n\t\tfetchAttachedData(attachedSongs, 'songs', setAttachedSongsData)\r\n\t\tfetchAttachedData(attachedAuthors, 'users', setAttachedAuthorsData)\r\n\t\tfetchAttachedData(attachedAlbums, 'playlists', setAttachedPlaylistsData)\r\n\t\tinResponseMessagesFetch()\r\n\t}, [])\r\n\r\n\tfunction addMessageToResponseList() {\r\n\t\tif (!inResponseToMessageArr.includes(id)) {\r\n\t\t\tsetInResponseToMessageArr(prev => [...prev, id])\r\n\t\t}\r\n\t}\r\n\r\n\tfunction returnToInitial() {\r\n\t\tlet dropDelta\r\n\t\tclearTimeout(dropDelta)\r\n\t\tsetTransformTransition(0.2)\r\n\t\tdropDelta = setTimeout(() => {\r\n\t\t  setSwipeDeltaX(0)\r\n\t\t  setTransformTransition(0)\r\n\t\t}, 200)\r\n\t }\r\n\r\n\tuseEffect(() => {\r\n\t\tif(swipeDeltaX < -160){\r\n\t\t\treturnToInitial()\r\n\t\t\taddMessageToResponseList()\r\n\t\t}\r\n\t}, [swipeDeltaX])\r\n\r\n\r\n\tconst emojis = [<FcLike />, <AiFillFire />, <AiFillLike />]\r\n\treturn (\r\n\t\t<div className={\"MessageItem \" + (sender === currentUser.uid ? 'your' : '')} ref={id === scrollToMessageId ? scrollToMessageRef : refPassthrough} style={showPhoto ? { paddingBottom: '15px', transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition } : {transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition}} onTouchEnd = {returnToInitial}>\r\n\t\t\t<div className=\"messageItemImage\">\r\n\t\t\t\t{showPhoto ?\r\n\t\t\t\t\t<img loading = \"lazy\" src={userThatSentMessage.photoURL} alt=\"\" /> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t\t<div className=\"messageItemBody\" style={id === scrollToMessageId ? { animation: 'showResponseMessage .5s forwards' } : showPhoto ? { borderRadius: 'var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px' } : {}}>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n\t\t\t\t\t<h5 className=\"messageUserName\">{userThatSentMessage.displayName}</h5>\r\n\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{messageSentTime}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{inResponseToMessage !== null ?\r\n\t\t\t\t\tinResponseToMessagesData.map((messageData, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" onClick={() => setScrollToMessageId(messageData.id)}>\r\n\t\t\t\t\t\t\t\t<span style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t<h5 style={messageData.sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>\r\n\t\t\t\t\t\t\t\t\t\t{inResponseNames[index]}\r\n\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{displayDate(messageData.sentTime, 2)}</div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{messageData.message}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(messageData)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{message}</p>\r\n\t\t\t\t\t{attachedSongsData.map((song, key) => {\r\n\t\t\t\t\t\treturn isVisible ? <SongItem song={song} localIndex={key} key={key} position = {screenHeight}/> : <SongItemLoading />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedPlaylistsData.map((album, index) => {\r\n\t\t\t\t\t\treturn <PlaylistItem playlist={album} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedAuthorsData.map((author, index) => {\r\n\t\t\t\t\t\treturn <AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<SeenByCircle listOfSeen={messageData.seenBy} />\r\n\t\t\t<button className=\"respondToMessageBtn\" onClick={addMessageToResponseList} style = {isMobile?{opacity:-swipeDeltaX/80}:{}}>\r\n\t\t\t\t<BiShare />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { MessageItem } from './MessageItem'\r\n\r\nexport const MessageField = ({message, index, messageList, chatId, inResponseToMessage, setInResponseToMessage, scrollToMessageRef, scrollToMessageId, setScrollToMessageId, setDateRefsArray}) => {\r\n\tconst [showPhoto, setShowPhoto] = useState(false)\r\n\tconst [showDate, setShowDate] = useState(false)\r\n\tconst dateRef = useRef(null)\r\n\tuseEffect(() => {\r\n\t\tif (index === messageList.length - 1) setShowPhoto(true)\r\n\t\telse if (messageList[index + 1].sender !== messageList[index].sender) setShowPhoto(true)\r\n\t\telse if (displayDate(messageList[index + 1].sentTime) !== displayDate(messageList[index].sentTime)) setShowPhoto(true)\r\n\t\r\n\t\tif (index === 0) setShowDate(true)\r\n\t\telse if (displayDate(messageList[index].sentTime) !== displayDate(messageList[index - 1].sentTime)) {\r\n\t\t\tsetShowDate(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dateRef.current !== null) {\r\n\t\t\tsetDateRefsArray(prev=>[...prev, dateRef])\r\n\t\t}\r\n\t}, [showDate])\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showDate ?  <div ref = {dateRef} style={{ width: '100%', display: 'flex', justifyContent: 'center', alignItems: \"center\", padding: \"10px 0\" }}>{displayDate(message.sentTime)}</div> : null}\r\n\t\t\t<MessageItem\r\n\t\t\t\tmessageData={message}\r\n\t\t\t\tchatId={chatId}\r\n\t\t\t\tkey={message.id}\r\n\t\t\t\tscrollToMessageRef={scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId={scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId={setScrollToMessageId}\r\n\t\t\t\tshowPhoto={showPhoto}\r\n\t\t\t\totherMessages={messageList}\r\n\t\t\t\tinResponseToMessageArr={inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessageArr={setInResponseToMessage}\r\n\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { MessageField } from './MessageField'\r\n\r\nexport const DisplayChatMessages = ({chatId, messageList, inResponseToMessage, setInResponseToMessage, messagesWindowRef, setDateRefsArray}) => {\r\n\tconst scrollToMessageRef = useRef(null)\r\n\tconst [scrollToMessageId, setScrollToMessageId] = useState(-1)\r\n\tuseEffect(() => {\r\n\t\tif (scrollToMessageId !== -1) {\r\n\t\t\tmessagesWindowRef.current.scrollTo(0, scrollToMessageRef.current.offsetTop - 65 < 0 ? 0 : scrollToMessageRef.current.offsetTop - 65)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetScrollToMessageId(-1)\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}, [scrollToMessageId])\r\n\r\n\treturn messageList.length?<>\r\n\t\t{messageList.map((message, index)=>{\r\n\t\t\treturn <MessageField \r\n\t\t\t\tmessage = {message} \r\n\t\t\t\tindex = {index} \r\n\t\t\t\tkey = {message.id} \r\n\t\t\t\tmessageList = {messageList} \r\n\t\t\t\tchatId = {chatId} \r\n\t\t\t\tinResponseToMessage = {inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessage = {setInResponseToMessage}\r\n\t\t\t\tscrollToMessageRef = {scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId = {scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId = {setScrollToMessageId}\r\n\t\t\t\tsetDateRefsArray = {setDateRefsArray}\r\n\t\t\t/>\r\n\t\t})}\r\n\t</>:null\r\n}\r\n","import React, {useEffect} from 'react'\r\n\r\nexport const SmallImages = ({imagesList, borderColor = \"#fff\"}) => {\r\n\treturn (\r\n\t\t<div className = \"SmallImages\" style = {{marginRight:-7*(imagesList.length-1)}}>\r\n\t\t\t{imagesList.map((image, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"smallImgContainer\" style = {{border:`3px solid ${borderColor}`, transform:`translateX(${-15*index}px)`}} key = {index}>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={image} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {SmallImages} from '../AuthorPage/SmallImages'\r\nexport const TypingAnimation = ({ typingPeople }) => {\r\n\tconst [typingPeopleData, setTypingPeopleData] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tsetTypingPeopleData([])\r\n\t\ttypingPeople.map(async personId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(personId).get()).data()\r\n\t\t\tif(personData.uid !== currentUser.uid) setTypingPeopleData(prev=>[...prev, personData])\r\n\t\t})\r\n\t}, [typingPeople])\r\n\treturn typingPeopleData.length > 0 ? (\r\n\t\t<div className = \"typingWrapper\">\r\n\t\t\t<SmallImages imagesList = {typingPeopleData.map(person=>person.photoURL)} borderColor = {'var(--navItemColor)'}/>\r\n\t\t\t<div className=\"TypingAnimation\">\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { DisplayChatMessages } from './DisplayChatMessages'\r\nimport { TypingAnimation } from './TypingAnimation'\r\n\r\nexport const ChatMessagesWindow = ({chatId, chatData, messageList, findTopDate, inResponseToMessage, setInResponseToMessage, setDateRefsArray }) => {\r\n\tconst { screenHeight, isMobile } = useScreen()\r\n\tconst messagesWindowRef = useRef(null)\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tconst scroll = messagesWindowRef.current?.scrollHeight - messagesWindowRef.current?.clientHeight;\r\n\t\tmessagesWindowRef.current?.scrollTo(0, scroll);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tscrollToBottom()\r\n\t}, [messageList]);\r\n\treturn (\r\n\t\t<div className=\"chatMessagesWindow\" ref={messagesWindowRef} onScroll={findTopDate} style={{ height: !isMobile ? screenHeight - 170 + 'px' : screenHeight - 125 + 'px' }}>\r\n\t\t\t<DisplayChatMessages chatId={chatId} messageList={messageList} inResponseToMessage={inResponseToMessage} setInResponseToMessage={setInResponseToMessage} messagesWindowRef={messagesWindowRef} setDateRefsArray={setDateRefsArray}/>\r\n\t\t\t<TypingAnimation typingPeople={chatData.typing} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { FiMessageCircle } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\n\r\nexport const ChatWithFriendButton = ({ data, color }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([data.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [data.uid])\r\n\r\n\treturn (\r\n\t\t<Link to={`/chat/${friendChatId}`} style = {{display:'block', width:'fit-content', textDecoration: \"none\"}}>\r\n\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, data.uid], friendChatId) }} style = {{background:color}} className = \"ChatWithFriendButton\"><FiMessageCircle /> Messages</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const CustomizeAlbum = ({ playlist }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(playlist.name)\r\n\tconst [playlistCover, setPlaylistCover] = useState(playlist.image)\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(playlist.authors)\r\n\tconst [releaseDate, setReleaseDate] = useState(playlist.creationDate)\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState(playlist.songs)\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(playlist.isAlbum?1:0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(playlist.isPrivate ? 1 : 0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(playlist.imageColors)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPlaylistName(playlist.name)\r\n\t\tsetPlaylistCover(playlist.image)\r\n\t\tsetChosenAuthors(playlist.authors)\r\n\t}, [playlist.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (songsSearch.length === 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tconsole.log(songId)\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetLoadingSongs(false)\r\n\t\t\t\tsetAllSongs(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t}\r\n\t}, [songsSearch])\r\n\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (chosenAuthors.length > playlist.authors.length) {\r\n\t\t\tconst newAuthors = chosenAuthors.filter(author => { return !playlist.authors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(playlist.id)\r\n\t\t\t\tconsole.log(authorPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(chosenAuthors.length < playlist.authors.length){\r\n\t\t\tconst newAuthors = playlist.authors.filter(author => { return !chosenAuthors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tconst filteredPlaylists = authorPlaylists.filter(playlistId => playlistId !== playlist.id)\r\n\t\t\t\tconsole.log(filteredPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: filteredPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfirestore.collection('playlists').doc(playlist.id).update(\r\n\t\t\t{\r\n\t\t\t\tid: playlist.id,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: playlist.listens,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:playlist.subscribers,\r\n\t\t\t\tisAlbum:playlistStatus === 1,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === 1\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit = {e=>e.preventDefault()}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<SearchBar value = {authorsInputValue} setValue = {setAuthorsInputValue} setResultAuthorList = {setAllAuthors} defaultSearchMode = {'authors'} inputText = {\"Search for authors\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<SearchBar value = {songsSearch} setValue = {setSongsSearch} setAllFoundSongs = {setAllSongs} defaultSearchMode = {'songs'} inputText = {\"Search for songs\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<SongList listOfSongs={allSongs} source={'no'} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Update playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { MdModeEdit } from 'react-icons/md'\r\nexport const CustomizeAuthor = ({ author }) => {\r\n\tconst [authorName, setPlaylistName] = useState(author.displayName)\r\n\tconst [authorCover, setAuthorCover] = useState(author.photoURL)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(author.imageColors)\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tfunction updateAuthorInFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tfirestore.collection('users').doc(author.uid).update(\r\n\t\t\t{\r\n\t\t\t\tdisplayName: authorName,\r\n\t\t\t\tphotoURL: authorCover,\r\n\t\t\t\timageColors: imageColors,\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={e => e.preventDefault()}>\r\n\t\t\t\t<div style = {{width:'100%', display:'flex', justifyContent:'center'}}>\r\n\t\t\t\t\t<div className=\"chatInfoImage\" style={{ backgroundImage: `url(${authorCover})` }}>\r\n\t\t\t\t\t\t<label className=\"changePhoto\">\r\n\t\t\t\t\t\t\t<MdModeEdit />\r\n\t\t\t\t\t\t\tChange photo\r\n\t\t\t\t\t\t\t<input type=\"file\" style={{ display: 'none' }} onChange={(e) => onFileChange(e, 'chatCovers/', setAuthorCover)} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Your name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" value={authorName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={updateAuthorInFirebase}>Update author</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const addAuthorToLibrary = async (authorData , currentUser) => {\r\n\tconst addedAuthors = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedAuthors\r\n\taddedAuthors.push(authorData.uid)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedAuthors: addedAuthors\r\n\t})\r\n\tlet subscribers = authorData.subscribers\r\n\tsubscribers++\r\n\tfirestore.collection('users').doc(authorData.uid).update({\r\n\t\tsubscribers: subscribers\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport default function addFriend(friendData, currentUser){\r\n\tconst updatedDataForFriend = friendData.friends\r\n\tconst updatedDataForCurrentUser = currentUser.friends\r\n\tupdatedDataForFriend.push({status:'requested', uid:currentUser.uid})\r\n\tupdatedDataForCurrentUser.push({status:'awaiting', uid:friendData.uid})\r\n\r\n\tfirestore.collection('users').doc(friendData.uid).update({\r\n\t\tfriends:updatedDataForFriend\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends:updatedDataForCurrentUser\r\n\t})\r\n\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const  addPlaylistToLibrary = async(playlistData, currentUser) => {\r\n\tconst addedPlaylists = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedPlaylists\r\n\taddedPlaylists.push(playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists: addedPlaylists\r\n\t})\r\n\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:++playlistData.subscribers\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const removePlaylistFromLibrary = async (playlistData, currentUser) =>{\r\n\tconst filteredPlaylists = currentUser.addedPlaylists.filter(id=>id !== playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists:filteredPlaylists\r\n\t})\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:--playlistData.subscribers\r\n\t})\r\n}","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const GeneralSettings = () => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"GeneralSettings\">\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport {FiMenu} from 'react-icons/fi'\r\nimport {IoIosArrowForward} from 'react-icons/io'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport \"../../styles/Settings.css\"\r\nimport { GeneralSettings } from './GeneralSettings'\r\nexport const SettingsList = () => {\r\n\tconst {setContent} = useModal()\r\n\tconst settingsList = [\r\n\t\t{\r\n\t\t\tid:0, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<GeneralSettings/>,\r\n\t\t\tcolor:'var(--red)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:1, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--lightBlue)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:2, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--green)'\r\n\t\t}\r\n\t]\r\n\treturn (\r\n\t\t<div className = \"SettingsList\">\r\n\t\t\t{settingsList.map(settingItem=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className = \"SettingItem\" style = {{color:settingItem.color}} key = {settingItem.id} onClick = {()=>setContent(settingItem.to)}>\r\n\t\t\t\t\t\t<div className = \"settingItemIconAndTitle\">\r\n\t\t\t\t\t\t\t{settingItem.icon}\r\n\t\t\t\t\t\t\t<h3>{settingItem.title}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IoIosArrowForward/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiArrowRight } from 'react-icons/fi'\r\n\r\nexport const SeeMoreRoundButton = ({text = \"See more\", ...restProps}) => {\r\n\treturn (\r\n\t\t<div className = \"SeeMoreRoundButton\" {...restProps}>\r\n\t\t\t<button>\r\n\t\t\t\t<FiArrowRight/>\r\n\t\t\t</button>\r\n\t\t\t<span>{text}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\n\r\nexport const TinyPersonsList = ({listOfPeople, title}) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{title?<h2 style = {{marginTop:'0', marginBottom:'7px'}}>{title}</h2>:null}\r\n\t\t\t{listOfPeople.map(person=>{\r\n\t\t\t\treturn <PersonTiny data = {person}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { FiHeadphones, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const AlbumInfo = ({ album }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisAlbum, setFriendsThatHaveThisAlbum] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisAlbum() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisAlbum([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (friend.addedPlaylists.includes(album.id)) setFriendsThatHaveThisAlbum(prev => [...prev, friend])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisAlbum()\r\n\t}, [album.uid])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${album.image})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<span style={{ opacity: \".5\", fontWeight: 500, fontSize: '.7em' }}>{album.isAlbum ? \"Album\" : \"Playlist\"}</span>\r\n\t\t\t\t\t<h3 style={{ color: album.imageColors[1] }}>{album.name}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', opacity: '0.6', fontSize: '.9em', position: \"relative\" }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{album.listens}<FiHeadphones /></p>\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{album.subscribers} <FiUserPlus /></p>\r\n\t\t\t\t\t<span>{displayDate(album.creationDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisAlbum.length > 0 ? 'Friends subscribed' : 'None of your friends subscribed'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex' }}>\r\n\t\t\t\t\t{friendsThatHaveThisAlbum.length > 0 ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{friendsThatHaveThisAlbum.map((person, index) => {\r\n\t\t\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{friendsThatHaveThisAlbum.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisAlbum} title={`Friends subscribed to ${album.name}`} />)} /> : null}\r\n\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t<button className=\"shareBtn\" style={{ minHeight: '35px', background: album.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={album} whatToShare={'playlist'} />) }}>Share</button>}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { FiHeadphones, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const AuthorInfo = ({ author }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisAuthor] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisAuthor() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisAuthor([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (author.isAuthor) {\r\n\t\t\t\tif (friend.addedAuthors.includes(author.uid)) setFriendsThatHaveThisAuthor(prev => [...prev, friend])\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (friend.friends.find(person=>person.uid === author.uid)) setFriendsThatHaveThisAuthor(prev => [...prev, friend])\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisAuthor()\r\n\t}, [author.uid])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${author.photoURL})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column-reverse' }}>\r\n\t\t\t\t\t<h3 style={{ color: author.imageColors[1] }}>{author.displayName}{author.isVerified ? <ImCheckmark style={{ color: author.imageColors[0], width: '15px', height: \"15px\", marginLeft: '5px' }} /> : null}</h3>\r\n\t\t\t\t\t<span style={{ opacity: \".5\", fontWeight: 500, fontSize: '.7em' }}>{author.isAuthor ? \"Author\" : \"User\"}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', opacity: '0.6', fontSize: '.9em', position: \"relative\" }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{author.numberOfListenersPerMonth}<FiHeadphones /></p>\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{author.subscribers} <FiUserPlus /></p>\r\n\t\t\t\t\t<span>{displayDate(author.regDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisSong.length > 0 ? 'Friends subscribed' : 'None of your friends subscribed'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex' }}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 0 ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{friendsThatHaveThisSong.map((person, index) => {\r\n\t\t\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{friendsThatHaveThisSong.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisSong} title={`Friends subscribed to ${author.displayName}`} />)} /> : null}\r\n\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t<button className=\"shareBtn\" style={{ minHeight: '35px', background: author.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={author} whatToShare={'author'} />) }}>Share</button>}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport { FiFlag, FiInfo, FiShare } from 'react-icons/fi'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nimport { AlbumInfo } from '../Info/AlbumInfo';\r\nimport { AuthorInfo } from '../Info/AuthorInfo';\r\nexport const AuthorMoreWindow = ({data}) => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"AuthorMoreWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => {setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(data.authors !== undefined ? <AlbumInfo album={data} /> : <AuthorInfo author={data} />) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useAlbumAuthors = (data) => {\r\n\tconst [albumAuthors, setAlbumAuthors] = useState([])\r\n\tconst [authorsImages, setAuthorsImages] = useState([])\r\n\tasync function fetchAuthorsData() {\r\n\t\tif (data?.authors !== undefined) {\r\n\t\t\tconst ids = data.authors.map(author => author.uid)\r\n\t\t\tconst authrorsData = await firestore.collection(\"users\").where(\"uid\", \"in\", ids).get()\r\n\t\t\tconst tempArrayAuthors = []\r\n\t\t\tconst tempArrayImages = []\r\n\t\t\tauthrorsData.docs.forEach((a) => {\r\n\t\t\t\ttempArrayAuthors.push(a.data())\r\n\t\t\t\ttempArrayImages.push(a.data().photoURL)\r\n\t\t\t})\r\n\t\t\tsetAlbumAuthors(tempArrayAuthors)\r\n\t\t\tsetAuthorsImages(tempArrayImages)\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [data?.id])\r\n\r\n\treturn [albumAuthors, authorsImages]\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiEdit2, FiFlag, FiHeadphones, FiInfo, FiMoreVertical, FiPlusCircle, FiSettings, FiShare, FiTrash, FiUserCheck, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { SmallImages } from './SmallImages'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { IoMdExit } from 'react-icons/io'\r\nimport { firestore } from '../../firebase'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { CgCheckO, CgLock } from 'react-icons/cg'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { ChatWithFriendButton } from './ChatWithFriendButton'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai'\r\nimport { BiDoorOpen, BiLoaderAlt } from 'react-icons/bi'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { CustomizeAlbum } from '../AlbumPage/CustomizeAlbum'\r\nimport { CustomizeAuthor } from '../AuthorPage/CustomizeAuthor'\r\nimport { addAuthorToLibrary } from '../../functions/add/addAuthorToLibrary'\r\nimport addFriend from '../../functions/add/addFriend'\r\nimport { LastSongListened } from './LastSongListened'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { addPlaylistToLibrary } from '../../functions/add/addPlaylistToLibrary'\r\nimport { removePlaylistFromLibrary } from '../../functions/other/removePlaylistFromLibrary'\r\nimport { SettingsList } from '../Settings/SettingsList'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { AuthorMoreWindow } from '../Windows/AuthorMoreWindow'\r\nimport { AlbumInfo } from '../Info/AlbumInfo'\r\nimport { AuthorInfo } from '../Info/AuthorInfo'\r\nimport { deleteFriend } from '../../functions/delete/deleteFriend'\r\nimport { useAlbumAuthors } from '../../hooks/useAlbumAuthors'\r\nimport { deletePlaylist } from '../../functions/delete/deletePlaylist'\r\nimport { quitPlaylist } from '../../functions/other/quitPlaylist'\r\nexport const Header = ({ data, headerColors }) => {\r\n\tconst { isMobile } = useScreen()\r\n\tconst { displayAuthors } = useSong()\r\n\tconst [albumAuthors, authorsImages] = useAlbumAuthors(data)\r\n\tconst { currentUser, logout } = useAuth()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tconst isFriend = currentUser.friends.find(friend => (friend.uid === data.uid && friend.status === 'added'))\r\n\tconst moreWindowRef = useRef(null)\r\n\tuseOutsideClick(moreWindowRef, setOpenMoreWindow)\r\n\r\n\tfunction displayCreationDateIfExists() {\r\n\t\treturn data.creationDate !== undefined ?\r\n\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t<Hint text={\"creation date\"} style={{ fontSize: \"0.8em\" }} />\r\n\t\t\t\t<span>{displayDate(data.creationDate)}</span>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction isAlbumOrIsAuthor() {\r\n\t\treturn data.authors !== undefined ? data.isAlbum ? <h5>Album</h5> : <h5>Playlist</h5> : data.isAuthor ? <h5>Author</h5> : <h5>User {data.authors === undefined && isFriend ? <LastSeen userUID={data.uid} /> : null}</h5>\r\n\t}\r\n\r\n\tfunction showCreatorsIfExist() {\r\n\t\treturn data.authors !== undefined ?\r\n\t\t\t<div className=\"headerAuthorsImagesAndNames\">\r\n\t\t\t\t<SmallImages imagesList={authorsImages} borderColor={headerColors[2]} />\r\n\t\t\t\t<div className=\"headerAuthors\">{displayAuthors(albumAuthors, \", \")}</div>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction findIfIsVerified() {\r\n\t\treturn data.isVerified ? <ImCheckmark style={{ color: headerColors[0] }} /> : null\r\n\t}\r\n\r\n\r\n\tfunction whatButtonToRender() {\r\n\t\tif (data.authors) {\r\n\t\t\tif (currentUser.ownPlaylists.includes(data.id) && data.authors.length === 1) return <button onClick={() => openConfirm(\"Are you sure you want to DELETE this playlist forever?!\", \"Yes, pretty sure\", \"No, I Don't!\", () => { deletePlaylist(data.id); closeConfirm() })}><Hint text={\"delete playlist\"} direction={\"bottom\"} /><FiTrash /></button>\r\n\t\t\telse if (currentUser.ownPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to quit this playlist?\", \"Yes, pretty sure\", \"No, I Don't!\", () => { quitPlaylist(data, currentUser); closeConfirm() })}><Hint text={\"quit playlist\"} direction={\"bottom\"} /><BiDoorOpen /></button>\r\n\t\t\telse if (currentUser.addedPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to remove this playlist from library?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { removePlaylistFromLibrary(data, currentUser); closeConfirm() })}><Hint text={\"remove playlist from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse return <button onClick={() => addPlaylistToLibrary(data, currentUser)}><Hint text={\"add playlist\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (currentUser.addedAuthors.includes(data.uid)) return <button><Hint text={\"remove author from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse if (currentUser.uid === data.uid) return <button onClick={() => { toggleModal(); setContent(<SettingsList />) }}><Hint text={\"settings\"} direction={\"bottom\"} /><FiSettings /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => friend.uid === data.uid && friend.status === 'added')) return <button onClick={() => openConfirm(\"Are you sure you want to remove this person from friend list?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { deleteFriend(currentUser, data); closeConfirm() })}><Hint text={\"remove from friend list\"} direction={\"bottom\"} /><FiUserCheck /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => ((friend.uid === data.uid) && (friend.status === 'awaiting')))) return <button onClick={addFriend}><Hint text={\"waiting for response\"} direction={\"bottom\"} /><BiLoaderAlt style={{ animation: 'loading 1s infinite linear' }} /></button>\r\n\t\t\telse if (!data.isAuthor) return <button onClick={() => addFriend(data, currentUser)}><Hint text={\"add friend\"} direction={\"bottom\"} /><FiUserPlus /></button>\r\n\t\t\telse return <button onClick={() => addAuthorToLibrary(data, currentUser)}><Hint text={\"subscribe\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findIfIsPrivate() {\r\n\t\treturn data.isPrivate ? <CgLock /> : null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Header\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[2]}, ${headerColors[0]})` } : { background: 'var(--yellowAndPinkGrad)' }}>\r\n\t\t\t<div className=\"headerBtns\" style={{ background: headerColors[2] }}>\r\n\t\t\t\t<BackBtn />\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div className=\"headerBackBtn\">\r\n\t\t\t\t\t\t{whatButtonToRender()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerMoreBtn\" ref={moreWindowRef}>\r\n\t\t\t\t\t\t<button onClick={!isMobile ? () => setOpenMoreWindow(!openMoreWindow) : () => { toggleModal(); setContent(<AuthorMoreWindow data={data} />) }}>\r\n\t\t\t\t\t\t\t<Hint text={\"more\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t(data.authors && data.authors.find(person => person.uid === currentUser.uid)) || (data.authors && currentUser.isAdmin) ? <div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<CustomizeAlbum playlist={data} />) }}><FiEdit2 />Edit</div> :\r\n\t\t\t\t\t\t\t\t\t\t(data.uid === currentUser.uid && !data.isAuthor) ? <div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<CustomizeAuthor author={data} />) }}><FiEdit2 />Edit</div> :\r\n\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(data.authors !== undefined ? <AlbumInfo album={data} /> : <AuthorInfo author={data} />) }}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.uid === data.uid ?\r\n\t\t\t\t\t\t<button onClick={() => openConfirm(\"Are you sure you want to quit?\", \"Yes, pretty sure\", \"No, I Don't!\", () => { logout(); closeConfirm() })} >\r\n\t\t\t\t\t\t\t<Hint text={\"quit\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<IoMdExit />\r\n\t\t\t\t\t\t</button> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorsImage\" style={data.authors === undefined ? { animation: \"floatingBorderRadius 10s infinite ease-in-out\", backgroundImage: `url(${data.photoURL})` } : { backgroundImage: `url(${data.image})` }}>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorInfo\">\r\n\t\t\t\t<div className=\"headerAuthorsName\">\r\n\t\t\t\t\t{isAlbumOrIsAuthor()}\r\n\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', margin: \"2px 0 10px 0\" }}>\r\n\t\t\t\t\t\t<h1>{data.displayName || data.name}</h1>\r\n\t\t\t\t\t\t{findIfIsVerified()}\r\n\t\t\t\t\t\t{findIfIsPrivate()}\r\n\t\t\t\t\t\t{/* <LastSongListened data = {data} loading = {loading}/> */}\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showCreatorsIfExist()}\r\n\r\n\t\t\t\t<div className=\"headerListenersAndSubs\">\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t\t\t<Hint text={(data.listens ?? data.numberOfListenersPerMonth) + ' listeners per month'} style={{ fontSize: \"0.8em\" }} />\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.listens ?? data.numberOfListenersPerMonth)}</span>\r\n\t\t\t\t\t\t<FiHeadphones />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t\t\t<Hint text={data.subscribers + ' subscribers'} style={{ fontSize: \"0.8em\" }} />\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.subscribers)}</span>\r\n\t\t\t\t\t\t<FiUserPlus />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{displayCreationDateIfExists()}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isFriend ? <ChatWithFriendButton data={data} color={headerColors[3]} /> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const deletePlaylist = (playlistId) => {\r\n\tfirestore.collection(\"users\").where(\"addedPlaylists\", \"array-contains\", playlistId).get().then((listOfPeople)=>{\r\n\t\tlistOfPeople.docs.forEach(person=>{\r\n\t\t\tconst personFilteredPlaylists = person.data().addedPlaylists.filter(pId => pId !== playlistId)\r\n\t\t\tfirestore.collection('users').doc(person.data().uid).update({\r\n\t\t\t\taddedPlaylists:personFilteredPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\tfirestore.collection(\"users\").where(\"ownPlaylists\", \"array-contains\", playlistId).get().then((listOfPeople)=>{\r\n\t\tlistOfPeople.docs.forEach(person=>{\r\n\t\t\tconst personFilteredPlaylists = person.data().addedPlaylists.filter(pId => pId !== playlistId)\r\n\t\t\tfirestore.collection('users').doc(person.data().uid).update({\r\n\t\t\t\townPlaylists:personFilteredPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\tfirestore.collection('search').doc(playlistId).delete().then(()=>{\r\n\t\tfirestore.collection('playlists').doc(playlistId).delete()\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const quitPlaylist = (playlist, currentUser) => {\r\n\t//logic for quiting playlist where it has more than one participant\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\townPlaylists:currentUser.ownPlaylists.filter(id => id !== playlist.id)\r\n\t})\r\n\tfirestore.collection('playlists').doc(playlist.id).update({\r\n\t\tauthors:playlist.authors.filter(author=>author.uid !== currentUser.uid)\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const deleteFriend = (currentUser, data) => {\r\n\tlet filteredUserFriends = currentUser.friends.filter(friend => friend.uid !== data.uid)\r\n\tlet filteredOtherUserFriends = data.friends.filter(friend => friend.uid !== currentUser.uid)\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends: filteredUserFriends\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(data.uid).update({\r\n\t\tfriends: filteredOtherUserFriends\r\n\t})\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/find/findVariantsOfName'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FullScreenLoading} from '../Loading/FullScreenLoading'\r\nimport {SearchBar} from '../Basic/SearchBar'\r\nimport { transformLyricsToArrayOfObjects } from '../../functions/other/transformLyricsToArrayOfObject'\r\nexport const AddSong = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(\"\")\r\n\tconst [songCover, setSongCover] = useState(\"\")\r\n\tconst [songSrc, setSongSrc] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(\"\")\r\n\tconst [lyrics, setLyrics] = useState(\"\")\r\n\tconst [imageLocalPath, setImageLocalPath] = useState(\"\")\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [showSuccessMessage, setShowSuccessMessage] = useState(false)\r\n\tconst [loadingSong, setLoadingSong] = useState(false)\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/') {\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\r\n\tasync function addSongToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\t\r\n\t\tlet uid = getUID()\r\n\t\tsetErrorMessage(\"\")\r\n\t\tif (songName.length === 0) setErrorMessage(\"Song has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Song has to have at least 1 author')\r\n\t\telse if (songCover.length === 0) setErrorMessage('You didn\\'t load song cover')\r\n\t\telse if (songSrc.length === 0) setErrorMessage('You didn\\'t load song file')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a song')\r\n\t\telse {\r\n\t\t\tsetLoadingSong(true)\r\n\t\t\tfirestore.collection('songs').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tsongSrc: songSrc,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\tcover: songCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\treleaseDate: releaseDate,\r\n\t\t\t\t\tlyrics: transformLyricsToArrayOfObjects(lyrics),\r\n\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetSongCover('')\r\n\t\t\t\tsetSongName('')\r\n\t\t\t\tsetSongSrc('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetShowSuccessMessage(true)\r\n\t\t\t\tsetImageColors([])\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetErrorMessage(err)\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t})\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\tauthorSongs.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\t\tplace:'songs',\r\n\t\t\t\tuid:uid,\r\n\t\t\t\tvariantsOfName:findVariantsOfName(songName)\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(showSuccessMessage){\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tsetShowSuccessMessage(false)\r\n\t\t\t}, 2000)\r\n\t\t}\r\n\t}, [showSuccessMessage])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<FullScreenLoading loading = {loadingSong}/>\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit = {e=>e.preventDefault()}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter song name\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song authors</h3>\r\n\t\t\t\t\t<SearchBar value = {authorsInputValue} setValue = {setAuthorsInputValue} setResultAuthorList = {setAllAuthors} defaultSearchMode = {'authors'}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{/* <label>\r\n\t\t\t\t\t<h3>Add to albums and playlists</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} onKeyDown={findAuthors} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t</label> */}\r\n\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\r\n\t\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage = {setErrorMessage} setImageLocalPath = {setImageLocalPath} downloadedPhoto = {songCover} setDownloadedPhoto = {setSongCover} place = {'songsImages/'}/>\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload song file\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={songSrc !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songs/', setSongSrc)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" placeholder={\"Add song lyrics\"} value = {lyrics} onChange={(e) => setLyrics(e.target.value)}></textarea>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button className=\"addSongBtn\" onClick = {addSongToFirebase}>{!showSuccessMessage?\"Add song\":\"Song Successfully added. Congrats!\"}</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { FiPlus} from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\nimport { AddSong } from '../AddWindow/AddSong'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const AddWindow = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAddSongWindow, setOpenAddSongWindow] = useState(false)\r\n\tconst [currentSliderPage, setCurrentSliderPage] = useState(0)\r\n\tconst sliderPages = [<AddSong/>, <AddPlaylist/>]\r\n\treturn (((currentUser.isAdmin) || (data.isAuthor)) && (data.uid === currentUser.uid)) ?\r\n\t\t(\r\n\t\t\t<div className=\"AddSong\">\r\n\t\t\t\t<button onClick={() => setOpenAddSongWindow(!openAddSongWindow)} style={openAddSongWindow ? { background: 'var(--red)' } : {}} className = \"openAddSongWindowBtn\">\r\n\t\t\t\t\t<FiPlus style={openAddSongWindow ? { transform: 'rotate(45deg)' } : {}} />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"addSongWindow\" style={openAddSongWindow ? { display: 'flex' } : {}}>\r\n\t\t\t\t\t<Slider pages = {['Song', 'Playlist']} currentPage = {currentSliderPage} setCurrentPage = {setCurrentSliderPage}/>\r\n\t\t\t\t\t{sliderPages[currentSliderPage]}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) :\r\n\t\tnull\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiX } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const FriendRequestItem = ({person, addFriend, rejectFriend}) => {\r\n\treturn (\r\n\t\t<div className = 'FriendRequestItem'>\r\n\t\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t\t<div className = \"friendRequestImageAndName\">  \r\n\t\t\t\t\t<div className=\"requestImage\">\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={person.photoURL} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3>{person.displayName}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"requestButtons\">\r\n\t\t\t\t<button style = {{color:'var(--green)'}} onClick = {()=>addFriend(person.uid)}>\r\n\t\t\t\t\t<FiCheck/>\r\n\t\t\t\t\t<span>Add</span> \r\n\t\t\t\t</button>\r\n\t\t\t\t<button style = {{color:'var( --lightRed)'}} onClick = {()=>rejectFriend(person.uid)}>\r\n\t\t\t\t\t<FiX/>\r\n\t\t\t\t\t<span>Reject</span> \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FriendRequestItem } from './FriendRequestItem'\r\n\r\nexport const FriendRequest = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendRequests, setFriendRequests] = useState([])\r\n\tfunction fetchFriendRequests(){\r\n\t\tconst tempArray = []\r\n\t\tcurrentUser.friends.forEach(async (friendObj, i)=>{\r\n\t\t\tif(friendObj.status === 'requested'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\ttempArray.push(personData)\r\n\t\t\t\tif(i === currentUser.friends.length - 1) setFriendRequests(tempArray)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendRequests()\r\n\t}, [JSON.stringify(currentUser.friends)])\r\n\r\n\tfunction addFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"added\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"added\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\r\n\t\tsetFriendRequests(arrOfReqs=>arrOfReqs.filter(el=>el.uid !== uid))\r\n\t}\r\n\r\n\tfunction rejectFriend(uid){\r\n\t\tconst friendsList = currentUser.friends.filter(obj=>obj.uid !== uid)\r\n\t\tfirestore.collection('users').doc(uid).get().then(res=>{\r\n\t\t\tconst otherUserFriendList = res.data().friends.filter(obj=>obj.uid !== currentUser.uid)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tfriends:friendsList\r\n\t\t\t})\r\n\t\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\t\tfriends:otherUserFriendList\r\n\t\t\t})\r\n\t\t\tsetFriendRequests(arrOfReqs=>arrOfReqs.filter(el=>el.uid !== uid))\r\n\t\t})\r\n\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{friendRequests.map((person, index)=>{\r\n\t\t\t\treturn <FriendRequestItem person = {person} key = {index} addFriend = {addFriend} rejectFriend = {rejectFriend}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\nimport { firestore } from '../../firebase';\r\nimport { PersonTinyVerticalItem } from './PersonTinyVerticalItem'\r\n\r\nexport const PersonTinyList = ({data, title}) => {\r\n\tconst [listOfPeople, setListOfPeople] = useState([])\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(listOfPeople.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfPeople])\r\n\r\n\tfunction fetchFriends(){\r\n\t\tsetListOfPeople([])\r\n\t\tdata.friends.forEach(async personObj => {\r\n\t\t\tif(personObj.status === 'added'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(personObj.uid).get()).data()\r\n\t\t\t\tsetListOfPeople(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetListOfPeople([])\r\n\t\tfetchFriends()\r\n\t}, [data.uid])\r\n\treturn listOfPeople.length > 0? (\r\n\t\t<div className = 'PersonTinyList'>\r\n\t\t\t{title && <h2>{title}</h2>}\r\n\t\t\t<div style = {{position:'relative'}}>\t\r\n\t\t\t\t<div className=\"personTinyListWrapper\" ref = {wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t\t{listOfPeople.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { firestore } from \"../../firebase\";\r\n\r\nexport const findAuthorsAlbums = async (authorsData, setAuthorsPlaylists, currentUserUID, setLoading) => {\r\n\tsetAuthorsPlaylists([])\r\n\tconst tempArray = []\r\n\tif (authorsData.ownPlaylists !== undefined && authorsData.ownPlaylists.length !== 0) {\r\n\t\tauthorsData.ownPlaylists.forEach(async (playlistId, index) => {\r\n\t\t\tconst playlistData = (await firestore.collection(\"playlists\").doc(playlistId).get()).data()\r\n\t\t\tif (playlistData && (!playlistData.isPrivate || (authorsData.uid === currentUserUID && playlistData.isPrivate))) tempArray.push(playlistData)\r\n\t\t\tif (index === authorsData.ownPlaylists.length-1) {\r\n\t\t\t\ttempArray.sort((a, b) => new Date(b.creationDate).getTime() - new Date(a.creationDate).getTime())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetAuthorsPlaylists(tempArray)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAuthorsAlbums } from '../../functions/find/findAuthorsAlbums'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\n\r\nexport const Playlists = ({ authorsData }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [authorsPlaylists, setAuthorsPlaylists] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsAlbums(authorsData, setAuthorsPlaylists, currentUser.uid, setLoading)\r\n\t}, [authorsData.ownPlaylists])\r\n\r\n\treturn <AlbumList listOfAlbums = {authorsPlaylists} title = {currentUser.isAuthor?\"Albums\":\"Playlists\"} loading = {loading}/>\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport findSimilarArtists from '../../functions/find/findSimilarArtists'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\n\r\nexport const SimilarArtists = ({ data }) => {\r\n\tconst [similarArtists, setSimilarArtists] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSimilarArtists(data, setSimilarArtists)\r\n\t}, [data])\r\n\treturn (\r\n\t\t<AuthorsList listOfAuthors = {similarArtists} title = {\"Similar Authors\"}/>\r\n\t)\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { fetchItemsList } from '../../functions/fetch/fetchItemsList'\r\nimport findIfSongIsNew from '../../functions/find/findIfSongIsNew'\r\nimport { SongList } from '../Lists/SongList'\r\nexport const TopSongs = ({ authorId, authorsData, headerColors }) => {\r\n\tconst [popularSongs, setPopularSongs] = useState([])\r\n\tconst [newSongs, setNewSongs] = useState([])\r\n\r\n\tasync function findAuthorsSongs() {\r\n\t\tif (authorsData.isAuthor) {\r\n\t\t\tfetchItemsList(authorsData.ownSongs, 'songs', setPopularSongs, (res) => {\r\n\t\t\t\tres.forEach(songData=>{if (findIfSongIsNew(songData) && !newSongs.includes(songData)) setNewSongs(prevSongs => [...prevSongs, songData])})\r\n\t\t\t\treturn res.sort((a, b) => b.listens - a.listens)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfetchItemsList(authorsData.addedSongs.slice(0).reverse(), 'songs', setPopularSongs)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsSongs()\r\n\t\tsetNewSongs([])\r\n\t}, [authorsData.ownSongs])\r\n\r\n\treturn authorsData.isAuthor ?\r\n\t\t(<div className=\"TopSongs\">\r\n\t\t\t<SongList listOfSongs={newSongs} source={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: newSongs }} isNewSong />\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={\"Popular Songs\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t</div>) :\r\n\t\t(\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName + \"'s Library\", image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={authorsData.displayName + \"'s Library\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t)\r\n}\r\n","import { CHAT_ROUTE, HISTORY_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, LOGIN_ROUTE, NOTFOUND_ROUTE, SEARCH_ROUTE, SIGNUP_ROUTE, TEMPLATE_ALBUM, TEMPLATE_AUTHOR, TEMPLATE_CHAT } from \"./utils/consts\";\r\nimport {LogInPage} from './pages/LogInPage'\r\nimport {SignUpPage} from './pages/SignUpPage'\r\nimport { Home } from \"./pages/Home\";\r\nimport { SearchPage } from \"./pages/SearchPage\";\r\nimport { LibraryPage } from \"./pages/LibraryPage\";\r\nimport { ChatPage } from \"./pages/ChatPage\";\r\nimport { PageNotFound } from \"./pages/PageNotFound\";\r\nimport { DialoguePage } from \"./pages/DialoguePage\";\r\nimport { AlbumPage } from \"./pages/AlbumPage\";\r\nimport { AuthorPage } from \"./pages/AuthorPage\";\r\nimport { HistoryPage } from \"./pages/HistoryPage\";\r\nexport const publicRoutes = [\r\n\t{\r\n\t\tpath:LOGIN_ROUTE,\r\n\t\tComponent:LogInPage,\r\n\t},\r\n\t{\r\n\t\tpath:SIGNUP_ROUTE,\r\n\t\tComponent:SignUpPage,\r\n\t}\r\n]\r\n\r\nexport const privateRoutes = [\r\n\t{\r\n\t\tpath:HOME_ROUTE,\r\n\t\tComponent:Home,\r\n\t},\r\n\t{\r\n\t\tpath:LIBRARY_ROUTE,\r\n\t\tComponent:LibraryPage,\r\n\t},\r\n\t{\r\n\t\tpath:SEARCH_ROUTE,\r\n\t\tComponent:SearchPage,\r\n\t},\r\n\t{\r\n\t\tpath:CHAT_ROUTE,\r\n\t\tComponent:ChatPage,\r\n\t},\r\n\t{\r\n\t\tpath:NOTFOUND_ROUTE,\r\n\t\tComponent:PageNotFound\r\n\t},\r\n\t{\r\n\t\tpath:TEMPLATE_CHAT,\r\n\t\tComponent:DialoguePage\r\n\t},\r\n\t{\r\n\t\tpath:TEMPLATE_ALBUM,\r\n\t\tComponent:AlbumPage\r\n\t},\r\n\t{\r\n\t\tpath:TEMPLATE_AUTHOR,\r\n\t\tComponent:AuthorPage\r\n\t},\r\n\t{\r\n\t\tpath:HISTORY_ROUTE,\r\n\t\tComponent:HistoryPage\r\n\t}\r\n]","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { ErrorPlate } from '../components/MessagePlates/ErrorPlate'\r\nimport { FullScreenLoading } from '../components/Loading/FullScreenLoading'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { HOME_ROUTE, LOGIN_ROUTE, SIGNUP_ROUTE } from '../utils/consts'\r\n\r\nexport const LogInPage = () => {\r\n\tconst {login} = useAuth()\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst isValid = email.length !== 0 && password.length !== 0\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\t\tawait login(email, password, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className = \"In-Up-Container\">\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title=\"Log In\"/>\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Enter your password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" disabled = {loading}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {SIGNUP_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tCreate new account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../styles/SignIn-Up.css'\r\nimport { Link } from 'react-router-dom'\r\nimport {HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { RadioBtn } from '../components/SignIn-Up/RadioBtn'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { FullScreenLoading } from '../components/Loading/FullScreenLoading'\r\nexport const SignUpPage = () => {\r\n\tconst [currentRoleChoice, setCurrentRoleChoice] = useState(1)\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst {signup} = useAuth()\r\n\tconst [photoURL, setPhotoURL] = useState(\"\")\r\n\tconst isValid = email.length !== 0 && password.length !== 0 && name.length !== 0\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tasync function onFileChange(e){\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(`usersImages/${file.name}`)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetPhotoURL(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\tawait signup(email, name, password, currentRoleChoice, photoURL, imageColors, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"In-Up-Container\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title = \"Sign Up\"/>\r\n\t\t\t\t\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" onChange = {(e)=>setName(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Create a password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div style = {{display:'flex', width:'100%', justifyContent:'center', margin:'5px 0 15px 0'}}>\r\n\t\t\t\t\t\t<RadioBtn label = \"User\" onClick = {()=>setCurrentRoleChoice(0)} currentActive = {currentRoleChoice} id = {0}/>\r\n\t\t\t\t\t\t<RadioBtn label = \"Author\" onClick = {()=>setCurrentRoleChoice(1)} currentActive = {currentRoleChoice} id = {1}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className = \"downloadFile\">\r\n\t\t\t\t\t\t<div className = \"downloadPhoto\">\r\n\t\t\t\t\t\t\t{photoURL === ''?<span className = \"downloadBtnText\">\r\n\t\t\t\t\t\t\t\t<AiOutlineCloudDownload/>\r\n\t\t\t\t\t\t\t\tDownload photo\r\n\t\t\t\t\t\t\t</span>:<span className = \"downloadBtnText\">Done</span>}\r\n\t\t\t\t\t\t\t<span className=\"photoLoadLine\" style = {photoURL !== ''?{width:'100%'}:{}}></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange = {onFileChange}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" type = \"submit\" disabled = {loading}>\r\n\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {LOGIN_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tAlready have the account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../styles/HomePage.css'\r\nimport { MainBanner } from '../components/HomePage/MainBanner'\r\nimport { RecentSongs } from '../components/HomePage/RecentSongs'\r\nimport { RecommendedAuthors } from '../components/HomePage/RecommendedAuthors'\r\nimport { RecommendedSongs } from '../components/HomePage/RecommendedSongs'\r\nimport { Top15Songs } from '../components/HomePage/Top15Songs'\r\n\r\nexport const Home = () => {\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards' }} className=\"HomePage\">\r\n\t\t\t<MainBanner />\r\n\t\t\t<RecentSongs />\r\n\t\t\t<Top15Songs />\r\n\t\t\t<RecommendedSongs />\r\n\t\t\t<RecommendedAuthors />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport \"../styles/LibraryPage.css\"\r\nimport { Slider } from '../components/Tools/Slider'\r\nimport { SongsPage } from '../components/LibraryPage/SongsPage'\r\nimport { PlaylistsPage } from '../components/LibraryPage/PlaylistsPage'\r\nimport { AuthorsPage } from '../components/LibraryPage/AuthorsPage'\r\n\r\nexport const LibraryPage = () => {\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst libraryPages = [<SongsPage/>, <PlaylistsPage/>, <AuthorsPage/>]\r\n\treturn (\r\n\t\t<div className=\"LibraryPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t<Slider pages = {['Songs', \"Playlists\", \"Authors\"]} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t{libraryPages[currentPage]}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport \"../styles/SearchPage.css\"\r\nimport { SearchBar } from '../components/Basic/SearchBar'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { AuthorsList } from '../components/Lists/AuthorsList'\r\nimport { AlbumList } from '../components/Lists/AlbumList'\r\nexport const SearchPage = () => {\r\n\tconst {searchValue, setSearchValue} = useAuth()\r\n\tconst [resultSongList, setResultSongList] = useState([])\r\n\tconst [resultAuthorList, setResultAuthorList] = useState([])\r\n\tconst [resultAlbumList, setResultAlbumList] = useState([])\r\n\tconst [shadowColor, setShadowColor] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetResultSongList([])\r\n\t\tsetResultAuthorList([])\r\n\t\tsetResultAlbumList([])\r\n\t}, [searchValue])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(resultSongList.length !== 0){\r\n\t\t\tsetShadowColor(resultSongList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAuthorList.length !== 0){\r\n\t\t\tsetShadowColor(resultAuthorList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAlbumList.length !== 0){\r\n\t\t\tsetShadowColor(resultAlbumList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse setShadowColor(\"\")\r\n\t}, [resultSongList, resultAuthorList, resultAlbumList])\r\n\treturn (\r\n\t\t<div className=\"SearchPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<SearchBar\r\n\t\t\t\tvalue={searchValue}\r\n\t\t\t\tsetValue = {setSearchValue}\r\n\t\t\t\tallFoundSongs = {resultSongList}\r\n\t\t\t\tsetAllFoundSongs = {setResultSongList}\r\n\t\t\t\tsetResultPlaylists = {setResultAlbumList}\r\n\t\t\t\tsetResultAuthorList = {setResultAuthorList}\r\n\t\t\t\tfocus\r\n\t\t\t/>\r\n\r\n\t\t\t<SongList listOfSongs = {resultSongList} source = {{ source: '/search', name: \"Search\", image: \"https://www.pngkey.com/png/full/87-872187_lupa-search-icon-white-png.png\", songsList:resultSongList }} title = {\"Songs\"} showListens displayIfEmpty = {\"\"}/>\r\n\t\t\t<AuthorsList listOfAuthors = {resultAuthorList} title = {\"Authors\"}/>\r\n\t\t\t<AlbumList listOfAlbums = {resultAlbumList} title = {\"Albums and Playlists\"} loading = {false}/>\r\n\t\t\t<div className=\"colorfullShadow\" style={{ background: shadowColor }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ChatItem } from '../components/ChatPage/ChatItem'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport '../styles/ChatPage.css'\r\nimport {FiPlus} from 'react-icons/fi'\r\nimport { useModal } from '../contexts/ModalContext'\r\nimport {CreateChat} from '../components/ChatPage/CreateChat'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\nexport const ChatPage = () => {\r\n\tconst [yourChats, setYourChats] = useState([])\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseEffect(() => {\r\n\t\tfetchItemsList(currentUser.chats, 'chats', setYourChats, (res)=>res.sort((a, b)=>new Date(b.messages[b.messages.length - 1].sentTime).getTime() - new Date(a.messages[a.messages.length - 1].sentTime).getTime()), ()=>setLoading(false))\r\n\t}, [])\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards', minHeight: \"100%\" }}>\r\n\t\t\t<div style = {{marginBottom:'10px', display:'flex', alignItems:'start', width:'100%'}}>\r\n\t\t\t\t<button className = \"standartButton\" onClick = {()=>{toggleModal();setContent(<CreateChat/>)}}>\r\n\t\t\t\t\t<FiPlus/>\r\n\t\t\t\t\tCreate chat\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{loading ?\r\n\t\t\t\t<LoadingCircle />\r\n\t\t\t\t:\r\n\t\t\t\t<div className=\"chatsWrapper\">\r\n\t\t\t\t\t{yourChats.length? yourChats.map((chat, index) => {\r\n\t\t\t\t\t\treturn <ChatItem chatData={chat} key={index} />\r\n\t\t\t\t\t}):<h3>No chats</h3>}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport \"../styles/PageNotFound.css\"\r\nexport const PageNotFound = () => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"PageNotFound\">\r\n\t\t\t<img loading = \"lazy\" src=\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\" alt=\"\" />\r\n\t\t\t<h2>Page not found</h2>\r\n\t\t\t<button className=\"standartButton\" onClick = {()=>history.push('/library')}>\r\n\t\t\t\tBack to library\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport { ChatHeader } from '../components/ChatPage/ChatHeader'\r\nimport { ChatInput } from '../components/AuthorPage/ChatInput'\r\nimport { useEffect } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { DateOnTop } from '../components/ChatPage/DateOnTop'\r\nimport { useRealTimeMessages } from '../hooks/useRealTimeMessages'\r\nimport { ChatMessagesWindow } from '../components/ChatPage/ChatMessagesWindow'\r\nimport { useScreen } from '../contexts/ScreenContext'\r\nexport const DialoguePage = () => {\r\n\tconst match = useRouteMatch('/chat/:chatId')\r\n\tconst {screenHeight} = useScreen()\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatId } = match.params\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [inResponseToMessage, setInResponseToMessage] = useState([])\r\n\tconst [dateRefsArray, setDateRefsArray] = useState([])\r\n\tconst history = useHistory()\r\n\tconst [chatData, messageList, loading, currentDateOnTop, findTopDate] = useRealTimeMessages(chatId, dateRefsArray)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (chatData.participants !== undefined) {\r\n\t\t\tif (!chatData.participants.includes(currentUser.uid)) history.push('/chat')\r\n\t\t}\r\n\t}, [chatData])\r\n\r\n\treturn (\r\n\t\t<div className=\"DialoguePage\" style = {{height:'100%'}}>\r\n\t\t\t{\r\n\t\t\t\tloading ?\r\n\t\t\t\t\t<LoadingCircle top = {\"50%\"}/> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ChatHeader data={chatData} />\r\n\t\t\t\t\t\t<DateOnTop date = {currentDateOnTop}/>\r\n\t\t\t\t\t\t<ChatMessagesWindow chatId = {chatId} chatData = {chatData} messageList = {messageList} findTopDate = {findTopDate} setDateRefsArray = {setDateRefsArray} inResponseToMessage = {inResponseToMessage} setInResponseToMessage = {setInResponseToMessage}/>\r\n\t\t\t\t\t\t<ChatInput \r\n\t\t\t\t\t\t\tchatId={chatId} \r\n\t\t\t\t\t\t\tchatData = {chatData}\r\n\t\t\t\t\t\t\tmessageText={messageText} \r\n\t\t\t\t\t\t\tsetMessageText={setMessageText} \r\n\t\t\t\t\t\t\tinResponseToMessage = {inResponseToMessage} \r\n\t\t\t\t\t\t\tsetInResponseToMessage = {setInResponseToMessage} \r\n\t\t\t\t\t\t\totherMessages = {messageList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t{chatData.wallpaper !== \"undefined\"?<img loading = \"lazy\" src={chatData.wallpaper} className = \"chatWallpaper\" alt=\"\"/>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\n/**\r\n \t* Returns [chatData, messageList, loading, currentDateOnTop, findTopDate]\r\n*/\r\nexport const useRealTimeMessages = (chatId, dateRefsArray) => {\r\n\tconst [chatData, setChatData] = useState([])\r\n\tconst [messageList, setMessageList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [currentDateOnTop, setCurrentDateOnTop] = useState(\"\")\r\n\tfunction findTopDate(e){\r\n\t\tdateRefsArray.forEach(ref=>{\r\n\t\t\tif(ref.current !== null) {\r\n\t\t\t\tif(ref.current.offsetTop - 70 <= e.target.scrollTop) setCurrentDateOnTop(ref.current.innerHTML)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('chats').doc(chatId)\r\n\t\t\t.onSnapshot(snapshot => {\r\n\t\t\t\tsetChatData(snapshot.data())\r\n\t\t\t\tsetMessageList(snapshot.data().messages)\r\n\t\t\t\tsetCurrentDateOnTop(snapshot.data().messages.length ? snapshot.data().messages[0].sentTime : new Date().toString())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, chatId])\r\n\r\n\r\n\treturn [chatData, messageList, loading, currentDateOnTop, findTopDate]\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\nexport const AlbumPage = () => {\r\n\tconst match = useRouteMatch('/albums/:albumId')\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { albumId } = match.params\r\n\tconst [albumData, setAlbumData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst history = useHistory()\r\n\tasync function fetchAlbumsData() {\r\n\t\tfirestore.collection(\"playlists\").doc(albumId).onSnapshot(doc => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\tsetAlbumData(doc.data())\r\n\t\t\t\tsetHeaderColors(doc.data().imageColors)\r\n\t\t\t} else {\r\n\t\t\t\thistory.push('/not-found')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tfetchItemsList(albumData.songs, 'songs', setPlaylistSongs, (res)=>res, ()=>setLoading(false))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAlbumsData()\r\n\t}, [albumId, firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSongsInAlbum()\r\n\t}, [albumData])\r\n\r\n\treturn (\r\n\t\t<div className=\"AlbumPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{\r\n\t\t\t\tloading ? <LoadingCircle top={'50%'} /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header data={albumData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t\t<SongList listOfSongs={playlistSongs} source={{ source: `/albums/${albumData.id}`, name: albumData.name, image: albumData.image, songsList: playlistSongs }} showSearch defaultSearchMode={\"songs\"} />\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { AddWindow } from '../components/AdminAndAuthor/AddWindow'\r\nimport { FriendRequest } from '../components/AuthorPage/FriendRequest'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { PersonTinyList } from '../components/AuthorPage/PersonTinyList'\r\nimport { Playlists } from '../components/AuthorPage/Playlists'\r\nimport { SimilarArtists } from '../components/AuthorPage/SimilarArtists'\r\nimport { TopSongs } from '../components/AuthorPage/TopSongs'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport \"../styles/AuthorPage.css\"\r\nimport { useHistory } from 'react-router-dom'\r\nexport const AuthorPage = () => {\r\n\tconst match = useRouteMatch('/authors/:authorId')\r\n\tconst {currentUser} = useAuth()\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { authorId } = match.params\r\n\tconst [authorsData, setAuthorsData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst history = useHistory()\r\n\tasync function fetchAuthorsData() {\r\n\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAuthorsData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t\t setLoading(false)\r\n\t\t\t} else {\r\n\t\t\t\t history.push('/not-found')\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [authorId])\r\n\treturn (\r\n\t\t<div className=\"AuthorPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{loading?\r\n\t\t\t\t<LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data={authorsData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t{currentUser.uid === authorsData.uid?<FriendRequest/>:null} \r\n\t\t\t\t\t<AddWindow data={authorsData} />\r\n\t\t\t\t\t<TopSongs author={authorId} authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{authorsData.friends && !authorsData.isAuthor?<PersonTinyList data = {authorsData} title = {\"Friends\"}/>:null}\r\n\t\t\t\t\t<Playlists authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauthorsData.isAuthor?\r\n\t\t\t\t\t\t<SimilarArtists data={authorsData} />:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { BackBtn } from '../components/Basic/BackBtn'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { firestore } from '../firebase'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\n\r\nexport const HistoryPage = () => {\r\n\tconst [historySongsIds, setHistorySongsIds] = useState([])\r\n\tconst [historySongs, setHistorySongs] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('history').doc(currentUser.uid).onSnapshot(res => {\r\n\t\t\tsetHistorySongsIds(res.data().history)\r\n\t\t})\r\n\t}, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchItemsList(historySongsIds, \"songs\", setHistorySongs)\r\n\t}, [historySongsIds])\r\n\treturn (\r\n\t\t<div className=\"HistoryPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t<BackBtn/>\r\n\t\t\t\t<h2 style={{ margin: '0px', marginLeft:'8px' }}>History</h2>\r\n\t\t\t</div>\r\n\t\t\t<SongList listOfSongs={historySongs} source={{ source: `/history`, name: \"History\", image: \"https://www.seekpng.com/png/full/781-7815113_history-icon-white-png.png\", songsList: historySongs }} showCount showSearch displayIfEmpty={\"Nothing here\"} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { privateRoutes } from '../routes'\r\nimport { HOME_ROUTE } from '../utils/consts'\r\nexport const ContentRouter = () => {\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{privateRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact key = {path}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={HOME_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","function amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nexport default function correctTimeDisplay(seconds) {\r\n\treturn amountOfZeros(Math.floor(seconds / 60)) + \":\" + amountOfZeros(Math.floor(seconds % 60))\r\n}","export function findLenOfAuthors(authors) {\r\n\tlet str = \"\"\r\n\tauthors.forEach(el => {str += el.displayName})\r\n\treturn str.length\r\n}","import React from 'react'\r\nimport { FaBackward, FaForward, FaPause, FaPlay } from 'react-icons/fa'\r\nimport { TiArrowRepeat, TiArrowShuffle } from 'react-icons/ti'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport checkNumber from '../../functions/other/checkNumber'\r\nimport correctTimeDisplay from '../../functions/other/correctTimeDisplay'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { ColorCircles } from './colorCircles'\r\nimport {Hint} from '../Basic/Hint'\r\nimport { findLenOfAuthors } from '../../functions/find/findLenOfAuthors'\r\nexport const Player = ({inputRef, textLimit = 18, linkToAuthors = true}) => {\r\n\tconst { \r\n\t\tcurrentSongData,\r\n\t\tcurrentTime, \r\n\t\tchangeCurrentTime, \r\n\t\tsongDuration, \r\n\t\tsetRepeatMode, \r\n\t\trepeatMode, \r\n\t\tplay, \r\n\t\tprevSong, \r\n\t\tplaySong, \r\n\t\tnextSong, \r\n\t\tsetShuffleMode, \r\n\t\tshuffleMode, \r\n\t\tdisplayAuthors,\r\n\t\tname, \r\n\t\tauthors, \r\n\t\tcover,\r\n\t\tinputRange} = useSong()\r\n\treturn currentSongData.id !== -1?(\r\n\t\t<div className=\"player\">\r\n\t\t\t<div className=\"playerUpperSide\">\r\n\t\t\t\t<div className=\"songCover\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"nameAndAuthors\">\r\n\t\t\t\t\t<h2 title={name.length > textLimit ? name : null} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={name.length > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{name}</div>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h3 style={{ overflow: 'hidden' }} title = {authors.map((el) => ' ' + el.displayName)}>\r\n\t\t\t\t\t\t{linkToAuthors?<div style={findLenOfAuthors(currentSongData.authors) > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{displayAuthors()}</div>:<div>{displayAuthorsStr(authors, ' & ', 33)}</div>}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"controlPanel\">\r\n\t\t\t\t<input type=\"range\" min=\"0\" ref={inputRef} step=\"1\" value={currentTime} onMouseUp={(event)=>{changeCurrentTime(event)}} style = {{background: `linear-gradient(to right, var(--themeColor2) ${inputRange}%, #fff ${inputRange}%)`}}/>\r\n\t\t\t\t<div className=\"startAndEndTime\">\r\n\t\t\t\t\t<span>{correctTimeDisplay(currentTime)}</span>\r\n\t\t\t\t\t<span>{correctTimeDisplay(songDuration)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<button className=\"shuffleBtn\" onClick={() => setShuffleMode(checkNumber(shuffleMode + 1, 1))} style={shuffleMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowShuffle style={shuffleMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={(e)=>{e.stopPropagation();prevSong()}}><FaBackward /></button>\r\n\t\t\t\t\t<button onClick={(e)=>{e.stopPropagation();playSong()}}>{play ? <FaPause /> : <FaPlay />}</button>\r\n\t\t\t\t\t<button onClick={(e)=>{e.stopPropagation();nextSong()}}><FaForward /></button>\r\n\t\t\t\t\t<button className=\"repeatBtn\" onClick={() => setRepeatMode(checkNumber(repeatMode + 1, 2))} style={repeatMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowRepeat style={repeatMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t\t<span style={repeatMode === 2 ? { opacity: 1 } : {}}></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { BiMusic, BiSearch } from \"react-icons/bi\";\r\nimport { FiHome, FiMessageCircle } from \"react-icons/fi\";\r\nimport { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, SEARCH_ROUTE } from \"../utils/consts\";\r\n\r\nexport const leftSideBar = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<FiHome/>,\r\n\t\ttitle:'Home',\r\n\t\tlink:HOME_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiMusic/>,\r\n\t\ttitle:'Library',\r\n\t\tlink:LIBRARY_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<BiSearch/>,\r\n\t\ttitle:'Search',\r\n\t\tlink:SEARCH_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<FiMessageCircle/>,\r\n\t\ttitle:'Chat',\r\n\t\tlink:CHAT_ROUTE\r\n\t},\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const MobileControlBarItem = ({element, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<Link to = {element.link} className = 'MobileControlBarItem' onClick = {()=>setCurrentPage(element.id)} style = {element.id === currentPage?{color:'var(--blue)'}:{}}>\t\r\n\t\t\t{element.icon}\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../../styles/BottomControlBar.css'\r\nimport {leftSideBar} from '../../data/leftSideBar'\r\nimport { MobileControlBarItem } from '../BottomControlBar/MobileControlBarItem'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { BiUserCircle } from 'react-icons/bi'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nexport const BottomControlBar = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst userElement = {\r\n\t\ticon:<BiUserCircle/>,\r\n\t\tlink:`/authors/${currentUser.uid}`,\r\n\t}\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tconsole.log(window.location.hash)\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className = \"BottomControlBar\">\r\n\t\t\t{leftSideBar.map((el, i)=>{\r\n\t\t\t\treturn <MobileControlBarItem element = {el} key = {i} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t})}\r\n\t\t\t<MobileControlBarItem element = {userElement} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BottomControlBar } from './BottomControlBar'\r\n\r\nexport const FullBottomSide = () => {\r\n\tconst { setOpenFullScreenPlayer, inputRange } = useSong()\r\n\treturn (\r\n\t\t<div className=\"FullBottomSide\">\r\n\t\t\t<span onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t<Player textLimit={25} linkToAuthors={false} />\r\n\t\t\t\t<span className=\"mobileSongRange\" style = {{width:inputRange + \"%\"}}></span>\r\n\t\t\t</span>\r\n\t\t\t<BottomControlBar />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Loading = ({currentTime, timeSpan, id}) => {\r\n\treturn (\r\n\t\t<div className = \"Loading\" id = {id}>\r\n\t\t\t<div className=\"outer\" style = {{pointerEvents:'none'}}>\r\n\t\t\t\t<div className=\"inner\" style = {currentTime/timeSpan < 1?{width:(currentTime/timeSpan)*100 + \"%\"}:{width:0 + \"%\", opacity:'0'}}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Loading } from './Loading'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nexport const LyricsParagraph = ({ el, index, lyricsModeratorMode, karaokeModeratorTimes,  setKaraokeModeratorTimes, setInputKaraokeTime, inputKaraokeTime }) => {\r\n\tconst { currentSongData, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, lyrics} = useSong()\r\n\tconst paragraphRef = useRef()\r\n\tconst isVisible = useOnScreen(currentParagraph === index ? currentParagraphRef : paragraphRef)\r\n\tconst paragraphStyle = currentParagraph === index ?\r\n\t{} : window.innerWidth > 1000 ?\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-58px)' } : { transform: 'scale(.75) translateX(-78px)' } :\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-11.5%)' } : { transform: 'scale(.75) translateX(-15.6%)' }\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"lyricsBlock\" key={index} id={index} onClick={(e) => changeCurrentTime(e, el.startTime)} style={play ? currentParagraph === index || !isVisible ? {} : Math.abs(currentParagraph - index) < 2? { opacity: .5} : { opacity: .1} : {}} ref={currentParagraph === index ? currentParagraphRef : paragraphRef} >\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t<span onClick={e => e.stopPropagation()}>{karaokeModeratorTimes[index] !== undefined && karaokeModeratorTimes[index].length !== 0 ? <BiCheckCircle style={{ background: 'var(--themeColor3)', color: 'var(--themeColor)' }} /> : <FiXCircle />} </span>\r\n\t\t\t\t\t\t<input type=\"number\" value={karaokeModeratorTimes[index] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, index)} onClick={e => e.stopPropagation()} />\r\n\t\t\t\t\t\t<div className=\"addLyricsElementBtns\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'up') }}><BiUpArrow /></button>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'down') }}><BiDownArrow /></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tel.text === \"@loading\" ?\r\n\t\t\t\t\t<Loading currentTime={currentTime - lyrics[index].startTime} timeSpan={lyrics[index + 1].startTime - lyrics[index].startTime} id={index} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\tel.text === \"@end\" ? <></>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<p key={index} id={index} style={paragraphStyle}>{el.text}</p>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { Share } from '../components/FullScreenPlayer/Share';\r\nimport { Options } from '../components/FullScreenPlayer/Options';\r\nimport { Lyrics } from '../components/FullScreenPlayer/Lyrics';\r\nimport { Queue } from '../components/FullScreenPlayer/Queue';\r\nimport { BiDotsVerticalRounded, BiShare } from 'react-icons/bi';\r\nimport {RiPlayListFill} from 'react-icons/ri'\r\nimport {FiAlignLeft} from 'react-icons/fi'\r\nimport { TiDocumentText } from 'react-icons/ti';\r\nimport { AuthorsList } from '../components/FullScreenPlayer/AuthorsList';\r\nimport { SongInfo } from '../components/Basic/SongInfo';\r\nimport { AddToPlaylists } from '../components/FullScreenPlayer/AddToPlaylists';\r\nexport const rightSide = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<BiShare/>,\r\n\t\ttitle:'Share',\r\n\t\tcomponent:Share\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiDotsVerticalRounded/>,\r\n\t\ttitle:'More',\r\n\t\tcomponent:Options\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<TiDocumentText/>,\r\n\t\ttitle:'Lyrics',\r\n\t\tcomponent:Lyrics\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<RiPlayListFill/>,\r\n\t\ttitle:'Queue',\r\n\t\tcomponent:Queue\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\ticon:null,\r\n\t\ttitle:'Go To Authors',\r\n\t\tcomponent:AuthorsList\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\ticon:null,\r\n\t\ttitle:'Add to playlist',\r\n\t\tcomponent:AddToPlaylists\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\ticon:null,\r\n\t\ttitle:'Info',\r\n\t\tcomponent:SongInfo\r\n\t},\r\n]","import React from 'react'\r\nimport { FaFacebookF, FaTelegramPlane, FaVk } from 'react-icons/fa'\r\nimport { FiCopy } from 'react-icons/fi'\r\nimport { AiFillInstagram } from 'react-icons/ai'\r\nimport { ImWhatsapp } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nexport const Share = () => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst socialMedia = [\r\n\t\t<ImWhatsapp />,\r\n\t\t<FaFacebookF />,\r\n\t\t<FaTelegramPlane />,\r\n\t\t<FaVk />,\r\n\t\t<AiFillInstagram />\r\n\t]\r\n\treturn (\r\n\t\t<div className=\"Share\">\r\n\t\t\t<button className=\"shareCopyLink\">\r\n\t\t\t\t<FiCopy />\r\n\t\t\t\tCopy link\r\n\t\t\t</button>\r\n\t\t\t<div className=\"shareOnSocial\">\r\n\t\t\t\t{socialMedia.map((social, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"shareSocialIcon\" key={index}>\r\n\t\t\t\t\t\t\t{social}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sharePeopleShort\">\r\n\t\t\t\t<FriendsListToShareWith item = {currentSongData} whatToShare = {'song'}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {MdPlaylistAdd} from 'react-icons/md'\r\nimport { BiAlbum, BiHeart, BiInfoCircle, BiPlusCircle, BiUserCircle } from \"react-icons/bi\";\r\nimport {FiTrash2, FiPlusCircle, FiInfo} from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton';\r\nexport const Options = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {currentSongData, setRightSideCurrentPage} = useSong()\r\n\treturn (\r\n\t\t<div className='Options'>\r\n\t\t\t<div className='OptionItem' >\r\n\t\t\t\t<AddOrDeleteButtonFull song = {currentSongData}/>\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(4)}>\r\n\t\t\t\t<BiUserCircle />\r\n\t\t\t\tGo to author\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(5)}>\r\n\t\t\t\t<MdPlaylistAdd />\r\n\t\t\t\tAdd to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(6)}>\r\n\t\t\t\t<FiInfo/>\r\n\t\t\t\tInfo\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { Slider } from '../Tools/Slider'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { LyricsParagraph } from './LyricsParagraph'\r\nexport const Lyrics = () => {\r\n\tconst { setIsThereKaraoke, currentSongData, setCurrentSongData, isThereKaraoke, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, currentSong, lyrics, rightSideCurrentPage, openFullScreenPlayer, openMenu } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [inputKaraokeTime, setInputKaraokeTime] = useState(0)\r\n\tconst [karaokeModeratorTimes, setKaraokeModeratorTimes] = useState([])\r\n\tconst [lyricsModeratorMode, setLyricsModeratorMode] = useState(0)\r\n\tconst [canUpdateLyrics, setCanUpdateLyrics] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (isThereKaraoke && (openMenu && rightSideCurrentPage === 2) && openFullScreenPlayer) currentParagraphRef.current.scrollIntoView()\r\n\t}, [currentParagraph])\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(lyrics && lyrics[0].startTime !== 'undefined'){\r\n\t\t\tlyrics.forEach(paragraph => {\r\n\t\t\t\tkaraokeModeratorTimes.push(paragraph.startTime)\r\n\t\t\t});\r\n\t\t\tsetCanUpdateLyrics(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet tempSongData = currentSongData\r\n\t\t// console.log(tempSongData)\r\n\t\tif (tempSongData !== undefined && inputKaraokeTime !== 0) {\r\n\t\t\ttempSongData.lyrics.forEach((paragraph, index) => {\r\n\t\t\t\tparagraph.startTime = karaokeModeratorTimes[index] || 'undefined'\r\n\t\t\t})\r\n\t\t\tsetCurrentSongData(tempSongData)\r\n\t\t\tsetIsThereKaraoke(true)\r\n\t\t}\r\n\r\n\t\tif(!currentSongData.lyrics?.some(paragraph=>paragraph.startTime === 'undefined')) setCanUpdateLyrics(true)\r\n\t\telse setCanUpdateLyrics(false)\r\n\t}, [inputKaraokeTime])\r\n\tfunction updateLyrics() {\r\n\t\t//TODO: add if statement to prevent adding lyrics time spans to not everysingle paragraph block\r\n\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\tlyrics: currentSongData.lyrics\r\n\t\t})\r\n\t}\r\n\r\n\t// console.log(currentSongData)\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\treturn lyrics?(\r\n\t\t<div className=\"Lyrics\">\r\n\t\t\t{\r\n\t\t\t\tcurrentUser.isAdmin ?\r\n\t\t\t\t\t<Slider pages={['Listen mode', 'Edit Mode']} currentPage={lyricsModeratorMode} setCurrentPage={setLyricsModeratorMode} /> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tisThereKaraoke ?\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LyricsParagraph el = {el} index = {i} lyricsModeratorMode = {lyricsModeratorMode} karaokeModeratorTimes = {karaokeModeratorTimes} setKaraokeModeratorTimes = {setKaraokeModeratorTimes} setInputKaraokeTime = {setInputKaraokeTime} inputKaraokeTime = {inputKaraoke}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} \r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'up')}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'down')}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<p>{el.text}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<h6 className={\"lyricsAuthors \" + (currentParagraph === lyrics.length - 1 ? \"active\" : \"\")}>Authors:  {displayAuthors()}</h6>\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<button onClick={canUpdateLyrics?updateLyrics:null} className=\"updateLyricsBtn\" style = {!canUpdateLyrics?{opacity:0.3}:{}}>Update Lyrics</button> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t</div>\r\n\t): <h3>No lyrics</h3>\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { SongItem } from './SongItem'\r\n\r\nexport const Queue = () => {\r\n\tconst { currentSongQueue, currentSongPlaylistSource, setOpenFullScreenPlayer } = useSong()\r\n\treturn (\r\n\t\t<div className=\"Queue\">\r\n\t\t\t<div className=\"queueNowIsPlaying\">\r\n\t\t\t\t<h5 style={{ marginTop: 2 }}>\r\n\t\t\t\t\tNow is playing:\r\n\t\t\t\t\t<Link onClick={() => setOpenFullScreenPlayer(false)} to={currentSongPlaylistSource.source} className=\"queueAlbumName\">\r\n\t\t\t\t\t\t<div className=\"queueImage\">\r\n\t\t\t\t\t\t\t<img loading = \"lazy\" src={currentSongPlaylistSource.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>{shortWord(currentSongPlaylistSource.name, 25)}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t\t{currentSongQueue.map((song, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SongItem song={song} localIndex={index} key={index} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../../App.css';\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { BiChevronLeft } from 'react-icons/bi'\r\nimport { rightSide } from '../../data/playerRightSide'\r\nimport { Player } from '../FullScreenPlayer/Player';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport {useSwipeable} from 'react-swipeable'\r\nimport checkNumber from '../../functions/other/checkNumber';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\nimport { useScreen } from '../../contexts/ScreenContext';\r\n\r\nexport default function FullScreenPlayer() {\r\n  const {\r\n    imgColors,\r\n    inputRef,\r\n    rightSideCurrentPage,\r\n    setRightSideCurrentPage,\r\n    openFullScreenPlayer,\r\n    setOpenFullScreenPlayer,\r\n    lyrics,\r\n    openMenu,\r\n    setOpenMenu\r\n  } = useSong()\r\n  const {isMobile, screenHeight} = useScreen()\r\n  const lyricsRef = useRef(null)\r\n  const [transformTransition, setTransformTransition] = useState(0.05)\r\n  const [mobileMenuTransition, setMobileMenuTransition] = useState(0)\r\n  // const [swipeDown, setSwipeDown] = useState(false)\r\n  const [deltaY, setDeltaY] = useState(0)\r\n  const [deltaYMobileMenu, setDeltaYMobileMenu] = useState(0)\r\n  const mobileContentScroll = useRef()\r\n  // setup ref for your usage\r\n  const mobileMenuRef = React.useRef();\r\n  useOutsideClick(mobileMenuRef, setOpenMenu)\r\n  const handlers = useSwipeable({\r\n    // onSwiped: (eventData) => {setSwipeDown(eventData.dir === 'Down')},\r\n    onSwiping: (event) => { if (event.deltaY > 0) setDeltaY(event.deltaY); }\r\n  })\r\n\r\n  // setup ref for your usage\r\n  const bgRef = React.useRef();\r\n\r\n  const handlersForMobileMenu = useSwipeable({\r\n    onSwiping: (event) => {event.event.stopPropagation();if (openMenu && mobileContentScroll.current.scrollTop === 0 &&  event.deltaY > 0) setDeltaYMobileMenu(event.deltaY); else if (!openMenu && event.deltaY < 0) setDeltaYMobileMenu(event.deltaY) },\r\n    onSwipedLeft:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage+1, 3))},\r\n    onSwipedRight:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage-1, 3))}\r\n  })\r\n  \r\n\r\n  function returnToInitialMobileMenu() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setMobileMenuTransition(0)\r\n    dropDelta = setTimeout(() => {\r\n      setMobileMenuTransition(0.2)\r\n      setDeltaYMobileMenu(0)\r\n    }, 300)\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    if (deltaY > 150) {\r\n      setOpenFullScreenPlayer(false)\r\n    }\r\n  }, [deltaY])\r\n\r\n  useEffect(() => {\r\n    if (!openMenu && deltaYMobileMenu < -100) {\r\n      setOpenMenu(true)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else if (openMenu && deltaYMobileMenu > 150) {\r\n      setOpenMenu(false)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else {\r\n      returnToInitialMobileMenu()\r\n    }\r\n  }, [deltaYMobileMenu])\r\n\r\n  \r\n\r\n  function returnToInitial() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setTransformTransition(0.2)\r\n    dropDelta = setTimeout(() => {\r\n      setDeltaY(0)\r\n      setTransformTransition(0)\r\n    }, 100)\r\n  }\r\n\r\n  const refPassthroughBg = (el) => {\r\n    handlers.ref(el);\r\n    bgRef.current = el;\r\n  }\r\n\r\n  const refPassthroughMobileMenu = (el) => {\r\n    handlersForMobileMenu.ref(el);\r\n    mobileMenuRef.current = el;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (imgColors.length !== 0) {\r\n      document.documentElement.style.setProperty('--themeColor', imgColors[1]);\r\n      document.documentElement.style.setProperty('--themeColor2', imgColors[0]);\r\n      document.documentElement.style.setProperty('--themeColor3', imgColors[2]);\r\n      document.documentElement.style.setProperty('--themeColor4', imgColors[5]);\r\n      document.documentElement.style.setProperty('--themeColorTransparent', imgColors[0] + '6e');\r\n    }\r\n  }, [imgColors])\r\n\r\n\r\n  function rightSideContent(currentPage) {\r\n    let RightSidePage = rightSide[currentPage].component\r\n    return (<RightSidePage />)\r\n  }\r\n\r\n  function noLyrics() {\r\n    return lyrics && lyrics.length === 0\r\n  }\r\n\r\n  function changeRightSidePage(el) {\r\n    if (el.id === 2 && noLyrics()) return null\r\n    setMobileMenuTransition(0.2)\r\n    setRightSideCurrentPage(el.id);\r\n    setOpenMenu(true)\r\n  }\r\n  return (\r\n    <div className=\"bg\"\r\n      style={\r\n        openFullScreenPlayer ?\r\n          {\r\n            top: 0,\r\n            opacity: 1,\r\n            visibility: 'visible',\r\n            zIndex: 10,\r\n            transform: `translateY(${deltaY}px)`,\r\n            borderRadius: `${deltaY < 20 ? deltaY : 20}px ${deltaY < 20 ? deltaY : 20}px 0 0`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          } :\r\n          {\r\n            transform: `translateY(${deltaY}px)`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          }\r\n      }\r\n      ref={refPassthroughBg}\r\n      {...handlers}\r\n      onTouchEnd={returnToInitial}\r\n    >\r\n\r\n      <div className=\"auroraWrapper\">\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n      </div>\r\n      \r\n      <div className=\"closeFullScreen\" onClick={() => { setOpenFullScreenPlayer(false) }}>\r\n        {window.innerWidth > 1000 ? <HiChevronDown /> : <FiMinus style={{ opacity: .6 }} />}\r\n      </div>\r\n      <div className=\"FullScreenPlayer\" >\r\n        <div className=\"leftSide\" style={!openMenu ? { width: '100%' } : isMobile?{\r\n            opacity: 0.6,\r\n            visibility: 'visible',\r\n            transform: `translateY(20px)`,\r\n            borderRadius: `10px`,\r\n            transition: `.4s`}:null}>\r\n          <Player inputRef={inputRef} />\r\n        </div>\r\n        {window.innerWidth > 1000 ?\r\n          <div className=\"rightSideWrapper\" style={!openMenu ? { transform: 'translateX(calc(100% - 90px))', width: 0 } : {}}>\r\n            <button className=\"menuBtn\" style={openMenu ? { transform: 'rotate(180deg)' } : { opacity: 0, visibility: 'hidden' }} onClick={() => setOpenMenu(!openMenu)}><BiChevronLeft /></button>\r\n            <div className=\"rightSideControl\">\r\n              {rightSide.map((el, i) => {\r\n                return (\r\n                  <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--themeColor)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={() => changeRightSidePage(el)}>\r\n                    {el.icon}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"rightSide\" ref={lyricsRef} style={!openMenu ? { display: 'none' } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div> :\r\n          <div className=\"mobilePlayerMenu\" {...handlersForMobileMenu} ref={refPassthroughMobileMenu} style={\r\n            openMenu ?\r\n              {\r\n                top: `calc(100% - calc(70vh + 55px) + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n\r\n              } :\r\n              {\r\n                top: `calc(100% - 55px + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n              }\r\n\r\n          }\r\n          // onTouchStart = {returnToInitialMobileMenu}\r\n          >\r\n            <div className=\"mobilePlayerMenuClose\">\r\n              <FiMinus style={{ opacity: .6, width: '50px' }} onClick={() => setOpenMenu(!openMenu)} />\r\n            </div>\r\n            <div className=\"controlIconsWrapper\">\r\n              {rightSide.map((el, i) => {\r\n                if(i <= 3){\r\n                  return (\r\n                    <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--transparentWhite)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={(e) => changeRightSidePage(el)}>\r\n                      {el.title}\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n            <div className=\"mobilePlayerMenuContent\" ref = {mobileContentScroll} style = {!openMenu?{opacity:0}:{}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NavigationItem({id, title, icon, link, currentPage, setCurrentPage}) {\r\n\treturn (\r\n\t\t<Link to = {link}>\r\n\t\t\t<div className={\"NavigationItem \" + (id === currentPage?\"active\":\"\")} onClick={() => setCurrentPage(id)}>\r\n\t\t\t\t<div className=\"icon\">{icon}</div>\r\n\t\t\t\t<b>{title}</b>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FiMessageCircle, FiUser } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\nimport getUID from '../../functions/other/getUID'\r\nimport shareWithManyFriends from '../../functions/other/shareWithManyFriends'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\n\r\nexport const Person = ({ index, friend }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [sendAnimation, setSendAnimation] = useState(\"\")\r\n\tconst { currentSong, currentSongData } = useSong()\r\n\tconst [loadingSendSong, setLoadingSendSong] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([friend.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(sendAnimation?.length > 0){\r\n\t\t\tsetLoadingSendSong(true)\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tsetSendAnimation(\"\")\r\n\t\t\t\tsetLoadingSendSong(false)\r\n\t\t\t}, 600)\r\n\t\t}\r\n\t}, [sendAnimation])\r\n\treturn (\r\n\t\t<div className=\"person\" key={index} id={friend.uid} >\r\n\t\t\t<img loading = \"lazy\" src={currentSongData.cover} alt=\"\" className = {\"sendSongImage \" + sendAnimation}/>\r\n\t\t\t<div className=\"personBtns\">\r\n\t\t\t\t<Link to={`/chat/${friendChatId}`}>\r\n\t\t\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, friend.uid], friendChatId) }}>\r\n\t\t\t\t\t\t<Hint text={'chat'} />\r\n\t\t\t\t\t\t<FiMessageCircle />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={`/authors/${friend.uid}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'profile'} />\r\n\t\t\t\t\t\t<FiUser />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={() => {if(!loadingSendSong) {shareWithManyFriends([friend.uid], currentUser, currentSong, \"song\", \"\"); setSendAnimation('sendAnimation')}}}>\r\n\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t<BiShare />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pesronImg\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t<img loading = \"lazy\" src={friend.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<IsUserOnlineCircle userUID={friend.uid} />\r\n\t\t\t<div className=\"personName\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t{friend.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiCheck, FiPlayCircle, FiPlusCircle, FiShare } from 'react-icons/fi'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const TinyPlaylist = ({ playlist }) => {\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\tconst [addFunc, isAdded] = useAddOrDeleteSong(playlist.id)\r\n\tconst { currentUser } = useAuth()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className=\"TinyPlaylist\">\r\n\t\t\t<div className=\"TinyPlaylistBtns\">\r\n\t\t\t\t{playlist.authors.find(author => author.uid === currentUser.uid) ?\r\n\t\t\t\t\t<button onClick={addFunc}>\r\n\t\t\t\t\t\t{isAdded ?\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Hint text={`remove song`} />\r\n\t\t\t\t\t\t\t\t<FiCheck />\r\n\t\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Hint text={'add song'} />\r\n\t\t\t\t\t\t\t\t<FiPlusCircle />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={playlist} whatToShare={\"playlist\"} />) }}>\r\n\t\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t\t<FiShare />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t}\r\n\t\t\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'album'} /><BiAlbum />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={playSongsInPlaylist}>\r\n\t\t\t\t\t<Hint text={'play'} />\r\n\t\t\t\t\t<FiPlayCircle />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"TinyPlaylistImg\" style={{ backgroundImage: `url(${playlist.image})`, display: 'inline-block', backgroundPosition: \"center center\", backgroundSize: \"cover\" }} onClick = {()=>history.push(`/albums/${playlist.id}`)}>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{shortWord(playlist.name, 13)}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontSize: '0.8em', color: 'grey', fontWeight: '500' }}>\r\n\t\t\t\t\t{playlist.isAlbum ? \"album\" : \"playlist\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const NotificationCircle = () => {\r\n\treturn (\r\n\t\t<div className = \"NotificationCircle\"></div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { leftSideBar } from '../../data/leftSideBar'\r\nimport NavigationItem from '../LeftsideBar/NavigationItem'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nimport '../../styles/LeftsideBar.css'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BiFolderPlus, BiFullscreen} from 'react-icons/bi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { Person } from '../LeftsideBar/Person'\r\nimport { CreatePlaylistPage } from '../LibraryPage/CreatePlaylistPage'\r\nimport { TinyPlaylist } from '../LeftsideBar/TinyPlaylist'\r\nimport { NotificationCircle } from './NotificationCircle'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { Hint } from './Hint'\r\nexport const LeftsideBar = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {\r\n\t\tleftSideBarInputRef,\r\n\t\tsetOpenFullScreenPlayer,\r\n\t\tcurrentSongData,\r\n\t\tyourFriends,\r\n\t\tyourPlaylists\r\n\t} = useSong()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [currentFriendToPlaylistPage, setCurrentFriendToPlaylistPage] = useState(0)\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\treturn (\r\n\t\t<div className=\"LeftsideBar\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t\t\t<h3>Soundbubble</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\" onClick = {()=>setCurrentPage(-1)} >\r\n\t\t\t\t<Link to={`/authors/${currentUser.uid}`}>\r\n\t\t\t\t\t<div className=\"person\" style = {currentPage === -1?{background:'var(--blue)'}:{}}>\r\n\t\t\t\t\t\t{currentUser.friends.some(friend=>friend.status === 'requested')?<NotificationCircle/>:null}\r\n\t\t\t\t\t\t<div className=\"pesronImg\" style = {{backgroundImage:`url(${currentUser.photoURL})`}}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"personName\">\r\n\t\t\t\t\t\t\t{shortWord(currentUser.displayName, 15)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"NavigationPanel\">\r\n\t\t\t\t{leftSideBar.map(({ id, title, icon, link }, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavigationItem key={index} id={id} title={title} icon={icon} link={link} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer friendsAndPlaylists\">\r\n\t\t\t\t<span style={{display: !currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromBottom .2s forwards' }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tyourFriends.length > 0?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t{yourFriends.map((friend, index) => {\r\n\t\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Person index={friend.uid} friend={friend}/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<h4 className=\"seeMoreBtn\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={currentSongData} whatToShare = {\"song\"}/>) }}>See more</h4>\r\n\t\t\t\t\t\t</>:\r\n\t\t\t\t\t\t<h4 style = {{alignSelf:'center',width:'100%', display:'flex', alignItems:'center', justifyContent:'center'}}>No friends added</h4>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{display: currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromTop .2s forwards' }}>\r\n\t\t\t\t\t{yourPlaylists.map((playlist, index) => {\r\n\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\treturn <TinyPlaylist playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }} style = {{margin:'5px 0'}}>\r\n\t\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\t\tCreate Playlist\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"upAndDownBtns\">\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(0)} style={!currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronUp /></button>\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(1)} style={currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronDown /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t{\r\n\t\t\t\t\t(currentSongData.id === -1)?\r\n\t\t\t\t\tnull:<div className=\"littlePlayer\">\r\n\t\t\t\t\t\t<Player textLimit={15} inputRef={leftSideBarInputRef} />\r\n\t\t\t\t\t\t<div className=\"fullScreenBtn\" onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t\t\t\t{/* <Hint text = {\"open full screen\"} style = {{fontSize:'0.8em'}}/> */}\r\n\t\t\t\t\t\t\t<BiFullscreen />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport {useScreen} from '../../contexts/ScreenContext'\r\nexport const ModalWindow = ({...restProps}) => {\r\n\tconst {openModal, setOpenModal, content} = useModal()\r\n\tconst modalRef = useRef(null)\r\n\tconst {screenHeight} = useScreen()\r\n\tuseOutsideClick(modalRef, setOpenModal)\r\n\treturn (\r\n\t\t<div className = \"modal_darkBg\" style = {!openModal?{opacity:0, visibility:'hidden'}:{height:screenHeight}} >\r\n\t\t\t<div className = \"ModalWindow\" {...restProps} ref = {modalRef} style = {!openModal?{opacity:0, visibility:'hidden', transform:'translateY(40px)'}:{}}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\n\r\nexport const ConfirmWindow = () => {\r\n\tconst { isOpenConfirm, confirmContent, setIsOpenConfirm, closeComfirm } = useModal()\r\n\tconst confirmRef = useRef(null)\r\n\tuseOutsideClick(confirmRef, setIsOpenConfirm)\r\n\treturn (\r\n\t\t<div className=\"modal_darkBg confirm\" style={!isOpenConfirm ? { opacity: 0, visibility: 'hidden' } : {}} >\r\n\t\t\t<div className=\"ConfirmWindow\" ref = {confirmRef} style={!isOpenConfirm ? { transform: 'translateY(40px)' } : {}}>\r\n\t\t\t\t<h3>{confirmContent.question}</h3>\r\n\t\t\t\t<div className=\"confirmButtons\">\r\n\t\t\t\t\t<button onClick={confirmContent.onConfirm} className = \"standartButton\">{confirmContent.confirmText}</button>\r\n\t\t\t\t\t<button onClick={confirmContent.onReject} className = \"standartButton\">{confirmContent.rejectText}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSong } from '../contexts/SongContext';\r\nimport { displayAuthorsStr } from '../functions/display/displayAuthorsStr';\r\n\r\nexport const useMediaMetadata = () => {\r\n\tconst { currentSongData, currentSongPlaylistSource, nextSong, prevSong, songRef, setPlay } = useSong()\r\n\r\n\tconst updatePositionState = () => {\r\n\t\tnavigator.mediaSession.setPositionState({\r\n\t\t\tduration: songRef.current.duration,\r\n\t\t\tplaybackRate: songRef.current.playbackRate,\r\n\t\t\tposition: songRef.current.currentTime\r\n\t\t});\r\n\t}\r\n\r\n\tfunction playSong(){\r\n\t\tsongRef.current.play()\r\n\t\tsetPlay(true)\r\n\t}\r\n\r\n\tfunction pauseSong(){\r\n\t\tsongRef.current.pause()\r\n\t\tsetPlay(false)\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif ('mediaSession' in navigator && currentSongData.id !== -1) {\r\n\t\t\tnavigator.mediaSession.metadata = new window.MediaMetadata({\r\n\t\t\t\ttitle: currentSongData.name,\r\n\t\t\t\tartist: displayAuthorsStr(currentSongData.authors),\r\n\t\t\t\talbum: currentSongPlaylistSource.name,\r\n\t\t\t\tartwork: [\r\n\t\t\t\t\t{ src: currentSongData.cover, sizes: '512x512', type: 'image/png' },\r\n\t\t\t\t]\r\n\t\t\t});\r\n\r\n\t\t\tnavigator.mediaSession.setActionHandler('play', () => { playSong();});\r\n\t\t\tnavigator.mediaSession.setActionHandler('pause', pauseSong);\r\n\t\t\tnavigator.mediaSession.setActionHandler('stop', pauseSong);\r\n\t\t\tnavigator.mediaSession.setActionHandler('nexttrack', ()=>{nextSong(); updatePositionState()});\r\n\t\t\tnavigator.mediaSession.setActionHandler('previoustrack', ()=>{prevSong(); updatePositionState()})\r\n\t\t}\r\n\t}, [currentSongData.id])\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { ContentRouter } from '../../routers/ContentRouter'\r\nimport { FullBottomSide } from '../Mobile/FullBottomSide'\r\nimport FullScreenPlayer from './FullScreenPlayer'\r\nimport { LeftsideBar } from './LeftsideBar'\r\nimport { ModalWindow } from './ModalWindow'\r\nimport '../../styles/FullScreenPlayer.css'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { ConfirmWindow } from '../Windows/ConfirmWindow'\r\nimport { useUpdateListenCount } from '../../hooks/useUpdateListenCount'\r\nimport { useMediaMetadata } from '../../hooks/useMediaMetadata'\r\n\r\nexport const ContentWrapper = () => {\r\n\tconst { songRef, loadSongData, playing, songSrc, openFullScreenPlayer, repeatMode, setPlay, prevSong, currentSongQueue, nextSong, currentSongInQueue} = useSong()\r\n\tconst { isMobile, screenHeight } = useScreen()\r\n\tconst { currentUser } = useAuth()\r\n\tconst fiveMinutes = 300000 // 10min\r\n\tconst [intervalExciter, setIntervalExciter] = useState(true)\r\n\tuseMediaMetadata()\r\n\tconst updateListenCount = useUpdateListenCount()\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t\t\tsetIntervalExciter(!intervalExciter)\r\n\t\t}, fiveMinutes)\r\n\t\treturn () => clearInterval(interval);\r\n\t}, [intervalExciter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t}, [])\r\n\r\n\tfunction audioEnded() {\r\n\t\tif (repeatMode === 0) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t\tsetPlay(false)\r\n\t\t\treturn prevSong()\r\n\t\t}\r\n\t\telse if (repeatMode === 1) {\r\n\t\t\tif (currentSongQueue.length === 1) {\r\n\t\t\t\tprevSong()\r\n\t\t\t\tupdateListenCount()\r\n\t\t\t\treturn songRef.current.play()\r\n\t\t\t}\r\n\t\t\treturn nextSong()\r\n\t\t}\r\n\t\tprevSong()\r\n\t\tupdateListenCount()\r\n\t\tsongRef.current.play()\r\n\t}\r\n\r\n\t\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<audio src={songSrc} ref={songRef} onLoadedData={loadSongData} onTimeUpdate={playing} onEnded={audioEnded}></audio>\r\n\t\t\t<div className={\"Wrapper \" + (openFullScreenPlayer ? \"turnedOff\" : \"\")} style={isMobile ? { height: screenHeight } : { height: \"100vh\" }}>\r\n\t\t\t\t{!isMobile ? <LeftsideBar /> : window.location.hash.substr(2, 4) === 'chat' && window.location.hash.length > 6 ? null : <FullBottomSide />}\r\n\t\t\t\t<div className=\"Content\">\r\n\t\t\t\t\t<ContentRouter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalWindow />\r\n\t\t\t\t<ConfirmWindow/>\r\n\t\t\t</div>\r\n\t\t\t<FullScreenPlayer />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useUpdateListenCount = () => {\r\n\tlet listenCountTimeOut = useRef()\r\n\tconst {currentSongData, currentSongPlaylistSource, songDuration, play} = useSong()\r\n\tfunction updateListenCount() {\r\n\t\tif(currentSongData.id !== -1){\r\n\t\t\tlistenCountTimeOut.current = setTimeout(() => {\r\n\t\t\t\tlet listens = currentSongData.listens\r\n\t\t\t\tlistens++\r\n\t\t\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\t\t\tlistens: listens\r\n\t\t\t\t})\r\n\t\t\t\tif (currentSongPlaylistSource.source.substr(1, 6) === 'albums') {\r\n\t\t\t\t\tconst sourceId = currentSongPlaylistSource.source.substr(8, currentSongPlaylistSource.source.length - 8)\r\n\t\t\t\t\tfirestore.collection('playlists').doc(sourceId).get().then((res) => {\r\n\t\t\t\t\t\tlet listedData = res.data().listens\r\n\t\t\t\t\t\tlistedData++\r\n\t\t\t\t\t\tfirestore.collection('playlists').doc(sourceId).update({\r\n\t\t\t\t\t\t\tlistens: listedData\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}, songDuration * 1000 * 0.5)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(listenCountTimeOut.current)\r\n\t\tif (play) {\r\n\t\t\tupdateListenCount()\r\n\t\t}\r\n\t}, [play, currentSongData.id])\r\n\r\n\treturn updateListenCount\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { ContentWrapper } from '../components/Basic/ContentWrapper'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { publicRoutes } from '../routes'\r\nimport { LOGIN_ROUTE} from '../utils/consts'\r\nexport const AppRouter = () => {\r\n\tconst {currentUser} = useAuth()\r\n\treturn currentUser.uid ?\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t<Route path='/' component = {ContentWrapper} />\r\n\t\t</Switch>\r\n\t):\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t{publicRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={LOGIN_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","import './App.css';\r\nimport React from 'react'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { AppRouter } from './routers/AppRouter';\r\nexport default function App() {\r\n  return (\r\n    <HashRouter basename = \"/\">\r\n      <AppRouter/>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { ModalClassProvider } from './contexts/ModalContext';\r\nimport { ScreenProvider } from './contexts/ScreenContext';\r\nimport { SongProvider } from './contexts/SongContext';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ScreenProvider>\r\n      <AuthProvider>\r\n        <ModalClassProvider>\r\n          <SongProvider>\r\n            <App />\r\n          </SongProvider>\r\n        </ModalClassProvider>\r\n      </AuthProvider>\r\n    </ScreenProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}