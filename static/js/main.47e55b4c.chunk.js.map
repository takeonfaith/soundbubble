{"version":3,"sources":["images/Logo3.svg","components/Loading/LoadingData.jsx","components/Basic/AddToListCircle.jsx","components/Basic/PersonTiny.jsx","firebase.js","functions/other/checkNumber.js","functions/other/shuffleSongs.js","hooks/useConditionFunc.js","functions/other/normalizeString.js","functions/find/findVariantsOfName.js","contexts/AuthContext.jsx","contexts/ModalContext.jsx","contexts/SongContext.jsx","functions/display/displayDate.js","contexts/ScreenContext.jsx","components/Basic/Hint.jsx","components/Basic/BackBtn.jsx","components/AuthorPage/SmallImages.jsx","functions/other/rightFormatForBigNumber.js","hooks/useOutsideClick.js","functions/other/getUID.js","functions/create/createChat.js","functions/find/findChatURL.js","components/AuthorPage/ChatWithFriendButton.jsx","components/Loading/LoadingCircle.jsx","functions/other/sendMessage.js","functions/other/shareWithManyFriends.js","components/Basic/SearchBar.jsx","components/Basic/FriendsListToShareWith.jsx","components/SignIn-Up/RadioBtn.jsx","components/FullScreenPlayer/colorCircles.jsx","components/Basic/SongItemChoice.jsx","functions/other/shortWord.js","functions/display/displayAuthorsStr.js","functions/add/addSongToLibrary.js","functions/other/filterArrayWithArray.js","functions/other/deleteSongFromLibrary.js","components/FullScreenPlayer/AddOrDeleteSongButton.jsx","components/AuthorPage/PersonTinyVerticalItem.jsx","components/Basic/SongInfo.jsx","hooks/useAddOrDeleteSong.js","components/Playlist/AddToPlaylistItem.jsx","components/FullScreenPlayer/AddToPlaylists.jsx","components/MessagePlates/ErrorPlate.jsx","functions/other/transformLyricsToArrayOfObject.js","components/AdminAndAuthor/EditSong.jsx","components/Windows/SongItemMoreWindow.jsx","components/FullScreenPlayer/AuthorsList.jsx","components/Windows/SongItemMobileMoreWindow.jsx","components/FullScreenPlayer/SongItem.jsx","components/Buttons/MoreBtn.jsx","components/Basic/TitleWithMoreBtn.jsx","components/Lists/SongList.jsx","components/AlbumPage/CustomizeAlbum.jsx","functions/add/addAuthorToLibrary.js","functions/add/addFriend.js","components/Basic/LastSeen.jsx","functions/add/addPlaylistToLibrary.js","functions/other/removePlaylistFromLibrary.js","components/Settings/GeneralSettings.jsx","components/Settings/SettingsList.jsx","components/Buttons/SeeMoreRoundButton.jsx","components/Lists/TinyPersonsList.jsx","components/Info/AlbumInfo.jsx","components/Info/AuthorInfo.jsx","components/Windows/AuthorMoreWindow.jsx","hooks/useAlbumAuthors.js","components/AuthorPage/Header.jsx","functions/delete/deletePlaylist.js","functions/delete/deleteFriend.js","pages/AlbumPage.jsx","components/AddWindow/AddPlaylist.jsx","components/Basic/DownloadPhotoButton.jsx","components/Loading/FullScreenLoading.jsx","components/AddWindow/AddSong.jsx","components/Tools/Slider.jsx","components/AdminAndAuthor/AddWindow.jsx","components/AuthorPage/FriendRequestItem.jsx","components/AuthorPage/FriendRequest.jsx","components/AuthorPage/PersonTinyList.jsx","functions/find/findAuthorsAlbums.js","hooks/usePlaylistSongs.js","components/Playlist/DeletedPlaylist.jsx","components/AuthorPage/PlaylistItem.jsx","components/Lists/AlbumList.jsx","components/AuthorPage/Playlists.jsx","functions/find/findSimilarArtists.js","components/AuthorPage/AuthorItemBig.jsx","components/Basic/AuthorsList.jsx","components/AuthorPage/SimilarArtists.jsx","functions/find/findIfSongIsNew.js","components/AuthorPage/TopSongs.jsx","pages/AuthorPage.jsx","components/ChatPage/AttachmentList.jsx","hooks/fetchFirebaseData.js","components/ChatPage/ChatInfo.jsx","hooks/useFetchDocs.js","components/ChatPage/WallpaperItem.jsx","components/ChatPage/Wallpapers.jsx","components/ChatPage/ChatMoreBtn.js","components/ChatPage/ChatHeader.js","functions/find/findWhatToWriteInResponseItem.js","components/ChatPage/AttachedItemsInChatInput.jsx","components/AuthorPage/ChatInput.jsx","components/ChatPage/DateOnTop.jsx","hooks/useOnScreen.js","components/Basic/SongItemLoading.jsx","components/ChatPage/SeenByCircle.jsx","components/ChatPage/MessageItem.js","components/ChatPage/MessageField.jsx","components/ChatPage/DisplayChatMessages.jsx","components/ChatPage/TypingAnimation.jsx","components/ChatPage/ChatMessagesWindow.jsx","pages/DialoguePage.jsx","hooks/useRealTimeMessages.js","pages/PageNotFound.jsx","utils/consts.js","components/SignIn-Up/BlurredBg.jsx","components/SignIn-Up/TitleAndLogo.jsx","components/HomePage/MainBanner.jsx","components/HomePage/RecentSongs.jsx","components/HomePage/RecommendedAuthors.jsx","components/MessagePlates/ImportantMessage.jsx","components/HomePage/RecommendedSongs.jsx","components/HomePage/Top15Songs.jsx","images/wave2.svg","components/LibraryPage/LibraryPlaylistItem.jsx","functions/find/findVisiblePlaylists.js","components/LibraryPage/SongsPage.jsx","components/LibraryPage/CreatePlaylistPage.jsx","components/LibraryPage/PlaylistsPage.jsx","components/LibraryPage/AuthorsPage.jsx","components/Basic/IsUserOnlineCircle.jsx","components/ChatPage/AmountOfUnseenMessages.jsx","components/ChatPage/LastSentMessage.js","components/ChatPage/ChatItem.js","functions/find/findAmountOfUnseenMessages.js","components/ChatPage/CreateChat.jsx","routes.js","pages/LogInPage.jsx","pages/SignUpPage.jsx","pages/Home.jsx","pages/LibraryPage.jsx","pages/SearchPage.jsx","pages/ChatPage.jsx","routers/ContentRouter.js","functions/other/correctTimeDisplay.js","components/FullScreenPlayer/Player.jsx","data/leftSideBar.js","components/BottomControlBar/MobileControlBarItem.js","components/Mobile/BottomControlBar.jsx","components/Mobile/FullBottomSide.jsx","components/FullScreenPlayer/Loading.jsx","components/FullScreenPlayer/LyricsParagraph.jsx","data/playerRightSide.js","components/FullScreenPlayer/Share.jsx","components/FullScreenPlayer/Options.jsx","components/FullScreenPlayer/Lyrics.jsx","components/FullScreenPlayer/Queue.jsx","components/Basic/FullScreenPlayer.jsx","components/LeftsideBar/NavigationItem.jsx","components/LeftsideBar/Person.jsx","components/LeftsideBar/TinyPlaylist.jsx","components/Basic/NotificationCircle.jsx","components/Basic/LeftsideBar.jsx","components/Basic/ModalWindow.jsx","components/Windows/ConfirmWindow.jsx","components/Basic/ContentWrapper.jsx","routers/AppRouter.js","App.js","index.js"],"names":["LoadingData","className","loading","src","Logo","alt","AddToListCircle","listOfChosenItems","setListOfChosenItems","itemId","undefined","onClick","e","preventDefault","includes","type","filteredList","filter","el","style","color","prev","PersonTiny","data","chosenArray","setChosenArray","restProps","uid","photoURL","displayName","app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","storage","firestore","checkNumber","number","max","min","shuffleSongs","songsArray","randomIndexesArray","newSongsNumbersArray","Array","length","counter","randNum","Math","floor","random","push","useConditionFunc","currentUser","fetchFunc","changeCondition","dep","useEffect","JSON","stringify","normalizeString","str","replace","toLowerCase","findVariantsOfName","name","variantsOfName","personName","i","substr","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","setCurrentUser","userId","setUserId","setLoading","collection","doc","onSnapshot","user","onAuthStateChanged","a","value","login","email","password","setError","signInWithEmailAndPassword","then","catch","err","message","signup","role","imageColors","createUserWithEmailAndPassword","result","set","isAuthor","parseInt","isVerified","numberOfListenersPerMonth","ownSongs","ownPlaylists","addedSongs","addedPlaylists","addedAuthors","lastSongPlayed","chats","friends","subscribers","regDate","FieldValue","serverTimestamp","place","logout","signOut","Provider","ModalContext","useModal","ModalClassProvider","openModal","setOpenModal","content","setContent","isOpenConfirm","setIsOpenConfirm","confirmText","rejectText","onConfirmL","onReject","confirmContent","setConfirmContent","closeConfirm","toggleModal","openConfirm","question","onConfirm","SongContext","useSong","SongProvider","yourSongs","setYourSongs","yourPlaylists","setYourPlaylists","yourAuthors","setYourAuthors","yourFriends","setYourFriends","currentSongQueue","setCurrentSongQueue","currentSong","setCurrentSong","currentSongInQueue","setCurrentSongInQueue","currentSongPlaylistSource","setCurrentSongPlaylistSource","inputRange","setInputRange","id","currentSongData","setCurrentSongData","imgColors","setImgColors","play","setPlay","currentTime","setCurrentTime","songDuration","setSongDuration","repeatMode","setRepeatMode","shuffleMode","setShuffleMode","currentParagraph","setCurrentParagraph","isThereKaraoke","setIsThereKaraoke","openFullScreenPlayer","setOpenFullScreenPlayer","songRef","useRef","currentParagraphRef","inputRef","leftSideBarInputRef","rightSideCurrentPage","setRightSideCurrentPage","openMenu","setOpenMenu","checkKaraoke","lyrics","startTime","fetchCurrentSongInitial","tempSongObject","songSrc","authors","cover","listens","releaseDate","curSong","curQueue","lastQueue","source","image","songsList","docRef","get","exists","songData","error","console","log","fetchYourSongs","tempArray","map","song","unshift","forEach","songId","findIndex","fetchQueue","playlistId","String","concat","friendObj","friend","status","obj","authorId","shuffledSongsArray","listenCountTimeOut","updateListenCount","current","setTimeout","update","sourceId","res","listedData","defineCurrentParagraph","first","last","roundedTime","parseFloat","toFixed","midPoint","blockStartTime","nextBlockStartTime","stopPropagation","correctSongNumber","currentSongId","clearTimeout","document","title","nextSong","prevSong","playSong","pause","playing","event","target","defineCurrentParagraphLight","changeCurrentTime","localName","displayAuthors","authorsList","separatingSign","to","displayAuthorsFull","loadSongData","duration","window","innerWidth","findLen","amountOfZeros","toDateTime","secs","t","Date","setSeconds","displayDate","stringDate","displayMode","Months","newDate","isNaN","seconds","getMonth","getDate","getFullYear","getHours","getMinutes","ScreenContext","useScreen","ScreenProvider","screenWidth","setScreenWidth","innerHeight","screenHeight","setScreenHeight","isMobile","setIsMobile","handleResize","addEventListener","removeEventListener","Hint","text","direction","BackBtn","history","useHistory","goBack","SmallImages","imagesList","borderColor","marginRight","index","border","transform","rightFormanForBigNumber","useOutsideClick","ref","setFunc","handleClickOutside","contains","getUID","c","piece","toString","createChat","participants","chatUID","chatName","chatImage","admins","messages","wallpaper","typing","personId","chatInfo","findChatURL","allParticipants","setShouldCreate","setFriendChatId","foundChat","chatId","where","docs","chat","count","every","ChatWithFriendButton","shouldCreate","friendChatId","display","width","textDecoration","background","LoadingCircle","top","sendMessage","chatData","sender","messageText","attachedSongs","attachedAlbums","attachedAuthors","inResponseToMessage","tempMessages","sentTime","seenBy","shareWithFriends","shareList","whatToShare","sortedFriends","Promise","resolve","SearchBar","typingTimeout","setValue","setAllFoundSongs","setResultPlaylists","setResultAuthorList","focus","defaultSearchMode","inputText","defaultSongsListValue","defaultAuthorsListValue","defaultPlaylistsListValue","setMessage","foundAnything","setFoundAnything","searchMode","setSearchMode","findItem","defaultList","setList","foundItemTempArray","normalizedSearch","item","itemData","realData","isPrivate","author","authorData","find","songsIdsArray","albumsIdsArray","albumId","albumData","playlist","findSomething","marginTop","placeholder","onChange","onKeyUp","func","onKeyDown","position","height","FriendsListToShareWith","chosenFriends","setChosenFriends","setMessageText","shared","setShared","searchValue","setSearchValue","foundPeople","setFoundPeople","overflowY","maxHeight","margin","maxWidth","opacity","RadioBtn","currentActive","label","fontWeight","ColorCircles","SongItemChoice","listOfSongs","setListOfSongs","showListens","isNewSong","openMoreWindow","setOpenMoreWindow","setMoreWindowPosRelativeToViewport","currentItemRef","visibility","alignItems","marginLeft","fontSize","getBoundingClientRect","newList","songNum","shortWord","word","len","displayAuthorsStr","authorslist","separator","lenLimit","authorsString","join","addSongToLibrary","songAuthorsUIDS","finalAuthorsUIDS","filterArrayWithArray","whatToFilter","withWhatToFilter","this","indexOf","deleteSongFromLibrary","songObj","filtered","finalFilteredAuthors","AddOrDeleteButtonFull","PersonTinyVerticalItem","person","SongInfo","setSongData","friendsThatHaveThisSong","setFriendsThatHaveThisSong","findFriendsThatHaveThisSong","backgroundImage","minHeight","useAddOrDeleteSong","playlistSongs","setPlaylistSongs","isAdded","setIsAdded","response","songs","newSongsList","sortedPlaylists","AddToPlaylistItem","addFunc","AddToPlaylists","flexDirection","key","ErrorPlate","errorMessage","transformLyricsToArrayOfObjects","arrayOfParagraphs","startSubstr","EditSong","songName","setSongName","songAuthors","setSongAuthors","songCover","setSongCover","setImageColors","setLyrics","foundAuthors","setFoundAuthors","setErrorMessage","removeAuthorFromList","people","marginBottom","borderRadius","justifyContent","padding","manuallyChangeColor","isAdmin","some","addAuthor","authorRef","authorSongs","filteredSongs","SongItemMoreWindow","moreWindowPosRelativeToViewport","bottom","AuthorsList","listOfAuthors","SongItemMobileMoreWindow","SongItem","localIndex","listOfChosenSongs","MoreBtn","lenOfList","maxLen","boolVal","TitleWithMoreBtn","SongList","showCount","showSearch","displayIfEmpty","showMoreSongs","setShowMoreSongs","displaySongs","setDisplaySongs","listSongsIds","allFoundSongs","CustomizeAlbum","playlistName","setPlaylistName","playlistCover","setPlaylistCover","authorsInputValue","setAuthorsInputValue","allAuthors","setAllAuthors","chosenAuthors","setChosenAuthors","creationDate","setReleaseDate","songsSearch","setSongsSearch","allSongs","setAllSongs","chosenSongs","setChosenSongs","isAlbum","playlistStatus","setPlaylistStatus","isPlaylistPrivate","setIsPlaylistPrivate","loadingAuthors","loadingSongs","setLoadingSongs","imageLocalPath","setImageLocalPath","file","files","URL","createObjectURL","storageRef","fileRef","child","put","getDownloadURL","authorPlaylists","filteredPlaylists","getColors","colors","required","removeSongFromList","onFileChange","addAuthorToLibrary","addFriend","friendData","updatedDataForFriend","updatedDataForCurrentUser","LastSeen","userUID","lastSeen","setLastSeen","isOnline","setIsOnline","unsubscribe","fiveMinutesAgo","getTime","online","addPlaylistToLibrary","playlistData","removePlaylistFromLibrary","GeneralSettings","SettingsList","settingsList","icon","settingItem","SeeMoreRoundButton","TinyPersonsList","listOfPeople","AlbumInfo","album","friendsThatHaveThisAlbum","setFriendsThatHaveThisAlbum","findFriendsThatHaveThisAlbum","AuthorInfo","setFriendsThatHaveThisAuthor","findFriendsThatHaveThisAuthor","AuthorMoreWindow","useAlbumAuthors","albumAuthors","setAlbumAuthors","authorsImages","setAuthorsImages","ids","authrorsData","tempArrayAuthors","tempArrayImages","fetchAuthorsData","Header","headerColors","isFriend","moreWindowRef","personFilteredPlaylists","pId","delete","filteredUserFriends","filteredOtherUserFriends","deleteFriend","animation","AlbumPage","match","useRouteMatch","setHeaderColors","params","setAlbumData","fetchAlbumsData","albumSong","AddPlaylist","setLoadingAuthors","findAuthors","friendsIds","onSubmit","DownloadPhotoButton","downloadedPhoto","setDownloadedPhoto","btnText","isValid","validExtensions","ext","ex","FullScreenLoading","AddSong","setSongSrc","showSuccessMessage","setShowSuccessMessage","loadingSong","setLoadingSong","Slider","pages","currentPage","setCurrentPage","pageName","AddWindow","openAddSongWindow","setOpenAddSongWindow","currentSliderPage","setCurrentSliderPage","sliderPages","FriendRequestItem","rejectFriend","FriendRequest","friendRequests","setFriendRequests","friendsList","otherUserFriendList","arrOfReqs","personData","fetchFriendRequests","PersonTinyList","setListOfPeople","scrollLeft","setScrollLeft","wrapperRef","shouldRenderRightArrow","setShouldRenderRightArrow","scrollWidth","offsetWidth","personObj","onScroll","findAuthorsAlbums","authorsData","setAuthorsPlaylists","currentUserUID","sort","b","usePlaylistSongs","DeletedPlaylist","PlaylistItem","listOfChosenAlbums","setListOfChosenAlbums","playlistDate","playSongsInPlaylist","AlbumList","listOfAlbums","Playlists","authorsPlaylists","findSimilarArtistsNames","authorsSongsArr","setSimilarAuthors","peopleArray","newAuthors","flat","uniqueAuthorsSet","Set","uniqueAuthorsIdsArray","from","uniqueAuthorsDataArray","j","findSimilarArtists","authorsSongsArray","AuthorItemBig","listOfChosenAuthors","setListOfChosenAuthors","SimilarArtists","similarArtists","setSimilarArtists","findIfSongIsNew","songReleaseDate","TopSongs","popularSongs","setPopularSongs","newSongs","setNewSongs","prevSongs","findAuthorsSongs","AuthorPage","setAuthorsData","AttachmentList","attachmentList","setAttachmentList","sliderCurrentPage","setSliderCurrentPage","attachmentContent","fetchAttachedData","attachedType","firebaseCollection","page","useFetchFirebaseData","list","setState","sortCondition","whereCondFP","whereCondSP","whereCondTP","deps","fetchData","ChatInfo","setParticipants","chatNameValue","setChatNameValue","newChatPhoto","setNewChatPhoto","newImageLocalPath","setNewImageLocalPath","newImageColors","setNewImageColors","participantsPage","setParticipantsPage","showUpdateBtn","setShowUpdateBtn","listOfItems","fetchItem","useFetchDocs","trim","WallpaperItem","currentWallpaper","Wallpapers","wallpaperList","setWallpaperList","ChatMoreBtn","chatMoreBtnRef","ChatHeader","otherPerson","setOtherPerson","otherPersonId","fetchOtherPerson","findWhatToWriteInResponseToItem","referedMessage","AttachedItemsInChatInput","attachedItems","setAttachedItems","setItems","removeItemFromAttached","ChatInput","setInResponseToMessage","otherMessages","openAttachWindow","setOpenAttachWindow","setAttachedSongs","setAttachedAlbums","setAttachedAuthors","resultPlaylists","resultAuthorList","inResponseNames","setInResponseNames","attachedSongsNames","setAttachedSongsNames","attachWindowRef","sendMessageFull","transition","messageId","outline","DateOnTop","date","useOnScreen","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","disconnect","SongItemLoading","SeenByCircle","listOfSeen","MessageItem","messageData","scrollToMessageRef","setScrollToMessageId","scrollToMessageId","showPhoto","inResponseToMessageArr","setInResponseToMessageArr","userThatSentMessage","setUserThatSentMessage","messageSentTime","attachedSongsData","setAttachedSongsData","attachedAuthorsData","setAttachedAuthorsData","attachedPlaylistsData","setAttachedPlaylistsData","inResponseToMessagesData","setInResponseToMessagesData","messageRef","isVisible","swipeDeltaX","setSwipeDeltaX","transformTransition","setTransformTransition","handlers","useSwipeable","onSwiping","deltaX","addMessageToResponseList","returnToInitial","dropDelta","fetchSentMessageUser","paddingBottom","onTouchEnd","MessageField","messageList","setDateRefsArray","setShowPhoto","showDate","setShowDate","dateRef","DisplayChatMessages","messagesWindowRef","scrollTo","offsetTop","TypingAnimation","typingPeople","typingPeopleData","setTypingPeopleData","ChatMessagesWindow","findTopDate","scroll","scrollHeight","clientHeight","scrollToBottom","DialoguePage","dateRefsArray","setChatData","setMessageList","currentDateOnTop","setCurrentDateOnTop","snapshot","scrollTop","innerHTML","useRealTimeMessages","PageNotFound","LOGIN_ROUTE","SIGNUP_ROUTE","HOME_ROUTE","LIBRARY_ROUTE","SEARCH_ROUTE","CHAT_ROUTE","BlurredBg","TitleAndLogo","MainBanner","bannerColors","setBannerColors","setcurrentSliderPage","topAuthor","setTopAuthor","topSong","setTopSong","topAlbum","setTopAlbum","findTop","criterion","orderBy","limit","RecentSongs","recentSongs","setRecentSongs","tempSongsIds","findRecentSongs","RecommendedAuthors","recommendationAuthors","setRecommendationAuthors","uniqueAuthors","setUniqueAuthors","uniqueAuthorsUIDSArray","ImportantMessage","button","RecommendedSongs","recommendedSongs","setRecommendedSongs","fetchRecommendedSongs","Top15Songs","topSongs","setTopSongs","LibraryPlaylistItem","split","findVisiblePlaylists","SongsPage","playlistsVisible","setPlaylistsVisible","p","left","wave","CreatePlaylistPage","PlaylistsPage","AuthorsPage","IsUserOnlineCircle","AmountOfUnseenMessages","amountOfUnseen","LastSentMessage","lastAttachedItem","setLastAttachedItem","shouldPutDot","setShouldPutDot","lastMessage","setLastMessage","messageIcons","lastIcon","setLastIcon","authorName","findWhatToWriteUnderName","ChatItem","setAmountOfUnseen","reduce","accum","findAmountOfUnseenMessages","now","CreateChat","foundFriends","setFoundFriends","chatCover","setChatCover","setChatName","setRrrorMessage","publicRoutes","path","Component","setEmail","setPassword","disabled","currentRoleChoice","setCurrentRoleChoice","setName","setPhotoURL","privateRoutes","libraryPages","resultSongList","setResultSongList","resultAlbumList","setResultAlbumList","shadowColor","setShadowColor","yourChats","setYourChats","ContentRouter","component","exact","correctTimeDisplay","Player","textLimit","linkToAuthors","overflow","whiteSpace","step","leftSideBar","link","MobileControlBarItem","element","BottomControlBar","userElement","location","hash","FullBottomSide","Loading","timeSpan","pointerEvents","LyricsParagraph","lyricsModeratorMode","karaokeModeratorTimes","setKaraokeModeratorTimes","setInputKaraokeTime","inputKaraokeTime","paragraphRef","paragraphStyle","abs","addLyricsBlock","indexOfRelativeElement","tempTimes","splice","convertedToNumber","inputKaraoke","rightSide","socialMedia","social","setLyricsModeratorMode","canUpdateLyrics","setCanUpdateLyrics","scrollIntoView","paragraph","tempSongData","FullScreenPlayer","lyricsRef","mobileMenuTransition","setMobileMenuTransition","deltaY","setDeltaY","deltaYMobileMenu","setDeltaYMobileMenu","mobileContentScroll","mobileMenuRef","bgRef","handlersForMobileMenu","onSwipedLeft","onSwipedRight","returnToInitialMobileMenu","rightSideContent","RightSidePage","noLyrics","changeRightSidePage","documentElement","setProperty","zIndex","NavigationItem","Person","sendAnimation","setSendAnimation","loadingSendSong","setLoadingSendSong","shareWithManyFriends","TinyPlaylist","backgroundPosition","backgroundSize","NotificationCircle","LeftsideBar","currentFriendToPlaylistPage","setCurrentFriendToPlaylistPage","alignSelf","ModalWindow","modalRef","ConfirmWindow","confirmRef","closeComfirm","ContentWrapper","intervalExciter","setIntervalExciter","interval","setInterval","clearInterval","onLoadedData","onTimeUpdate","onEnded","AppRouter","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.47e55b4c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo3.fc53f4ac.svg\";","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const LoadingData = () => {\r\n\treturn (\r\n\t\t<div className = \"LoadingData\">\r\n\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {IoIosCheckmarkCircle, IoIosRadioButtonOff} from 'react-icons/io'\r\n\r\nexport const AddToListCircle = ({listOfChosenItems, setListOfChosenItems, itemId}) => {\r\n\treturn listOfChosenItems !== undefined ? (\r\n\t\t<div onClick = {e=>e.preventDefault()}>\r\n\t\t\t{\r\n\t\t\t\tlistOfChosenItems.includes(itemId) ?\r\n\t\t\t\t\t<button type=\"button\" onClick={(e) => { let filteredList = listOfChosenItems.filter(el => el !== itemId); setListOfChosenItems(filteredList) }} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosCheckmarkCircle style={{ color: 'var(--lightBlue)' }} />\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button type=\"button\" onClick={() => setListOfChosenItems(prev => [...prev, itemId])} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosRadioButtonOff />\r\n\t\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React from 'react'\r\nimport { AddToListCircle } from './AddToListCircle'\r\nexport const PersonTiny = ({data, chosenArray, setChosenArray, ...restProps}) => {\r\n\treturn (\r\n\t\t<div className=\"person\" {...restProps}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {chosenArray} setListOfChosenItems = {setChosenArray} itemId = {data.uid}/>\r\n\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t<img loading = \"lazy\" src={data.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"personName\">\r\n\t\t\t\t{data.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport 'firebase/analytics'\r\nimport seedDatabase from './seedDatabase';\r\n\r\nconst app = firebase.initializeApp({\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n\tappId:process.env.REACT_APP_FIREBASE_APP_ID,\r\n\tmeasurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n});\r\nfirebase.analytics();\r\nexport const auth = app.auth()\r\nexport const storage = app.storage()\r\nexport const firestore = app.firestore()\r\n// seedDatabase(firestore)\r\nexport default app","export default function checkNumber(number, max, min = 0){\r\n\tif(number > max) return min\r\n\tif(number < min) return max\r\n\r\n\treturn number\r\n}","export default function shuffleSongs(songsArray){\r\n\tconst randomIndexesArray = []\r\n\tconst newSongsNumbersArray = new Array(songsArray.length)\r\n\tlet counter = 0\r\n\twhile(counter < songsArray.length){\r\n\t\tconst randNum = Math.floor(Math.random()*(songsArray.length))\r\n\t\tif(!randomIndexesArray.includes(randNum)){\r\n\t\t\trandomIndexesArray.push(randNum)\r\n\t\t\tnewSongsNumbersArray[randNum] = songsArray[counter]\r\n\t\t\tcounter++\r\n\t\t}\r\n\t}\r\n\treturn newSongsNumbersArray\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useConditionFunc = (currentUser, fetchFunc, changeCondition, dep) => {\r\n\tuseEffect(() => {\r\n\t\tif(currentUser.uid){\r\n\t\t\tif (changeCondition) {\r\n\t\t\t\tfetchFunc()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [JSON.stringify(dep)])\r\n}\r\n","export default function normalizeString(str){\r\n\treturn str.replace(/\\s/g, '').replace(/[,'._/]/g, '').replace(/-/g, '').toLowerCase()\r\n}","import normalizeString from \"../other/normalizeString\"\r\n\r\nexport const findVariantsOfName = (name) => {\r\n\tlet variantsOfName = []\r\n\tlet personName = normalizeString(name)\r\n\tfor (let i = 1; i < personName.length + 1; i++) {\r\n\t\tvariantsOfName.push(personName.substr(0, i))\r\n\t}\r\n\treturn variantsOfName\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { auth, firestore } from '../firebase'\r\nimport firebase from 'firebase'\r\nimport { LoadingData } from '../components/Loading/LoadingData'\r\nimport { findVariantsOfName } from '../functions/find/findVariantsOfName'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport const useAuth = () => {\r\n\treturn useContext(AuthContext)\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [currentUser, setCurrentUser] = useState({})\r\n\tconst [userId, setUserId] = useState(null)\r\n\tconst [loading, setLoading] = useState(true)\r\n\tfunction login(email, password, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.signInWithEmailAndPassword(email, password).then().catch(err => {\r\n\t\t\tsetError(err.message)\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction logout() {\r\n\t\treturn auth.signOut()\r\n\t}\r\n\r\n\tfunction signup(email, name, password, role, photoURL, imageColors, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.createUserWithEmailAndPassword(email, password)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tfirestore.collection('users')\r\n\t\t\t\t\t.doc(result.user.uid)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\t\tdisplayName: name,\r\n\t\t\t\t\t\tphotoURL: photoURL || \"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg\",\r\n\t\t\t\t\t\tisAuthor: parseInt(role) === 1,\r\n\t\t\t\t\t\tisVerified: parseInt(role) === 1,\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: 0,\r\n\t\t\t\t\t\townSongs: [],\r\n\t\t\t\t\t\townPlaylists: [],\r\n\t\t\t\t\t\taddedSongs: [],\r\n\t\t\t\t\t\taddedPlaylists: [],\r\n\t\t\t\t\t\taddedAuthors: [],\r\n\t\t\t\t\t\tlastSongPlayed: \"\",\r\n\t\t\t\t\t\tchats: [],\r\n\t\t\t\t\t\tfriends: [],\r\n\t\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\t\tregDate: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t\t})\r\n\t\t\t\tfirestore.collection('search').doc(result.user.uid).set({\r\n\t\t\t\t\tplace: 'users',\r\n\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\tvariantsOfName: findVariantsOfName(name)\r\n\t\t\t\t})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(userId !== null){\r\n\t\t\tconst unsubscribe = firestore.collection('users').doc(userId).onSnapshot(user => {\r\n\t\t\t\tif (user.data()) {\r\n\t\t\t\t\tif(currentUser.uid === undefined){\r\n\t\t\t\t\t\tsetCurrentUser(user.data())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn unsubscribe\r\n\t\t}\r\n\t}, [firestore, userId])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tsetUserId(user.uid)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetUserId(null)\r\n\t\t\t\tsetCurrentUser({})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn unsubscribe\r\n\t}, [])\r\n\r\n\r\n\tconst value = {\r\n\t\tcurrentUser,\r\n\t\tsetCurrentUser,\r\n\t\tlogin,\r\n\t\tsignup,\r\n\t\tlogout,\r\n\t\tloading,\r\n\t\tsetLoading\r\n\t}\r\n\treturn (\r\n\t\t<AuthContext.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n","import React, { useContext, useState } from 'react'\r\n\r\nconst ModalContext = React.createContext()\r\n\r\nexport const useModal = () =>{\r\n\treturn useContext(ModalContext)\r\n}\r\n\r\nexport const ModalClassProvider = ({children}) => {\r\n\tconst [openModal, setOpenModal] = useState(false)\r\n\tconst [content, setContent] = useState(<h1>Test</h1>)\r\n\tconst [isOpenConfirm, setIsOpenConfirm] = useState(false)\r\n\tconst [confirmContent, setConfirmContent] = useState({confirmText:\"Confirm Action\", rejectText:\"Cancel\", onConfirmL:()=>{return null}, onReject:()=>{return null}})\r\n\tfunction toggleModal(){\r\n\t\tsetOpenModal(!openModal)\r\n\t}\r\n\t\r\n\t//{question:question, confirmText:..., rejectText:..., onConfirm..., onReject:...}\r\n\tfunction openConfirm(question, confirmText, rejectText = \"Cancel\", onConfirm, onReject = closeConfirm){\r\n\t\tsetIsOpenConfirm(true)\r\n\t\tsetConfirmContent({question:question, confirmText:confirmText, rejectText:rejectText, onConfirm:onConfirm, onReject:onReject})\r\n\t}\r\n\r\n\tfunction closeConfirm(){\r\n\t\tsetIsOpenConfirm(false)\r\n\t}\r\n\r\n\tconst value = {\r\n\t\topenModal,\r\n\t\tsetOpenModal,\r\n\t\ttoggleModal, \r\n\t\tsetContent, \r\n\t\tcontent,\r\n\t\tisOpenConfirm,\r\n\t\tsetIsOpenConfirm,\r\n\t\topenConfirm,\r\n\t\tcloseConfirm,\r\n\t\tconfirmContent\r\n\t}\r\n\treturn (\r\n\t\t<ModalContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ModalContext.Provider>\r\n\t)\r\n}\r\n","import React, { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { LoadingData } from '../components/Loading/LoadingData'\r\nimport { PersonTiny } from '../components/Basic/PersonTiny'\r\nimport { firestore } from '../firebase'\r\nimport checkNumber from '../functions/other/checkNumber'\r\nimport shuffleSongs from '../functions/other/shuffleSongs'\r\nimport { useConditionFunc } from '../hooks/useConditionFunc'\r\nimport { useAuth } from './AuthContext'\r\nimport { useModal } from './ModalContext'\r\nconst SongContext = createContext(null)\r\n\r\nexport const useSong = () => {\r\n\treturn useContext(SongContext)\r\n}\r\n\r\nexport const SongProvider = ({ children }) => {\r\n\tconst { currentUser, loading, setLoading } = useAuth()\r\n\tconst {setOpenModal} = useModal()\r\n\tconst [yourSongs, setYourSongs] = useState([])\r\n\tconst [yourPlaylists, setYourPlaylists] = useState([])\r\n\tconst [yourAuthors, setYourAuthors] = useState([])\r\n\tconst [yourFriends, setYourFriends] = useState([])\r\n\tconst [currentSongQueue, setCurrentSongQueue] = useState([])\r\n\tconst [currentSong, setCurrentSong] = useState(-1)\r\n\tconst [currentSongInQueue, setCurrentSongInQueue] = useState(0)\r\n\tconst [currentSongPlaylistSource, setCurrentSongPlaylistSource] = useState({})\r\n\tconst [inputRange, setInputRange] = useState(0)\r\n\tconst [currentSongData, setCurrentSongData] = useState({ id: -1 })\r\n\r\n\tconst [imgColors, setImgColors] = useState([])\r\n\tconst [play, setPlay] = useState(false)\r\n\tconst [currentTime, setCurrentTime] = useState(0)\r\n\tconst [songDuration, setSongDuration] = useState(0)\r\n\tconst [repeatMode, setRepeatMode] = useState(1)\r\n\tconst [shuffleMode, setShuffleMode] = useState(0)\r\n\tconst [currentParagraph, setCurrentParagraph] = useState(0)\r\n\tconst [isThereKaraoke, setIsThereKaraoke] = useState(false)\r\n\tconst [openFullScreenPlayer, setOpenFullScreenPlayer] = useState(false)\r\n\tconst songRef = useRef(null)\r\n\tconst currentParagraphRef = useRef(null)\r\n\tconst inputRef = useRef(null)\r\n\tconst leftSideBarInputRef = useRef(null)\r\n\tconst [rightSideCurrentPage, setRightSideCurrentPage] = useState(0)\r\n\tconst [openMenu, setOpenMenu] = useState(false)\r\n\tfunction checkKaraoke() {\r\n\t\tif (currentSongData.lyrics !== undefined && currentSongData.lyrics.length === 0) return false\r\n\r\n\t\tif (currentSongData.lyrics !== undefined) {\r\n\t\t\tif (currentSongData.lyrics[0].startTime === 'undefined') return false\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n\r\n\tfunction fetchYourFriends() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.friends !== undefined) {\r\n\t\t\tcurrentUser.friends.forEach(async (friendObj, i) => {\r\n\t\t\t\tconst friend = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tif (friendObj.status === 'added') {\r\n\t\t\t\t\ttempArray.push(friend)\r\n\t\t\t\t}\r\n\t\t\t\tif(i === currentUser.friends.length - 1){\r\n\t\t\t\t\tsetYourFriends(tempArray)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchQueue() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.lastQueue) {\r\n\t\t\tcurrentUser.lastQueue.songsList.forEach(async (songId, i) => {\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\ttempArray.push(songData)\r\n\t\t\t\tif(i === currentUser.lastQueue.songsList.length - 1) setCurrentSongQueue(tempArray)\r\n\t\t\t})\r\n\t\t\tsetCurrentSongInQueue(currentUser.lastQueue.songsList.findIndex(songId => songId === currentUser.lastSongPlayed))\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSongInitial() {\r\n\t\tif (currentUser.uid !== undefined) {\r\n\t\t\tconst tempSongObject = {\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsongSrc: \"\",\r\n\t\t\t\tauthors: [],\r\n\t\t\t\tcover: \"\",\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\treleaseDate: \"\",\r\n\t\t\t\tlyrics: [],\r\n\t\t\t\timageColors: []\r\n\t\t\t}\r\n\t\t\tconst curSong = currentUser.lastSongPlayed || currentUser.addedSongs[0] || tempSongObject.id\r\n\t\t\tconst curQueue = currentUser.lastQueue || { source: '/library', name: 'Your Library', image: currentUser.photoURL, songsList: yourSongs } || []\r\n\t\t\tsetCurrentSong(curSong)\r\n\t\t\tsetCurrentSongPlaylistSource(curQueue)\r\n\r\n\t\t\tif (curSong !== -1) {\r\n\t\t\t\tconst docRef = firestore.collection('songs').doc(curSong)\r\n\t\t\t\tconst docData = docRef.get()\r\n\t\t\t\t\t.then(doc => {\r\n\t\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongData(tempSongObject)\r\n\t\t\t\tsetImgColors([])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSong() {\r\n\t\tif (currentSong !== -1) {\r\n\t\t\tfirestore.collection('songs').doc(currentSong).get().then(doc => {\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\telse fetchCurrentSongInitial()\r\n\t}\r\n\r\n\tfunction fetchYourSongs() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.addedSongs) {\r\n\t\t\tcurrentUser.addedSongs.map((song, i) => {\r\n\t\t\t\tfirestore.collection(\"songs\").doc(song).get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.unshift(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedSongs.length - 1) setYourSongs(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(i === currentUser.addedSongs.length - 1){\r\n\t\t\t\t\t\tfetchQueue()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourPlaylists() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.ownPlaylists) {\r\n\t\t\tcurrentUser.ownPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.push(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.ownPlaylists.length - 1) setYourPlaylists(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (currentUser.addedPlaylists) {\r\n\t\t\tcurrentUser.addedPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.push(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedPlaylists.length - 1) setYourPlaylists(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourAuthors() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.addedAuthors) {\r\n\t\t\tcurrentUser.addedAuthors.map((authorId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.unshift(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedAuthors.length - 1) setYourAuthors(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet shouldChangeYourSongs = currentUser.addedSongs && (currentUser.addedSongs.length !== yourSongs.length)\r\n\t\tif (shouldChangeYourSongs) {\r\n\t\t\tfetchYourSongs()\r\n\t\t}\r\n\t}, [currentUser.addedSongs])\r\n\r\n\tuseConditionFunc(currentUser, fetchYourPlaylists, currentUser.ownPlaylists && String(currentUser.ownPlaylists.concat(currentUser.addedPlaylists)) !== String(yourPlaylists), [currentUser.ownPlaylists])\r\n\tuseConditionFunc(currentUser, fetchYourFriends, currentUser.friends && String(currentUser.friends.filter(obj => obj.status === 'added')) !== String(yourFriends), [currentUser.friends])\r\n\tuseConditionFunc(currentUser, fetchYourAuthors, currentUser.addedAuthors && (currentUser.addedAuthors.length !== yourAuthors.length), [currentUser.addedAuthors])\r\n\tuseConditionFunc(currentUser, fetchCurrentSong, currentUser && (currentSongData.id === -1 || (currentSong || currentUser.lastSongPlayed)), [currentSong, currentUser.lastSongPlayed])\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (currentUser.uid === undefined) {\r\n\t\t\tsetCurrentSongData({ id: -1 })\r\n\t\t\tsetCurrentSong(-1)\r\n\t\t\tsetCurrentSongQueue([])\r\n\t\t\tsetYourAuthors([])\r\n\t\t\tsetYourSongs([])\r\n\t\t\tsetYourFriends([])\r\n\t\t\tsetYourPlaylists([])\r\n\t\t}\r\n\t}, [currentUser.uid])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsThereKaraoke(checkKaraoke())\r\n\t}, [currentSongData.lyrics])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!loading) {\r\n\t\t\tif (shuffleMode) {\r\n\t\t\t\tlet shuffledSongsArray = shuffleSongs(currentSongQueue)\r\n\t\t\t\tsetCurrentSongQueue(shuffledSongsArray)\r\n\t\t\t\tsetCurrentSongInQueue(shuffledSongsArray.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongQueue(currentSongPlaylistSource.songsList)\r\n\t\t\t\tsetCurrentSongInQueue(currentSongPlaylistSource.songsList.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [shuffleMode])\r\n\tlet listenCountTimeOut = useRef()\r\n\tfunction playSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (play) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\r\n\t\tsetPlay(!play)\r\n\t}\r\n\r\n\tfunction updateListenCount() {\r\n\t\tlistenCountTimeOut.current = setTimeout(() => {\r\n\t\t\tlet listens = currentSongData.listens\r\n\t\t\tlistens++\r\n\t\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\t\tlistens: listens\r\n\t\t\t})\r\n\t\t\tif (currentSongPlaylistSource.source.substr(1, 6) === 'albums') {\r\n\t\t\t\tconst sourceId = currentSongPlaylistSource.source.substr(8, currentSongPlaylistSource.source.length - 8)\r\n\t\t\t\tfirestore.collection('playlists').doc(sourceId).get().then((res) => {\r\n\t\t\t\t\tlet listedData = res.data().listens\r\n\t\t\t\t\tlistedData++\r\n\t\t\t\t\tfirestore.collection('playlists').doc(sourceId).update({\r\n\t\t\t\t\t\tlistens: listedData\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}, songDuration * 1000 * 0.5)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(listenCountTimeOut.current)\r\n\t\tif (play) {\r\n\t\t\tupdateListenCount()\r\n\t\t}\r\n\t}, [play, currentSongData.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentParagraph(0)\r\n\t}, [currentSongData.id])\r\n\r\n\tfunction loadSongData(e) {\r\n\t\tsetCurrentTime(e.target.currentTime)\r\n\t\tsetSongDuration(e.target.duration)\r\n\t\tinputRef.current.max = e.target.duration\r\n\t\tif (window.innerWidth > 1000) leftSideBarInputRef.current.max = e.target.duration\r\n\t\tsetInputRange(0)\r\n\t\tif (play) { e.target.play() }\r\n\t\telse e.target.pause()\r\n\t}\r\n\r\n\tfunction defineCurrentParagraph() {\r\n\t\t//Well, I'm maybe not a great mathematician or smth, but I want to make this not linear, but binary, hence O(logN)\r\n\t\t// currentSongData.lyrics.find((el, i) => {\r\n\t\t// \tif (el.startTime <= songRef.current.currentTime) {\r\n\t\t// \t\tsetCurrentParagraph(i)\r\n\t\t// \t\treturn false\r\n\t\t// \t}\r\n\t\t// \t// currentParagraphRef.current.scrollIntoView()\r\n\t\t// \treturn true\r\n\t\t// })\r\n\r\n\t\tlet first = 0, last = currentSongData.lyrics.length - 1\r\n\t\tlet roundedTime = parseFloat(parseFloat(songRef.current.currentTime).toFixed(1))\r\n\t\twhile (first <= last) {\r\n\t\t\tlet midPoint = Math.floor((first + last) / 2)\r\n\t\t\tlet blockStartTime = parseFloat(parseFloat(currentSongData.lyrics[midPoint].startTime).toFixed(1))\r\n\t\t\tlet nextBlockStartTime = midPoint !== currentSongData.lyrics.length - 1 ? parseFloat(parseFloat(currentSongData.lyrics[midPoint + 1].startTime).toFixed(1)) : last\r\n\t\t\tif (currentSongData.lyrics[midPoint].startTime !== 'undefined') {\r\n\t\t\t\tif (roundedTime >= blockStartTime && roundedTime <= nextBlockStartTime) {\r\n\t\t\t\t\tsetCurrentParagraph(midPoint)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\telse if (blockStartTime < roundedTime) first = midPoint + 1\r\n\t\t\t\telse last = midPoint - 1\r\n\r\n\t\t\t}\r\n\t\t\telse return\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (rightSideCurrentPage === 2) defineCurrentParagraph()\r\n\t}, [rightSideCurrentPage])\r\n\r\n\tfunction defineCurrentParagraphLight() {\r\n\t\tif (currentParagraph !== (currentSongData.lyrics.length - 1) && parseFloat(currentSongData.lyrics[currentParagraph + 1].startTime) <= songRef.current.currentTime) {\r\n\t\t\treturn setCurrentParagraph(currentParagraph + 1)\r\n\t\t}\r\n\t}\r\n\tfunction playing(event) {\r\n\t\tsetCurrentTime(event.target.currentTime)\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer && openMenu) defineCurrentParagraphLight()\r\n\t\tsetInputRange((event.target.currentTime / songDuration) * 100)\r\n\t}\r\n\r\n\tasync function nextSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue + 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tasync function prevSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (currentTime > 5) {\r\n\t\t\tsongRef.current.currentTime = 0\r\n\t\t\tsetCurrentTime(0)\r\n\t\t\tsetCurrentParagraph(0)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue - 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tfunction changeCurrentTime(event, startTime = 0) {\r\n\t\tif (event.target.localName === 'div' || event.target.localName === \"p\") {\r\n\t\t\tif(startTime !== undefined){\r\n\t\t\t\tsetCurrentTime(startTime)\r\n\t\t\t\tsongRef.current.currentTime = startTime\r\n\t\t\t\tsetInputRange((startTime / songDuration) * 100)\r\n\t\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) setCurrentParagraph(parseInt(event.target.id))\r\n\t\t\t\tsongRef.current.play()\r\n\t\t\t\tsetPlay(true)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetCurrentTime(event.target.value)\r\n\t\t\tsongRef.current.currentTime = event.target.value\r\n\t\t\tsetInputRange((event.target.value / songDuration) * 100)\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) defineCurrentParagraph()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction displayAuthors(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>{el.displayName}</Link>{(i === authorsList.length - 1 ? \"\" : separatingSign)}\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction displayAuthorsFull(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false); setOpenModal(false) }}>\r\n\t\t\t\t\t\t<PersonTiny data={el} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction findLen() {\r\n\t\tlet str = \"\"\r\n\t\tcurrentSongData.authors.forEach(el => {\r\n\t\t\tstr += el.displayName\r\n\t\t})\r\n\t\treturn str.length\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = currentSongData.name || 'Soundbubble'\r\n\t}, [currentSongData.name])\r\n\treturn (\r\n\t\t<SongContext.Provider value={\r\n\t\t\t{\r\n\t\t\t\tyourSongs,\r\n\t\t\t\tsetYourSongs,\r\n\t\t\t\tyourPlaylists,\r\n\t\t\t\tyourFriends,\r\n\t\t\t\tcurrentSongQueue,\r\n\t\t\t\tcurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongQueue,\r\n\t\t\t\tsetCurrentSongInQueue,\r\n\t\t\t\tplay,\r\n\t\t\t\tsetPlay,\r\n\t\t\t\tsongSrc: currentSongData.songSrc,\r\n\t\t\t\tcurrentTime,\r\n\t\t\t\tsetCurrentTime,\r\n\t\t\t\tsongDuration,\r\n\t\t\t\tsongRef,\r\n\t\t\t\tname: currentSongData.name,\r\n\t\t\t\tauthors: currentSongData.authors,\r\n\t\t\t\tlyrics: currentSongData.lyrics,\r\n\t\t\t\tcover: currentSongData.cover,\r\n\t\t\t\timgColors,\r\n\t\t\t\tsetImgColors,\r\n\t\t\t\tcurrentSong,\r\n\t\t\t\tsetCurrentSong,\r\n\t\t\t\trepeatMode,\r\n\t\t\t\tsetRepeatMode,\r\n\t\t\t\tshuffleMode,\r\n\t\t\t\tsetShuffleMode,\r\n\t\t\t\tinputRef,\r\n\t\t\t\tleftSideBarInputRef,\r\n\t\t\t\tisThereKaraoke,\r\n\t\t\t\trightSideCurrentPage,\r\n\t\t\t\tcurrentParagraph,\r\n\t\t\t\tcurrentParagraphRef,\r\n\t\t\t\tnextSong,\r\n\t\t\t\tprevSong,\r\n\t\t\t\tplaySong,\r\n\t\t\t\tplaying,\r\n\t\t\t\tdefineCurrentParagraph,\r\n\t\t\t\tsetRightSideCurrentPage,\r\n\t\t\t\tchangeCurrentTime,\r\n\t\t\t\tdisplayAuthors,\r\n\t\t\t\tdisplayAuthorsFull,\r\n\t\t\t\topenFullScreenPlayer,\r\n\t\t\t\tsetOpenFullScreenPlayer,\r\n\t\t\t\tloadSongData,\r\n\t\t\t\tfindLen,\r\n\t\t\t\tfetchYourSongs,\r\n\t\t\t\tsetOpenMenu,\r\n\t\t\t\topenMenu,\r\n\t\t\t\tcurrentSongData,\r\n\t\t\t\tsetCurrentSongData,\r\n\t\t\t\tsetIsThereKaraoke,\r\n\t\t\t\tcheckKaraoke,\r\n\t\t\t\tsetYourPlaylists,\r\n\t\t\t\tyourAuthors,\r\n\t\t\t\tsetYourAuthors,\r\n\t\t\t\tupdateListenCount,\r\n\t\t\t\tinputRange\r\n\t\t\t}\r\n\t\t}>\r\n\t\t\t{!loading ?\r\n\t\t\t\tchildren :\r\n\t\t\t\t<LoadingData />\r\n\t\t\t}\r\n\t\t</SongContext.Provider>\r\n\t)\r\n}\r\n","\r\nfunction amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nfunction toDateTime(secs) {\r\n\tvar t = new Date(1970, 0, 1); // Epoch\r\n\tt.setSeconds(secs);\r\n\treturn t;\r\n}\r\n\r\nexport default function displayDate(stringDate, displayMode = 0){\r\n\tconst Months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\r\n\tlet newDate = !isNaN(stringDate)?stringDate.seconds?toDateTime(stringDate.seconds + 10800):toDateTime((stringDate/1000) + 10800):new Date(stringDate)\r\n\tif(displayMode === 0){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() \r\n\t}\r\n\r\n\tif(displayMode === 1){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate()\r\n\t}\r\n\r\n\tif(displayMode === 2){\r\n\t\treturn amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n\r\n\tif(displayMode === 3){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() + \" at \" + amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\n\r\nconst ScreenContext = React.createContext()\r\n\r\nexport const useScreen = () =>{\r\n\treturn useContext(ScreenContext)\r\n}\r\n\r\nexport const ScreenProvider = ({children}) => {\r\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth)\r\n\tconst [screenHeight, setScreenHeight] = useState(window.innerHeight)\r\n\tconst [isMobile, setIsMobile] = useState(window.innerWidth < 1000)\r\n\tfunction handleResize() {\r\n\t\tsetScreenWidth(window.innerWidth)\r\n\t\tsetScreenHeight(window.innerHeight)\r\n\t\tsetIsMobile(window.innerWidth < 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('resize', handleResize)\r\n\t\treturn ()=>{\r\n\t\t\twindow.removeEventListener('resize', handleResize)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst value = {\r\n\t\tscreenWidth,\r\n\t\tscreenHeight,\r\n\t\tisMobile\r\n\t}\r\n\treturn (\r\n\t\t<ScreenContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ScreenContext.Provider>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\n\r\nexport const Hint = ({text, direction = \"top\", ...restProps}) => {\r\n\tconst {isMobile} = useScreen()\r\n\treturn !isMobile?(\r\n\t\t<div className = {\"Hint \" + direction} {...restProps}>\r\n\t\t\t<h5>{text}</h5>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { useHistory } from 'react-router'\r\nimport { Hint } from './Hint'\r\nexport const BackBtn = ({color = \"\"}) => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"BackBtn\">\r\n\t\t\t<button onClick={() => history.goBack()} style = {color.length?{color:color}:{}}>\r\n\t\t\t\t<Hint text = {\"go back\"} direction = {\"bottom\"}/>\r\n\t\t\t\t<FiArrowLeft />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, {useEffect} from 'react'\r\n\r\nexport const SmallImages = ({imagesList, borderColor = \"#fff\"}) => {\r\n\treturn (\r\n\t\t<div className = \"SmallImages\" style = {{marginRight:-7*(imagesList.length-1)}}>\r\n\t\t\t{imagesList.map((image, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"smallImgContainer\" style = {{border:`3px solid ${borderColor}`, transform:`translateX(${-15*index}px)`}} key = {index}>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={image} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function rightFormanForBigNumber(number){\r\n\tif(number < 1000) return number\r\n\r\n\tif(number < 1000000) return parseFloat(number/1000).toFixed(1) + 'K'\r\n\r\n\tif(number < 1000000000) return parseFloat(number / 1000000).toFixed(1) + 'M'\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useOutsideClick = (ref, setFunc) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tsetFunc(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n}\r\n","export default function getUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\tconst piece = (Math.random() * 16) | 0;\r\n\t\tconst elem = c === 'x' ? piece : (piece & 0x3) | 0x8;\r\n\t\treturn elem.toString(16);\r\n\t});\r\n}\r\n","import { firestore } from \"../../firebase\"\r\nimport getUID from \"../other/getUID\"\r\n\r\nexport const createChat = async ( participants, chatUID = getUID(), chatName = \"\", chatImage = \"\", admins = [], imageColors = []) => {\r\n\tfirestore.collection('chats').doc(chatUID).set({\r\n\t\tchatImage:chatImage,\r\n\t\tchatName:chatName,\r\n\t\tid:chatUID,\r\n\t\tmessages:[],\r\n\t\tparticipants:participants,\r\n\t\twallpaper:'undefined',\r\n\t\tadmins:participants.length > 2? admins:[],\r\n\t\ttyping:[],\r\n\t\timageColors:imageColors\r\n\t})\r\n\r\n\tparticipants.map(async personId=>{\r\n\t\tlet chatInfo = (await firestore.collection('users').doc(personId).get()).data().chats\r\n\t\tchatInfo.push(chatUID)\r\n\t\tfirestore.collection('users').doc(personId).update({\r\n\t\t\tchats:chatInfo\r\n\t\t})\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\nimport getUID from \"../other/getUID\"\r\n\r\nexport const findChatURL = async (allParticipants, currentUser, setShouldCreate, setFriendChatId) => {\r\n\tlet foundChat = false\r\n\tlet chatId = 0\r\n\tif (currentUser.chats) {\r\n\t\t// Принцип работы таков: он ищет все чаты, в которых есть юзер. Затем он проходит по ним. Затем он проходит по выбранным друзьям\r\n\t\t// Если он находит, что друг есть в списке участников чата, добавляет к count 1, если нет, сразу выходит из цикла учатсников\r\n\t\t// После завершения цикла он проверяет, если количество совпадений + 1 (потому что в массив друзей не входит сам пользователь) равно\r\n\t\t// длине конкретного чата и если количество совпадений равно длине поступившего изначально массива участников, тогда нужный чат найден\r\n\t\tconst chatsWhereUserIn = await firestore.collection('chats').where('participants', 'array-contains', currentUser.uid).get()\r\n\t\tchatsWhereUserIn.docs.forEach(chat=>{\r\n\t\t\tlet count = 0\r\n\t\t\tallParticipants.every(personId=>{\r\n\t\t\t\tif(chat.data().participants.includes(personId)){\r\n\t\t\t\t\tcount++\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse return false\r\n\t\t\t})\t\t\t\r\n\t\t\tif(count + 1 === chat.data().participants.length && count === allParticipants.length){\r\n\t\t\t\tfoundChat = true\r\n\t\t\t\tsetShouldCreate(false)\r\n\t\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\t\tchatId = chat.data().id\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\telse return true\r\n\t\t})\r\n\r\n\t\tif (!foundChat) {\r\n\t\t\tconst random = getUID()\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(true)\r\n\t\t\tsetFriendChatId(random)\r\n\t\t\tchatId = random\r\n\t\t}\r\n\t\treturn chatId\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { FiMessageCircle } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\n\r\nexport const ChatWithFriendButton = ({ data, color }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([data.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [data.uid])\r\n\r\n\treturn (\r\n\t\t<Link to={`/chat/${friendChatId}`} style = {{display:'block', width:'fit-content', textDecoration: \"none\"}}>\r\n\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, data.uid], friendChatId) }} style = {{background:color}} className = \"ChatWithFriendButton\"><FiMessageCircle /> Messages</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const LoadingCircle = ({top = '20%'}) => {\r\n\treturn (\r\n\t\t<div className = \"LoadingCircle\" style = {{top:top}}>\r\n\t\t\t<img loading = \"lazy\" src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const sendMessage = (chatId, chatData, sender, messageText, attachedSongs = [], attachedAlbums = [], attachedAuthors = [], inResponseToMessage) => {\r\n\tif (messageText.length !== 0 || attachedSongs.length !== 0 || attachedAlbums.length !== 0 || attachedAuthors.length !== 0 || inResponseToMessage) {\r\n\t\tconst tempMessages = chatData?.messages || []\r\n\r\n\t\ttempMessages.push({\r\n\t\t\tid: tempMessages.length,\r\n\t\t\tsender: sender,\r\n\t\t\tmessage: messageText,\r\n\t\t\tsentTime: new Date().toString(),\r\n\t\t\tinResponseToMessage: inResponseToMessage || null,\r\n\t\t\tattachedSongs: attachedSongs,\r\n\t\t\tattachedAlbums: attachedAlbums,\r\n\t\t\tattachedAuthors: attachedAuthors,\r\n\t\t\tseenBy: [sender]\r\n\t\t})\r\n\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\tmessages: tempMessages\r\n\t\t})\r\n\t}\r\n}","import { firestore } from \"../../firebase\";\r\nimport { createChat } from \"../create/createChat\";\r\nimport { findChatURL } from \"../find/findChatURL\";\r\nimport getUID from \"./getUID\";\r\nimport { sendMessage } from \"./sendMessage\";\r\n\r\nexport default function shareWithFriends(shareList, currentUser, itemId, whatToShare, messageText = \"\") {\r\n\t//Сделать через функцию sendMessage\r\n\tshareList.map(async userId => {\r\n\t\t//Сортировка по последнему отправлению\r\n\t\tconst sortedFriends = [{uid:userId, status:'added'}, ...currentUser.friends.filter(obj => obj.uid !== userId)]\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:sortedFriends\r\n\t\t})\r\n\t\tPromise.resolve(findChatURL([userId], currentUser, () => null, () => null)).then(async chatId => {\r\n\t\t\tlet chatData = (await firestore.collection('chats').doc(chatId).get()).data()\r\n\t\t\tconsole.log(chatId, chatData)\r\n\t\t\tif (chatData !== undefined) {\r\n\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst chatUID = getUID()\r\n\t\t\t\tcreateChat([currentUser.uid, userId], chatUID).then(async () => {\r\n\t\t\t\t\tchatData = (await firestore.collection('chats').doc(chatUID).get()).data()\r\n\t\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\r\n}","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiSearch, FiXCircle } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport normalizeString  from '../../functions/other/normalizeString'\r\nexport const SearchBar = ({ value, setValue, setAllFoundSongs, setResultPlaylists, setResultAuthorList, focus = false, defaultSearchMode = undefined, inputText = \"Search for songs or for people\", defaultSongsListValue, defaultAuthorsListValue, defaultPlaylistsListValue }) => {\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [foundAnything, setFoundAnything] = useState(false)\r\n\tconst [searchMode, setSearchMode] = useState(0)\r\n\tconst inputRef = useRef(null)\r\n\tlet typingTimeout\r\n\r\n\tasync function findItem(place, defaultList = [], setList) {\r\n\t\tconst foundItemTempArray = []\r\n\t\tlet normalizedSearch = normalizeString(value);\r\n\t\tconst itemsList = await firestore.collection('search').where('variantsOfName', \"array-contains\", normalizedSearch).get();\r\n\t\titemsList.docs.forEach(async item => {\r\n\t\t\tconst itemData = item.data()\r\n\t\t\tif (itemData.place === place) {\r\n\t\t\t\tconst realData = (await firestore.collection(itemData.place).doc(itemData.uid).get()).data()\r\n\t\t\t\tif(defaultList !== undefined && defaultList.length){\r\n\t\t\t\t\tif(defaultList.map(song=>song.id || song.uid).includes(itemData.uid)) foundItemTempArray.push(realData)\r\n\t\t\t\t}\r\n\t\t\t\telse if(!realData.isPrivate) foundItemTempArray.push(realData)\r\n\t\t\t\tif (defaultSearchMode === undefined && searchMode === 0 && foundItemTempArray.length !== 0) {\r\n\t\t\t\t\tswitch(itemData.place){\r\n\t\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\t\tfoundItemTempArray.forEach(async song => {\r\n\t\t\t\t\t\t\t\tconst authorsIdsArray = (await firestore.collection('songs').doc(song.id).get()).data().authors\r\n\t\t\t\t\t\t\t\tauthorsIdsArray.forEach(async (author, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst authorData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetResultAuthorList(prev => {if(!prev.find(el=>el.uid === author.uid)) return [...prev, authorData];else return prev})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"users\":\r\n\t\t\t\t\t\t\tfoundItemTempArray.forEach(async author => {\r\n\t\t\t\t\t\t\t\tconst songsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownSongs\r\n\t\t\t\t\t\t\t\tconst albumsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownPlaylists\r\n\t\t\t\t\t\t\t\tsongsIdsArray.forEach(async (songId, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetAllFoundSongs(prev => {if(!prev.find(el=>el.id === songId)) return[...prev, songData];else return prev})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\r\n\t\t\t\t\t\t\t\talbumsIdsArray.forEach(async (albumId, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst albumData = (await firestore.collection('playlists').doc(albumId).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetResultPlaylists(prev => {if(!prev.find(el=>el.id === albumId)) return[...prev, albumData];else return prev})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\t\tfoundItemTempArray.forEach(async playlist => {\r\n\t\t\t\t\t\t\t\tconst songsIdsArray = (await firestore.collection('playlists').doc(playlist.id).get()).data().authors\r\n\t\t\t\t\t\t\t\tsongsIdsArray.forEach(async (author, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst authorData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetResultAuthorList(prev => {if(!prev.find(el=>el.uid === author.uid)) return [...prev, authorData];else return prev})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsetMessage('Wrong search mode')\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsetList(foundItemTempArray)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tif (foundItemTempArray.length !== 0) setFoundAnything(true)\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length === 0) {setList([])}\r\n\t}\r\n\r\n\tfunction findSomething() {\r\n\t\tsetLoading(true)\r\n\t\tsetFoundAnything(false)\r\n\t\tif (value !== \"\") {\r\n\r\n\t\t\tif (defaultSearchMode === undefined) {\r\n\t\t\t\tif (searchMode === 0 || searchMode === 1) {\r\n\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 2) {\r\n\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 3) {\r\n\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tswitch (defaultSearchMode) {\r\n\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"authors\":\r\n\t\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (defaultSongsListValue !== undefined) setAllFoundSongs(defaultSongsListValue)\r\n\t\t\tif (defaultAuthorsListValue !== undefined) setResultAuthorList(defaultAuthorsListValue)\r\n\t\t\tif (defaultPlaylistsListValue !== undefined) setResultPlaylists(defaultPlaylistsListValue)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\tsetMessage('Not found')\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (focus) inputRef.current.focus()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSomething()\r\n\t}, [searchMode])\r\n\r\n\r\n\treturn (\r\n\t\t<div style = {{marginTop:'10px', width:'100%'}}>\r\n\t\t\t<div className=\"searchBar\">\r\n\t\t\t\t<div className=\"searchBarElement\">\r\n\t\t\t\t\t<FiSearch />\r\n\t\t\t\t\t<span onClick={() => value.length ? setValue(\"\") : null}>{value.length ? <FiXCircle /> : null}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={inputText}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value)}\r\n\t\t\t\t\tonKeyUp={() => timerUpFunc(findSomething)}\r\n\t\t\t\t\tonKeyDown={() => { clearTimeout(typingTimeout) }}\r\n\t\t\t\t\tref={inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"searchFilters\" style={defaultSearchMode !== undefined ? { display: 'none' } : {}}>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(0)} style={searchMode === 0 ? { background: 'var(--lightBlue)' } : {}}>All</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(1)} style={searchMode === 1 ? { background: 'var(--lightBlue)' } : {}}>Songs</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(2)} style={searchMode === 2 ? { background: 'var(--lightBlue)' } : {}}>Authors</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(3)} style={searchMode === 3 ? { background: 'var(--lightBlue)' } : {}}>Playlists</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t{loading ?\r\n\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px', marginTop: '40px' }}>\r\n\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t!foundAnything && value.length !== 0 ? <h2>{message}</h2> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shareWithFriends from '../../functions/other/shareWithManyFriends'\r\nimport { PersonTiny } from './PersonTiny'\r\nimport { SearchBar } from './SearchBar'\r\nexport const FriendsListToShareWith = ({ item, whatToShare = 'song' }) => {\r\n\tconst { yourFriends } = useSong()\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [shared, setShared] = useState(false)\r\n\tconst { toggleModal } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [foundPeople, setFoundPeople] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (shared) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleModal()\r\n\t\t\t\tsetShared(false)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}, [shared])\r\n\r\n\r\n\treturn (\r\n\t\t<div className='FriendsListToShareWith'>\r\n\t\t\t{shared ?\r\n\t\t\t\t<div className=\"successMessageSent\">\r\n\t\t\t\t\t<IoIosCheckmarkCircleOutline />\r\n\t\t\t\t\tSong has sent!\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<div style = {{overflowY:'auto', maxHeight:'300px'}}>\t\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundPeople} defaultAuthorsListValue = {yourFriends} defaultSearchMode={\"authors\"} inputText = {\"Search for friends\"}/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{foundPeople.length > 0 ?\r\n\t\t\t\t\t\tfoundPeople.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}):\r\n\t\t\t\t\t\tyourFriends.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Your message\" style={{ margin: 0 }} onChange={e => setMessageText(e.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"shareBtn\"\r\n\t\t\t\t\tstyle={!chosenFriends.length ?\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (chosenFriends.length > 0) {\r\n\t\t\t\t\t\t\tshareWithFriends(chosenFriends, currentUser, (whatToShare === 'author' ? item.uid : item.id), whatToShare, messageText);\r\n\t\t\t\t\t\t\tsetShared(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\tShare with {chosenFriends.length} {chosenFriends.length > 1 ? \"friends\" : \"friend\"}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const RadioBtn = ({currentActive, id, label, onClick}) => {\r\n\treturn (\r\n\t\t<div className = \"RadioBtn\" id = {id} onClick = {onClick}>\r\n\t\t\t<span className = \"radioLabel\" style = {currentActive === id?{color:'var(--blue)', opacity:1, fontWeight:'bold'}:{}}>\r\n\t\t\t\t{label}\r\n\t\t\t</span>\r\n\t\t\t<span className = \"radioCircle\" style = {currentActive === id?{background:'var(--blue)'}:{}}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ColorCircles = ({play}) => {\r\n\treturn (\r\n\t\t<div className = 'ColorCircles' style = {!play?{opacity:0, transform:\"scale(.95)\"}:{}}>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from '../FullScreenPlayer/colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { FiCheck, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nexport const SongItemChoice = ({ song, listOfSongs, setListOfSongs, showListens = false, listens = 0, isNewSong = false }) => {\r\n\tconst { setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setYourSongs, yourPlaylists, currentSongQueue, setCurrentSongInQueue, fetchYourSongs } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst {currentUser} = useAuth()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\tfunction addSongToList() {\r\n\t\tif(!listOfSongs.includes(song.id)){\r\n\t\t\treturn setListOfSongs(prev=>[...prev, song.id])\r\n\t\t}\r\n\r\n\t\tlet filteredList = listOfSongs.filter(el=>el !== song.id)\r\n\t\tsetListOfSongs(filteredList)\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToLibrary(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (currentUser.addedSongs.includes(song.id)) {\r\n\t\t\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\taddedSongs:newList\r\n\t\t\t})\r\n\t\t\tfetchYourSongs()\r\n\t\t\tsetOpenMoreWindow(false)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet newList = currentUser.addedSongs\r\n\t\tnewList.push(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedSongs:newList\r\n\t\t})\r\n\t\tfetchYourSongs()\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToPlaylist(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\t\tyourPlaylists[e.target.id].songs = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tyourPlaylists[e.target.id].songs.push(song.id)\r\n\t}\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\tNew\r\n\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'SongItem ' + (listOfSongs.includes(song.id) ? \"inList\" : \"\")} onClick={addSongToList} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t{song.name}\r\n\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t<button onClick={addOrDeleteSongToLibrary}>\r\n\t\t\t\t\t{!currentUser.addedSongs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n","export default function shortWord(word, len = 50){\r\n\treturn word.substr(0, len) + (word.length > len?\"...\":\"\")\r\n}","import shortWord from \"../other/shortWord\"\r\n\r\nexport const displayAuthorsStr = (authorslist, separator = ' & ', lenLimit = 100) =>{\r\n\tconst authorsString = authorslist.map(author=>author.displayName).join(separator)\r\n\treturn shortWord(authorsString, lenLimit)\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const addSongToLibrary = (e, song, currentUser, setCurrentUser) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = []\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tif (!currentUser.addedAuthors.includes(authorId)) {\r\n\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t}\r\n\t})\r\n\tlet newList = currentUser.addedSongs\r\n\tnewList.push(song.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: [...finalAuthorsUIDS, ...currentUser.addedAuthors]\r\n\t})\r\n\r\n\tfinalAuthorsUIDS.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers++\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n}","export default function filterArrayWithArray(whatToFilter, withWhatToFilter){\r\n\treturn whatToFilter.filter(\r\n\t\tfunction (e) {\r\n\t\t\treturn this.indexOf(e) < 0;\r\n\t\t},\r\n\t\twithWhatToFilter\r\n\t);\r\n}","import { firestore } from \"../../firebase\"\r\nimport filterArrayWithArray from \"./filterArrayWithArray\"\r\n\r\nexport const deleteSongFromLibrary = (e, song, currentUser, yourSongs) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = [] // массив авторов, песни которых еще остались после удаления выбранной песни\r\n\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tyourSongs.forEach(songObj => {\r\n\t\t\tif (newList.includes(songObj.id) && songObj.authors.find(a => a.uid === authorId)) {\r\n\t\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst filtered = filterArrayWithArray(songAuthorsUIDS, finalAuthorsUIDS) // массив людей, которых нужно убрать из библиотеки\r\n\tconst finalFilteredAuthors = filterArrayWithArray(currentUser.addedAuthors, filtered) // массив людей, оставшихся в библиотеке\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: finalFilteredAuthors\r\n\t})\r\n\r\n\tfiltered.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers--\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n\t\r\n}","import { useAuth } from \"../../contexts/AuthContext\"\r\nimport { addSongToLibrary } from \"../../functions/add/addSongToLibrary\"\r\nimport { deleteSongFromLibrary } from \"../../functions/other/deleteSongFromLibrary\"\r\nimport {FiPlusCircle, FiTrash2} from 'react-icons/fi'\r\nimport { useSong } from \"../../contexts/SongContext\"\r\nimport { useModal } from \"../../contexts/ModalContext\"\r\nexport default function AddOrDeleteButtonFull({song}) {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {yourSongs} = useSong()\r\n\tconst {openConfirm, setOpenModal} = useModal()\r\n\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\treturn <span onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t<FiPlusCircle />\r\n\t\t\tAdd\r\n\t\t</span>\r\n\t}\r\n\telse {\r\n\t\treturn <span onClick = {(e)=>{e.stopPropagation();setOpenModal(false);openConfirm(\"You sure you want to delete this song from library?\", \"Yes, delete it\", \"No, just kidding\", (e) => deleteSongFromLibrary(e, song, currentUser, yourSongs))}}>\r\n\t\t\t<FiTrash2 />\r\n\t\t\tDelete\r\n\t\t</span>\r\n\t}\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const PersonTinyVerticalItem = ({person}) => {\r\n\tconst {setOpenModal} = useModal()\r\n\treturn (\r\n\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t<div className = \"PersonTinyVerticalItem\" onClick = {()=>setOpenModal(false)}>\r\n\t\t\t\t<div className=\"personTinyImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={person.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"personTinyName\">\r\n\t\t\t\t\t{person.displayName}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport {CgMusicNote} from 'react-icons/cg'\r\nimport {PersonTinyVerticalItem} from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nexport const SongInfo = ({song}) => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst {setContent} = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tconst {displayAuthors, yourFriends} = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisSong] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisSong(){\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisSong([])\r\n\t\tyourFriends.forEach(friend=>{\r\n\t\t\tif(friend.addedSongs.includes(songData.id)) setFriendsThatHaveThisSong(prev=>[...prev, friend])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(song !== undefined) setSongData(song)\r\n\t}, [song && song.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisSong()\r\n\t}, [songData.id])\r\n\r\n\treturn (\r\n\t\t<div className = 'SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${songData.cover})` }}></div>\r\n\t\t\t<div className = \"songInfoContent\">\r\n\t\t\t\t<h3 style = {{color:songData.imageColors[0]}}>{songData.name}</h3>\r\n\t\t\t\t<span>{displayAuthors(songData.authors, ', ')}</span>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center', opacity:'0.6', fontSize:'.9em', position:\"relative\"}} className = \"listensAndDate\">\r\n\t\t\t\t\t<p className = \"infoListens\" style = {{marginRight:'15px', position:'relative'}}>{songData.listens} <CgMusicNote /></p>\r\n\t\t\t\t\t<span>{displayDate(songData.releaseDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style = {{margin:'10px 0'}}>{friendsThatHaveThisSong.length > 0? 'Friends that listen that song': 'None of your friends listens this'}</h4>\r\n\t\t\t\t{!loading?<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 0?friendsThatHaveThisSong.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t}):<button className = \"shareBtn\" style = {{minHeight:'35px', background:songData.imageColors[0]}} onClick = {()=>{setContent(<FriendsListToShareWith item = {songData} whatToShare = {'song'}/>)}}>Share</button>}\r\n\t\t\t\t</div>:\r\n\t\t\t\t<div style = {{position:'relative', height:'50px'}}><LoadingCircle top = {\"50%\"}/></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useAddOrDeleteSong = (playlistId, songId) => {\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [isAdded, setIsAdded] = useState(false)\r\n\tconst { currentUser } = useAuth()\r\n\tconst { currentSong } = useSong()\r\n\tconst songData = songId || currentSong\r\n\t\tuseEffect(() => {\r\n\t\t\tconst response = firestore.collection('playlists').doc(playlistId).onSnapshot(res => {\r\n\t\t\t\tif(res.exists) setPlaylistSongs(res.data().songs)\r\n\t\t\t})\r\n\t\t\treturn () => response()\r\n\t\t}, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsAdded(playlistSongs.includes(songData))\r\n\t}, [playlistSongs, songData])\r\n\r\n\tfunction addOrDelete() {\r\n\t\tif (playlistSongs.length > 0 && playlistId !== undefined) {\r\n\t\t\tif (playlistSongs.includes(songData)) {\r\n\t\t\t\tconst newSongsList = playlistSongs.filter(songNum => songNum !== songData)\r\n\t\t\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\t\t\tsongs: newSongsList\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst newSongsList = playlistSongs\r\n\t\t\tnewSongsList.unshift(songData)\r\n\t\t\tconsole.log(playlistId)\r\n\t\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\t\tsongs: newSongsList\r\n\t\t\t})\r\n\r\n\t\t\tconst sortedPlaylists = [playlistId, ...currentUser.ownPlaylists.filter(id => id !== playlistId)]\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\townPlaylists: sortedPlaylists\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn [addOrDelete, isAdded]\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiPlusCircle } from 'react-icons/fi'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const AddToPlaylistItem = ({playlist, song}) => {\r\n\tconst [addFunc, isAdded] = useAddOrDeleteSong(playlist.id, song.id)\r\n\treturn (\r\n\t\t<div className=\"songItemMenuWindowItem\" onClick={addFunc}>\r\n\t\t\t{!isAdded ? <>\r\n\t\t\t\t<Hint text={`Add \"${song.name}\" to playlist`} />\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</> :\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Hint text={`Remove ${song.name} from playlist`} />\r\n\t\t\t\t\t<FiCheck />\r\n\t\t\t\t</>}\r\n\t\t\t{playlist.name}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { addOrDeleteSongToPlaylist } from '../../functions/add/addOrDeleteSongToPlaylist'\r\nimport { FiPlusCircle, FiCheck } from 'react-icons/fi'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { AddToPlaylistItem } from '../Playlist/AddToPlaylistItem'\r\nexport const AddToPlaylists = ({ song }) => {\r\n\tconst { yourPlaylists, currentSongData } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\t\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tuseEffect(() => {\r\n\t\tif (song?.id) {\r\n\t\t\tsetSongData(song)\r\n\t\t}\r\n\t}, [song?.id])\r\n\treturn (\r\n\t\t<div className=\"AddToPlaylists\">\r\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t{yourPlaylists.length ? yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<AddToPlaylistItem playlist = {playlist} song = {songData}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}) : \"No playlists created\"}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ErrorPlate = ({errorMessage}) => {\r\n\treturn errorMessage && (\r\n\t\t<div className=\"Alert\">\r\n\t\t\t{errorMessage}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function transformLyricsToArrayOfObjects(lyrics) {\r\n\tconst arrayOfParagraphs = []\r\n\tlet startSubstr = 0\r\n\tfor (let i = 0; i < lyrics.length; i++) {\r\n\t\tif (lyrics[i] === '\\n' || lyrics[i + 1] === undefined) {\r\n\t\t\tarrayOfParagraphs.push({\r\n\t\t\t\tstartTime: 'undefined',\r\n\t\t\t\ttext: lyrics.substr(startSubstr, i - startSubstr)\r\n\t\t\t})\r\n\t\t\tstartSubstr = i + 1\r\n\t\t}\r\n\t}\r\n\treturn arrayOfParagraphs\r\n}","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { firestore } from '../../firebase'\r\nimport { transformLyricsToArrayOfObjects } from '../../functions/other/transformLyricsToArrayOfObject'\r\nexport const EditSong = ({ song }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(song.name)\r\n\tconst [songAuthors, setSongAuthors] = useState(song.authors)\r\n\tconst [songCover, setSongCover] = useState(song.cover)\r\n\tconst [imageColors, setImageColors] = useState(song.imageColors)\r\n\tconst [lyrics, setLyrics] = useState(song.lyrics.map(obj => obj.text).join('\\n'))\r\n\tconst [foundAuthors, setFoundAuthors] = useState([])\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetSongName(song.name)\r\n\t\tsetSongAuthors(song.authors)\r\n\t\tsetSongCover(song.cover)\r\n\t\tsetImageColors(song.imageColors)\r\n\t\tsetLyrics(song.lyrics.map(obj => obj.text).join('\\n'))\r\n\t}, [song.id])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\tfunction updateSong() {\r\n\t\tif (songName.length === 0) {\r\n\t\t\tsetErrorMessage(\"Name shouldn't be empty\")\r\n\t\t}\r\n\t\telse if (songAuthors.length === 0) {\r\n\t\t\tsetErrorMessage(\"Song has to have at least 1 author\")\r\n\t\t}\r\n\t\telse if (songCover.length === 0) {\r\n\t\t\tsetErrorMessage(\"Song has to have cover\")\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (songAuthors.length > song.authors.length) {\r\n\t\t\t\tconst newAuthors = songAuthors.filter(author => { return !song.authors.find(a => a.uid === author.uid) })\r\n\t\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\t\tauthorSongs.push(song.id)\r\n\t\t\t\t\tconsole.log(authorSongs)\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse if(songAuthors.length < song.authors.length){\r\n\t\t\t\tconst newAuthors = song.authors.filter(author => { return !songAuthors.find(a => a.uid === author.uid) })\r\n\t\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\t\tconst filteredSongs = authorSongs.filter(songId => songId !== song.id)\r\n\t\t\t\t\tconsole.log(filteredSongs)\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\townSongs: filteredSongs\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfirestore.collection('songs').doc(song.id).update(\r\n\t\t\t\t{\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tauthors: songAuthors,\r\n\t\t\t\t\timage: songCover,\r\n\t\t\t\t\timageColors:imageColors,\r\n\t\t\t\t\tlyrics:transformLyricsToArrayOfObjects(lyrics)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = songAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setSongAuthors(filtered)\r\n\t}\r\n\tfunction addAuthor(data) {\r\n\t\tif (!songAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setSongAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"SongInfo\" style={{ flexDirection: 'column', marginBottom: '10px' }}>\r\n\t\t\t\t<h3>Song cover</h3>\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={songCover} alt=\"\" className=\"songImage\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ background: `linear-gradient(-135deg, ${imageColors[0]}, ${imageColors[5]}`, width: '100%', borderRadius: 'var(--standartBorderRadius2)', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n\t\t\t\t\t\t<h4 style={{ color: imageColors[1] }}>{songName}</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t<input type=\"text\" className=\"standartInput\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Authors</h3>\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundAuthors} defaultSearchMode={\"authors\"} />\r\n\t\t\t\t<div className=\"songAuthorsList\">\r\n\t\t\t\t\t{songAuthors.map((author) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t{foundAuthors.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={songAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Lyrics</h3>\r\n\t\t\t\t<textarea type=\"text\" className=\"standartInput\" style={{ height: '200px', fontWeight:'500' }} value={lyrics} onChange={(e) => setLyrics(e.target.value)} />\r\n\t\t\t</div>\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t<button className=\"addSongBtn\" onClick={updateSong}>Update Song</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { BiEditAlt } from 'react-icons/bi';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { EditSong } from '../AdminAndAuthor/EditSong';\r\nexport const SongItemMoreWindow = ({ openMoreWindow, song, moreWindowPosRelativeToViewport }) => {\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\treturn openMoreWindow ? (\r\n\t\t(\r\n\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t{currentUser.isAdmin ? <div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<EditSong song = {song}/>)}}><BiEditAlt />Edit</div> : null}\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t<AddToPlaylists song={song} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t) : null\r\n\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\n\r\nexport const AuthorsList = ({listOfAuthors}) => {\r\n\tconst { displayAuthorsFull } = useSong()\r\n\treturn (\r\n\t\t<div className=\"rightSideAuthorsList\" >\r\n\t\t\t<div className=\"rightSideAuthorsListCentralBlock\">\r\n\t\t\t\t{displayAuthorsFull(listOfAuthors)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag, FiUsers } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { BiEditAlt } from 'react-icons/bi';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { AuthorsList } from '../FullScreenPlayer/AuthorsList'\r\nimport { EditSong } from '../AdminAndAuthor/EditSong';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nexport const SongItemMobileMoreWindow = ({ song }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\treturn (\r\n\t\t<div className=\"SongItemMobileMoreWindow\">\r\n\t\t\t<div className=\"simpleSongElement\" style = {{background:song.imageColors[0]}}>\r\n\t\t\t\t<div className=\"simpleSongElementImage\" >\r\n\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>{song.name}</span>\r\n\t\t\t</div>\r\n\t\t\t{currentUser.isAdmin ? <div className=\"songItemMenuWindowItem\" onClick = {()=>{setContent(<EditSong song = {song}/>)}}><BiEditAlt />Edit</div> : null}\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>setContent(<AddToPlaylists song={song} />)}>\r\n\t\t\t\t<MdPlaylistAdd />Add to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<AuthorsList listOfAuthors={song.authors} title={\"Authors\"} />) }}><FiUsers />Authors</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from './colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { FiX, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { MdKeyboardArrowRight, MdPlaylistAdd } from 'react-icons/md'\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { deleteSongFromLibrary } from '../../functions/other/deleteSongFromLibrary'\r\nimport { addSongToLibrary } from '../../functions/add/addSongToLibrary'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {AddToPlaylists} from './AddToPlaylists'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { SongItemMoreWindow } from '../Windows/SongItemMoreWindow'\r\nimport { SongItemMobileMoreWindow } from '../Windows/SongItemMobileMoreWindow'\r\nexport const SongItem = ({ song, localIndex, showListens = false, isNewSong = false, listOfChosenSongs, setListOfSongs, position }) => {\r\n\tconst { yourSongs, setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setCurrentSongInQueue } = useSong()\r\n\tconst {isMobile} = useScreen()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst { currentUser, setCurrentUser } = useAuth()\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction chooseSongItem() {\r\n\t\tsetCurrentSong(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: song.id\r\n\t\t})\r\n\t\tsetCurrentSongInQueue(localIndex)\r\n\t\tif (song.id === currentSong && play) {\r\n\t\t\tsongRef.current.pause();\r\n\t\t\tsetPlay(false)\r\n\t\t\t// clearTimeout(listenCountTimeOut)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsongRef.current.play();\r\n\t\tsetPlay(true)\r\n\t}\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(position || e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(song.listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\tfunction addOrDeleteButton() {\r\n\t\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\t\treturn <button onClick={(e) => addSongToLibrary(e, song, currentUser, setCurrentUser)} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"add song\"}/>\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <button onClick = {(e)=>{e.stopPropagation();openConfirm(`You sure you want to delete \"${song.name}\" from library?`, \"Yes, delete it\", \"No, just kidding\", (e) => {deleteSongFromLibrary(e, song, currentUser, yourSongs);closeConfirm()})}} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"delete song\"}/>\r\n\t\t\t\t<FiX />\r\n\t\t\t</button>\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenSongs} setListOfChosenItems = {setListOfSongs} itemId = {song.id}/>\r\n\t\t\t<div className={'SongItem ' + (song.id === currentSong && play ? \"playingNow\" : \"\")} onClick={chooseSongItem} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t{shortWord(song.name, window.innerWidth > 1000?30:17) }\r\n\t\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{!isMobile?<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>:<div className=\"songItemAuthor\">{displayAuthorsStr(song.authors, ' & ', 30)}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMoreBtn\" >\r\n\t\t\t\t\t{addOrDeleteButton()}\r\n\t\t\t\t\t<button onClick={isMobile?(e)=>{e.stopPropagation();toggleModal();setContent(<SongItemMobileMoreWindow song = {song}/>)}:openSongItemMoreWindow}>\r\n\t\t\t\t\t\t<Hint text = {\"more\"}/>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<SongItemMoreWindow openMoreWindow = {openMoreWindow} song = {song} moreWindowPosRelativeToViewport = {moreWindowPosRelativeToViewport}/>\r\n\t\t\t</div >\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const MoreBtn = ({func, lenOfList, maxLen = 5, boolVal}) => {\r\n\treturn (\r\n\t\t<div onClick = {lenOfList > maxLen?func:null} className = \"MoreBtn\" style = {lenOfList <= maxLen?{display:'none'}:{}}>\r\n\t\t\t<button style = {boolVal?{background:'var(--pink)', color:'#ff8db2'}:{}}>\r\n\t\t\t\t{boolVal?\"Close\":\"More\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { MoreBtn } from '../Buttons/MoreBtn'\r\n\r\nexport const TitleWithMoreBtn = ({title, func, boolVal, lenOfList, maxLen = 5, marginBottom = 0}) => {\r\n\treturn lenOfList !== 0?(\r\n\t\t<div className=\"topTitle\" style = {{margin:'10px 0'}}>\r\n\t\t\t<h2 style = {{margin:marginBottom}}>{title}</h2>\r\n\t\t\t<MoreBtn func={func} boolVal={boolVal} lenOfList={lenOfList} maxLen = {maxLen}/>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { FaPlay, } from 'react-icons/fa'\r\nimport { TiArrowShuffle , TiMediaPlay} from 'react-icons/ti'\r\nimport { BsPlayFill} from 'react-icons/bs'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { TitleWithMoreBtn } from '../Basic/TitleWithMoreBtn'\r\nimport shuffleSongs from '../../functions/other/shuffleSongs'\r\n\r\nexport const SongList = ({ listOfSongs, source, title = \"\", showListens = false, isNewSong = false, showCount = false, listOfChosenSongs, setListOfSongs, showSearch = false, displayIfEmpty }) => {\r\n\tconst { setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSong } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [showMoreSongs, setShowMoreSongs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displaySongs, setDisplaySongs] = useState(listOfSongs)\r\n\tuseEffect(() => {\r\n\t\tsetDisplaySongs(listOfSongs)\r\n\t\tif(listOfSongs.length > 1) displayAuthorsStr(listOfSongs[1].authors)\r\n\t}, [listOfSongs])\r\n\t\r\n\tfunction setQueueInSongList() {\r\n\t\tif(source !== 'no' && listOfSongs.length !== 0){\r\n\t\t\tsetCurrentSongQueue(listOfSongs)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tconst listSongsIds = listOfSongs.map(song => song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playShuffledList(e){\r\n\t\te.stopPropagation()\r\n\t\tlet newList = shuffleSongs(listOfSongs)\r\n\t\tconsole.log(newList)\r\n\t\tsetCurrentSongQueue(newList)\r\n\t\tsetCurrentSongPlaylistSource(source)\r\n\t\tconst listSongsIds = newList.map(song => song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastQueue: {\r\n\t\t\t\timage: source.image,\r\n\t\t\t\tname: source.name,\r\n\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\tsource: source.source\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetCurrentSong(newList[0].id)\r\n\t\tplaySong()\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className=\"SongList\" onClick={setQueueInSongList}>\r\n\t\t\t{title.length !== 0 ? <TitleWithMoreBtn title={title} func={() => setShowMoreSongs(!showMoreSongs)} boolVal={showMoreSongs} lenOfList={listOfSongs.length} /> : null}\r\n\t\t\t{showSearch?<SearchBar value = {searchValue} setValue = {setSearchValue} allFoundSongs = {displaySongs} setAllFoundSongs = {setDisplaySongs} defaultSearchMode = {\"songs\"} defaultSongsListValue = {listOfSongs} inputText = {\"Search for songs\"}/>:null}\r\n\t\t\t{/* {showControls?\r\n\t\t\t\t<div className = \"listControlButtons\">\r\n\t\t\t\t\t<button className = \"standartButton\"><BsPlayFill /></button>\r\n\t\t\t\t\t<button className = \"standartButton\" onClick = {playShuffledList}><TiArrowShuffle /></button>\r\n\t\t\t\t</div> :null\r\n\t\t\t} */}\r\n\t\t\t{displaySongs.map((song, index) => {\r\n\t\t\t\tif (title.length !== 0) {\r\n\t\t\t\t\tif (showMoreSongs) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (index < 5) {\r\n\t\t\t\t\t\t\treturn <span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t<div style = {{display:\"flex\", justifyContent:'center'}}>{listOfSongs.length === 0?displayIfEmpty:null}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const CustomizeAlbum = ({ playlist }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(playlist.name)\r\n\tconst [playlistCover, setPlaylistCover] = useState(playlist.image)\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(playlist.authors)\r\n\tconst [releaseDate, setReleaseDate] = useState(playlist.creationDate)\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState(playlist.songs)\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(playlist.isAlbum?1:0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(playlist.isPrivate ? 1 : 0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(playlist.imageColors)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPlaylistName(playlist.name)\r\n\t\tsetPlaylistCover(playlist.image)\r\n\t\tsetChosenAuthors(playlist.authors)\r\n\t}, [playlist.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (songsSearch.length === 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tconsole.log(songId)\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetLoadingSongs(false)\r\n\t\t\t\tsetAllSongs(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t}\r\n\t}, [songsSearch])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend => { if (friend.status === 'added') return friend.uid })\r\n\t\tconst response = currentUser.isAdmin ?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue) :\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (chosenAuthors.length > playlist.authors.length) {\r\n\t\t\tconst newAuthors = chosenAuthors.filter(author => { return !playlist.authors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(playlist.id)\r\n\t\t\t\tconsole.log(authorPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(chosenAuthors.length < playlist.authors.length){\r\n\t\t\tconst newAuthors = playlist.authors.filter(author => { return !chosenAuthors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tconst filteredPlaylists = authorPlaylists.filter(playlistId => playlistId !== playlist.id)\r\n\t\t\t\tconsole.log(filteredPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: filteredPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfirestore.collection('playlists').doc(playlist.id).update(\r\n\t\t\t{\r\n\t\t\t\tid: playlist.id,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: playlist.listens,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:playlist.subscribers,\r\n\t\t\t\tisAlbum:playlistStatus === 1,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === 1\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\t// console.log([5, 4, 2, 1])\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<SearchBar value = {authorsInputValue} setValue = {setAuthorsInputValue} setResultAuthorList = {setAllAuthors} defaultSearchMode = {'authors'} inputText = {\"Search for authors\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<SearchBar value = {songsSearch} setValue = {setSongsSearch} setAllFoundSongs = {setAllSongs} defaultSearchMode = {'songs'} inputText = {\"Search for songs\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<SongList listOfSongs={allSongs} source={'no'} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// allSongs.map((data, index) => {\r\n\t\t\t\t\t\t\t// return (\r\n\t\t\t\t\t\t\t// \t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Update playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const addAuthorToLibrary = async (authorData , currentUser) => {\r\n\tconst addedAuthors = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedAuthors\r\n\taddedAuthors.push(authorData.uid)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedAuthors: addedAuthors\r\n\t})\r\n\tlet subscribers = authorData.subscribers\r\n\tsubscribers++\r\n\tfirestore.collection('users').doc(authorData.uid).update({\r\n\t\tsubscribers: subscribers\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport default function addFriend(friendData, currentUser){\r\n\tconst updatedDataForFriend = friendData.friends\r\n\tconst updatedDataForCurrentUser = currentUser.friends\r\n\tupdatedDataForFriend.push({status:'requested', uid:currentUser.uid})\r\n\tupdatedDataForCurrentUser.push({status:'awaiting', uid:friendData.uid})\r\n\r\n\tfirestore.collection('users').doc(friendData.uid).update({\r\n\t\tfriends:updatedDataForFriend\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends:updatedDataForCurrentUser\r\n\t})\r\n\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport displayDate from '../../functions/display/displayDate'\r\n\r\nexport const LastSeen = ({userUID}) => {\r\n\tconst [lastSeen, setLastSeen] = useState(\"\")\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t\tif(doc.data().online === undefined) setLastSeen(\"offline\")\r\n\t\t\t\telse if(!isOnline) setLastSeen(\"last seen \" + displayDate(doc.data().online, 3))\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<span>Online</span>:<span>{lastSeen}</span>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const  addPlaylistToLibrary = async(playlistData, currentUser) => {\r\n\tconst addedPlaylists = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedPlaylists\r\n\taddedPlaylists.push(playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists: addedPlaylists\r\n\t})\r\n\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:++playlistData.subscribers\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const removePlaylistFromLibrary = async (playlistData, currentUser) =>{\r\n\tconst filteredPlaylists = currentUser.addedPlaylists.filter(id=>id !== playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists:filteredPlaylists\r\n\t})\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:--playlistData.subscribers\r\n\t})\r\n}","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const GeneralSettings = () => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"GeneralSettings\">\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport {FiMenu} from 'react-icons/fi'\r\nimport {IoIosArrowForward} from 'react-icons/io'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport \"../../styles/Settings.css\"\r\nimport { GeneralSettings } from './GeneralSettings'\r\nexport const SettingsList = () => {\r\n\tconst {setContent} = useModal()\r\n\tconst settingsList = [\r\n\t\t{\r\n\t\t\tid:0, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<GeneralSettings/>,\r\n\t\t\tcolor:'var(--red)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:1, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--lightBlue)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:2, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--green)'\r\n\t\t}\r\n\t]\r\n\treturn (\r\n\t\t<div className = \"SettingsList\">\r\n\t\t\t{settingsList.map(settingItem=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className = \"SettingItem\" style = {{color:settingItem.color}} key = {settingItem.id} onClick = {()=>setContent(settingItem.to)}>\r\n\t\t\t\t\t\t<div className = \"settingItemIconAndTitle\">\r\n\t\t\t\t\t\t\t{settingItem.icon}\r\n\t\t\t\t\t\t\t<h3>{settingItem.title}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IoIosArrowForward/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiArrowRight } from 'react-icons/fi'\r\n\r\nexport const SeeMoreRoundButton = ({text = \"See more\", ...restProps}) => {\r\n\treturn (\r\n\t\t<div className = \"SeeMoreRoundButton\" {...restProps}>\r\n\t\t\t<button>\r\n\t\t\t\t<FiArrowRight/>\r\n\t\t\t</button>\r\n\t\t\t<span>{text}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\n\r\nexport const TinyPersonsList = ({listOfPeople, title}) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{title?<h2 style = {{marginTop:'0', marginBottom:'7px'}}>{title}</h2>:null}\r\n\t\t\t{listOfPeople.map(person=>{\r\n\t\t\t\treturn <PersonTiny data = {person}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { FiHeadphones, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const AlbumInfo = ({ album }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisAlbum, setFriendsThatHaveThisAlbum] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisAlbum() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisAlbum([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (friend.addedPlaylists.includes(album.id)) setFriendsThatHaveThisAlbum(prev => [...prev, friend])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisAlbum()\r\n\t}, [album.uid])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${album.image})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<span style={{ opacity: \".5\", fontWeight: 500, fontSize: '.7em' }}>{album.isAlbum ? \"Album\" : \"Playlist\"}</span>\r\n\t\t\t\t\t<h3 style={{ color: album.imageColors[1] }}>{album.name}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', opacity: '0.6', fontSize: '.9em', position: \"relative\" }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{album.listens}<FiHeadphones /></p>\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{album.subscribers} <FiUserPlus /></p>\r\n\t\t\t\t\t<span>{displayDate(album.creationDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisAlbum.length > 0 ? 'Friends subscribed' : 'None of your friends subscribed'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex' }}>\r\n\t\t\t\t\t{friendsThatHaveThisAlbum.length > 0 ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{friendsThatHaveThisAlbum.map((person, index) => {\r\n\t\t\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{friendsThatHaveThisAlbum.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisAlbum} title={`Friends subscribed to ${album.name}`} />)} /> : null}\r\n\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t<button className=\"shareBtn\" style={{ minHeight: '35px', background: album.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={album} whatToShare={'playlist'} />) }}>Share</button>}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { FiHeadphones, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const AuthorInfo = ({ author }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisAuthor] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisAuthor() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisAuthor([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (author.isAuthor) {\r\n\t\t\t\tif (friend.addedAuthors.includes(author.uid)) setFriendsThatHaveThisAuthor(prev => [...prev, friend])\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (friend.friends.find(person=>person.uid === author.uid)) setFriendsThatHaveThisAuthor(prev => [...prev, friend])\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisAuthor()\r\n\t}, [author.uid])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${author.photoURL})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column-reverse' }}>\r\n\t\t\t\t\t<h3 style={{ color: author.imageColors[1] }}>{author.displayName}{author.isVerified ? <ImCheckmark style={{ color: author.imageColors[0], width: '15px', height: \"15px\", marginLeft: '5px' }} /> : null}</h3>\r\n\t\t\t\t\t<span style={{ opacity: \".5\", fontWeight: 500, fontSize: '.7em' }}>{author.isAuthor ? \"Author\" : \"User\"}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', opacity: '0.6', fontSize: '.9em', position: \"relative\" }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{author.numberOfListenersPerMonth}<FiHeadphones /></p>\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{author.subscribers} <FiUserPlus /></p>\r\n\t\t\t\t\t<span>{displayDate(author.regDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisSong.length > 0 ? 'Friends subscribed' : 'None of your friends subscribed'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex' }}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 0 ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{friendsThatHaveThisSong.map((person, index) => {\r\n\t\t\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{friendsThatHaveThisSong.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisSong} title={`Friends subscribed to ${author.displayName}`} />)} /> : null}\r\n\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t<button className=\"shareBtn\" style={{ minHeight: '35px', background: author.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={author} whatToShare={'author'} />) }}>Share</button>}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport { FiFlag, FiInfo, FiShare } from 'react-icons/fi'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nimport { AlbumInfo } from '../Info/AlbumInfo';\r\nimport { AuthorInfo } from '../Info/AuthorInfo';\r\nexport const AuthorMoreWindow = ({data}) => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"AuthorMoreWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => {setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(data.authors !== undefined ? <AlbumInfo album={data} /> : <AuthorInfo author={data} />) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useAlbumAuthors = (data) => {\r\n\tconst [albumAuthors, setAlbumAuthors] = useState([])\r\n\tconst [authorsImages, setAuthorsImages] = useState([])\r\n\tasync function fetchAuthorsData() {\r\n\t\tif (data?.authors !== undefined) {\r\n\t\t\tconst ids = data.authors.map(author => author.uid)\r\n\t\t\tconst authrorsData = await firestore.collection(\"users\").where(\"uid\", \"in\", ids).get()\r\n\t\t\tconst tempArrayAuthors = []\r\n\t\t\tconst tempArrayImages = []\r\n\t\t\tauthrorsData.docs.forEach((a) => {\r\n\t\t\t\ttempArrayAuthors.push(a.data())\r\n\t\t\t\ttempArrayImages.push(a.data().photoURL)\r\n\t\t\t})\r\n\t\t\tsetAlbumAuthors(tempArrayAuthors)\r\n\t\t\tsetAuthorsImages(tempArrayImages)\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [data?.id])\r\n\r\n\treturn [albumAuthors, authorsImages]\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiEdit2, FiFlag, FiHeadphones, FiInfo, FiMoreVertical, FiPlusCircle, FiSettings, FiShare, FiTrash, FiUserCheck, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { SmallImages } from './SmallImages'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { IoMdExit } from 'react-icons/io'\r\nimport { firestore } from '../../firebase'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { CgCheckO, CgLock } from 'react-icons/cg'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { ChatWithFriendButton } from './ChatWithFriendButton'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai'\r\nimport { BiDoorOpen, BiLoaderAlt } from 'react-icons/bi'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { CustomizeAlbum } from '../AlbumPage/CustomizeAlbum'\r\nimport { addAuthorToLibrary } from '../../functions/add/addAuthorToLibrary'\r\nimport addFriend from '../../functions/add/addFriend'\r\nimport { LastSongListened } from './LastSongListened'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { addPlaylistToLibrary } from '../../functions/add/addPlaylistToLibrary'\r\nimport { removePlaylistFromLibrary } from '../../functions/other/removePlaylistFromLibrary'\r\nimport { SettingsList } from '../Settings/SettingsList'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { AuthorMoreWindow } from '../Windows/AuthorMoreWindow'\r\nimport { AlbumInfo } from '../Info/AlbumInfo'\r\nimport { AuthorInfo } from '../Info/AuthorInfo'\r\nimport {deleteFriend} from '../../functions/delete/deleteFriend'\r\nimport {useAlbumAuthors} from '../../hooks/useAlbumAuthors'\r\nimport { deletePlaylist } from '../../functions/delete/deletePlaylist'\r\nimport { quitPlaylist } from '../../functions/other/quitPlaylist'\r\nexport const Header = ({ data, headerColors }) => {\r\n\tconst { isMobile } = useScreen()\r\n\tconst { displayAuthors} = useSong()\r\n\tconst [albumAuthors, authorsImages] = useAlbumAuthors(data)\r\n\tconst { currentUser, logout } = useAuth()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tconst isFriend = currentUser.friends.find(friend => (friend.uid === data.uid && friend.status === 'added'))\r\n\tconst moreWindowRef = useRef(null)\r\n\tuseOutsideClick(moreWindowRef, setOpenMoreWindow)\r\n\r\n\r\n\t\r\n\r\n\r\n\r\n\tfunction displayCreationDateIfExists() {\r\n\t\treturn data.creationDate !== undefined ?\r\n\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t<span>{displayDate(data.creationDate)}</span>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction isAlbumOrIsAuthor() {\r\n\t\treturn data.authors !== undefined ? data.isAlbum ? <h5>Album</h5> : <h5>Playlist</h5> : data.isAuthor ? <h5>Author</h5> : <h5>User {data.authors === undefined && isFriend ? <LastSeen userUID={data.uid} /> : null}</h5>\r\n\t}\r\n\r\n\tfunction showCreatorsIfExist() {\r\n\t\treturn data.authors !== undefined ?\r\n\t\t\t<div className=\"headerAuthorsImagesAndNames\">\r\n\t\t\t\t<SmallImages imagesList={authorsImages} borderColor={headerColors[2]} />\r\n\t\t\t\t<div className=\"headerAuthors\">{displayAuthors(albumAuthors, \", \")}</div>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction findIfIsVerified() {\r\n\t\treturn data.isVerified ? <ImCheckmark style={{ color: headerColors[0] }} /> : null\r\n\t}\r\n\r\n\r\n\tfunction whatButtonToRender() {\r\n\t\tif (data.authors) {\r\n\t\t\tif (currentUser.ownPlaylists.includes(data.id) && data.authors.length === 1) return <button onClick={() => openConfirm(\"Are you sure you want to DELETE this playlist forever?!\", \"Yes, pretty sure\", \"No, I Don't!\", () => { deletePlaylist(data.id); closeConfirm() })}><Hint text={\"delete playlist\"} direction={\"bottom\"} /><FiTrash /></button>\r\n\t\t\telse if (currentUser.ownPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to quit this playlist?\", \"Yes, pretty sure\", \"No, I Don't!\", () => { quitPlaylist(data.id); closeConfirm() })}><Hint text={\"quit playlist\"} direction={\"bottom\"} /><BiDoorOpen/></button>\r\n\t\t\telse if (currentUser.addedPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to remove this playlist from library?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { removePlaylistFromLibrary(data, currentUser); closeConfirm() })}><Hint text={\"remove playlist from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse return <button onClick={() => addPlaylistToLibrary(data, currentUser)}><Hint text={\"add playlist\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (currentUser.addedAuthors.includes(data.uid)) return <button><Hint text={\"remove author from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse if (currentUser.uid === data.uid) return <button onClick={() => { toggleModal(); setContent(<SettingsList />) }}><Hint text={\"settings\"} direction={\"bottom\"} /><FiSettings /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => friend.uid === data.uid && friend.status === 'added')) return <button onClick={() => openConfirm(\"Are you sure you want to remove this person from friend list?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { deleteFriend(currentUser, data); closeConfirm() })}><Hint text={\"remove from friend list\"} direction={\"bottom\"} /><FiUserCheck /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => ((friend.uid === data.uid) && (friend.status === 'awaiting')))) return <button onClick={addFriend}><Hint text={\"waiting for response\"} direction={\"bottom\"} /><BiLoaderAlt style={{ animation: 'loading 1s infinite linear' }} /></button>\r\n\t\t\telse if (!data.isAuthor) return <button onClick={() => addFriend(data, currentUser)}><Hint text={\"add friend\"} direction={\"bottom\"} /><FiUserPlus /></button>\r\n\t\t\telse return <button onClick={() => addAuthorToLibrary(data, currentUser)}><Hint text={\"subscribe\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findIfIsPrivate() {\r\n\t\treturn data.isPrivate ? <CgLock /> : null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Header\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[2]}, ${headerColors[0]})` } : { background: 'var(--yellowAndPinkGrad)' }}>\r\n\t\t\t<div className=\"headerBtns\" style={{ background: headerColors[2] }}>\r\n\t\t\t\t<BackBtn />\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div className=\"headerBackBtn\">\r\n\t\t\t\t\t\t{whatButtonToRender()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerMoreBtn\" ref={moreWindowRef}>\r\n\t\t\t\t\t\t<button onClick={!isMobile ? () => setOpenMoreWindow(!openMoreWindow) : () => { toggleModal(); setContent(<AuthorMoreWindow data={data} />) }}>\r\n\t\t\t\t\t\t\t<Hint text={\"more\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t\t\t\t\t\t\t{(data.authors && data.authors.find(person => person.uid === currentUser.uid)) || (data.authors && currentUser.isAdmin) ? <div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<CustomizeAlbum playlist={data} />) }}><FiEdit2 />Edit</div> : null}\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(data.authors !== undefined ? <AlbumInfo album={data} /> : <AuthorInfo author={data} />) }}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.uid === data.uid ?\r\n\t\t\t\t\t\t<button onClick={logout} >\r\n\t\t\t\t\t\t\t<Hint text={\"quit\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<IoMdExit />\r\n\t\t\t\t\t\t</button> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorsImage\" style={data.authors === undefined ? { animation: \"floatingBorderRadius 10s infinite ease-in-out\", backgroundImage: `url(${data.photoURL})` } : { backgroundImage: `url(${data.image})` }}>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorInfo\">\r\n\t\t\t\t<div className=\"headerAuthorsName\">\r\n\t\t\t\t\t{isAlbumOrIsAuthor()}\r\n\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', margin: \"2px 0 10px 0\" }}>\r\n\t\t\t\t\t\t<h1>{data.displayName || data.name}</h1>\r\n\t\t\t\t\t\t{findIfIsVerified()}\r\n\t\t\t\t\t\t{findIfIsPrivate()}\r\n\t\t\t\t\t\t{/* <LastSongListened data = {data} loading = {loading}/> */}\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showCreatorsIfExist()}\r\n\r\n\t\t\t\t<div className=\"headerListenersAndSubs\">\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t\t\t<Hint text={(data.listens ?? data.numberOfListenersPerMonth) + ' listeners per month'} style = {{fontSize:\"0.8em\"}}/>\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.listens ?? data.numberOfListenersPerMonth)}</span>\r\n\t\t\t\t\t\t<FiHeadphones />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t\t\t<Hint text={data.subscribers + ' subscribers'} style = {{fontSize:\"0.8em\"}}/>\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.subscribers)}</span>\r\n\t\t\t\t\t\t<FiUserPlus />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{displayCreationDateIfExists()}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isFriend ? <ChatWithFriendButton data={data} color={headerColors[3]} /> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const deletePlaylist = (playlistId) => {\r\n\tfirestore.collection(\"users\").where(\"addedPlaylists\", \"array-contains\", playlistId).get().then((listOfPeople)=>{\r\n\t\tlistOfPeople.docs.forEach(person=>{\r\n\t\t\tconst personFilteredPlaylists = person.data().addedPlaylists.filter(pId => pId !== playlistId)\r\n\t\t\tfirestore.collection('users').doc(person.data().uid).update({\r\n\t\t\t\taddedPlaylists:personFilteredPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\tfirestore.collection(\"users\").where(\"ownPlaylists\", \"array-contains\", playlistId).get().then((listOfPeople)=>{\r\n\t\tlistOfPeople.docs.forEach(person=>{\r\n\t\t\tconst personFilteredPlaylists = person.data().addedPlaylists.filter(pId => pId !== playlistId)\r\n\t\t\tfirestore.collection('users').doc(person.data().uid).update({\r\n\t\t\t\townPlaylists:personFilteredPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\tfirestore.collection('search').doc(playlistId).delete().then(()=>{\r\n\t\tfirestore.collection('playlists').doc(playlistId).delete()\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const deleteFriend = (currentUser, data) => {\r\n\tlet filteredUserFriends = currentUser.friends.filter(friend => friend.uid !== data.uid)\r\n\tlet filteredOtherUserFriends = data.friends.filter(friend => friend.uid !== currentUser.uid)\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends: filteredUserFriends\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(data.uid).update({\r\n\t\tfriends: filteredOtherUserFriends\r\n\t})\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { useHistory } from 'react-router-dom'\r\nexport const AlbumPage = () => {\r\n\tconst match = useRouteMatch('/albums/:albumId')\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { albumId } = match.params\r\n\tconst [albumData, setAlbumData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst history = useHistory()\r\n\tasync function fetchAlbumsData() {\r\n\t\tfirestore.collection(\"playlists\").doc(albumId).onSnapshot(doc => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\tsetAlbumData(doc.data())\r\n\t\t\t\tsetHeaderColors(doc.data().imageColors)\r\n\t\t\t} else {\r\n\t\t\t\thistory.push('/not-found')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif (albumData.length !== 0) {\r\n\t\t\talbumData.songs.map(async songId => {\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev => [...prev, albumSong])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAlbumsData()\r\n\t}, [albumId, firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSongsInAlbum()\r\n\t}, [albumData])\r\n\r\n\treturn (\r\n\t\t<div className=\"AlbumPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{\r\n\t\t\t\tloading ? <LoadingCircle top={'50%'} /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header data={albumData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t\t<SongList listOfSongs={playlistSongs} source={{ source: `/albums/${albumData.id}`, name: albumData.name, image: albumData.image, songsList: playlistSongs }} showSearch defaultSearchMode={\"songs\"} />\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/find/findVariantsOfName'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const AddPlaylist = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(\"\")\r\n\tconst [playlistCover, setPlaylistCover] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin?[{uid:currentUser.uid, photoURL:currentUser.photoURL, displayName:currentUser.displayName}]:[])\r\n\tconst [releaseDate, setReleaseDate] = useState(currentUser.isAdmin?\"\":new Date().toString())\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState([])\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\t\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend=>{if(friend.status === 'added') return friend.uid})\r\n\t\tconst response = currentUser.isAdmin?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue):\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tfirestore.collection('playlists').doc(uid).set(\r\n\t\t\t{\r\n\t\t\t\tid: uid,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:0,\r\n\t\t\t\tisAlbum:playlistStatus,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\t\tchosenAuthors.forEach(async author=>{\r\n\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\tconst authorData = authorRef.data()\r\n\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\tauthorPlaylists.push(uid)\r\n\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\townPlaylists:authorPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\tplace:'playlists',\r\n\t\t\tuid:uid,\r\n\t\t\tvariantsOfName:findVariantsOfName(playlistName)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<form onSubmit={addPlaylistToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={()=>timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid?null:removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<SearchBar value = {songsSearch} setValue = {setSongsSearch} setAllFoundSongs = {setAllSongs} defaultSearchMode = {'songs'}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\tallSongs.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor?\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t</label>:null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../../firebase'\r\nexport const DownloadPhotoButton = ({setErrorMessage, setImageLocalPath, downloadedPhoto, setDownloadedPhoto, place, btnText = \"Download song cover\"}) => {\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/' || place === 'chatCovers/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<label className=\"downloadFile\">\r\n\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t{btnText}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"photoLoadLine\" style={downloadedPhoto !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, place, setDownloadedPhoto)} />\r\n\t\t</label>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const FullScreenLoading = ({loading}) => {\r\n\treturn (\r\n\t\t<div className = \"FullScreenLoading\" style = {loading?{}:{opacity:'0', visibility:'hidden'}}>\r\n\t\t\t<img loading = \"lazy\" src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/find/findVariantsOfName'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FullScreenLoading} from '../Loading/FullScreenLoading'\r\nimport {SearchBar} from '../Basic/SearchBar'\r\nimport { transformLyricsToArrayOfObjects } from '../../functions/other/transformLyricsToArrayOfObject'\r\nexport const AddSong = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(\"\")\r\n\tconst [songCover, setSongCover] = useState(\"\")\r\n\tconst [songSrc, setSongSrc] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(\"\")\r\n\tconst [lyrics, setLyrics] = useState(\"\")\r\n\tconst [imageLocalPath, setImageLocalPath] = useState(\"\")\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [showSuccessMessage, setShowSuccessMessage] = useState(false)\r\n\tconst [loadingSong, setLoadingSong] = useState(false)\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/') {\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\r\n\tasync function addSongToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tsetLoadingSong(true)\r\n\t\tlet uid = getUID()\r\n\t\tsetErrorMessage(\"\")\r\n\t\tif (songName.length === 0) setErrorMessage(\"Song has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Song has to have at least 1 author')\r\n\t\telse if (songCover.length === 0) setErrorMessage('You didn\\'t load song cover')\r\n\t\telse if (songSrc.length === 0) setErrorMessage('You didn\\'t load song file')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a song')\r\n\t\telse {\r\n\t\t\tfirestore.collection('songs').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tsongSrc: songSrc,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\tcover: songCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\treleaseDate: releaseDate,\r\n\t\t\t\t\tlyrics: transformLyricsToArrayOfObjects(lyrics),\r\n\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetSongCover('')\r\n\t\t\t\tsetSongName('')\r\n\t\t\t\tsetSongSrc('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetShowSuccessMessage(true)\r\n\t\t\t\tsetImageColors([])\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetErrorMessage(err)\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t})\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\tauthorSongs.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\t\tplace:'songs',\r\n\t\t\t\tuid:uid,\r\n\t\t\t\tvariantsOfName:findVariantsOfName(songName)\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(showSuccessMessage){\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tsetShowSuccessMessage(false)\r\n\t\t\t}, 2000)\r\n\t\t}\r\n\t}, [showSuccessMessage])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<FullScreenLoading loading = {loadingSong}/>\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={addSongToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter song name\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song authors</h3>\r\n\t\t\t\t\t<SearchBar value = {authorsInputValue} setValue = {setAuthorsInputValue} setResultAuthorList = {setAllAuthors} defaultSearchMode = {'authors'}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{/* <label>\r\n\t\t\t\t\t<h3>Add to albums and playlists</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} onKeyDown={findAuthors} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t</label> */}\r\n\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\r\n\t\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage = {setErrorMessage} setImageLocalPath = {setImageLocalPath} downloadedPhoto = {songCover} setDownloadedPhoto = {setSongCover} place = {'songsImages/'}/>\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload song file\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={songSrc !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songs/', setSongSrc)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" placeholder={\"Add song lyrics\"} value = {lyrics} onChange={(e) => setLyrics(e.target.value)}></textarea>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">{!showSuccessMessage?\"Add song\":\"Song Successfully added. Congrats!\"}</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Slider = ({pages, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"Slider\">\r\n\t\t\t{pages.map((pageName, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = {\"sliderItem \" + (index === currentPage?\"current\":\"\")} key = {index} onClick = {()=>setCurrentPage(index)}>\r\n\t\t\t\t\t\t{pageName}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { FiPlus} from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\nimport { AddSong } from '../AddWindow/AddSong'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const AddWindow = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAddSongWindow, setOpenAddSongWindow] = useState(false)\r\n\tconst [currentSliderPage, setCurrentSliderPage] = useState(0)\r\n\tconst sliderPages = [<AddSong/>, <AddPlaylist/>]\r\n\treturn (((currentUser.isAdmin) || (data.isAuthor)) && (data.uid === currentUser.uid)) ?\r\n\t\t(\r\n\t\t\t<div className=\"AddSong\">\r\n\t\t\t\t<button onClick={() => setOpenAddSongWindow(!openAddSongWindow)} style={openAddSongWindow ? { background: 'var(--red)' } : {}} className = \"openAddSongWindowBtn\">\r\n\t\t\t\t\t<FiPlus style={openAddSongWindow ? { transform: 'rotate(45deg)' } : {}} />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"addSongWindow\" style={openAddSongWindow ? { display: 'flex' } : {}}>\r\n\t\t\t\t\t<Slider pages = {['Song', 'Playlist']} currentPage = {currentSliderPage} setCurrentPage = {setCurrentSliderPage}/>\r\n\t\t\t\t\t{sliderPages[currentSliderPage]}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) :\r\n\t\tnull\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiX } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const FriendRequestItem = ({person, addFriend, rejectFriend}) => {\r\n\treturn (\r\n\t\t<div className = 'FriendRequestItem'>\r\n\t\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t\t<div className = \"friendRequestImageAndName\">  \r\n\t\t\t\t\t<div className=\"requestImage\">\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={person.photoURL} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3>{person.displayName}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"requestButtons\">\r\n\t\t\t\t<button style = {{color:'var(--green)'}} onClick = {()=>addFriend(person.uid)}>\r\n\t\t\t\t\t<FiCheck/>\r\n\t\t\t\t\t<span>Add</span> \r\n\t\t\t\t</button>\r\n\t\t\t\t<button style = {{color:'var( --lightRed)'}} onClick = {()=>rejectFriend(person.uid)}>\r\n\t\t\t\t\t<FiX/>\r\n\t\t\t\t\t<span>Reject</span> \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FriendRequestItem } from './FriendRequestItem'\r\n\r\nexport const FriendRequest = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendRequests, setFriendRequests] = useState([])\r\n\tfunction fetchFriendRequests(){\r\n\t\tconst tempArray = []\r\n\t\tcurrentUser.friends.forEach(async (friendObj, i)=>{\r\n\t\t\tif(friendObj.status === 'requested'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\ttempArray.push(personData)\r\n\t\t\t\tif(i === currentUser.friends.length - 1) setFriendRequests(tempArray)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendRequests()\r\n\t}, [JSON.stringify(currentUser.friends)])\r\n\r\n\tfunction addFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"added\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"added\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\r\n\t\tsetFriendRequests(arrOfReqs=>arrOfReqs.filter(el=>el.uid !== uid))\r\n\t}\r\n\r\n\tfunction rejectFriend(uid){\r\n\t\tconst friendsList = currentUser.friends.filter(obj=>obj.uid !== uid)\r\n\t\tfirestore.collection('users').doc(uid).get().then(res=>{\r\n\t\t\tconst otherUserFriendList = res.data().friends.filter(obj=>obj.uid !== currentUser.uid)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tfriends:friendsList\r\n\t\t\t})\r\n\t\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\t\tfriends:otherUserFriendList\r\n\t\t\t})\r\n\t\t\tsetFriendRequests(arrOfReqs=>arrOfReqs.filter(el=>el.uid !== uid))\r\n\t\t})\r\n\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{friendRequests.map((person, index)=>{\r\n\t\t\t\treturn <FriendRequestItem person = {person} key = {index} addFriend = {addFriend} rejectFriend = {rejectFriend}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\nimport { firestore } from '../../firebase';\r\nimport { PersonTinyVerticalItem } from './PersonTinyVerticalItem'\r\n\r\nexport const PersonTinyList = ({data, title}) => {\r\n\tconst [listOfPeople, setListOfPeople] = useState([])\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(listOfPeople.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfPeople])\r\n\r\n\tfunction fetchFriends(){\r\n\t\tsetListOfPeople([])\r\n\t\tdata.friends.forEach(async personObj => {\r\n\t\t\tif(personObj.status === 'added'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(personObj.uid).get()).data()\r\n\t\t\t\tsetListOfPeople(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetListOfPeople([])\r\n\t\tfetchFriends()\r\n\t}, [data.uid])\r\n\treturn listOfPeople.length > 0? (\r\n\t\t<div className = 'PersonTinyList'>\r\n\t\t\t{title && <h2>{title}</h2>}\r\n\t\t\t<div style = {{position:'relative'}}>\t\r\n\t\t\t\t<div className=\"personTinyListWrapper\" ref = {wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t\t{listOfPeople.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { firestore } from \"../../firebase\";\r\n\r\nexport const findAuthorsAlbums = async (authorsData, setAuthorsPlaylists, currentUserUID, setLoading) => {\r\n\tsetAuthorsPlaylists([])\r\n\tconst tempArray = []\r\n\tif (authorsData.ownPlaylists !== undefined && authorsData.ownPlaylists.length !== 0) {\r\n\t\tauthorsData.ownPlaylists.forEach(async (playlistId, index) => {\r\n\t\t\tconst playlistData = (await firestore.collection(\"playlists\").doc(playlistId).get()).data()\r\n\t\t\tif (playlistData && (!playlistData.isPrivate || (authorsData.uid === currentUserUID && playlistData.isPrivate))) tempArray.push(playlistData)\r\n\t\t\tif (index === authorsData.ownPlaylists.length-1) {\r\n\t\t\t\ttempArray.sort((a, b) => new Date(b.creationDate).getTime() - new Date(a.creationDate).getTime())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetAuthorsPlaylists(tempArray)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}","import React, { useEffect } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const usePlaylistSongs = (playlist, playlistSongs, setPlaylistSongs) => {\r\n\tconst {currentSongPlaylistSource, playSong, setCurrentSongQueue, setCurrentSong, setPlay, songRef, setCurrentSongInQueue, setCurrentSongPlaylistSource} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif (playlist.length !== 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev => [...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e) {\r\n\t\te.preventDefault()\r\n\t\tif (currentSongPlaylistSource.name === playlist.name) {\r\n\t\t\tplaySong()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (playlistSongs.length) {\r\n\t\t\tconst source = { source: `/albums/${playlist.id}`, name: playlist.name, image: playlist.image, songsList: playlistSongs }\r\n\t\t\tconst listSongsIds = playlistSongs.map(song => song.id)\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastSongPlayed: playlistSongs[0].id,\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn playChosenPlaylist\r\n}\r\n","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const DeletedPlaylist = () => {\r\n\treturn (\r\n\t\t<div style={{ textDecoration: 'none' }} className=\"playlistWrapper\">\r\n\t\t\t<div className=\"playlistItem\" style={{ background: `var(--playlistsColor)`, display:'flex', justifyContent:'center', alignItems:'center' }}>\r\n\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" style = {{width:'70px', height:'70px', filter:'grayscale(80%)'}}/>\r\n\t\t\t</div>\r\n\t\t\t<h4 style={{ display: 'flex', alignItems: 'center', margin: '5px 0' }}>\r\n\t\t\t\tPlaylist was deleted\r\n\t\t\t</h4>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { DeletedPlaylist } from '../Playlist/DeletedPlaylist'\r\nexport const PlaylistItem = ({playlist = null, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst playlistDate = new Date(playlist?.creationDate)\r\n\tconst {isMobile} = useScreen()\r\n\tconst {currentSongPlaylistSource, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\treturn playlist !== null?(\r\n\t\t<Link to={`/albums/${playlist.id}`} style = {{textDecoration:'none'}} className = \"playlistWrapper\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAlbums} setListOfChosenItems = {setListOfChosenAlbums} itemId = {playlist.id}/>\r\n\t\t\t<div className=\"playlistItem\" style = {{backgroundImage:`url(${playlist.image})`}}>\r\n\t\t\t\t{!playlist.image?<h1>{shortWord(playlist.name, 13)}</h1>:null}\r\n\t\t\t\t{/* {!playlist.isAlbum?<h2>{playlist.name}</h2>:null} */}\r\n\t\t\t\t<button onClick = {playSongsInPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<h4 style = {{display:'flex', alignItems:'center', margin:'5px 0'}}>\r\n\t\t\t\t{shortWord(playlist.name, isMobile?10:15)} \r\n\t\t\t\t<span style = {{fontSize:\".6em\", opacity:.6, fontWeight:'500', marginLeft:'7px'}}>\r\n\t\t\t\t\t{playlist.isAlbum?playlist.songs.length === 1?\"single\":'album':'playlist'}\r\n\t\t\t\t</span>\r\n\t\t\t</h4>\r\n\t\t\t<h5 style = {{margin:'5px 0'}}>{playlistDate.getFullYear()}</h5>\r\n\t\t</Link>\r\n\t):<DeletedPlaylist/>\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\n\r\nexport const AlbumList = ({listOfAlbums, title = \"\", loading = true, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 220\r\n\t\tsetScrollLeft(prev - 220)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 220\r\n\t\tsetScrollLeft(prev + 220)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAlbums.length > 0 && !loading){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAlbums])\r\n\treturn listOfAlbums.length > 0?\r\n\t\tloading?<LoadingCircle/>:\r\n\t\t(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAlbums.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key={index} listOfChosenAlbums = {listOfChosenAlbums} setListOfChosenAlbums = {setListOfChosenAlbums}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAuthorsAlbums } from '../../functions/find/findAuthorsAlbums'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\n\r\nexport const Playlists = ({ authorsData }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [authorsPlaylists, setAuthorsPlaylists] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsAlbums(authorsData, setAuthorsPlaylists, currentUser.uid, setLoading)\r\n\t}, [authorsData.ownPlaylists])\r\n\r\n\treturn <AlbumList listOfAlbums = {authorsPlaylists} title = {currentUser.isAuthor?\"Albums\":\"Playlists\"} loading = {loading}/>\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nfunction findSimilarArtistsNames(authorsSongsArr, authorsData, setSimilarAuthors) {\r\n\tlet peopleArray = []\r\n\tauthorsSongsArr.forEach((song) => {\r\n\t\tlet newAuthors = song.authors\r\n\t\tif (newAuthors.length !== 0) {\r\n\t\t\tpeopleArray.push(newAuthors)\r\n\t\t}\r\n\t})\r\n\tpeopleArray = peopleArray.flat()\r\n\tconst uniqueAuthorsSet = new Set(peopleArray.map(people=>people.uid).filter(id=>id!==authorsData.uid))\r\n\tconst uniqueAuthorsIdsArray = Array.from(uniqueAuthorsSet)\r\n\tconst uniqueAuthorsDataArray = []\r\n\tfor (let i = 0; i < uniqueAuthorsIdsArray.length; i++) {\r\n\t\tfor (let j = 0; j < peopleArray.length; j++) {\r\n\t\t\tif(uniqueAuthorsIdsArray[i] === peopleArray[j].uid){\r\n\t\t\t\tuniqueAuthorsDataArray.push(peopleArray[j])\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tsetSimilarAuthors(uniqueAuthorsDataArray)\r\n\treturn uniqueAuthorsDataArray\r\n}\r\n\r\nexport default async function findSimilarArtists(authorsData, setSimilarAuthors) {\r\n\tif (authorsData !== undefined && authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\tconst authorsSongsArray = []\r\n\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\tauthorsSongsArray.push(songData)\r\n\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\treturn findSimilarArtistsNames(authorsSongsArray, authorsData, setSimilarAuthors)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t}\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\n\r\nexport const AuthorItemBig = ({data, listOfChosenAuthors, setListOfChosenAuthors}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${data.uid}`} className = \"AuthorItemBig\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAuthors} setListOfChosenItems = {setListOfChosenAuthors} itemId = {data.uid}/>\r\n\t\t\t<div >\r\n\t\t\t\t<div className = \"AuthorItemBigImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={data.photoURL} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3>{data.displayName}</h3>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\n\r\nexport const AuthorsList = ({ listOfAuthors, title = \"\", listOfChosenAuthors, setListOfChosenAuthors }) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAuthors.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAuthors])\r\n\treturn listOfAuthors.length > 0?(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAuthors.map((author) => {\r\n\t\t\t\t\treturn <AuthorItemBig data={author} key={author.uid} listOfChosenAuthors = {listOfChosenAuthors} setListOfChosenAuthors = {setListOfChosenAuthors}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current !== null && wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport findSimilarArtists from '../../functions/find/findSimilarArtists'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const SimilarArtists = ({ data }) => {\r\n\tconst [similarArtists, setSimilarArtists] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSimilarArtists(data, setSimilarArtists)\r\n\t}, [data])\r\n\treturn (\r\n\t\t<AuthorsList listOfAuthors = {similarArtists} title = {\"Similar Authors\"}/>\r\n\t)\r\n}\r\n","export default function findIfSongIsNew(song){\r\n\tconst songReleaseDate = new Date(song.releaseDate)\r\n\t//1 814 400 000 - 3 weeks\r\n\tif((new Date().getTime() - songReleaseDate.getTime()) < 1814400000) return true\r\n\r\n\treturn false\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport findIfSongIsNew from '../../functions/find/findIfSongIsNew'\r\nimport { SongList } from '../Lists/SongList'\r\nexport const TopSongs = ({ authorId, authorsData, headerColors }) => {\r\n\tconst [popularSongs, setPopularSongs] = useState([])\r\n\tconst [newSongs, setNewSongs] = useState([])\r\n\r\n\tasync function findAuthorsSongs() {\r\n\t\tsetPopularSongs([])\r\n\t\tconst tempArray = []\r\n\t\tif (authorsData.isAuthor) {\r\n\t\t\tif (authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\t\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\t\ttempArray.push(songData)\r\n\t\t\t\t\tif (findIfSongIsNew(songData) && !newSongs.includes(songData)) setNewSongs(prevSongs => [...prevSongs, songData])\r\n\t\t\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\t\t\ttempArray.sort((a, b) => b.listens - a.listens)\r\n\t\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tauthorsData.addedSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\ttempArray.unshift(songData)\r\n\t\t\t\tif(index === authorsData.addedSongs.length - 1){\r\n\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsSongs()\r\n\t\tsetNewSongs([])\r\n\t}, [authorsData.ownSongs])\r\n\r\n\treturn authorsData.isAuthor ?\r\n\t\t(<div className=\"TopSongs\">\r\n\t\t\t<SongList listOfSongs={newSongs} source={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: newSongs }} isNewSong />\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={\"Popular Songs\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t</div>) :\r\n\t\t(\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName + \"'s Library\", image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={authorsData.displayName + \"'s Library\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { AddWindow } from '../components/AdminAndAuthor/AddWindow'\r\nimport { FriendRequest } from '../components/AuthorPage/FriendRequest'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { PersonTinyList } from '../components/AuthorPage/PersonTinyList'\r\nimport { Playlists } from '../components/AuthorPage/Playlists'\r\nimport { SimilarArtists } from '../components/AuthorPage/SimilarArtists'\r\nimport { TopSongs } from '../components/AuthorPage/TopSongs'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport \"../styles/AuthorPage.css\"\r\nexport const AuthorPage = () => {\r\n\tconst match = useRouteMatch('/authors/:authorId')\r\n\tconst {currentUser} = useAuth()\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { authorId } = match.params\r\n\tconst [authorsData, setAuthorsData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAuthorsData() {\r\n\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAuthorsData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t\t setLoading(false)\r\n\t\t\t} else {\r\n\t\t\t\t console.log(\"No such document!\");\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [authorId])\r\n\treturn (\r\n\t\t<div className=\"AuthorPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{loading?\r\n\t\t\t\t<LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data={authorsData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t{currentUser.uid === authorsData.uid?<FriendRequest/>:null} \r\n\t\t\t\t\t<AddWindow data={authorsData} />\r\n\t\t\t\t\t<TopSongs author={authorId} authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{authorsData.friends && !authorsData.isAuthor?<PersonTinyList data = {authorsData} title = {\"Friends\"}/>:null}\r\n\t\t\t\t\t<Playlists authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauthorsData.isAuthor?\r\n\t\t\t\t\t\t<SimilarArtists data={authorsData} />:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\nimport { Slider } from '../Tools/Slider'\r\nexport const AttachmentList = ({ chatId }) => {\r\n\tconst [attachmentList, setAttachmentList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [sliderCurrentPage, setSliderCurrentPage] = useState(0)\r\n\tconst attachmentContent = [\r\n\t\t<SongList listOfSongs={attachmentList} source={{ source: `/chat/${chatId}`, name: `Chat with ${chatId}`, image: \"\", songsList: attachmentList }} />,\r\n\t\t<AuthorsList listOfAuthors={attachmentList} />,\r\n\t\t<AlbumList listOfAlbums={attachmentList} loading={loading} />\r\n\t]\r\n\tasync function fetchAttachedData(attachedType, firebaseCollection) {\r\n\t\t\r\n\t\tconst chatData = await firestore.collection('chats').doc(chatId).get()\r\n\t\tchatData.data().messages.forEach(message => {\r\n\t\t\tif (message[attachedType].length > 0) {\r\n\t\t\t\tmessage[attachedType].forEach(async itemId => {\r\n\t\t\t\t\tfirestore.collection(firebaseCollection).doc(itemId).get().then(songData=>{\r\n\t\t\t\t\t\tsetAttachmentList(prev => [...prev, songData.data()])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tswitch (sliderCurrentPage) {\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchAttachedData('attachedSongs', 'songs').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tfetchAttachedData('attachedAuthors', 'users').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchAttachedData('attachedAlbums', 'playlists').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [sliderCurrentPage])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachmentList([])\r\n\t}, [chatId])\r\n\r\n\tconsole.log(attachmentList)\r\n\r\n\treturn (\r\n\t\t<div className=\"AttachmentList\">\r\n\t\t\t<Slider pages={[\"Songs\", \"Authors\", \"Playlists\"]} currentPage={sliderCurrentPage} setCurrentPage={(page)=>{setSliderCurrentPage(page); setLoading(true); setAttachmentList([])}} />\r\n\t\t\t{loading ? <LoadingCircle /> :\r\n\t\t\t\tattachmentList.length > 0 ? attachmentContent[sliderCurrentPage] : <h2>Nothing here</h2>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchFirebaseData = (setLoading, collection, list, setState, sortCondition, whereCondFP, whereCondSP, whereCondTP, deps = []) => {\r\n\r\n\tasync function fetchData() {\r\n\t\tconst tempArray = []\r\n\t\tif (list === undefined) {\r\n\t\t\tif (whereCondFP !== undefined) {\r\n\t\t\t\tconst items = await firestore.collection(collection).where(whereCondFP, whereCondSP, whereCondTP).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\tconst items = await firestore.collection(collection).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait list.forEach(async (itemId, index) => {\r\n\t\t\t\tconst itemData = (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t\t\ttempArray.push(itemData)\r\n\t\t\t\tif(index === list.length - 1){\r\n\t\t\t\t\tif(sortCondition !== undefined){\r\n\t\t\t\t\t\ttempArray.sort(sortCondition)\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\treturn tempArray\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tsetState([])\r\n\t\tfetchData().then((res)=>{\r\n\t\t\tif(list === undefined) {\r\n\t\t\t\tsetState(res)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}, deps)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { useFetchDocs } from '../../hooks/useFetchDocs'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FiSettings} from 'react-icons/fi'\r\nimport {MdModeEdit} from 'react-icons/md'\r\nimport {RiVolumeUpLine } from 'react-icons/ri'\r\nimport {ImAttachment} from 'react-icons/im'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { Slider } from '../Tools/Slider'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\n\r\nexport const ChatInfo = ({ data }) => {\r\n\tconst [participants, setParticipants] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [chatNameValue, setChatNameValue] = useState(data.chatName)\r\n\tconst [newChatPhoto, setNewChatPhoto] = useState(data.chatImage)\r\n\tconst [newImageLocalPath, setNewImageLocalPath] = useState(\"\")\r\n\tconst [newImageColors, setNewImageColors] = useState(data.imageColors || [])\r\n\tconst {setContent} = useModal()\r\n\tconst [participantsPage, setParticipantsPage] = useState(0)\r\n\tconst [showUpdateBtn, setShowUpdateBtn] = useState(false)\r\n\tuseFetchDocs(setLoading, data.participants, setParticipants, [data.id])\t\r\n\tuseEffect(() => {\r\n\t\tif(chatNameValue.trim() !== data.chatName.trim() || newChatPhoto !== data.chatImage){\r\n\t\t\tsetShowUpdateBtn(true)\r\n\t\t}\r\n\t\telse setShowUpdateBtn(false)\r\n\t}, [chatNameValue, newChatPhoto])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChatNameValue(data.chatName)\r\n\t}, [data.id])\r\n\r\n\tfunction updateChatInfo(){\r\n\t\tfirestore.collection('chats').doc(data.id).update({\r\n\t\t\tchatName:chatNameValue,\r\n\t\t\tchatImage:newChatPhoto,\r\n\t\t\timageColors:newImageColors\r\n\t\t})\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetNewImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\treturn(\r\n\t\t<div className=\"ChatInfo\">\r\n\t\t\t<ColorExtractor src = {newImageLocalPath} getColors = {(colors)=>setNewImageColors(colors)}/>\r\n\t\t\t<div className=\"chatInfoImageAndName\">\r\n\t\t\t\t<div className=\"chatInfoImage\">\r\n\t\t\t\t\t<label className = \"changePhoto\">\r\n\t\t\t\t\t\t<MdModeEdit/>\r\n\t\t\t\t\t\tChange photo\r\n\t\t\t\t\t\t<input type=\"file\" style = {{display:'none'}} onChange = {(e)=>onFileChange(e, 'chatCovers/', setNewChatPhoto)}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<img loading = \"lazy\" src={newChatPhoto} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" className = \"standartInput\" value = {chatNameValue} onChange = {(e)=>setChatNameValue(e.target.value)}/>\r\n\t\t\t\t\t<div className = \"chatInfoButtons\">\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiSettings/>\r\n\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\" onClick = {()=>setContent(<AttachmentList chatId = {data.id}/>)}>\r\n\t\t\t\t\t\t\t<ImAttachment/>\r\n\t\t\t\t\t\t\t{shortWord(\"Attachments\", 7)} \r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<RiVolumeUpLine/>\r\n\t\t\t\t\t\t\tSound\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showUpdateBtn?<button className = \"standartButton\" onClick = {updateChatInfo}>Update Chat</button>:null}\r\n\t\t\t</div>\r\n\t\t\t<h4>Chat participants</h4>\r\n\t\t\t<Slider pages = {['All participants', \"Administrators\"]} currentPage = {participantsPage} setCurrentPage = {setParticipantsPage}/>\r\n\t\t\t{!loading?participants.map(person => {\r\n\t\t\t\tif(participantsPage === 1){\r\n\t\t\t\t\tif(data.admins.includes(person.uid)) return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t\t}\r\n\t\t\t\telse return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t}):<LoadingCircle/>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchDocs = (setLoading, listOfItems, setList, deps) => {\r\n\tfunction fetchItem(){\r\n\t\tlistOfItems.forEach(async itemId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(itemId).get()).data()\r\n\t\t\tsetList(prev=>[...prev, personData])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchItem()\r\n\t\treturn ()=>fetchItem()\r\n\t}, deps)\r\n}\r\n","import React from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const WallpaperItem = ({chatId, image, currentWallpaper}) => {\r\n\tfunction changeChatWallpaper(){\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\twallpaper:image\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className = {\"WallpaperItem \" + (image === currentWallpaper?\"active\":\"\")} onClick = {changeChatWallpaper} style = {image === \"undefined\"?{background:'var(--playlistsColor)'}:{}}>\r\n\t\t\t{image !== \"undefined\" ?<img loading = \"lazy\" src={image} alt=\"\" />:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { WallpaperItem } from './WallpaperItem'\r\n\r\nexport const Wallpapers = ({chatId, currentWallpaper}) => {\r\n\tconst [wallpaperList, setWallpaperList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading,'chatWallpapers', undefined, setWallpaperList)\r\n\tconsole.log(wallpaperList)\r\n\treturn !loading?(\r\n\t\t<div className='Wallpapers'>\r\n\t\t\t<h2>Wallpapers</h2>\r\n\t\t\t<div className=\"wallpapreWrapper\">\r\n\t\t\t\t<WallpaperItem chatId = {chatId} image={\"undefined\"}/>\r\n\t\t\t\t{wallpaperList.map((wallpaper, index) => {\r\n\t\t\t\t\treturn <WallpaperItem chatId = {chatId} image={wallpaper.image} key={wallpaper.id} currentWallpaper = {currentWallpaper}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):<LoadingCircle/>\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiFolder, FiImage, FiMoreHorizontal, FiSearch, FiTrash, FiInfo } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { ChatInfo } from './ChatInfo'\r\nimport { Wallpapers } from './Wallpapers'\r\n\r\nexport const ChatMoreBtn = ({chatId, currentWallpaper, data}) => {\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst chatMoreBtnRef = useRef(null)\r\n\tuseOutsideClick(chatMoreBtnRef, setOpenMoreWindow)\r\n\treturn (\r\n\t\t<div className=\"ChatMoreBtn\" ref = {chatMoreBtnRef}>\r\n\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t<FiMoreHorizontal />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"chatHeaderMenuWindow\" style = {!openMoreWindow?{display:'none'}:{}}>\r\n\t\t\t\t{data.participants.length > 2? <div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<FiInfo/>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</div>:null}\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiSearch/>\r\n\t\t\t\t\t<span>Search messages</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<AttachmentList chatId = {chatId}/>)}}>\r\n\t\t\t\t\t<FiFolder/>\r\n\t\t\t\t\t<span>Attachments</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<Wallpapers chatId = {chatId} currentWallpaper = {currentWallpaper}/>)}}>\r\n\t\t\t\t\t<FiImage/>\r\n\t\t\t\t\t<span>Change wallpaper</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiTrash/>\r\n\t\t\t\t\t<span>Delete chat</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { ChatMoreBtn } from './ChatMoreBtn'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { ChatInfo } from './ChatInfo'\r\nexport const ChatHeader = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [headerColors, setHeaderColors] = useState(data.chatName === \"\"?[]:data.imageColors)\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = data.participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t\tsetHeaderColors(person.imageColors)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data.chatName === \"\") {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [data.id])\r\n\treturn (\r\n\t\t<div className=\"ChatHeader\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[0]}, ${headerColors[1]})` } : { background: `linear-gradient(45deg, grey, lightgrey)` }}>\r\n\t\t\t<BackBtn />\r\n\t\t\t{data.participants.length === 2 ? <Link className=\"chatHeaderImageAndName\" to={`/authors/${otherPerson.uid}`}>\r\n\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Link> :\r\n\t\t\t\t<div className=\"chatHeaderImageAndName\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<ChatMoreBtn chatId={data.id} data={data} currentWallpaper={data.wallpaper} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function findWhatToWriteInResponseToItem(referedMessage){\r\n\treturn referedMessage.attachedSongs.length ? \"Audio\":\r\n\treferedMessage.attachedAlbums.length? \"Album\":\r\n\treferedMessage.attachedAuthors.length?\"Author\":\r\n\treferedMessage.inResponseToMessage && referedMessage.inResponseToMessage.length?\"Forwarded message\":\"\"\r\n}","import React from 'react'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nexport const AttachedItemsInChatInput = ({attachedItems, setAttachedItems, icon}) => {\r\n\tfunction removeItemFromAttached(attachedItems, setItems, itemId) {\r\n\t\tsetItems(attachedItems.filter(id => id !== itemId))\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"AttachedItemsInChatInput\">\r\n\t\t\t{attachedItems.map((itemId, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"attachedSongItem\" key={itemId}>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t<span>{itemId}</span>\r\n\t\t\t\t\t\t<button className=\"removeMessageFromResponse\" onClick={() => removeItemFromAttached(attachedItems, setAttachedItems, itemId)}>\r\n\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport { MdSend } from 'react-icons/md'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/find/findWhatToWriteInResponseItem'\r\nimport { auth, firestore } from '../../firebase'\r\nimport { sendMessage } from '../../functions/other/sendMessage'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { AttachedItemsInChatInput } from '../ChatPage/AttachedItemsInChatInput'\r\n\r\nexport const ChatInput = ({ chatId, chatData, messageText, setMessageText, inResponseToMessage, setInResponseToMessage, otherMessages }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAttachWindow, setOpenAttachWindow] = useState(false)\r\n\tconst { yourSongs, yourAuthors, yourPlaylists } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [allFoundSongs, setAllFoundSongs] = useState(yourSongs)\r\n\tconst [searchSongList, setSearchSongList] = useState([])\r\n\tconst [attachedSongs, setAttachedSongs] = useState([])\r\n\tconst [attachedAlbums, setAttachedAlbums] = useState([])\r\n\tconst [attachedAuthors, setAttachedAuthors] = useState([])\r\n\tconst [resultPlaylists, setResultPlaylists] = useState(yourPlaylists)\r\n\tconst [resultAuthorList, setResultAuthorList] = useState(yourAuthors)\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst [attachedSongsNames, setAttachedSongsNames] = useState([])\r\n\tconst attachWindowRef = useRef(null)\r\n\tuseOutsideClick(attachWindowRef, setOpenAttachWindow)\r\n\r\n\tfunction sendMessageFull() {\r\n\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, attachedSongs, attachedAlbums, attachedAuthors, inResponseToMessage);\r\n\t\tsetMessageText(\"\");\r\n\t\tsetAttachedSongs([]);\r\n\t\tsetAttachedAuthors([]);\r\n\t\tsetAttachedAlbums([]);\r\n\t\tsetInResponseToMessage([])\r\n\t\tsetOpenAttachWindow(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (searchValue.length === 0) {\r\n\t\t\tsetAllFoundSongs(yourSongs)\r\n\t\t}\r\n\t}, [searchValue])\r\n\r\n\tfunction removeMessageFromResponseList(messageId) {\r\n\t\tsetInResponseToMessage(inResponseToMessage.filter(id => id !== messageId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(messageText.length === 0){\r\n\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\ttyping:chatData.typing.filter(id=>id !== currentUser.uid)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(!chatData.typing.includes(currentUser.uid)){\r\n\t\t\t\tconst tempArray = chatData.typing\r\n\t\t\t\ttempArray.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\ttyping:tempArray\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [messageText])\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInResponseNames([])\r\n\t\tinResponseToMessage.forEach(async id => {\r\n\r\n\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[id].sender).get()).data().displayName\r\n\t\t\tsetInResponseNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [inResponseToMessage.length])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachedSongsNames([])\r\n\t\tattachedSongs.forEach(async id => {\r\n\t\t\tconst name = (await firestore.collection('songs').doc(id).get()).data().name\r\n\t\t\tsetAttachedSongsNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [attachedSongs.length])\r\n\r\n\treturn (\r\n\t\t<div className=\"chatInput\" style={openAttachWindow ? { borderRadius: \"0 0 var(--standartBorderRadius) var(--standartBorderRadius)\", transition: \".2s\" } : {}} ref={attachWindowRef}>\r\n\t\t\t<div className=\"attachWindow\" style={openAttachWindow ? { height: \"400px\", opacity: '1' } : {}} >\r\n\t\t\t\t{openAttachWindow ?\r\n\t\t\t\t\t<div style={openAttachWindow ? { maxHeight: '100%', overflowY: 'auto' } : { display: 'none' }}>\r\n\t\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\tsetValue={setSearchValue}\r\n\t\t\t\t\t\t\tsetAllFoundSongs={setAllFoundSongs}\r\n\t\t\t\t\t\t\tsetResultPlaylists={setResultPlaylists}\r\n\t\t\t\t\t\t\tsetResultAuthorList={setResultAuthorList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SongList listOfSongs={allFoundSongs} source={'no'} listOfChosenSongs={attachedSongs} setListOfSongs={setAttachedSongs} />\r\n\t\t\t\t\t\t<AuthorsList listOfAuthors={resultAuthorList} listOfChosenAuthors={attachedAuthors} setListOfChosenAuthors={setAttachedAuthors} />\r\n\t\t\t\t\t\t<AlbumList listOfAlbums={resultPlaylists} loading={false} listOfChosenAlbums={attachedAlbums} setListOfChosenAlbums={setAttachedAlbums} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inResponseArea\" style={inResponseToMessage.length || attachedSongsNames.length || attachedAuthors.length || attachedAlbums.length ? {} : { height: '0', padding: '0', opacity: '0', top: \"0\", visibility: 'hidden' }}>\r\n\t\t\t\t<div className=\"responseMessages\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{inResponseToMessage.map((id, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" key={id}>\r\n\t\t\t\t\t\t\t\t<h5 style={otherMessages[id].sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>{inResponseNames[index]}</h5>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{shortWord(otherMessages[id].message, 35)}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(otherMessages[id])}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button onClick={() => removeMessageFromResponseList(id)} className=\"removeMessageFromResponse\">\r\n\t\t\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedSongs} setAttachedItems = { setAttachedSongs} icon = {<CgMusicNote />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAuthors} setAttachedItems = { setAttachedAuthors} icon = {<FiUser />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAlbums} setAttachedItems = { setAttachedAlbums} icon = {<BiAlbum />}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"attachAndEmojis\">\r\n\t\t\t\t<div className=\"attachBtn\">\r\n\t\t\t\t\t<button onClick={() => { setOpenAttachWindow(!openAttachWindow) }}>\r\n\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" style={{ background: 'var(--lightGrey)', border: 'none', outline: 'none', minHeight: '100%' }} value={messageText} onChange={(e) => { setMessageText(e.target.value) }} onKeyUp={(e) => { if (e.key === 'Enter') { sendMessageFull() } }} />\r\n\t\t\t\t{/* <div className=\"emojis\">\r\n\t\t\t\t\t<div className=\"emojiItem\">\r\n\t\t\t\t\t\t<FcLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--red)' }}>\r\n\t\t\t\t\t\t<AiFillFire />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--lightBlue)' }}>\r\n\t\t\t\t\t\t<AiFillLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t\t<button className=\"sendBtn\" onClick={() => { sendMessageFull() }}>\r\n\t\t\t\t<MdSend />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport displayDate from '../../functions/display/displayDate'\r\n\r\nexport const DateOnTop = ({date}) => {\r\n\treturn (\r\n\t\t<div className = \"DateOnTop\">\r\n\t\t\t{displayDate(date)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nexport default function useOnScreen(ref) {\r\n\r\n\tconst [isIntersecting, setIntersecting] = useState(false)\r\n \r\n\tconst observer = new IntersectionObserver(\r\n\t  ([entry]) => setIntersecting(entry.isIntersecting)\r\n\t)\r\n \r\n\tuseEffect(() => {\r\n\t  observer.observe(ref.current)\r\n\t  // Remove the observer as soon as the component is unmounted\r\n\t  return () => { observer.disconnect() }\r\n\t}, [])\r\n \r\n\treturn isIntersecting\r\n }","import React from 'react'\r\n\r\nexport const SongItemLoading = () => {\r\n\treturn (\r\n\t\t<div className = \"SongItem SongItemLoading\">\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\"></div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\"></div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const SeenByCircle = ({listOfSeen}) => {\r\n\treturn (\r\n\t\t<div className = \"SeenByCircle\" style = {listOfSeen !== undefined? listOfSeen.length <= 1?{opacity:'1', visibility:'visible'}:{}:null}></div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { useSwipeable } from 'react-swipeable'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/find/findWhatToWriteInResponseItem'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItemLoading } from '../Basic/SongItemLoading'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SeenByCircle } from './SeenByCircle'\r\n\r\nexport const MessageItem = ({ messageData, chatId, scrollToMessageRef, setScrollToMessageId, scrollToMessageId, showPhoto = true, otherMessages, inResponseToMessageArr, setInResponseToMessageArr }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {isMobile, screenHeight} = useScreen()\r\n\tconst { message, attachedAlbums, attachedSongs, attachedAuthors, sender, inResponseToMessage, id, sentTime } = messageData\r\n\tconst [userThatSentMessage, setUserThatSentMessage] = useState({})\r\n\tconst messageSentTime = displayDate(sentTime, 2)\r\n\tconst [attachedSongsData, setAttachedSongsData] = useState([])\r\n\tconst [attachedAuthorsData, setAttachedAuthorsData] = useState([])\r\n\tconst [attachedPlaylistsData, setAttachedPlaylistsData] = useState([])\r\n\tconst [inResponseToMessagesData, setInResponseToMessagesData] = useState([])\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst messageRef = useRef()\r\n\tconst isVisible = useOnScreen(messageRef)\r\n\tconst [swipeDeltaX, setSwipeDeltaX] = useState(0)\r\n\tconst [transformTransition, setTransformTransition] = useState(0)\r\n\tconst handlers = useSwipeable({ onSwiping: (event) => {if(event.deltaX < 0) setSwipeDeltaX(event.deltaX)} })\r\n\tconst refPassthrough = (el) => {\r\n\t\t// call useSwipeable ref prop with el\r\n\t\thandlers.ref(el);\r\n\r\n\t\t// set myRef el so you can access it yourself\r\n\t\tmessageRef.current = el;\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (messageData.seenBy !== undefined) {\r\n\t\t\tif (currentUser.uid !== messageData.sender && isVisible) {\r\n\t\t\t\tif (!messageData.seenBy.includes(currentUser.uid)) {\r\n\t\t\t\t\tconst tempMessages = otherMessages\r\n\t\t\t\t\ttempMessages[messageData.id].seenBy.push(currentUser.uid)\r\n\t\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\t\tmessages: tempMessages\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isVisible])\r\n\r\n\tasync function fetchSentMessageUser() {\r\n\t\tconst user = (await firestore.collection('users').doc(messageData.sender).get()).data()\r\n\t\tsetUserThatSentMessage(user)\r\n\t}\r\n\r\n\tfunction fetchAttachedData(list, place, setFunc) {\r\n\t\treturn list.forEach(async (itemId) => {\r\n\t\t\tlet itemData = (await firestore.collection(place).doc(itemId).get())\r\n\t\t\tif(itemData.exists) setFunc(prev => [...prev, itemData.data()])\r\n\t\t\telse setFunc(prev => [...prev, null])\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tfunction inResponseMessagesFetch() {\r\n\t\tif (inResponseToMessage !== null) {\r\n\t\t\tinResponseToMessage.forEach(async messageId => {\r\n\t\t\t\tsetInResponseToMessagesData(prev => [...prev, otherMessages[messageId]])\r\n\t\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[messageId].sender).get()).data().displayName\r\n\t\t\t\tsetInResponseNames(prev => [name, ...prev])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSentMessageUser()\r\n\t\tfetchAttachedData(attachedSongs, 'songs', setAttachedSongsData)\r\n\t\tfetchAttachedData(attachedAuthors, 'users', setAttachedAuthorsData)\r\n\t\tfetchAttachedData(attachedAlbums, 'playlists', setAttachedPlaylistsData)\r\n\t\tinResponseMessagesFetch()\r\n\t}, [])\r\n\r\n\tfunction addMessageToResponseList() {\r\n\t\tif (!inResponseToMessageArr.includes(id)) {\r\n\t\t\tsetInResponseToMessageArr(prev => [...prev, id])\r\n\t\t}\r\n\t}\r\n\r\n\tfunction returnToInitial() {\r\n\t\tlet dropDelta\r\n\t\tclearTimeout(dropDelta)\r\n\t\tsetTransformTransition(0.2)\r\n\t\tdropDelta = setTimeout(() => {\r\n\t\t  setSwipeDeltaX(0)\r\n\t\t  setTransformTransition(0)\r\n\t\t}, 200)\r\n\t }\r\n\r\n\tuseEffect(() => {\r\n\t\tif(swipeDeltaX < -160){\r\n\t\t\treturnToInitial()\r\n\t\t\taddMessageToResponseList()\r\n\t\t}\r\n\t}, [swipeDeltaX])\r\n\r\n\r\n\tconst emojis = [<FcLike />, <AiFillFire />, <AiFillLike />]\r\n\treturn (\r\n\t\t<div className={\"MessageItem \" + (sender === currentUser.uid ? 'your' : '')} ref={id === scrollToMessageId ? scrollToMessageRef : refPassthrough} style={!isVisible ? { opacity: '0', visibility: 'hidden' } : showPhoto ? { paddingBottom: '15px', transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition } : {transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition}} onTouchEnd = {returnToInitial}>\r\n\t\t\t<div className=\"messageItemImage\">\r\n\t\t\t\t{showPhoto ?\r\n\t\t\t\t\t<img loading = \"lazy\" src={userThatSentMessage.photoURL} alt=\"\" /> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t\t<div className=\"messageItemBody\" style={id === scrollToMessageId ? { animation: 'showResponseMessage .5s forwards' } : showPhoto ? { borderRadius: 'var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px' } : {}}>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n\t\t\t\t\t<h5 className=\"messageUserName\">{userThatSentMessage.displayName}</h5>\r\n\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{messageSentTime}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{inResponseToMessage !== null ?\r\n\t\t\t\t\tinResponseToMessagesData.map((messageData, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" onClick={() => setScrollToMessageId(messageData.id)}>\r\n\t\t\t\t\t\t\t\t<span style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t<h5 style={messageData.sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>\r\n\t\t\t\t\t\t\t\t\t\t{inResponseNames[index]}\r\n\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{displayDate(messageData.sentTime, 2)}</div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{messageData.message}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(messageData)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{message}</p>\r\n\t\t\t\t\t{attachedSongsData.map((song, key) => {\r\n\t\t\t\t\t\treturn isVisible ? <SongItem song={song} localIndex={key} key={key} position = {screenHeight}/> : <SongItemLoading />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedPlaylistsData.map((album, index) => {\r\n\t\t\t\t\t\treturn <PlaylistItem playlist={album} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedAuthorsData.map((author, index) => {\r\n\t\t\t\t\t\treturn <AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<SeenByCircle listOfSeen={messageData.seenBy} />\r\n\t\t\t<button className=\"respondToMessageBtn\" onClick={addMessageToResponseList} style = {isMobile?{opacity:-swipeDeltaX/80}:{}}>\r\n\t\t\t\t<BiShare />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { MessageItem } from './MessageItem'\r\n\r\nexport const MessageField = ({message, index, messageList, chatId, inResponseToMessage, setInResponseToMessage, scrollToMessageRef, scrollToMessageId, setScrollToMessageId, setDateRefsArray}) => {\r\n\tconst [showPhoto, setShowPhoto] = useState(false)\r\n\tconst [showDate, setShowDate] = useState(false)\r\n\tconst dateRef = useRef(null)\r\n\tuseEffect(() => {\r\n\t\tif (index === messageList.length - 1) setShowPhoto(true)\r\n\t\telse if (messageList[index + 1].sender !== messageList[index].sender) setShowPhoto(true)\r\n\t\telse if (displayDate(messageList[index + 1].sentTime) !== displayDate(messageList[index].sentTime)) setShowPhoto(true)\r\n\t\r\n\t\tif (index === 0) setShowDate(true)\r\n\t\telse if (displayDate(messageList[index].sentTime) !== displayDate(messageList[index - 1].sentTime)) {\r\n\t\t\tsetShowDate(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dateRef.current !== null) {\r\n\t\t\tsetDateRefsArray(prev=>[...prev, dateRef])\r\n\t\t}\r\n\t}, [showDate])\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showDate ?  <div ref = {dateRef} style={{ width: '100%', display: 'flex', justifyContent: 'center', alignItems: \"center\", padding: \"10px 0\" }}>{displayDate(message.sentTime)}</div> : null}\r\n\t\t\t<MessageItem\r\n\t\t\t\tmessageData={message}\r\n\t\t\t\tchatId={chatId}\r\n\t\t\t\tkey={message.id}\r\n\t\t\t\tscrollToMessageRef={scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId={scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId={setScrollToMessageId}\r\n\t\t\t\tshowPhoto={showPhoto}\r\n\t\t\t\totherMessages={messageList}\r\n\t\t\t\tinResponseToMessageArr={inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessageArr={setInResponseToMessage}\r\n\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { MessageField } from './MessageField'\r\n\r\nexport const DisplayChatMessages = ({chatId, messageList, inResponseToMessage, setInResponseToMessage, messagesWindowRef, setDateRefsArray}) => {\r\n\tconst scrollToMessageRef = useRef(null)\r\n\tconst [scrollToMessageId, setScrollToMessageId] = useState(-1)\r\n\tuseEffect(() => {\r\n\t\tif (scrollToMessageId !== -1) {\r\n\t\t\tmessagesWindowRef.current.scrollTo(0, scrollToMessageRef.current.offsetTop - 65 < 0 ? 0 : scrollToMessageRef.current.offsetTop - 65)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetScrollToMessageId(-1)\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}, [scrollToMessageId])\r\n\r\n\treturn messageList.length?<>\r\n\t\t{messageList.map((message, index)=>{\r\n\t\t\treturn <MessageField \r\n\t\t\t\tmessage = {message} \r\n\t\t\t\tindex = {index} \r\n\t\t\t\tkey = {message.id} \r\n\t\t\t\tmessageList = {messageList} \r\n\t\t\t\tchatId = {chatId} \r\n\t\t\t\tinResponseToMessage = {inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessage = {setInResponseToMessage}\r\n\t\t\t\tscrollToMessageRef = {scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId = {scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId = {setScrollToMessageId}\r\n\t\t\t\tsetDateRefsArray = {setDateRefsArray}\r\n\t\t\t/>\r\n\t\t})}\r\n\t</>:null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {SmallImages} from '../AuthorPage/SmallImages'\r\nexport const TypingAnimation = ({ typingPeople }) => {\r\n\tconst [typingPeopleData, setTypingPeopleData] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tsetTypingPeopleData([])\r\n\t\ttypingPeople.map(async personId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(personId).get()).data()\r\n\t\t\tif(personData.uid !== currentUser.uid) setTypingPeopleData(prev=>[...prev, personData])\r\n\t\t})\r\n\t}, [typingPeople])\r\n\treturn typingPeopleData.length > 0 ? (\r\n\t\t<div className = \"typingWrapper\">\r\n\t\t\t<SmallImages imagesList = {typingPeopleData.map(person=>person.photoURL)} borderColor = {'var(--navItemColor)'}/>\r\n\t\t\t<div className=\"TypingAnimation\">\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { DisplayChatMessages } from './DisplayChatMessages'\r\nimport { TypingAnimation } from './TypingAnimation'\r\n\r\nexport const ChatMessagesWindow = ({chatId, chatData, messageList, findTopDate, inResponseToMessage, setInResponseToMessage, setDateRefsArray }) => {\r\n\tconst { screenHeight, isMobile } = useScreen()\r\n\tconst messagesWindowRef = useRef(null)\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tconst scroll = messagesWindowRef.current?.scrollHeight - messagesWindowRef.current?.clientHeight;\r\n\t\tmessagesWindowRef.current?.scrollTo(0, scroll);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tscrollToBottom()\r\n\t}, [messageList]);\r\n\treturn (\r\n\t\t<div className=\"chatMessagesWindow\" ref={messagesWindowRef} onScroll={findTopDate} style={{ height: !isMobile ? screenHeight - 170 + 'px' : screenHeight - 125 + 'px' }}>\r\n\t\t\t<DisplayChatMessages chatId={chatId} messageList={messageList} inResponseToMessage={inResponseToMessage} setInResponseToMessage={setInResponseToMessage} messagesWindowRef={messagesWindowRef} setDateRefsArray={setDateRefsArray}/>\r\n\t\t\t<TypingAnimation typingPeople={chatData.typing} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport { ChatHeader } from '../components/ChatPage/ChatHeader'\r\nimport { ChatInput } from '../components/AuthorPage/ChatInput'\r\nimport { useEffect } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { DateOnTop } from '../components/ChatPage/DateOnTop'\r\nimport { useRealTimeMessages } from '../hooks/useRealTimeMessages'\r\nimport { ChatMessagesWindow } from '../components/ChatPage/ChatMessagesWindow'\r\nimport { useScreen } from '../contexts/ScreenContext'\r\nexport const DialoguePage = () => {\r\n\tconst match = useRouteMatch('/chat/:chatId')\r\n\tconst {screenHeight} = useScreen()\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatId } = match.params\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [inResponseToMessage, setInResponseToMessage] = useState([])\r\n\tconst [dateRefsArray, setDateRefsArray] = useState([])\r\n\tconst history = useHistory()\r\n\tconst [chatData, messageList, loading, currentDateOnTop, findTopDate] = useRealTimeMessages(chatId, dateRefsArray)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (chatData.participants !== undefined) {\r\n\t\t\tif (!chatData.participants.includes(currentUser.uid)) history.push('/chat')\r\n\t\t}\r\n\t}, [chatData])\r\n\r\n\treturn (\r\n\t\t<div className=\"DialoguePage\" style = {{height:'100%'}}>\r\n\t\t\t{\r\n\t\t\t\tloading ?\r\n\t\t\t\t\t<LoadingCircle top = {\"50%\"}/> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ChatHeader data={chatData} />\r\n\t\t\t\t\t\t<DateOnTop date = {currentDateOnTop}/>\r\n\t\t\t\t\t\t<ChatMessagesWindow chatId = {chatId} chatData = {chatData} messageList = {messageList} findTopDate = {findTopDate} setDateRefsArray = {setDateRefsArray} inResponseToMessage = {inResponseToMessage} setInResponseToMessage = {setInResponseToMessage}/>\r\n\t\t\t\t\t\t<ChatInput \r\n\t\t\t\t\t\t\tchatId={chatId} \r\n\t\t\t\t\t\t\tchatData = {chatData}\r\n\t\t\t\t\t\t\tmessageText={messageText} \r\n\t\t\t\t\t\t\tsetMessageText={setMessageText} \r\n\t\t\t\t\t\t\tinResponseToMessage = {inResponseToMessage} \r\n\t\t\t\t\t\t\tsetInResponseToMessage = {setInResponseToMessage} \r\n\t\t\t\t\t\t\totherMessages = {messageList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t{chatData.wallpaper !== \"undefined\"?<img loading = \"lazy\" src={chatData.wallpaper} className = \"chatWallpaper\" alt=\"\"/>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\n/**\r\n \t* Returns [chatData, messageList, loading, currentDateOnTop, findTopDate]\r\n*/\r\nexport const useRealTimeMessages = (chatId, dateRefsArray) => {\r\n\tconst [chatData, setChatData] = useState([])\r\n\tconst [messageList, setMessageList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [currentDateOnTop, setCurrentDateOnTop] = useState(\"\")\r\n\tfunction findTopDate(e){\r\n\t\tdateRefsArray.forEach(ref=>{\r\n\t\t\tif(ref.current !== null) {\r\n\t\t\t\tif(ref.current.offsetTop - 70 <= e.target.scrollTop) setCurrentDateOnTop(ref.current.innerHTML)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('chats').doc(chatId)\r\n\t\t\t.onSnapshot(snapshot => {\r\n\t\t\t\tsetChatData(snapshot.data())\r\n\t\t\t\tsetMessageList(snapshot.data().messages)\r\n\t\t\t\tsetCurrentDateOnTop(snapshot.data().messages.length ? snapshot.data().messages[0].sentTime : new Date().toString())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, chatId])\r\n\r\n\r\n\treturn [chatData, messageList, loading, currentDateOnTop, findTopDate]\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport \"../styles/PageNotFound.css\"\r\nexport const PageNotFound = () => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"PageNotFound\">\r\n\t\t\t<img loading = \"lazy\" src=\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\" alt=\"\" />\r\n\t\t\t<h2>Page not found</h2>\r\n\t\t\t<button className=\"standartButton\" onClick = {()=>history.push('/library')}>\r\n\t\t\t\tBack to library\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export const LOGIN_ROUTE = '/login'\r\nexport const SIGNUP_ROUTE = '/signup'\r\nexport const HOME_ROUTE = '/home'\r\nexport const LIBRARY_ROUTE = '/library'\r\nexport const SEARCH_ROUTE = '/search'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const NOTFOUND_ROUTE = '/not-found'","import React from 'react'\r\n\r\nexport const BlurredBg = () => {\r\n\treturn (\r\n\t\t<div className = \"BlurredBg\">\r\n\t\t\t<div className=\"circle circle1\"></div>\r\n\t\t\t<div className=\"circle circle2\"></div>\r\n\t\t\t<div className=\"circle circle3\"></div>\r\n\t\t\t<div className=\"circle circle4\"></div>\r\n\t\t\t<div className=\"circle circle5\"></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nexport const TitleAndLogo = ({title}) => {\r\n\treturn (\r\n\t\t<div className=\"titleAndLogo\">\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<h1>{title}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/other/checkNumber'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport {LoadingCircle} from '../Loading/LoadingCircle'\r\nimport { BlurredBg } from '../SignIn-Up/BlurredBg'\r\nexport const MainBanner = () => {\r\n\tconst [bannerColors, setBannerColors] = useState([])\r\n\tconst [currentSliderPage, setcurrentSliderPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\t\r\n\tconst [topAuthor, setTopAuthor] = useState({})\r\n\tconst [topSong, setTopSong] = useState({})\r\n\tconst [topAlbum, setTopAlbum] = useState({})\r\n\t\r\n\tasync function findTop(setFunc, list, criterion) {\r\n\t\tconst response = (await firestore.collection(list).orderBy(criterion, 'desc').limit(1).get()).docs[0].data()\r\n\t\tsetFunc(response)\r\n\t\tsetBannerColors(prev=>[...prev, response.imageColors[0]])\r\n\t\tif(list === 'playlists') setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindTop(setTopAuthor, 'users', 'subscribers')\r\n\t\tfindTop(setTopSong, 'songs', 'listens')\r\n\t\tfindTop(setTopAlbum, 'playlists', 'listens')\r\n\t\t\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = \"MainBanner\" style = {{background:bannerColors[currentSliderPage]}}>\r\n\t\t\t{loading? <LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 0?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular artist on platform</h3>\r\n\t\t\t\t\t\t\t<AuthorItemBig data = {topAuthor}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 1?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular song on platform</h3>\r\n\t\t\t\t\t\t\t<SongItem song = {topSong} localIndex = {0} showListens/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 2?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular album on platform</h3>\r\n\t\t\t\t\t\t\t<PlaylistItem playlist = {topAlbum}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"sliderBtns\">\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage-1, 2, 0))}><BiChevronLeft/></button>\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage+1, 2, 0))}><BiChevronRight/></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <BlurredBg circleColor = \"#fff\"/> */}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findIfSongIsNew from '../../functions/find/findIfSongIsNew'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\n\r\nexport const RecentSongs = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recentSongs, setRecentSongs] = useState([])\r\n\tfunction findRecentSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async songId=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(findIfSongIsNew(songData) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecentSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(yourAuthors !== undefined && yourAuthors.length !== 0 && recentSongs.length === 0) findRecentSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<SongList listOfSongs = {recentSongs} source = {{source: `/home`, name: \"New Songs\", image: \"\", songsList: recentSongs}} title = {\"New Songs\"} isNewSong/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findSimilarArtists from '../../functions/find/findSimilarArtists'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const RecommendedAuthors = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recommendationAuthors, setRecommendationAuthors] = useState([])\r\n\r\n\tconst [uniqueAuthors, setUniqueAuthors] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tif (yourAuthors !== undefined) {\r\n\t\t\tyourAuthors.forEach((author) => {\r\n\t\t\t\tfindSimilarArtists(author, setRecommendationAuthors)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\trecommendationAuthors.forEach(author=>{\r\n\t\t\tconst uniqueAuthorsUIDSArray = uniqueAuthors.map(author=>author.uid)\r\n\t\t\tif(!currentUser.addedAuthors.includes(author.uid) && !uniqueAuthorsUIDSArray.includes(author.uid)){\r\n\t\t\t\tsetUniqueAuthors(prev=>[...prev, author])\r\n\t\t\t}\r\n\t\t})\r\n}, [recommendationAuthors])\r\n\treturn (\r\n\t\t<div className = \"RecommendedAuthors\">\r\n\t\t\t<AuthorsList listOfAuthors = {uniqueAuthors} title = {\"Recommended Authors\"}/>\r\n\t\t\t{/* <h2>Recommended Authors</h2>\r\n\t\t\t<div className=\"artistsWrapper\">\r\n\t\t\t\t{uniqueAuthors.map((author, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ImportantMessage = ({message, image, button}) => {\r\n\treturn (\r\n\t\t<div className = \"importantMessage\">\r\n\t\t\t<div>\r\n\t\t\t\t{image?<img loading = \"lazy\" src={image} alt=\"\" />:null}\r\n\t\t\t\t<h3>{message}</h3>\r\n\t\t\t\t{button?button:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {useSong} from '../../contexts/SongContext'\r\nimport { SongList } from '../Lists/SongList'\r\nimport {ImportantMessage} from '../MessagePlates/ImportantMessage'\r\nexport const RecommendedSongs = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [recommendedSongs, setRecommendedSongs] = useState([])\r\n\tfunction fetchRecommendedSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(!currentUser.addedSongs.includes(songId) && !tempSongsIds.includes(songData.id) && index <= 3){\r\n\t\t\t\t\tsetRecommendedSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// tempSongArray.sort((songA, songB)=>songB.listens - songA.listens)\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRecommendedSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = 'RecommendedSongs'>\r\n\t\t\t<SongList listOfSongs = {recommendedSongs} source = {{source: `/home`, name: \"Recommended Songs\", image: \"\", songsList: recommendedSongs}} title = {\"Recommended Songs\"} displayIfEmpty = {<ImportantMessage message = {\"No songs recommended. Add favorite authors so we could know what to recommend\"} image = {\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\"}/>}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SongList } from '../Lists/SongList'\r\n\r\nexport const Top15Songs = () => {\r\n\tconst [topSongs, setTopSongs] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tfunction fetchTopSongs(){\r\n\t\tfirestore.collection('songs').orderBy('listens', 'desc').limit(15).get().then(res=>{\r\n\t\t\tres.docs.forEach(song=>{\r\n\t\t\t\tsetTopSongs(prev=>[...prev, song.data()])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchTopSongs()\r\n\t}, [])\r\n\treturn !loading?(\r\n\t\t<SongList \r\n\t\t\tlistOfSongs = {topSongs} \r\n\t\t\tsource = {{source:`/home`,name:\"Top 15 Songs\", image:\"https://media.istockphoto.com/vectors/fire-icon-illustration-for-design-stock-vector-vector-id931601050?k=6&m=931601050&s=170667a&w=0&h=fhRQfwwsW6aXK9OSDM-yj842SFFl2Q9ll6ch-xCK5es=\", songsList:topSongs}}\r\n\t\t\ttitle = {'Top 15 Songs'}\r\n\t\t\tshowListens\t\r\n\t\t\tshowCount\r\n\t\t/>\r\n\t):<LoadingCircle/>\r\n}\r\n","export default __webpack_public_path__ + \"static/media/wave2.f62cb572.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useEffect } from 'react'\r\nexport const LibraryPlaylistItem = ({playlist}) => {\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource({source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} className = \"playlistWrapper\">\r\n\t\t\t<div className=\"library playlistItem\" style = {{backgroundImage:`url(${playlist.image})`}}>\r\n\t\t\t\t{playlist.image?null:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t<h2 style = {{background:playlist.imageColors[2]}}>{shortWord(playlist.name, 10) }</h2>\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","export const findVisiblePlaylists = (screenWidth) => {\r\n\tif(screenWidth < 1990 && screenWidth >= 1780) return 7\r\n\telse if(screenWidth < 1780 && screenWidth >= 1570) return 6\r\n\telse if(screenWidth < 1570 && screenWidth >= 1360) return 5\r\n\telse if(screenWidth < 1360 && screenWidth >= 1150) return 4\r\n\telse if(screenWidth < 1150 && screenWidth >= 1000) return 3\r\n\telse if(screenWidth < 1000 && screenWidth >= 892) return 6\r\n\telse if(screenWidth < 892 && screenWidth >= 754) return 5\r\n\telse if(screenWidth < 754 && screenWidth >= 614) return 4\r\n\telse if(screenWidth < 614 && screenWidth >= 464) return 3\r\n\telse return 2\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport wave from '../../images/wave2.svg'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { LibraryPlaylistItem } from './LibraryPlaylistItem'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { findVisiblePlaylists } from '../../functions/find/findVisiblePlaylists'\r\nexport const SongsPage = () => {\r\n\tconst { yourSongs, yourPlaylists, setYourSongs } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst {screenWidth} = useScreen()\r\n\tconst [playlistsVisible, setPlaylistsVisible] = useState(findVisiblePlaylists(screenWidth))\r\n\tuseEffect(() => {\r\n\t\tsetPlaylistsVisible(findVisiblePlaylists(screenWidth))\r\n\t}, [screenWidth])\r\n\treturn (\r\n\t\t<div className=\"SongsPage\">\r\n\t\t\t<div className=\"playLists\">\r\n\t\t\t\t<div className=\"playlistContent\">\r\n\t\t\t\t\t{yourPlaylists.length?yourPlaylists.map((p, index) => {\r\n\t\t\t\t\t\tif(index < playlistsVisible){\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<LibraryPlaylistItem playlist={p} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}):<h3 style = {{position:'absolute', left:'50%', top:'40%', transform:'translate(-50%, -50%)'}}>You don't have playlists</h3>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"playlistsBackground\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={wave} alt=\"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"yourSongsList\">\r\n\t\t\t\t<SongList listOfSongs={yourSongs} source={{ source: '/library', name: \"Your Library\", image: currentUser.photoURL, songsList: yourSongs }} showSearch displayIfEmpty={<h3>Your library is empty</h3>} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\n\r\nexport const CreatePlaylistPage = () => {\r\n\treturn (\r\n\t\t<div className = 'CreatePlaylistPage'>\r\n\t\t\t<AddPlaylist/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {PlaylistItem} from '../AuthorPage/PlaylistItem'\r\nimport {BiFolderPlus} from 'react-icons/bi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { CreatePlaylistPage } from './CreatePlaylistPage'\r\nexport const PlaylistsPage = () => {\r\n\tconst {yourPlaylists} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"PlaylistsPage\">\r\n\t\t\t<button className = \"createPlaylistBtn\" onClick = {()=>{toggleModal(); setContent(<CreatePlaylistPage/>)}}>\r\n\t\t\t\t<BiFolderPlus/>\r\n\t\t\t\tCreate Playlist\r\n\t\t\t</button>\r\n\t\t\t<div className=\"playlistsContainer\">\r\n\t\t\t\t{yourPlaylists && yourPlaylists.map((playlist, index)=>{\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {AuthorItemBig} from '../AuthorPage/AuthorItemBig'\r\nexport const AuthorsPage = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\treturn (\r\n\t\t<div className = \"AuthorsPage\">\r\n\t\t\t<div className=\"authorsContainer\">\r\n\t\t\t\t{yourAuthors.map((authorData)=>{\r\n\t\t\t\t\treturn <AuthorItemBig data = {authorData} key = {authorData.uid}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const IsUserOnlineCircle = ({userUID}) => {\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<div className = \"onlineCircle\"></div>:null\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAmountOfUnseenMessages } from '../../functions/find/findAmountOfUnseenMessages'\r\nexport const AmountOfUnseenMessages = ({amountOfUnseen}) => {\r\n\t\r\n\treturn amountOfUnseen !== 0?(\r\n\t\t<div className = \"AmountOfUnseenMessages\">\r\n\t\t\t{amountOfUnseen}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiMusic, FiUser } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {BsDot} from 'react-icons/bs'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { SeenByCircle } from './SeenByCircle'\r\nexport const LastSentMessage = ({ messages }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [lastAttachedItem, setLastAttachedItem] = useState(\"\")\r\n\tconst [shouldPutDot, setShouldPutDot] = useState(false)\r\n\tconst [lastMessage, setLastMessage] = useState(\"\")\r\n\tconst messageIcons = [null, <FiMusic />, <BiAlbum />, <FiUser />]\r\n\tconst [lastIcon, setLastIcon] = useState(0)\r\n\tasync function findWhatToWriteUnderName() {\r\n\t\tif (messages !== undefined) {\r\n\t\t\tconst lastAttachedItem = messages[messages.length - 1]\r\n\t\t\tsetLastMessage(str => str += lastAttachedItem.message)\r\n\t\t\tsetShouldPutDot(lastAttachedItem.message.length !== 0) \r\n\t\t\tif (lastAttachedItem.attachedSongs.length) {\r\n\t\t\t\tconst songName = (await firestore.collection('songs').doc(lastAttachedItem.attachedSongs[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(1)\r\n\t\t\t\tsetLastAttachedItem(str => str += songName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAlbums.length) {\r\n\t\t\t\tconst playlistName = (await firestore.collection('playlists').doc(lastAttachedItem.attachedAlbums[0]).get())\r\n\t\t\t\tif(playlistName.exists) setLastAttachedItem(str => str +=playlistName.data().name)\r\n\t\t\t\telse setLastAttachedItem(str => str +=\"Deleted Album \")\r\n\t\t\t\tsetLastIcon(2)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAuthors.length) {\r\n\t\t\t\tconst authorName = (await firestore.collection('users').doc(lastAttachedItem.attachedAuthors[0]).get()).data().displayName\r\n\t\t\t\tsetLastIcon(3)\r\n\t\t\t\tsetLastAttachedItem(str => str +=authorName)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindWhatToWriteUnderName()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className=\"messageShowOutside\">\r\n\t\t\t{messages[messages.length - 1].sender === currentUser.uid?<span style = {{marginRight:'5px'}}>You:</span>:null}\r\n\t\t\t{shortWord(lastMessage, 30)}\r\n\t\t\t{shouldPutDot && lastAttachedItem.length?<BsDot/>:null}\r\n\t\t\t{messageIcons[lastIcon]}\r\n\t\t\t{lastAttachedItem}\r\n\t\t\t<SeenByCircle listOfSeen = {messages[messages.length - 1].seenBy}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { findAmountOfUnseenMessages } from '../../functions/find/findAmountOfUnseenMessages'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\nimport { AmountOfUnseenMessages } from './AmountOfUnseenMessages'\r\nimport { LastSentMessage } from './LastSentMessage'\r\n\r\nexport const ChatItem = ({ chatData }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatName, chatImage, participants, messages } = chatData\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [amountOfUnseen, setAmountOfUnseen] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountOfUnseen(findAmountOfUnseenMessages(messages, currentUser))\r\n\t}, [])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName === '') {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [])\r\n\treturn chatData?(\r\n\t\t<Link to={`/chat/${chatData.id}`}>\r\n\t\t\t<div className={\"ChatItem \" + (amountOfUnseen > 0?\"unseen\":\"\")} >\r\n\t\t\t\t<div className=\"chatItemImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={chatImage || otherPerson.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<IsUserOnlineCircle userUID = {otherPerson.uid}/>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<h4 style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n\t\t\t\t\t\t<span>{chatName || otherPerson.displayName}</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{messages.length?<span style={{ opacity: '.6', fontWeight: '500', fontSize: '.8em' }}>{displayDate(messages[messages.length - 1].sentTime, chatData && ( Date.now() - new Date(messages[messages.length - 1].sentTime).getTime()) > 86000000 ? 0 : 2)}</span>:null}\r\n\t\t\t\t\t\t\t<AmountOfUnseenMessages amountOfUnseen = {amountOfUnseen}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t{messages.length?<p style={messages[messages.length - 1].sender !== currentUser.uid ? { color: '#fff' } : {}}>{<LastSentMessage messages={messages} />}</p>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t):null\r\n}\r\n","export function findAmountOfUnseenMessages(messages, currentUser) {\r\n\treturn messages.reduce((accum, message)=>{\r\n\t\tif(message.sender !== currentUser.uid){\r\n\t\t\tif(message.seenBy !== undefined){\r\n\t\t\t\tif(!message.seenBy.includes(currentUser.uid)){\r\n\t\t\t\t\tconsole.log(\"i'm here\")\r\n\t\t\t\t\treturn ++accum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn accum\r\n\t}, 0)\r\n}","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport {findChatURL} from '../../functions/find/findChatURL'\r\nexport const CreateChat = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [foundFriends, setFoundFriends] = useState(yourFriends)\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst [chatCover, setChatCover] = useState(\"\")\r\n\tconst [chatName, setChatName] = useState(\"\")\r\n\tconst [errorMessage, setRrrorMessage] = useState(\"\")\r\n\tconst chatId = getUID()\r\n\tconst history = useHistory()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tuseEffect(() => {\r\n\t\tif(chosenFriends.length >= 1){\r\n\t\t\tfindChatURL(chosenFriends, currentUser, setShouldCreate, setFriendChatId)\r\n\t\t}\r\n\t}, [chosenFriends])\r\n\treturn (\r\n\t\t<div className=\"CreateChat\">\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundFriends} focus inputText={\"Search for friends\"} defaultSearchMode={\"authors\"} />\r\n\t\t\t{foundFriends.map(friend => {\r\n\t\t\t\treturn <PersonTiny data={friend} chosenArray={chosenFriends} setChosenArray={setChosenFriends} />\r\n\t\t\t})}\r\n\t\t\t{chosenFriends.length > 1 && shouldCreate ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" style={{ marginBottom: '10px' }} className=\"standartInput\" placeholder={\"Enter chat name\"} value={chatName} onChange={e => setChatName(e.target.value)} />\r\n\t\t\t\t\t<DownloadPhotoButton setErrorMessage={setRrrorMessage} setImageLocalPath={() => { return null }} downloadedPhoto={chatCover} setDownloadedPhoto={setChatCover} place={'chatCovers/'} btnText = {\"Download chat image\"}/>\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t{chosenFriends.length >= 1?<button className=\"addSongBtn\" onClick = {()=>{if(shouldCreate) {createChat([currentUser.uid, ...chosenFriends], chatId, chatName, chatCover, [currentUser.uid]); history.push(`/chat/${chatId}`)} else history.push(`/chat/${friendChatId}`)}}>{shouldCreate?\"Create Chat\":\"Go to chat\"}</button>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, LOGIN_ROUTE, SEARCH_ROUTE, SIGNUP_ROUTE } from \"./utils/consts\";\r\nimport {LogInPage} from './pages/LogInPage'\r\nimport {SignUpPage} from './pages/SignUpPage'\r\nimport { Home } from \"./pages/Home\";\r\nimport { SearchPage } from \"./pages/SearchPage\";\r\nimport { LibraryPage } from \"./pages/LibraryPage\";\r\nimport { ChatPage } from \"./pages/ChatPage\";\r\nexport const publicRoutes = [\r\n\t{\r\n\t\tpath:LOGIN_ROUTE,\r\n\t\tComponent:LogInPage,\r\n\t},\r\n\t{\r\n\t\tpath:SIGNUP_ROUTE,\r\n\t\tComponent:SignUpPage,\r\n\t}\r\n]\r\n\r\nexport const privateRoutes = [\r\n\t{\r\n\t\tpath:HOME_ROUTE,\r\n\t\tComponent:Home,\r\n\t},\r\n\t{\r\n\t\tpath:LIBRARY_ROUTE,\r\n\t\tComponent:LibraryPage,\r\n\t},\r\n\t{\r\n\t\tpath:SEARCH_ROUTE,\r\n\t\tComponent:SearchPage,\r\n\t},\r\n\t{\r\n\t\tpath:CHAT_ROUTE,\r\n\t\tComponent:ChatPage,\r\n\t}\r\n]","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { ErrorPlate } from '../components/MessagePlates/ErrorPlate'\r\nimport { FullScreenLoading } from '../components/Loading/FullScreenLoading'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { HOME_ROUTE, LOGIN_ROUTE, SIGNUP_ROUTE } from '../utils/consts'\r\n\r\nexport const LogInPage = () => {\r\n\tconst {login} = useAuth()\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst isValid = email.length !== 0 && password.length !== 0\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\t\tawait login(email, password, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className = \"In-Up-Container\">\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title=\"Log In\"/>\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Enter your password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" disabled = {loading}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {SIGNUP_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tCreate new account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../styles/SignIn-Up.css'\r\nimport { Link } from 'react-router-dom'\r\nimport {HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { RadioBtn } from '../components/SignIn-Up/RadioBtn'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { FullScreenLoading } from '../components/Loading/FullScreenLoading'\r\nexport const SignUpPage = () => {\r\n\tconst [currentRoleChoice, setCurrentRoleChoice] = useState(1)\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst {signup} = useAuth()\r\n\tconst [photoURL, setPhotoURL] = useState(\"\")\r\n\tconst isValid = email.length !== 0 && password.length !== 0 && name.length !== 0\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tasync function onFileChange(e){\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(`usersImages/${file.name}`)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetPhotoURL(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\tawait signup(email, name, password, currentRoleChoice, photoURL, imageColors, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"In-Up-Container\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title = \"Sign Up\"/>\r\n\t\t\t\t\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" onChange = {(e)=>setName(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Create a password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div style = {{display:'flex', width:'100%', justifyContent:'center', margin:'5px 0 15px 0'}}>\r\n\t\t\t\t\t\t<RadioBtn label = \"User\" onClick = {()=>setCurrentRoleChoice(0)} currentActive = {currentRoleChoice} id = {0}/>\r\n\t\t\t\t\t\t<RadioBtn label = \"Author\" onClick = {()=>setCurrentRoleChoice(1)} currentActive = {currentRoleChoice} id = {1}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className = \"downloadFile\">\r\n\t\t\t\t\t\t<div className = \"downloadPhoto\">\r\n\t\t\t\t\t\t\t{photoURL === ''?<span className = \"downloadBtnText\">\r\n\t\t\t\t\t\t\t\t<AiOutlineCloudDownload/>\r\n\t\t\t\t\t\t\t\tDownload photo\r\n\t\t\t\t\t\t\t</span>:<span className = \"downloadBtnText\">Done</span>}\r\n\t\t\t\t\t\t\t<span className=\"photoLoadLine\" style = {photoURL !== ''?{width:'100%'}:{}}></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange = {onFileChange}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" type = \"submit\" disabled = {loading}>\r\n\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {LOGIN_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tAlready have the account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../styles/HomePage.css'\r\nimport { MainBanner } from '../components/HomePage/MainBanner'\r\nimport { RecentSongs } from '../components/HomePage/RecentSongs'\r\nimport { RecommendedAuthors } from '../components/HomePage/RecommendedAuthors'\r\nimport { RecommendedSongs } from '../components/HomePage/RecommendedSongs'\r\nimport { Top15Songs } from '../components/HomePage/Top15Songs'\r\n\r\nexport const Home = () => {\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards' }} className=\"HomePage\">\r\n\t\t\t<MainBanner />\r\n\t\t\t<RecentSongs />\r\n\t\t\t<Top15Songs />\r\n\t\t\t<RecommendedSongs />\r\n\t\t\t<RecommendedAuthors />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport \"../styles/LibraryPage.css\"\r\nimport { Slider } from '../components/Tools/Slider'\r\nimport { SongsPage } from '../components/LibraryPage/SongsPage'\r\nimport { PlaylistsPage } from '../components/LibraryPage/PlaylistsPage'\r\nimport { AuthorsPage } from '../components/LibraryPage/AuthorsPage'\r\n\r\nexport const LibraryPage = () => {\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst libraryPages = [<SongsPage/>, <PlaylistsPage/>, <AuthorsPage/>]\r\n\treturn (\r\n\t\t<div className=\"LibraryPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t<Slider pages = {['Songs', \"Playlists\", \"Authors\"]} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t{libraryPages[currentPage]}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport \"../styles/SearchPage.css\"\r\nimport { PlaylistItem } from '../components/AuthorPage/PlaylistItem'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { BackBtn } from '../components/Basic/BackBtn'\r\nimport { FiSearch, FiX } from 'react-icons/fi'\r\nimport { TitleWithMoreBtn } from '../components/Basic/TitleWithMoreBtn'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { SearchBar } from '../components/Basic/SearchBar'\r\nimport {AuthorItemBig} from '../components/AuthorPage/AuthorItemBig'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { AuthorsList } from '../components/Basic/AuthorsList'\r\nimport { AlbumList } from '../components/Lists/AlbumList'\r\nexport const SearchPage = () => {\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [resultSongList, setResultSongList] = useState([])\r\n\tconst [resultAuthorList, setResultAuthorList] = useState([])\r\n\tconst [resultAlbumList, setResultAlbumList] = useState([])\r\n\tconst [shadowColor, setShadowColor] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetResultSongList([])\r\n\t\tsetResultAuthorList([])\r\n\t\tsetResultAlbumList([])\r\n\t}, [searchValue])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(resultSongList.length !== 0){\r\n\t\t\tsetShadowColor(resultSongList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAuthorList.length !== 0){\r\n\t\t\tsetShadowColor(resultAuthorList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAlbumList.length !== 0){\r\n\t\t\tsetShadowColor(resultAlbumList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse setShadowColor(\"\")\r\n\t}, [resultSongList, resultAuthorList, resultAlbumList])\r\n\treturn (\r\n\t\t<div className=\"SearchPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<SearchBar\r\n\t\t\t\tvalue={searchValue}\r\n\t\t\t\tsetValue = {setSearchValue}\r\n\t\t\t\tallFoundSongs = {resultSongList}\r\n\t\t\t\tsetAllFoundSongs = {setResultSongList}\r\n\t\t\t\tsetResultPlaylists = {setResultAlbumList}\r\n\t\t\t\tsetResultAuthorList = {setResultAuthorList}\r\n\t\t\t\tfocus\r\n\t\t\t/>\r\n\r\n\t\t\t<SongList listOfSongs = {resultSongList} source = {{ source: '/search', name: \"Search\", image: \"https://www.pngkey.com/png/full/87-872187_lupa-search-icon-white-png.png\", songsList:resultSongList }} title = {\"Songs\"} showListens displayIfEmpty = {\"\"}/>\r\n\t\t\t<AuthorsList listOfAuthors = {resultAuthorList} title = {\"Authors\"}/>\r\n\t\t\t<AlbumList listOfAlbums = {resultAlbumList} title = {\"Albums and Playlists\"} loading = {false}/>\r\n\t\t\t<div className=\"colorfullShadow\" style={{ background: shadowColor }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { ChatItem } from '../components/ChatPage/ChatItem'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport '../styles/ChatPage.css'\r\nimport { useFetchFirebaseData } from '../hooks/fetchFirebaseData'\r\nimport {FiPlus} from 'react-icons/fi'\r\nimport { useModal } from '../contexts/ModalContext'\r\nimport {CreateChat} from '../components/ChatPage/CreateChat'\r\nexport const ChatPage = () => {\r\n\tconst [yourChats, setYourChats] = useState([])\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading, 'chats', currentUser.chats, setYourChats, (a, b)=>{if(b.messages.length && a.messages.length) return new Date(b.messages[b.messages.length - 1].sentTime).getTime() - new Date(a.messages[a.messages.length - 1].sentTime).getTime()})\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards', minHeight: \"100%\" }}>\r\n\t\t\t<div style = {{marginBottom:'10px', display:'flex', alignItems:'start', width:'100%'}}>\r\n\t\t\t\t<button className = \"standartButton\" onClick = {()=>{toggleModal();setContent(<CreateChat/>)}}>\r\n\t\t\t\t\t<FiPlus/>\r\n\t\t\t\t\tCreate chat\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{loading ?\r\n\t\t\t\t<LoadingCircle />\r\n\t\t\t\t:\r\n\t\t\t\t<div className=\"chatsWrapper\">\r\n\t\t\t\t\t{yourChats.length? yourChats.map((chat, index) => {\r\n\t\t\t\t\t\treturn <ChatItem chatData={chat} key={index} />\r\n\t\t\t\t\t}):<h3>No chats</h3>}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { AlbumPage } from '../pages/AlbumPage'\r\nimport { AuthorPage } from '../pages/AuthorPage'\r\nimport { DialoguePage } from '../pages/DialoguePage'\r\nimport { PageNotFound } from '../pages/PageNotFound'\r\nimport { privateRoutes, publicRoutes } from '../routes'\r\nimport { HOME_ROUTE, LOGIN_ROUTE, NOTFOUND_ROUTE} from '../utils/consts'\r\nexport const ContentRouter = () => {\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<Route path={'/authors/:authorId'} component={AuthorPage} exact/>\r\n\t\t\t<Route path={'/albums/:albumId'} component={AlbumPage} exact/>\r\n\t\t\t<Route path={'/chat/:chatId'} component={DialoguePage} exact/>\r\n\t\t\t<Route path={NOTFOUND_ROUTE} component={PageNotFound} exact/>\r\n\t\t\t{privateRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={HOME_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","function amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nexport default function correctTimeDisplay(seconds) {\r\n\treturn amountOfZeros(Math.floor(seconds / 60)) + \":\" + amountOfZeros(Math.floor(seconds % 60))\r\n}","import React from 'react'\r\nimport { FaBackward, FaForward, FaPause, FaPlay } from 'react-icons/fa'\r\nimport { TiArrowRepeat, TiArrowShuffle } from 'react-icons/ti'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport checkNumber from '../../functions/other/checkNumber'\r\nimport correctTimeDisplay from '../../functions/other/correctTimeDisplay'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { ColorCircles } from './colorCircles'\r\nimport {Hint} from '../Basic/Hint'\r\nexport const Player = ({inputRef, textLimit = 18, linkToAuthors = true}) => {\r\n\tconst { \r\n\t\tcurrentSongData,\r\n\t\tfindLen,  \r\n\t\tcurrentTime, \r\n\t\tchangeCurrentTime, \r\n\t\tsongDuration, \r\n\t\tsetRepeatMode, \r\n\t\trepeatMode, \r\n\t\tplay, \r\n\t\tprevSong, \r\n\t\tplaySong, \r\n\t\tnextSong, \r\n\t\tsetShuffleMode, \r\n\t\tshuffleMode, \r\n\t\tdisplayAuthors,\r\n\t\tname, \r\n\t\tauthors, \r\n\t\tcover,\r\n\t\tinputRange} = useSong()\r\n\treturn currentSongData.id !== -1?(\r\n\t\t<div className=\"player\">\r\n\t\t\t<div className=\"playerUpperSide\">\r\n\t\t\t\t<div className=\"songCover\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"nameAndAuthors\">\r\n\t\t\t\t\t<h2 title={name.length > textLimit ? name : null} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={name.length > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{name}</div>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h3 style={{ overflow: 'hidden' }} title = {authors.map((el) => ' ' + el.displayName)}>\r\n\t\t\t\t\t\t{linkToAuthors?<div style={findLen() > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{displayAuthors()}</div>:<div>{displayAuthorsStr(authors, ' & ', 33)}</div>}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"controlPanel\">\r\n\t\t\t\t<input type=\"range\" min=\"0\" ref={inputRef} step=\"1\" value={currentTime} onChange={(event)=>{changeCurrentTime(event)}} style = {{background: `linear-gradient(to right, var(--themeColor2) ${inputRange}%, #fff ${inputRange}%)`}}/>\r\n\t\t\t\t<div className=\"startAndEndTime\">\r\n\t\t\t\t\t<span>{correctTimeDisplay(currentTime)}</span>\r\n\t\t\t\t\t<span>{correctTimeDisplay(songDuration)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<button className=\"shuffleBtn\" onClick={() => setShuffleMode(checkNumber(shuffleMode + 1, 1))} style={shuffleMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowShuffle style={shuffleMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={prevSong}><FaBackward /></button>\r\n\t\t\t\t\t<button onClick={playSong}>{play ? <FaPause /> : <FaPlay />}</button>\r\n\t\t\t\t\t<button onClick={nextSong}><FaForward /></button>\r\n\t\t\t\t\t<button className=\"repeatBtn\" onClick={() => setRepeatMode(checkNumber(repeatMode + 1, 2))} style={repeatMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowRepeat style={repeatMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t\t<span style={repeatMode === 2 ? { opacity: 1 } : {}}></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { BiMusic, BiSearch } from \"react-icons/bi\";\r\nimport { FiHome, FiMessageCircle } from \"react-icons/fi\";\r\nimport { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, SEARCH_ROUTE } from \"../utils/consts\";\r\n\r\nexport const leftSideBar = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<FiHome/>,\r\n\t\ttitle:'Home',\r\n\t\tlink:HOME_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiMusic/>,\r\n\t\ttitle:'Library',\r\n\t\tlink:LIBRARY_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<BiSearch/>,\r\n\t\ttitle:'Search',\r\n\t\tlink:SEARCH_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<FiMessageCircle/>,\r\n\t\ttitle:'Chat',\r\n\t\tlink:CHAT_ROUTE\r\n\t},\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const MobileControlBarItem = ({element, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<Link to = {element.link} className = 'MobileControlBarItem' onClick = {()=>setCurrentPage(element.id)} style = {element.id === currentPage?{color:'var(--blue)'}:{}}>\t\r\n\t\t\t{element.icon}\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../../styles/BottomControlBar.css'\r\nimport {leftSideBar} from '../../data/leftSideBar'\r\nimport { MobileControlBarItem } from '../BottomControlBar/MobileControlBarItem'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { BiUserCircle } from 'react-icons/bi'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nexport const BottomControlBar = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst userElement = {\r\n\t\ticon:<BiUserCircle/>,\r\n\t\tlink:`/authors/${currentUser.uid}`,\r\n\t}\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tconsole.log(window.location.hash)\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className = \"BottomControlBar\">\r\n\t\t\t{leftSideBar.map((el, i)=>{\r\n\t\t\t\treturn <MobileControlBarItem element = {el} key = {i} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t})}\r\n\t\t\t<MobileControlBarItem element = {userElement} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BottomControlBar } from './BottomControlBar'\r\n\r\nexport const FullBottomSide = () => {\r\n\tconst { setOpenFullScreenPlayer, inputRange } = useSong()\r\n\treturn (\r\n\t\t<div className=\"FullBottomSide\">\r\n\t\t\t<span onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t<Player textLimit={25} linkToAuthors={false} />\r\n\t\t\t\t<span className=\"mobileSongRange\" style = {{width:inputRange + \"%\"}}></span>\r\n\t\t\t</span>\r\n\t\t\t<BottomControlBar />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Loading = ({currentTime, timeSpan, id}) => {\r\n\treturn (\r\n\t\t<div className = \"Loading\" id = {id}>\r\n\t\t\t<div className=\"outer\" style = {{pointerEvents:'none'}}>\r\n\t\t\t\t<div className=\"inner\" style = {currentTime/timeSpan < 1?{width:(currentTime/timeSpan)*100 + \"%\"}:{width:0 + \"%\", opacity:'0'}}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Loading } from './Loading'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nexport const LyricsParagraph = ({ el, index, lyricsModeratorMode, karaokeModeratorTimes,  setKaraokeModeratorTimes, setInputKaraokeTime, inputKaraokeTime }) => {\r\n\tconst { currentSongData, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, lyrics} = useSong()\r\n\tconst paragraphRef = useRef()\r\n\tconst isVisible = useOnScreen(currentParagraph === index ? currentParagraphRef : paragraphRef)\r\n\tconst paragraphStyle = currentParagraph === index ?\r\n\t{} : window.innerWidth > 1000 ?\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-58px)' } : { transform: 'scale(.75) translateX(-78px)' } :\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-11.5%)' } : { transform: 'scale(.75) translateX(-15.6%)' }\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"lyricsBlock\" key={index} id={index} onClick={(e) => changeCurrentTime(e, el.startTime)} style={play ? currentParagraph === index || !isVisible ? {} : Math.abs(currentParagraph - index) < 2? { opacity: .5} : { opacity: .1} : {}} ref={currentParagraph === index ? currentParagraphRef : paragraphRef} >\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t<span onClick={e => e.stopPropagation()}>{karaokeModeratorTimes[index] !== undefined && karaokeModeratorTimes[index].length !== 0 ? <BiCheckCircle style={{ background: 'var(--themeColor3)', color: 'var(--themeColor)' }} /> : <FiXCircle />} </span>\r\n\t\t\t\t\t\t<input type=\"number\" value={karaokeModeratorTimes[index] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, index)} onClick={e => e.stopPropagation()} />\r\n\t\t\t\t\t\t<div className=\"addLyricsElementBtns\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'up') }}><BiUpArrow /></button>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'down') }}><BiDownArrow /></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tel.text === \"@loading\" ?\r\n\t\t\t\t\t<Loading currentTime={currentTime - lyrics[index].startTime} timeSpan={lyrics[index + 1].startTime - lyrics[index].startTime} id={index} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\tel.text === \"@end\" ? <></>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<p key={index} id={index} style={paragraphStyle}>{el.text}</p>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { Share } from '../components/FullScreenPlayer/Share';\r\nimport { Options } from '../components/FullScreenPlayer/Options';\r\nimport { Lyrics } from '../components/FullScreenPlayer/Lyrics';\r\nimport { Queue } from '../components/FullScreenPlayer/Queue';\r\nimport { BiDotsVerticalRounded, BiShare } from 'react-icons/bi';\r\nimport {RiPlayListFill} from 'react-icons/ri'\r\nimport {FiAlignLeft} from 'react-icons/fi'\r\nimport { TiDocumentText } from 'react-icons/ti';\r\nimport { AuthorsList } from '../components/FullScreenPlayer/AuthorsList';\r\nimport { SongInfo } from '../components/Basic/SongInfo';\r\nimport { AddToPlaylists } from '../components/FullScreenPlayer/AddToPlaylists';\r\nexport const rightSide = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<BiShare/>,\r\n\t\ttitle:'Share',\r\n\t\tcomponent:Share\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiDotsVerticalRounded/>,\r\n\t\ttitle:'More',\r\n\t\tcomponent:Options\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<TiDocumentText/>,\r\n\t\ttitle:'Lyrics',\r\n\t\tcomponent:Lyrics\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<RiPlayListFill/>,\r\n\t\ttitle:'Queue',\r\n\t\tcomponent:Queue\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\ticon:null,\r\n\t\ttitle:'Go To Authors',\r\n\t\tcomponent:AuthorsList\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\ticon:null,\r\n\t\ttitle:'Add to playlist',\r\n\t\tcomponent:AddToPlaylists\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\ticon:null,\r\n\t\ttitle:'Info',\r\n\t\tcomponent:SongInfo\r\n\t},\r\n]","import React from 'react'\r\nimport { FaFacebookF, FaTelegramPlane, FaVk } from 'react-icons/fa'\r\nimport { FiCopy } from 'react-icons/fi'\r\nimport { AiFillInstagram } from 'react-icons/ai'\r\nimport { ImWhatsapp } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nexport const Share = () => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst socialMedia = [\r\n\t\t<ImWhatsapp />,\r\n\t\t<FaFacebookF />,\r\n\t\t<FaTelegramPlane />,\r\n\t\t<FaVk />,\r\n\t\t<AiFillInstagram />\r\n\t]\r\n\treturn (\r\n\t\t<div className=\"Share\">\r\n\t\t\t<button className=\"shareCopyLink\">\r\n\t\t\t\t<FiCopy />\r\n\t\t\t\tCopy link\r\n\t\t\t</button>\r\n\t\t\t<div className=\"shareOnSocial\">\r\n\t\t\t\t{socialMedia.map((social, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"shareSocialIcon\" key={index}>\r\n\t\t\t\t\t\t\t{social}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sharePeopleShort\">\r\n\t\t\t\t<FriendsListToShareWith item = {currentSongData} whatToShare = {'song'}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {MdPlaylistAdd} from 'react-icons/md'\r\nimport { BiAlbum, BiHeart, BiInfoCircle, BiPlusCircle, BiUserCircle } from \"react-icons/bi\";\r\nimport {FiTrash2, FiPlusCircle, FiInfo} from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton';\r\nexport const Options = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {currentSongData, setRightSideCurrentPage} = useSong()\r\n\treturn (\r\n\t\t<div className='Options'>\r\n\t\t\t<div className='OptionItem' >\r\n\t\t\t\t<AddOrDeleteButtonFull song = {currentSongData}/>\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(4)}>\r\n\t\t\t\t<BiUserCircle />\r\n\t\t\t\tGo to author\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(5)}>\r\n\t\t\t\t<MdPlaylistAdd />\r\n\t\t\t\tAdd to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(6)}>\r\n\t\t\t\t<FiInfo/>\r\n\t\t\t\tInfo\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { Slider } from '../Tools/Slider'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { LyricsParagraph } from './LyricsParagraph'\r\nexport const Lyrics = () => {\r\n\tconst { setIsThereKaraoke, currentSongData, setCurrentSongData, isThereKaraoke, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, currentSong, lyrics, rightSideCurrentPage, openFullScreenPlayer, openMenu } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [inputKaraokeTime, setInputKaraokeTime] = useState(0)\r\n\tconst [karaokeModeratorTimes, setKaraokeModeratorTimes] = useState([])\r\n\tconst [lyricsModeratorMode, setLyricsModeratorMode] = useState(0)\r\n\tconst [canUpdateLyrics, setCanUpdateLyrics] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (isThereKaraoke && (openMenu && rightSideCurrentPage === 2) && openFullScreenPlayer) currentParagraphRef.current.scrollIntoView()\r\n\t}, [currentParagraph])\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(lyrics && lyrics[0].startTime !== 'undefined'){\r\n\t\t\tlyrics.forEach(paragraph => {\r\n\t\t\t\tkaraokeModeratorTimes.push(paragraph.startTime)\r\n\t\t\t});\r\n\t\t\tsetCanUpdateLyrics(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet tempSongData = currentSongData\r\n\t\t// console.log(tempSongData)\r\n\t\tif (tempSongData !== undefined && inputKaraokeTime !== 0) {\r\n\t\t\ttempSongData.lyrics.forEach((paragraph, index) => {\r\n\t\t\t\tparagraph.startTime = karaokeModeratorTimes[index] || 'undefined'\r\n\t\t\t})\r\n\t\t\tsetCurrentSongData(tempSongData)\r\n\t\t\tsetIsThereKaraoke(true)\r\n\t\t}\r\n\r\n\t\tif(!currentSongData.lyrics?.some(paragraph=>paragraph.startTime === 'undefined')) setCanUpdateLyrics(true)\r\n\t\telse setCanUpdateLyrics(false)\r\n\t}, [inputKaraokeTime])\r\n\tfunction updateLyrics() {\r\n\t\t//TODO: add if statement to prevent adding lyrics time spans to not everysingle paragraph block\r\n\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\tlyrics: currentSongData.lyrics\r\n\t\t})\r\n\t}\r\n\r\n\t// console.log(currentSongData)\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\treturn lyrics?(\r\n\t\t<div className=\"Lyrics\">\r\n\t\t\t{\r\n\t\t\t\tcurrentUser.isAdmin ?\r\n\t\t\t\t\t<Slider pages={['Listen mode', 'Edit Mode']} currentPage={lyricsModeratorMode} setCurrentPage={setLyricsModeratorMode} /> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tisThereKaraoke ?\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LyricsParagraph el = {el} index = {i} lyricsModeratorMode = {lyricsModeratorMode} karaokeModeratorTimes = {karaokeModeratorTimes} setKaraokeModeratorTimes = {setKaraokeModeratorTimes} setInputKaraokeTime = {setInputKaraokeTime} inputKaraokeTime = {inputKaraoke}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} \r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'up')}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'down')}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<p>{el.text}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<h6 className={\"lyricsAuthors \" + (currentParagraph === lyrics.length - 1 ? \"active\" : \"\")}>Authors:  {displayAuthors()}</h6>\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<button onClick={canUpdateLyrics?updateLyrics:null} className=\"updateLyricsBtn\" style = {!canUpdateLyrics?{opacity:0.3}:{}}>Update Lyrics</button> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t</div>\r\n\t): <h3>No lyrics</h3>\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { SongItem } from './SongItem'\r\n\r\nexport const Queue = () => {\r\n\tconst { currentSongQueue, currentSongPlaylistSource, setOpenFullScreenPlayer } = useSong()\r\n\treturn (\r\n\t\t<div className=\"Queue\">\r\n\t\t\t<div className=\"queueNowIsPlaying\">\r\n\t\t\t\t<h5 style={{ marginTop: 2 }}>\r\n\t\t\t\t\tNow is playing:\r\n\t\t\t\t\t<Link onClick={() => setOpenFullScreenPlayer(false)} to={currentSongPlaylistSource.source} className=\"queueAlbumName\">\r\n\t\t\t\t\t\t<div className=\"queueImage\">\r\n\t\t\t\t\t\t\t<img loading = \"lazy\" src={currentSongPlaylistSource.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>{shortWord(currentSongPlaylistSource.name, 25)}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t\t{currentSongQueue.map((song, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SongItem song={song} localIndex={index} key={index} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../../App.css';\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { BiChevronLeft } from 'react-icons/bi'\r\nimport { rightSide } from '../../data/playerRightSide'\r\nimport { Player } from '../FullScreenPlayer/Player';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport {useSwipeable} from 'react-swipeable'\r\nimport checkNumber from '../../functions/other/checkNumber';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\nimport { useScreen } from '../../contexts/ScreenContext';\r\n\r\nexport default function FullScreenPlayer() {\r\n  const {\r\n    imgColors,\r\n    inputRef,\r\n    rightSideCurrentPage,\r\n    setRightSideCurrentPage,\r\n    openFullScreenPlayer,\r\n    setOpenFullScreenPlayer,\r\n    lyrics,\r\n    openMenu,\r\n    setOpenMenu\r\n  } = useSong()\r\n  const {isMobile, screenHeight} = useScreen()\r\n  const lyricsRef = useRef(null)\r\n  const [transformTransition, setTransformTransition] = useState(0.05)\r\n  const [mobileMenuTransition, setMobileMenuTransition] = useState(0)\r\n  // const [swipeDown, setSwipeDown] = useState(false)\r\n  const [deltaY, setDeltaY] = useState(0)\r\n  const [deltaYMobileMenu, setDeltaYMobileMenu] = useState(0)\r\n  const mobileContentScroll = useRef()\r\n  // setup ref for your usage\r\n  const mobileMenuRef = React.useRef();\r\n  useOutsideClick(mobileMenuRef, setOpenMenu)\r\n  const handlers = useSwipeable({\r\n    // onSwiped: (eventData) => {setSwipeDown(eventData.dir === 'Down')},\r\n    onSwiping: (event) => { if (event.deltaY > 0) setDeltaY(event.deltaY); }\r\n  })\r\n\r\n  // setup ref for your usage\r\n  const bgRef = React.useRef();\r\n\r\n  const handlersForMobileMenu = useSwipeable({\r\n    onSwiping: (event) => {event.event.stopPropagation();if (openMenu && mobileContentScroll.current.scrollTop === 0 &&  event.deltaY > 0) setDeltaYMobileMenu(event.deltaY); else if (!openMenu && event.deltaY < 0) setDeltaYMobileMenu(event.deltaY) },\r\n    onSwipedLeft:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage+1, 3))},\r\n    onSwipedRight:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage-1, 3))}\r\n  })\r\n  \r\n\r\n  function returnToInitialMobileMenu() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setMobileMenuTransition(0)\r\n    dropDelta = setTimeout(() => {\r\n      setMobileMenuTransition(0.2)\r\n      setDeltaYMobileMenu(0)\r\n    }, 300)\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    if (deltaY > 150) {\r\n      setOpenFullScreenPlayer(false)\r\n    }\r\n  }, [deltaY])\r\n\r\n  useEffect(() => {\r\n    if (!openMenu && deltaYMobileMenu < -100) {\r\n      setOpenMenu(true)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else if (openMenu && deltaYMobileMenu > 150) {\r\n      setOpenMenu(false)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else {\r\n      returnToInitialMobileMenu()\r\n    }\r\n  }, [deltaYMobileMenu])\r\n\r\n  \r\n\r\n  function returnToInitial() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setTransformTransition(0.2)\r\n    dropDelta = setTimeout(() => {\r\n      setDeltaY(0)\r\n      setTransformTransition(0)\r\n    }, 100)\r\n  }\r\n\r\n  const refPassthroughBg = (el) => {\r\n    handlers.ref(el);\r\n    bgRef.current = el;\r\n  }\r\n\r\n  const refPassthroughMobileMenu = (el) => {\r\n    handlersForMobileMenu.ref(el);\r\n    mobileMenuRef.current = el;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (imgColors.length !== 0) {\r\n      document.documentElement.style.setProperty('--themeColor', imgColors[1]);\r\n      document.documentElement.style.setProperty('--themeColor2', imgColors[0]);\r\n      document.documentElement.style.setProperty('--themeColor3', imgColors[2]);\r\n      document.documentElement.style.setProperty('--themeColor4', imgColors[5]);\r\n      document.documentElement.style.setProperty('--themeColorTransparent', imgColors[0] + '6e');\r\n    }\r\n  }, [imgColors])\r\n\r\n\r\n  function rightSideContent(currentPage) {\r\n    let RightSidePage = rightSide[currentPage].component\r\n    return (<RightSidePage />)\r\n  }\r\n\r\n  function noLyrics() {\r\n    return lyrics && lyrics.length === 0\r\n  }\r\n\r\n  function changeRightSidePage(el) {\r\n    if (el.id === 2 && noLyrics()) return null\r\n    setMobileMenuTransition(0.2)\r\n    setRightSideCurrentPage(el.id);\r\n    setOpenMenu(true)\r\n  }\r\n  return (\r\n    <div className=\"bg\"\r\n      style={\r\n        openFullScreenPlayer ?\r\n          {\r\n            top: 0,\r\n            opacity: 1,\r\n            visibility: 'visible',\r\n            zIndex: 10,\r\n            transform: `translateY(${deltaY}px)`,\r\n            borderRadius: `${deltaY < 20 ? deltaY : 20}px ${deltaY < 20 ? deltaY : 20}px 0 0`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          } :\r\n          {\r\n            transform: `translateY(${deltaY}px)`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          }\r\n      }\r\n      ref={refPassthroughBg}\r\n      {...handlers}\r\n      onTouchEnd={returnToInitial}\r\n    >\r\n\r\n      <div className=\"auroraWrapper\">\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n      </div>\r\n      \r\n      <div className=\"closeFullScreen\" onClick={() => { setOpenFullScreenPlayer(false) }}>\r\n        {window.innerWidth > 1000 ? <HiChevronDown /> : <FiMinus style={{ opacity: .6 }} />}\r\n      </div>\r\n      <div className=\"FullScreenPlayer\" >\r\n        <div className=\"leftSide\" style={!openMenu ? { width: '100%' } : isMobile?{\r\n            opacity: 0.6,\r\n            visibility: 'visible',\r\n            transform: `translateY(20px)`,\r\n            borderRadius: `10px`,\r\n            transition: `.4s`}:null}>\r\n          <Player inputRef={inputRef} />\r\n        </div>\r\n        {window.innerWidth > 1000 ?\r\n          <div className=\"rightSideWrapper\" style={!openMenu ? { transform: 'translateX(calc(100% - 90px))', width: 0 } : {}}>\r\n            <button className=\"menuBtn\" style={openMenu ? { transform: 'rotate(180deg)' } : { opacity: 0, visibility: 'hidden' }} onClick={() => setOpenMenu(!openMenu)}><BiChevronLeft /></button>\r\n            <div className=\"rightSideControl\">\r\n              {rightSide.map((el, i) => {\r\n                return (\r\n                  <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--themeColor)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={() => changeRightSidePage(el)}>\r\n                    {el.icon}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"rightSide\" ref={lyricsRef} style={!openMenu ? { display: 'none' } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div> :\r\n          <div className=\"mobilePlayerMenu\" {...handlersForMobileMenu} ref={refPassthroughMobileMenu} style={\r\n            openMenu ?\r\n              {\r\n                top: `calc(100% - calc(70vh + 55px) + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n\r\n              } :\r\n              {\r\n                top: `calc(100% - 55px + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n              }\r\n\r\n          }\r\n          // onTouchStart = {returnToInitialMobileMenu}\r\n          >\r\n            <div className=\"mobilePlayerMenuClose\">\r\n              <FiMinus style={{ opacity: .6, width: '50px' }} onClick={() => setOpenMenu(!openMenu)} />\r\n            </div>\r\n            <div className=\"controlIconsWrapper\">\r\n              {rightSide.map((el, i) => {\r\n                if(i <= 3){\r\n                  return (\r\n                    <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--transparentWhite)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={(e) => changeRightSidePage(el)}>\r\n                      {el.title}\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n            <div className=\"mobilePlayerMenuContent\" ref = {mobileContentScroll} style = {!openMenu?{opacity:0}:{}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NavigationItem({id, title, icon, link, currentPage, setCurrentPage}) {\r\n\treturn (\r\n\t\t<Link to = {link}>\r\n\t\t\t<div className={\"NavigationItem \" + (id === currentPage?\"active\":\"\")} onClick={() => setCurrentPage(id)}>\r\n\t\t\t\t<div className=\"icon\">{icon}</div>\r\n\t\t\t\t<b>{title}</b>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FiMessageCircle, FiUser } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\nimport getUID from '../../functions/other/getUID'\r\nimport shareWithManyFriends from '../../functions/other/shareWithManyFriends'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\n\r\nexport const Person = ({ index, friend }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [sendAnimation, setSendAnimation] = useState(\"\")\r\n\tconst { currentSong, currentSongData } = useSong()\r\n\tconst [loadingSendSong, setLoadingSendSong] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([friend.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(sendAnimation?.length > 0){\r\n\t\t\tsetLoadingSendSong(true)\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tsetSendAnimation(\"\")\r\n\t\t\t\tsetLoadingSendSong(false)\r\n\t\t\t}, 600)\r\n\t\t}\r\n\t}, [sendAnimation])\r\n\treturn (\r\n\t\t<div className=\"person\" key={index} id={friend.uid} >\r\n\t\t\t<img loading = \"lazy\" src={currentSongData.cover} alt=\"\" className = {\"sendSongImage \" + sendAnimation}/>\r\n\t\t\t<div className=\"personBtns\">\r\n\t\t\t\t<Link to={`/chat/${friendChatId}`}>\r\n\t\t\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, friend.uid], friendChatId) }}>\r\n\t\t\t\t\t\t<Hint text={'chat'} />\r\n\t\t\t\t\t\t<FiMessageCircle />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={`/authors/${friend.uid}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'profile'} />\r\n\t\t\t\t\t\t<FiUser />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={() => {if(!loadingSendSong) {shareWithManyFriends([friend.uid], currentUser, currentSong, \"song\", \"\"); setSendAnimation('sendAnimation')}}}>\r\n\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t<BiShare />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pesronImg\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t<img loading = \"lazy\" src={friend.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<IsUserOnlineCircle userUID={friend.uid} />\r\n\t\t\t<div className=\"personName\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t{friend.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiCheck, FiPlayCircle, FiPlusCircle, FiShare } from 'react-icons/fi'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const TinyPlaylist = ({ playlist }) => {\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\tconst [addFunc, isAdded] = useAddOrDeleteSong(playlist.id)\r\n\tconst { currentUser } = useAuth()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className=\"TinyPlaylist\">\r\n\t\t\t<div className=\"TinyPlaylistBtns\">\r\n\t\t\t\t{playlist.authors.find(author => author.uid === currentUser.uid) ?\r\n\t\t\t\t\t<button onClick={addFunc}>\r\n\t\t\t\t\t\t{isAdded ?\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Hint text={`remove song`} />\r\n\t\t\t\t\t\t\t\t<FiCheck />\r\n\t\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Hint text={'add song'} />\r\n\t\t\t\t\t\t\t\t<FiPlusCircle />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={playlist} whatToShare={\"playlist\"} />) }}>\r\n\t\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t\t<FiShare />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t}\r\n\t\t\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'album'} /><BiAlbum />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={playSongsInPlaylist}>\r\n\t\t\t\t\t<Hint text={'play'} />\r\n\t\t\t\t\t<FiPlayCircle />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"TinyPlaylistImg\" style={{ backgroundImage: `url(${playlist.image})`, display: 'inline-block', backgroundPosition: \"center center\", backgroundSize: \"cover\" }} onClick = {()=>history.push(`/albums/${playlist.id}`)}>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{shortWord(playlist.name, 13)}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontSize: '0.8em', color: 'grey', fontWeight: '500' }}>\r\n\t\t\t\t\t{playlist.isAlbum ? \"album\" : \"playlist\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const NotificationCircle = () => {\r\n\treturn (\r\n\t\t<div className = \"NotificationCircle\"></div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { leftSideBar } from '../../data/leftSideBar'\r\nimport NavigationItem from '../LeftsideBar/NavigationItem'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nimport '../../styles/LeftsideBar.css'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BiFolderPlus, BiFullscreen} from 'react-icons/bi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { Person } from '../LeftsideBar/Person'\r\nimport { CreatePlaylistPage } from '../LibraryPage/CreatePlaylistPage'\r\nimport { TinyPlaylist } from '../LeftsideBar/TinyPlaylist'\r\nimport { NotificationCircle } from './NotificationCircle'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { Hint } from './Hint'\r\nexport const LeftsideBar = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {\r\n\t\tleftSideBarInputRef,\r\n\t\tsetOpenFullScreenPlayer,\r\n\t\tcurrentSongData,\r\n\t\tyourFriends,\r\n\t\tyourPlaylists\r\n\t} = useSong()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [currentFriendToPlaylistPage, setCurrentFriendToPlaylistPage] = useState(0)\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\treturn (\r\n\t\t<div className=\"LeftsideBar\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t\t\t<h3>Soundbubble</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\" onClick = {()=>setCurrentPage(-1)} >\r\n\t\t\t\t<Link to={`/authors/${currentUser.uid}`}>\r\n\t\t\t\t\t<div className=\"person\" style = {currentPage === -1?{background:'var(--blue)'}:{}}>\r\n\t\t\t\t\t\t{currentUser.friends.some(friend=>friend.status === 'requested')?<NotificationCircle/>:null}\r\n\t\t\t\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t\t\t\t<img loading = \"lazy\" src={currentUser.photoURL} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"personName\">\r\n\t\t\t\t\t\t\t{shortWord(currentUser.displayName, 15)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"NavigationPanel\">\r\n\t\t\t\t{leftSideBar.map(({ id, title, icon, link }, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavigationItem key={index} id={id} title={title} icon={icon} link={link} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer friendsAndPlaylists\">\r\n\t\t\t\t<span style={{display: !currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromBottom .2s forwards' }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tyourFriends.length > 0?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t{yourFriends.map((friend, index) => {\r\n\t\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Person index={friend.uid} friend={friend}/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<h4 className=\"seeMoreBtn\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={currentSongData} whatToShare = {\"song\"}/>) }}>See more</h4>\r\n\t\t\t\t\t\t</>:\r\n\t\t\t\t\t\t<h4 style = {{alignSelf:'center',width:'100%', display:'flex', alignItems:'center', justifyContent:'center'}}>No friends added</h4>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{display: currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromTop .2s forwards' }}>\r\n\t\t\t\t\t{yourPlaylists.map((playlist, index) => {\r\n\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\treturn <TinyPlaylist playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }} style = {{margin:'5px 0'}}>\r\n\t\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\t\tCreate Playlist\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"upAndDownBtns\">\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(0)} style={!currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronUp /></button>\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(1)} style={currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronDown /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t{\r\n\t\t\t\t\t(currentSongData.id === -1)?\r\n\t\t\t\t\tnull:<div className=\"littlePlayer\">\r\n\t\t\t\t\t\t<Player textLimit={15} inputRef={leftSideBarInputRef} />\r\n\t\t\t\t\t\t<div className=\"fullScreenBtn\" onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t\t\t\t{/* <Hint text = {\"open full screen\"} style = {{fontSize:'0.8em'}}/> */}\r\n\t\t\t\t\t\t\t<BiFullscreen />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport {useScreen} from '../../contexts/ScreenContext'\r\nexport const ModalWindow = ({...restProps}) => {\r\n\tconst {openModal, setOpenModal, content} = useModal()\r\n\tconst modalRef = useRef(null)\r\n\tconst {screenHeight} = useScreen()\r\n\tuseOutsideClick(modalRef, setOpenModal)\r\n\treturn (\r\n\t\t<div className = \"modal_darkBg\" style = {!openModal?{opacity:0, visibility:'hidden'}:{height:screenHeight}} >\r\n\t\t\t<div className = \"ModalWindow\" {...restProps} ref = {modalRef} style = {!openModal?{opacity:0, visibility:'hidden', transform:'translateY(40px)'}:{}}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\n\r\nexport const ConfirmWindow = () => {\r\n\tconst { isOpenConfirm, confirmContent, setIsOpenConfirm, closeComfirm } = useModal()\r\n\tconst confirmRef = useRef(null)\r\n\tuseOutsideClick(confirmRef, setIsOpenConfirm)\r\n\treturn (\r\n\t\t<div className=\"modal_darkBg confirm\" style={!isOpenConfirm ? { opacity: 0, visibility: 'hidden' } : {}} >\r\n\t\t\t<div className=\"ConfirmWindow\" ref = {confirmRef} style={!isOpenConfirm ? { transform: 'translateY(40px)' } : {}}>\r\n\t\t\t\t<h3>{confirmContent.question}</h3>\r\n\t\t\t\t<div className=\"confirmButtons\">\r\n\t\t\t\t\t<button onClick={confirmContent.onConfirm} className = \"standartButton\">{confirmContent.confirmText}</button>\r\n\t\t\t\t\t<button onClick={confirmContent.onReject} className = \"standartButton\">{confirmContent.rejectText}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { ContentRouter } from '../../routers/ContentRouter'\r\nimport { FullBottomSide } from '../Mobile/FullBottomSide'\r\nimport FullScreenPlayer from './FullScreenPlayer'\r\nimport { LeftsideBar } from './LeftsideBar'\r\nimport { ModalWindow } from './ModalWindow'\r\nimport '../../styles/FullScreenPlayer.css'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { ConfirmWindow } from '../Windows/ConfirmWindow'\r\n\r\nexport const ContentWrapper = () => {\r\n\tconst { songRef, loadSongData, playing, songSrc, openFullScreenPlayer, repeatMode, setPlay, prevSong, currentSongQueue, nextSong, updateListenCount, currentSongInQueue} = useSong()\r\n\tconst { isMobile, screenHeight } = useScreen()\r\n\tconst { currentUser, setCurrentUser  } = useAuth()\r\n\tconst fiveMinutes = 300000 // ten minutes, or whatever makes sense for your app\r\n\tconst [intervalExciter, setIntervalExciter] = useState(true)\r\n\t// \"maintain connection\"\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t\t\tsetIntervalExciter(!intervalExciter)\r\n\t\t}, fiveMinutes)\r\n\t\treturn () => clearInterval(interval);\r\n\t}, [intervalExciter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t}, [])\r\n\r\n\tfunction audioEnded() {\r\n\t\tconsole.log(\"i workdfasd\")\r\n\t\tif (repeatMode === 0) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t\tsetPlay(false)\r\n\t\t\treturn prevSong()\r\n\t\t}\r\n\t\telse if (repeatMode === 1) {\r\n\t\t\tif (currentSongQueue.length === 1) {\r\n\t\t\t\tprevSong()\r\n\t\t\t\tupdateListenCount()\r\n\t\t\t\treturn songRef.current.play()\r\n\t\t\t}\r\n\t\t\treturn nextSong()\r\n\t\t}\r\n\t\tprevSong()\r\n\t\tupdateListenCount()\r\n\t\tsongRef.current.play()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<audio src={songSrc} ref={songRef} onLoadedData={loadSongData} onTimeUpdate={playing} onEnded={audioEnded}></audio>\r\n\t\t\t<div className={\"Wrapper \" + (openFullScreenPlayer ? \"turnedOff\" : \"\")} style={isMobile ? { height: screenHeight } : { height: \"100vh\" }}>\r\n\t\t\t\t{!isMobile ? <LeftsideBar /> : window.location.hash.substr(2, 4) === 'chat' && window.location.hash.length > 6 ? null : <FullBottomSide />}\r\n\t\t\t\t<div className=\"Content\">\r\n\t\t\t\t\t<ContentRouter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalWindow />\r\n\t\t\t\t<ConfirmWindow/>\r\n\t\t\t</div>\r\n\t\t\t<FullScreenPlayer />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { ContentWrapper } from '../components/Basic/ContentWrapper'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { publicRoutes } from '../routes'\r\nimport { LOGIN_ROUTE} from '../utils/consts'\r\nexport const AppRouter = () => {\r\n\tconst {currentUser} = useAuth()\r\n\treturn currentUser.uid ?\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t<Route path='/' component = {ContentWrapper} />\r\n\t\t</Switch>\r\n\t):\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t{publicRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={LOGIN_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","import './App.css';\r\nimport React from 'react'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { AppRouter } from './routers/AppRouter';\r\nexport default function App() {\r\n  \r\n\r\n  return (\r\n    <HashRouter basename = \"/\">\r\n      <AppRouter/>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { ModalClassProvider } from './contexts/ModalContext';\r\nimport { ScreenProvider } from './contexts/ScreenContext';\r\nimport { SongProvider } from './contexts/SongContext';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ScreenProvider>\r\n      <AuthProvider>\r\n        <ModalClassProvider>\r\n          <SongProvider>\r\n            <App />\r\n          </SongProvider>\r\n        </ModalClassProvider>\r\n      </AuthProvider>\r\n    </ScreenProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}