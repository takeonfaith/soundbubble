{"version":3,"sources":["images/Logo3.svg","components/Basic/LoadingData.js","components/Basic/AddToListCircle.jsx","components/Basic/PersonTiny.js","firebase.js","functions/checkNumber.js","functions/shuffleSongs.js","hooks/useRealTimeFetch.js","functions/normalizeString.js","functions/findVariantsOfName.js","contexts/AuthContext.js","contexts/SongContext.js","functions/displayDate.js","contexts/ScreenContext.js","components/Basic/Hint.jsx","components/Basic/BackBtn.js","components/AuthorPage/SmallImages.js","functions/rightFormatForBigNumber.js","contexts/ModalContext.js","hooks/useOutsideClick.js","functions/getUID.js","functions/createChat.js","functions/findChatURL.js","components/AuthorPage/ChatWithFriendButton.js","components/Basic/LoadingCircle.js","functions/sendMessage.js","components/Basic/SearchBar.js","components/Basic/FriendsListToShareWith.js","functions/shareWithManyFriends.js","components/SignIn-Up/RadioBtn.js","components/FullScreenPlayer/colorCircles.js","components/Basic/SongItemChoice.js","functions/shortWord.js","functions/displayAuthorsStr.js","functions/addSongToLibrary.js","functions/filterArrayWithArray.js","functions/deleteSongFromLibrary.js","components/FullScreenPlayer/AddOrDeleteSongButton.jsx","components/AuthorPage/PersonTinyVerticalItem.js","components/AuthorPage/PersonTinyList.js","components/Basic/SongInfo.js","components/FullScreenPlayer/AddToPlaylists.jsx","functions/addOrDeleteSongToPlaylist.js","components/Windows/SongItemMoreWindow.jsx","components/FullScreenPlayer/AuthorsList.jsx","components/Windows/SongItemMobileMoreWindow.jsx","components/FullScreenPlayer/SongItem.js","components/Basic/MoreBtn.js","components/Basic/TitleWithMoreBtn.js","components/Basic/SongList.js","components/AlbumPage/CustomizeAlbum.js","functions/addAuthorToLibrary.js","functions/addFriend.js","components/Basic/LastSeen.jsx","functions/addPlaylistToLibrary.js","functions/removePlaylistFromLibrary.js","components/Settings/GeneralSettings.jsx","components/Settings/SettingsList.jsx","components/Windows/AuthorMoreWindow.jsx","components/Tools/CirclePages.jsx","components/AuthorPage/Header.js","pages/AlbumPage.js","components/AddWindow/AddPlaylist.js","components/Basic/DownloadPhotoButton.jsx","components/Basic/ErrorPlate.jsx","components/Basic/FullScreenLoading.jsx","components/AddWindow/AddSong.js","components/Tools/Slider.js","components/AuthorPage/AddWindow.js","components/AuthorPage/FriendRequestItem.js","components/AuthorPage/FriendRequest.js","functions/findAuthorsAlbums.js","components/AuthorPage/PlaylistItem.js","components/Basic/AlbumList.js","components/AuthorPage/Playlists.js","functions/findSimilarArtists.js","components/AuthorPage/AuthorItemBig.js","components/Basic/AuthorsList.js","components/AuthorPage/SimilarArtists.js","functions/findIfSongIsNew.js","components/AuthorPage/TopSongs.js","pages/AuthorPage.js","components/ChatPage/AttachmentList.jsx","hooks/fetchFirebaseData.js","components/ChatPage/ChatInfo.jsx","hooks/useFetchDocs.js","components/ChatPage/WallpaperItem.jsx","components/ChatPage/Wallpapers.jsx","components/ChatPage/ChatMoreBtn.js","components/ChatPage/ChatHeader.js","functions/findWhatToWriteInResponseItem.js","hooks/useOnScreen.js","components/Basic/SongItemLoading.jsx","components/ChatPage/SeenByCircle.jsx","components/ChatPage/MessageItem.js","components/ChatPage/MessageField.jsx","components/ChatPage/DisplayChatMessages.jsx","components/ChatPage/AttachedItemsInChatInput.jsx","components/AuthorPage/ChatInput.js","components/ChatPage/DateOnTop.jsx","components/ChatPage/TypingAnimation.jsx","pages/DialoguePage.js","utils/consts.js","components/SignIn-Up/BlurredBg.js","components/SignIn-Up/TitleAndLogo.js","components/HomePage/MainBanner.js","components/HomePage/RecentSongs.js","components/HomePage/RecommendedAuthors.js","components/Basic/ImportantMessage.jsx","components/HomePage/RecommendedSongs.js","components/HomePage/Top15Songs.jsx","images/wave2.svg","components/LibraryPage/LibraryPlaylistItem.js","components/LibraryPage/SongsPage.js","components/LibraryPage/CreatePlaylistPage.js","components/LibraryPage/PlaylistsPage.js","components/LibraryPage/AuthorsPage.js","components/Basic/IsUserOnlineCircle.jsx","components/ChatPage/AmountOfUnseenMessages.jsx","components/ChatPage/LastSentMessage.js","components/ChatPage/ChatItem.js","functions/findAmountOfUnseenMessages.js","components/Basic/ModalWindow.js","components/ChatPage/CreateChat.jsx","components/Basic/SwitchToggle.jsx","routes.js","pages/LogInPage.js","pages/SignUpPage.js","pages/Home.js","pages/LibraryPage.js","pages/SearchPage.js","pages/ChatPage.js","routers/ContentRouter.js","functions/correctTimeDisplay.js","components/FullScreenPlayer/Player.js","data/leftSideBar.js","components/BottomControlBar/MobileControlBarItem.js","components/Mobile/BottomControlBar.js","components/Mobile/FullBottomSide.js","components/FullScreenPlayer/Loading.js","components/FullScreenPlayer/LyricsParagraph.jsx","data/playerRightSide.js","components/FullScreenPlayer/Share.js","components/FullScreenPlayer/Options.js","components/FullScreenPlayer/Lyrics.js","components/FullScreenPlayer/Queue.js","components/Basic/FullScreenPlayer.js","components/LeftsideBar/NavigationItem.js","components/LeftsideBar/Person.js","functions/shareWithOneFriend.js","components/LeftsideBar/TinyPlaylist.js","components/Basic/NotificationCircle.js","components/Basic/LeftsideBar.js","components/Windows/ConfirmWindow.jsx","components/Basic/ContentWrapper.js","routers/AppRouter.js","App.js","index.js"],"names":["LoadingData","className","src","Logo","alt","AddToListCircle","listOfChosenItems","setListOfChosenItems","itemId","undefined","onClick","e","preventDefault","includes","type","filteredList","filter","el","style","color","prev","PersonTiny","data","chosenArray","setChosenArray","restProps","uid","photoURL","displayName","app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","storage","firestore","checkNumber","number","max","min","shuffleSongs","songsArray","randomIndexesArray","newSongsNumbersArray","Array","length","counter","randNum","Math","floor","random","push","useRealTimeFetch","currentUser","fetchFunc","changeCondition","dep","useEffect","normalizeString","str","replace","toLowerCase","findVariantsOfName","name","variantsOfName","personName","i","substr","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","setCurrentUser","userId","setUserId","loading","setLoading","collection","doc","onSnapshot","user","onAuthStateChanged","a","value","login","email","password","setError","signInWithEmailAndPassword","then","catch","err","message","signup","role","imageColors","createUserWithEmailAndPassword","result","set","isAuthor","parseInt","isVerified","numberOfListenersPerMonth","ownSongs","ownPlaylists","addedSongs","addedPlaylists","addedAuthors","lastSongPlayed","chats","friends","subscribers","regDate","FieldValue","serverTimestamp","place","logout","signOut","Provider","SongContext","useSong","SongProvider","yourSongs","setYourSongs","yourPlaylists","setYourPlaylists","yourAuthors","setYourAuthors","yourFriends","setYourFriends","currentSongQueue","setCurrentSongQueue","currentSong","setCurrentSong","currentSongInQueue","setCurrentSongInQueue","currentSongPlaylistSource","setCurrentSongPlaylistSource","id","currentSongData","setCurrentSongData","imgColors","setImgColors","play","setPlay","currentTime","setCurrentTime","songDuration","setSongDuration","repeatMode","setRepeatMode","shuffleMode","setShuffleMode","currentParagraph","setCurrentParagraph","isThereKaraoke","setIsThereKaraoke","openFullScreenPlayer","setOpenFullScreenPlayer","songRef","useRef","currentParagraphRef","inputRef","leftSideBarInputRef","rightSideCurrentPage","setRightSideCurrentPage","openMenu","setOpenMenu","checkKaraoke","lyrics","startTime","fetchCurrentSongInitial","tempSongObject","songSrc","authors","cover","listens","releaseDate","curSong","curQueue","lastQueue","source","image","songsList","docRef","get","exists","songData","error","console","log","fetchYourSongs","tempArray","map","song","unshift","forEach","songId","findIndex","playlistId","friendObj","friend","status","obj","authorId","shuffledSongsArray","listenCountTimeOut","updateListenCount","current","setTimeout","update","sourceId","res","listedData","defineCurrentParagraph","first","last","roundedTime","parseFloat","toFixed","midPoint","blockStartTime","nextBlockStartTime","stopPropagation","correctSongNumber","currentSongId","clearTimeout","document","title","nextSong","prevSong","playSong","pause","playing","event","target","defineCurrentParagraphLight","documentElement","setProperty","changeCurrentTime","localName","displayAuthors","authorsList","separatingSign","to","displayAuthorsFull","loadSongData","duration","window","innerWidth","findLen","amountOfZeros","toDateTime","secs","t","Date","setSeconds","displayDate","stringDate","displayMode","Months","newDate","isNaN","seconds","getMonth","getDate","getFullYear","getHours","getMinutes","ScreenContext","useScreen","ScreenProvider","screenWidth","setScreenWidth","innerHeight","screenHeight","setScreenHeight","isMobile","setIsMobile","handleResize","addEventListener","removeEventListener","Hint","text","direction","BackBtn","history","useHistory","goBack","SmallImages","imagesList","borderColor","marginRight","index","border","transform","rightFormanForBigNumber","ModalContext","useModal","ModalClassProvider","openModal","setOpenModal","content","setContent","isOpenConfirm","setIsOpenConfirm","confirmText","rejectText","onConfirmL","onReject","confirmContent","setConfirmContent","closeConfirm","toggleModal","openConfirm","question","onConfirm","useOutsideClick","ref","setFunc","handleClickOutside","contains","getUID","c","piece","toString","createChat","participants","chatUID","chatName","chatImage","admins","messages","wallpaper","typing","personId","chatInfo","findChatURL","allParticipants","setShouldCreate","setFriendChatId","foundChat","chatId","where","docs","chat","count","every","ChatWithFriendButton","shouldCreate","friendChatId","display","width","textDecoration","background","LoadingCircle","top","sendMessage","chatData","sender","messageText","attachedSongs","attachedAlbums","attachedAuthors","inResponseToMessage","tempMessages","sentTime","seenBy","SearchBar","typingTimeout","setValue","setAllFoundSongs","setResultPlaylists","setResultAuthorList","focus","defaultSearchMode","inputText","defaultSongsListValue","defaultAuthorsListValue","defaultPlaylistsListValue","setMessage","foundAnything","setFoundAnything","searchMode","setSearchMode","findItem","defaultList","setList","foundItemTempArray","normalizedSearch","item","itemData","realData","isPrivate","author","authorData","songsIdsArray","albumsIdsArray","albumId","albumData","playlist","findSomething","marginTop","placeholder","onChange","onKeyUp","func","onKeyDown","position","height","FriendsListToShareWith","whatToShare","chosenFriends","setChosenFriends","setMessageText","shared","setShared","searchValue","setSearchValue","foundPeople","setFoundPeople","showChoose","margin","maxWidth","opacity","shareList","Promise","resolve","shareWithFriends","RadioBtn","currentActive","label","fontWeight","ColorCircles","SongItemChoice","listOfSongs","setListOfSongs","showListens","isNewSong","openMoreWindow","setOpenMoreWindow","setMoreWindowPosRelativeToViewport","currentItemRef","visibility","alignItems","marginLeft","fontSize","getBoundingClientRect","newList","songNum","shortWord","word","len","displayAuthorsStr","authorslist","separator","lenLimit","authorsString","join","addSongToLibrary","songAuthorsUIDS","finalAuthorsUIDS","filterArrayWithArray","whatToFilter","withWhatToFilter","this","indexOf","deleteSongFromLibrary","songObj","find","filtered","finalFilteredAuthors","AddOrDeleteButtonFull","PersonTinyVerticalItem","person","PersonTinyList","listOfPeople","setListOfPeople","scrollLeft","setScrollLeft","wrapperRef","shouldRenderRightArrow","setShouldRenderRightArrow","scrollWidth","offsetWidth","personObj","personData","onScroll","SongInfo","setSongData","friendsThatHaveThisSong","setFriendsThatHaveThisSong","findFriendsThatHaveThisSong","minHeight","AddToPlaylists","flexDirection","key","songs","newSongsList","addOrDeleteSongToPlaylist","SongItemMoreWindow","moreWindowPosRelativeToViewport","bottom","AuthorsList","listOfAuthors","SongItemMobileMoreWindow","SongItem","localIndex","listOfChosenSongs","MoreBtn","lenOfList","maxLen","boolVal","TitleWithMoreBtn","marginBottom","SongList","showCount","showSearch","displayIfEmpty","showMoreSongs","setShowMoreSongs","displaySongs","setDisplaySongs","listSongsIds","allFoundSongs","CustomizeAlbum","playlistName","setPlaylistName","playlistCover","setPlaylistCover","authorsInputValue","setAuthorsInputValue","allAuthors","setAllAuthors","chosenAuthors","setChosenAuthors","creationDate","setReleaseDate","songsSearch","setSongsSearch","allSongs","setAllSongs","chosenSongs","setChosenSongs","isAlbum","playlistStatus","setPlaylistStatus","isPlaylistPrivate","setIsPlaylistPrivate","loadingAuthors","setLoadingAuthors","loadingSongs","setLoadingSongs","imageLocalPath","setImageLocalPath","setImageColors","findAuthors","friendsIds","response","isAdmin","findSongs","removeAuthorFromList","people","file","files","URL","createObjectURL","storageRef","fileRef","child","put","getDownloadURL","authorRef","authorPlaylists","filteredPlaylists","timerUpFunc","getColors","colors","required","some","addAuthor","removeSongFromList","justifyContent","onFileChange","addAuthorToLibrary","addFriend","friendData","updatedDataForFriend","updatedDataForCurrentUser","LastSeen","userUID","lastSeen","setLastSeen","isOnline","setIsOnline","unsubscribe","fiveMinutesAgo","getTime","online","addPlaylistToLibrary","playlistData","removePlaylistFromLibrary","GeneralSettings","SettingsList","settingsList","icon","settingItem","AuthorMoreWindow","CirclePages","amountOfPages","currentPage","_","Header","headerColors","albumAuthors","setAlbumAuthors","authorsImages","setAuthorsImages","mobileCurrentPage","setMobileCurrentPage","deltaX","setDeltaX","transformTransition","setTransformTransition","headerRef","handlers","useSwipeable","onSwiping","isFriend","moreWindowRef","ids","fetchAuthorsData","deleteFriend","onTouchEnd","dropDelta","animation","transition","abs","AlbumPage","match","useRouteMatch","playlistSongs","setPlaylistSongs","setHeaderColors","params","setAlbumData","fetchAlbumsData","albumSong","AddPlaylist","onSubmit","DownloadPhotoButton","setErrorMessage","downloadedPhoto","setDownloadedPhoto","btnText","isValid","validExtensions","ext","ex","ErrorPlate","errorMessage","FullScreenLoading","AddSong","songName","setSongName","songCover","setSongCover","setSongSrc","setLyrics","lyricsObject","setLyricsObject","showSuccessMessage","setShowSuccessMessage","loadingSong","setLoadingSong","authorSongs","padding","borderRadius","manuallyChangeColor","arrayOfParagraphs","startSubstr","Slider","pages","setCurrentPage","pageName","AddWindow","openAddSongWindow","setOpenAddSongWindow","currentSliderPage","setCurrentSliderPage","sliderPages","FriendRequestItem","rejectFriend","FriendRequest","friendRequests","setFriendRequests","friendsList","otherUserFriendList","findAuthorsAlbums","authorsData","setAuthorsPlaylists","currentUserUID","sort","b","PlaylistItem","listOfChosenAlbums","setListOfChosenAlbums","playlistDate","split","AlbumList","listOfAlbums","Playlists","authorsPlaylists","findSimilarArtistsNames","authorsSongsArr","setSimilarAuthors","peopleArray","newAuthors","flat","uniqueAuthorsSet","Set","uniqueAuthorsIdsArray","from","uniqueAuthorsDataArray","j","findSimilarArtists","authorsSongsArray","AuthorItemBig","listOfChosenAuthors","setListOfChosenAuthors","SimilarArtists","similarArtists","setSimilarArtists","findIfSongIsNew","songReleaseDate","TopSongs","popularSongs","setPopularSongs","newSongs","setNewSongs","prevSongs","findAuthorsSongs","AuthorPage","setAuthorsData","AttachmentList","attachmentList","setAttachmentList","sliderCurrentPage","setSliderCurrentPage","attachmentContent","fetchAttachedData","attachedType","firebaseCollection","page","useFetchFirebaseData","list","setState","sortCondition","whereCondFP","whereCondSP","whereCondTP","deps","fetchData","ChatInfo","setParticipants","chatNameValue","setChatNameValue","newChatPhoto","setNewChatPhoto","newImageLocalPath","setNewImageLocalPath","newImageColors","setNewImageColors","participantsPage","setParticipantsPage","showUpdateBtn","setShowUpdateBtn","listOfItems","fetchItem","useFetchDocs","trim","WallpaperItem","currentWallpaper","Wallpapers","wallpaperList","setWallpaperList","ChatMoreBtn","chatMoreBtnRef","ChatHeader","otherPerson","setOtherPerson","otherPersonId","fetchOtherPerson","findWhatToWriteInResponseToItem","referedMessage","useOnScreen","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","disconnect","SongItemLoading","SeenByCircle","listOfSeen","MessageItem","messageData","scrollToMessageRef","setScrollToMessageId","scrollToMessageId","showPhoto","otherMessages","inResponseToMessageArr","setInResponseToMessageArr","userThatSentMessage","setUserThatSentMessage","messageSentTime","attachedSongsData","setAttachedSongsData","attachedAuthorsData","setAttachedAuthorsData","attachedPlaylistsData","setAttachedPlaylistsData","inResponseToMessagesData","setInResponseToMessagesData","inResponseNames","setInResponseNames","messageRef","isVisible","swipeDeltaX","setSwipeDeltaX","addMessageToResponseList","returnToInitial","fetchSentMessageUser","messageId","paddingBottom","album","MessageField","messageList","setInResponseToMessage","setDateRefsArray","setShowPhoto","showDate","setShowDate","dateRef","DisplayChatMessages","messagesWindowRef","scrollTo","offsetTop","AttachedItemsInChatInput","attachedItems","setAttachedItems","setItems","removeItemFromAttached","ChatInput","openAttachWindow","setOpenAttachWindow","setAttachedSongs","setAttachedAlbums","setAttachedAuthors","resultPlaylists","resultAuthorList","attachedSongsNames","setAttachedSongsNames","attachWindowRef","sendMessageFull","maxHeight","overflowY","outline","DateOnTop","date","TypingAnimation","typingPeople","typingPeopleData","setTypingPeopleData","DialoguePage","setChatData","scrollToBottomElementRef","setMessageList","currentDateOnTop","setCurrentDateOnTop","dateRefsArray","snapshot","scroll","scrollHeight","clientHeight","scrollToMyRef","scrollTop","innerHTML","LOGIN_ROUTE","SIGNUP_ROUTE","HOME_ROUTE","LIBRARY_ROUTE","SEARCH_ROUTE","CHAT_ROUTE","BlurredBg","TitleAndLogo","MainBanner","bannerColors","setBannerColors","setcurrentSliderPage","topAuthor","setTopAuthor","topSong","setTopSong","topAlbum","setTopAlbum","findTop","criterion","orderBy","RecentSongs","recentSongs","setRecentSongs","tempSongsIds","findRecentSongs","RecommendedAuthors","recommendationAuthors","setRecommendationAuthors","uniqueAuthors","setUniqueAuthors","uniqueAuthorsUIDSArray","ImportantMessage","button","RecommendedSongs","recommendedSongs","setRecommendedSongs","fetchRecommendedSongs","Top15Songs","topSongs","setTopSongs","limit","LibraryPlaylistItem","SongsPage","p","wave","CreatePlaylistPage","PlaylistsPage","AuthorsPage","IsUserOnlineCircle","AmountOfUnseenMessages","amountOfUnseen","LastSentMessage","lastAttachedItem","setLastAttachedItem","shouldPutDot","setShouldPutDot","lastMessage","setLastMessage","messageIcons","lastIcon","setLastIcon","authorName","findWhatToWriteUnderName","ChatItem","setAmountOfUnseen","reduce","accum","findAmountOfUnseenMessages","now","ModalWindow","modalRef","CreateChat","foundFriends","setFoundFriends","chatCover","setChatCover","setChatName","setRrrorMessage","SwitchToggle","boolValue","setBoolValue","publicRoutes","path","Component","setEmail","setPassword","disabled","currentRoleChoice","setCurrentRoleChoice","setName","setPhotoURL","privateRoutes","libraryPages","resultSongList","setResultSongList","resultAlbumList","setResultAlbumList","shadowColor","setShadowColor","yourChats","setYourChats","switchValue","setSwitchValue","ContentRouter","component","exact","correctTimeDisplay","Player","textLimit","linkToAuthors","overflow","whiteSpace","step","leftSideBar","link","MobileControlBarItem","element","BottomControlBar","userElement","location","hash","FullBottomSide","Loading","timeSpan","pointerEvents","LyricsParagraph","lyricsModeratorMode","karaokeModeratorTimes","setKaraokeModeratorTimes","setInputKaraokeTime","inputKaraokeTime","paragraphRef","paragraphStyle","addLyricsBlock","indexOfRelativeElement","tempTimes","splice","convertedToNumber","inputKaraoke","rightSide","socialMedia","social","setLyricsModeratorMode","canUpdateLyrics","setCanUpdateLyrics","scrollIntoView","paragraph","tempSongData","FullScreenPlayer","lyricsRef","mobileMenuTransition","setMobileMenuTransition","deltaY","setDeltaY","deltaYMobileMenu","setDeltaYMobileMenu","mobileContentScroll","mobileMenuRef","bgRef","handlersForMobileMenu","onSwipedLeft","onSwipedRight","returnToInitialMobileMenu","rightSideContent","RightSidePage","noLyrics","changeRightSidePage","zIndex","NavigationItem","Person","shareWithOneFriend","TinyPlaylist","NotificationCircle","LeftsideBar","currentFriendToPlaylistPage","setCurrentFriendToPlaylistPage","alignSelf","ConfirmWindow","confirmRef","closeComfirm","ContentWrapper","intervalExciter","setIntervalExciter","interval","setInterval","clearInterval","onLoadedData","onTimeUpdate","onEnded","AppRouter","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.04a682ee.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo3.fc53f4ac.svg\";","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const LoadingData = () => {\r\n\treturn (\r\n\t\t<div className = \"LoadingData\">\r\n\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {IoIosCheckmarkCircle, IoIosRadioButtonOff} from 'react-icons/io'\r\n\r\nexport const AddToListCircle = ({listOfChosenItems, setListOfChosenItems, itemId}) => {\r\n\treturn listOfChosenItems !== undefined ? (\r\n\t\t<div onClick = {e=>e.preventDefault()}>\r\n\t\t\t{\r\n\t\t\t\tlistOfChosenItems.includes(itemId) ?\r\n\t\t\t\t\t<button type=\"button\" onClick={(e) => { let filteredList = listOfChosenItems.filter(el => el !== itemId); setListOfChosenItems(filteredList) }} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosCheckmarkCircle style={{ color: 'var(--lightBlue)' }} />\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button type=\"button\" onClick={() => setListOfChosenItems(prev => [...prev, itemId])} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosRadioButtonOff />\r\n\t\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React from 'react'\r\nimport { AddToListCircle } from './AddToListCircle'\r\nexport const PersonTiny = ({data, chosenArray, setChosenArray, ...restProps}) => {\r\n\treturn (\r\n\t\t<div className=\"person\" {...restProps}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {chosenArray} setListOfChosenItems = {setChosenArray} itemId = {data.uid}/>\r\n\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t<img src={data.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"personName\">\r\n\t\t\t\t{data.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport seedDatabase from './seedDatabase';\r\n\r\nconst app = firebase.initializeApp({\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n\tappId:process.env.REACT_APP_FIREBASE_APP_ID,\r\n\tmeasurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n});\r\nexport const auth = app.auth()\r\nexport const storage = app.storage()\r\nexport const firestore = app.firestore()\r\n// seedDatabase(firestore)\r\nexport default app","export default function checkNumber(number, max, min = 0){\r\n\tif(number > max) return min\r\n\tif(number < min) return max\r\n\r\n\treturn number\r\n}","export default function shuffleSongs(songsArray){\r\n\tconst randomIndexesArray = []\r\n\tconst newSongsNumbersArray = new Array(songsArray.length)\r\n\tlet counter = 0\r\n\twhile(counter < songsArray.length){\r\n\t\tconst randNum = Math.floor(Math.random()*(songsArray.length))\r\n\t\tif(!randomIndexesArray.includes(randNum)){\r\n\t\t\trandomIndexesArray.push(randNum)\r\n\t\t\tnewSongsNumbersArray[randNum] = songsArray[counter]\r\n\t\t\tcounter++\r\n\t\t}\r\n\t}\r\n\treturn newSongsNumbersArray\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useRealTimeFetch = (currentUser, fetchFunc, changeCondition, dep) => {\r\n\tuseEffect(() => {\r\n\t\tif(currentUser.uid){\r\n\t\t\tlet shouldChangeYourPlaylists = changeCondition\r\n\t\t\tif (shouldChangeYourPlaylists) {\r\n\t\t\t\tfetchFunc()\r\n\t\t\t}\r\n\t\t}\r\n\t}, dep)\r\n}\r\n","export default function normalizeString(str){\r\n\treturn str.replace(/\\s/g, '').replace(/[,'._/]/g, '').replace(/-/g, '').toLowerCase()\r\n}","import normalizeString from \"./normalizeString\"\r\n\r\nexport const findVariantsOfName = (name) => {\r\n\tlet variantsOfName = []\r\n\tlet personName = normalizeString(name)\r\n\tfor (let i = 1; i < personName.length + 1; i++) {\r\n\t\tvariantsOfName.push(personName.substr(0, i))\r\n\t}\r\n\treturn variantsOfName\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { auth, firestore } from '../firebase'\r\nimport firebase from 'firebase'\r\nimport { LoadingData } from '../components/Basic/LoadingData'\r\nimport { findVariantsOfName } from '../functions/findVariantsOfName'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport const useAuth = () => {\r\n\treturn useContext(AuthContext)\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [currentUser, setCurrentUser] = useState({})\r\n\tconst [userId, setUserId] = useState(null)\r\n\tconst [loading, setLoading] = useState(true)\r\n\tfunction login(email, password, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.signInWithEmailAndPassword(email, password).then().catch(err => {\r\n\t\t\tsetError(err.message)\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction logout() {\r\n\t\treturn auth.signOut()\r\n\t}\r\n\r\n\tfunction signup(email, name, password, role, photoURL, imageColors, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.createUserWithEmailAndPassword(email, password)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tfirestore.collection('users')\r\n\t\t\t\t\t.doc(result.user.uid)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\t\tdisplayName: name,\r\n\t\t\t\t\t\tphotoURL: photoURL || \"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg\",\r\n\t\t\t\t\t\tisAuthor: parseInt(role) === 1,\r\n\t\t\t\t\t\tisVerified: parseInt(role) === 1,\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: 0,\r\n\t\t\t\t\t\townSongs: [],\r\n\t\t\t\t\t\townPlaylists: [],\r\n\t\t\t\t\t\taddedSongs: [],\r\n\t\t\t\t\t\taddedPlaylists: [],\r\n\t\t\t\t\t\taddedAuthors: [],\r\n\t\t\t\t\t\tlastSongPlayed: \"\",\r\n\t\t\t\t\t\tchats: [],\r\n\t\t\t\t\t\tfriends: [],\r\n\t\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\t\tregDate: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t\t})\r\n\t\t\t\tfirestore.collection('search').doc(result.user.uid).set({\r\n\t\t\t\t\tplace: 'users',\r\n\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\tvariantsOfName: findVariantsOfName(name)\r\n\t\t\t\t})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(userId !== null){\r\n\t\t\tconst unsubscribe = firestore.collection('users').doc(userId).onSnapshot(user => {\r\n\t\t\t\tif (user.data()) {\r\n\t\t\t\t\tif(currentUser.uid === undefined){\r\n\t\t\t\t\t\tsetCurrentUser(user.data())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn unsubscribe\r\n\t\t}\r\n\t}, [firestore, userId])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tsetUserId(user.uid)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetUserId(null)\r\n\t\t\t\tsetCurrentUser({})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn unsubscribe\r\n\t}, [])\r\n\r\n\r\n\tconst value = {\r\n\t\tcurrentUser,\r\n\t\tsetCurrentUser,\r\n\t\tlogin,\r\n\t\tsignup,\r\n\t\tlogout,\r\n\t\tloading,\r\n\t\tsetLoading\r\n\t}\r\n\treturn (\r\n\t\t<AuthContext.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n","import React, { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { LoadingData } from '../components/Basic/LoadingData'\r\nimport { PersonTiny } from '../components/Basic/PersonTiny'\r\nimport { firestore } from '../firebase'\r\nimport checkNumber from '../functions/checkNumber'\r\nimport shuffleSongs from '../functions/shuffleSongs'\r\nimport { useRealTimeFetch } from '../hooks/useRealTimeFetch'\r\nimport { useAuth } from './AuthContext'\r\nconst SongContext = createContext(null)\r\n\r\nexport const useSong = () => {\r\n\treturn useContext(SongContext)\r\n}\r\n\r\nexport const SongProvider = ({ children }) => {\r\n\tconst { currentUser, loading, setLoading } = useAuth()\r\n\tconst [yourSongs, setYourSongs] = useState([])\r\n\tconst [yourPlaylists, setYourPlaylists] = useState([])\r\n\tconst [yourAuthors, setYourAuthors] = useState([])\r\n\tconst [yourFriends, setYourFriends] = useState([])\r\n\tconst [currentSongQueue, setCurrentSongQueue] = useState([])\r\n\tconst [currentSong, setCurrentSong] = useState(-1)\r\n\tconst [currentSongInQueue, setCurrentSongInQueue] = useState(0)\r\n\tconst [currentSongPlaylistSource, setCurrentSongPlaylistSource] = useState({})\r\n\r\n\tconst [currentSongData, setCurrentSongData] = useState({ id: -1 })\r\n\r\n\tconst [imgColors, setImgColors] = useState([])\r\n\tconst [play, setPlay] = useState(false)\r\n\tconst [currentTime, setCurrentTime] = useState(0)\r\n\tconst [songDuration, setSongDuration] = useState(0)\r\n\tconst [repeatMode, setRepeatMode] = useState(1)\r\n\tconst [shuffleMode, setShuffleMode] = useState(0)\r\n\tconst [currentParagraph, setCurrentParagraph] = useState(0)\r\n\tconst [isThereKaraoke, setIsThereKaraoke] = useState(true)\r\n\tconst [openFullScreenPlayer, setOpenFullScreenPlayer] = useState(false)\r\n\tconst songRef = useRef(null)\r\n\tconst currentParagraphRef = useRef(null)\r\n\tconst inputRef = useRef(null)\r\n\tconst leftSideBarInputRef = useRef(null)\r\n\tconst [rightSideCurrentPage, setRightSideCurrentPage] = useState(0)\r\n\tconst [openMenu, setOpenMenu] = useState(false)\r\n\tfunction checkKaraoke() {\r\n\t\tif (currentSongData.lyrics !== undefined && currentSongData.lyrics.length === 0) return false\r\n\r\n\t\tif (currentSongData.lyrics !== undefined) {\r\n\t\t\tif (currentSongData.lyrics[0].startTime === 'undefined') return false\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n\r\n\tfunction fetchYourFriends() {\r\n\t\tsetYourFriends([])\r\n\t\tif (currentUser.friends !== undefined) {\r\n\t\t\tcurrentUser.friends.forEach(async friendObj => {\r\n\t\t\t\tconst friend = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tif (friendObj.status === 'added') {\r\n\t\t\t\t\tsetYourFriends(prev => [...prev, friend])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchQueue() {\r\n\t\tsetCurrentSongQueue([])\r\n\t\tif (currentUser.lastQueue) {\r\n\t\t\tcurrentUser.lastQueue.songsList.forEach(async songId => {\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetCurrentSongQueue(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t\tsetCurrentSongInQueue(currentUser.lastQueue.songsList.findIndex(songId => songId === currentUser.lastSongPlayed))\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSongInitial() {\r\n\t\tif (currentUser.uid !== undefined) {\r\n\t\t\tconst tempSongObject = {\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsongSrc: \"\",\r\n\t\t\t\tauthors: [],\r\n\t\t\t\tcover: \"\",\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\treleaseDate: \"\",\r\n\t\t\t\tlyrics: [],\r\n\t\t\t\timageColors: []\r\n\t\t\t}\r\n\t\t\tconst curSong = currentUser.lastSongPlayed || currentUser.addedSongs[0] || tempSongObject.id\r\n\t\t\tconst curQueue = currentUser.lastQueue || { source: '/library', name: 'Your Library', image: currentUser.photoURL, songsList: yourSongs } || []\r\n\t\t\tsetCurrentSong(curSong)\r\n\t\t\tsetCurrentSongPlaylistSource(curQueue)\r\n\r\n\t\t\tif (curSong !== -1) {\r\n\t\t\t\tconst docRef = firestore.collection('songs').doc(curSong)\r\n\t\t\t\tconst docData = docRef.get()\r\n\t\t\t\t\t.then(doc => {\r\n\t\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongData(tempSongObject)\r\n\t\t\t\tsetImgColors([])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSong() {\r\n\t\tif (currentSong !== -1) {\r\n\t\t\tfirestore.collection('songs').doc(currentSong).get().then(doc => {\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\telse fetchCurrentSongInitial()\r\n\t}\r\n\r\n\tfunction fetchYourSongs() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.addedSongs) {\r\n\t\t\tcurrentUser.addedSongs.map((song, i) => {\r\n\t\t\t\tfirestore.collection(\"songs\").doc(song).get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.unshift(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedSongs.length - 1) setYourSongs(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(i === currentUser.addedSongs.length - 1){\r\n\t\t\t\t\t\tfetchQueue()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourPlaylists() {\r\n\t\tsetYourPlaylists([])\r\n\t\tif (currentUser.ownPlaylists) {\r\n\t\t\tcurrentUser.ownPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourPlaylists(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (currentUser.addedPlaylists) {\r\n\t\t\tcurrentUser.addedPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourPlaylists(prev => [...prev, doc.data()])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourAuthors() {\r\n\t\tsetYourAuthors([])\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.addedAuthors) {\r\n\t\t\tcurrentUser.addedAuthors.map((authorId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.unshift(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedAuthors.length - 1) setYourAuthors(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet shouldChangeYourSongs = currentUser.addedSongs && (currentUser.addedSongs.length !== yourSongs.length)\r\n\t\tif (shouldChangeYourSongs) {\r\n\t\t\tfetchYourSongs()\r\n\t\t}\r\n\t}, [currentUser.addedSongs])\r\n\r\n\tuseRealTimeFetch(currentUser, fetchYourPlaylists, currentUser.addedPlaylists && ((currentUser.addedPlaylists.length + currentUser.ownPlaylists.length) !== yourPlaylists.length), [currentUser.addedPlaylists])\r\n\tuseRealTimeFetch(currentUser, fetchYourFriends, currentUser.friends && (currentUser.friends.filter(obj => obj.status === 'added').length !== yourFriends.length), [currentUser.friends])\r\n\tuseRealTimeFetch(currentUser, fetchYourAuthors, currentUser.addedAuthors && (currentUser.addedAuthors.length !== yourAuthors.length), [currentUser.addedAuthors])\r\n\t// useRealTimeFetch(currentUser, fetchQueue, currentUser.lastQueue && (currentUser.lastQueue.songsList.length !== currentSongQueue.length), [currentUser.lastQueue])\r\n\tuseRealTimeFetch(currentUser, fetchCurrentSong, currentUser && (currentSongData.id === -1 || (currentSong || currentUser.lastSongPlayed)), [currentSong, currentUser.lastSongPlayed])\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (currentUser.uid === undefined) {\r\n\t\t\tsetCurrentSongData({ id: -1 })\r\n\t\t\tsetCurrentSong(-1)\r\n\t\t}\r\n\t}, [currentUser.uid])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsThereKaraoke(checkKaraoke())\r\n\t}, [currentSongData.lyrics])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!loading) {\r\n\t\t\tif (shuffleMode) {\r\n\t\t\t\tlet shuffledSongsArray = shuffleSongs(currentSongQueue)\r\n\t\t\t\tsetCurrentSongQueue(shuffledSongsArray)\r\n\t\t\t\tsetCurrentSongInQueue(shuffledSongsArray.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongQueue(currentSongPlaylistSource.songsList)\r\n\t\t\t\tsetCurrentSongInQueue(currentSongPlaylistSource.songsList.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [shuffleMode])\r\n\tlet listenCountTimeOut = useRef()\r\n\tfunction playSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (play) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\r\n\t\tsetPlay(!play)\r\n\t}\r\n\r\n\tfunction updateListenCount() {\r\n\t\tlistenCountTimeOut.current = setTimeout(() => {\r\n\t\t\tconsole.log('count added')\r\n\t\t\tlet listens = currentSongData.listens\r\n\t\t\tlistens++\r\n\t\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\t\tlistens: listens\r\n\t\t\t})\r\n\t\t\tif (currentSongPlaylistSource.source.substr(1, 6) === 'albums') {\r\n\t\t\t\tconsole.log('I Updated album listen count')\r\n\t\t\t\tconst sourceId = currentSongPlaylistSource.source.substr(8, currentSongPlaylistSource.source.length - 8)\r\n\t\t\t\tfirestore.collection('playlists').doc(sourceId).get().then((res) => {\r\n\t\t\t\t\tlet listedData = res.data().listens\r\n\t\t\t\t\tlistedData++\r\n\t\t\t\t\tfirestore.collection('playlists').doc(sourceId).update({\r\n\t\t\t\t\t\tlistens: listedData\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}, songDuration * 1000 * 0.5)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(listenCountTimeOut.current)\r\n\t\tif (play) {\r\n\t\t\tupdateListenCount()\r\n\t\t}\r\n\t}, [play, currentSongData.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentParagraph(0)\r\n\t}, [currentSongData.id])\r\n\r\n\tfunction loadSongData(e) {\r\n\t\tsetCurrentTime(e.target.currentTime)\r\n\t\tsetSongDuration(e.target.duration)\r\n\t\tinputRef.current.max = e.target.duration\r\n\t\tif (window.innerWidth > 1000) leftSideBarInputRef.current.max = e.target.duration\r\n\t\tdocument.documentElement.style.setProperty('--inputRange', 0 + '%')\r\n\t\tif (play) { e.target.play() }\r\n\t\telse e.target.pause()\r\n\t}\r\n\r\n\tfunction defineCurrentParagraph() {\r\n\t\t//Well, I'm maybe not a great mathematician or smth, but I want to make this not linear, but binary, hence O(logN)\r\n\t\t// currentSongData.lyrics.find((el, i) => {\r\n\t\t// \tif (el.startTime <= songRef.current.currentTime) {\r\n\t\t// \t\tsetCurrentParagraph(i)\r\n\t\t// \t\treturn false\r\n\t\t// \t}\r\n\t\t// \t// currentParagraphRef.current.scrollIntoView()\r\n\t\t// \treturn true\r\n\t\t// })\r\n\r\n\t\tlet first = 0, last = currentSongData.lyrics.length - 1\r\n\t\tlet roundedTime = parseFloat(parseFloat(songRef.current.currentTime).toFixed(1))\r\n\t\twhile (first <= last) {\r\n\t\t\tlet midPoint = Math.floor((first + last) / 2)\r\n\t\t\tlet blockStartTime = parseFloat(parseFloat(currentSongData.lyrics[midPoint].startTime).toFixed(1))\r\n\t\t\tlet nextBlockStartTime = midPoint !== currentSongData.lyrics.length - 1 ? parseFloat(parseFloat(currentSongData.lyrics[midPoint + 1].startTime).toFixed(1)) : last\r\n\t\t\tif (currentSongData.lyrics[midPoint].startTime !== 'undefined') {\r\n\t\t\t\tif (roundedTime >= blockStartTime && roundedTime <= nextBlockStartTime) {\r\n\t\t\t\t\tsetCurrentParagraph(midPoint)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\telse if (blockStartTime < roundedTime) first = midPoint + 1\r\n\t\t\t\telse last = midPoint - 1\r\n\r\n\t\t\t}\r\n\t\t\telse return\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (rightSideCurrentPage === 2) defineCurrentParagraph()\r\n\t}, [rightSideCurrentPage])\r\n\r\n\tfunction defineCurrentParagraphLight() {\r\n\t\tif (currentParagraph !== (currentSongData.lyrics.length - 1) && parseFloat(currentSongData.lyrics[currentParagraph + 1].startTime) <= songRef.current.currentTime) {\r\n\t\t\treturn setCurrentParagraph(currentParagraph + 1)\r\n\t\t}\r\n\t}\r\n\tfunction playing(event) {\r\n\t\tsetCurrentTime(event.target.currentTime)\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer && openMenu) defineCurrentParagraphLight()\r\n\t\tdocument.documentElement.style\r\n\t\t\t.setProperty('--inputRange', (event.target.currentTime / songDuration) * 100 + '%');\r\n\t}\r\n\r\n\tasync function nextSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue + 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tasync function prevSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (currentTime > 5) {\r\n\t\t\tsongRef.current.currentTime = 0\r\n\t\t\tsetCurrentTime(0)\r\n\t\t\tsetCurrentParagraph(0)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue - 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tfunction changeCurrentTime(event, startTime = 0) {\r\n\t\tif (event.target.localName === 'div' || event.target.localName === \"p\") {\r\n\t\t\tsetCurrentTime(startTime)\r\n\t\t\tsongRef.current.currentTime = startTime\r\n\t\t\tdocument.documentElement.style\r\n\t\t\t\t.setProperty('--inputRange', (startTime / songDuration) * 100 + '%');\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) setCurrentParagraph(parseInt(event.target.id))\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\treturn\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetCurrentTime(event.target.value)\r\n\t\t\tsongRef.current.currentTime = event.target.value\r\n\t\t\tdocument.documentElement.style\r\n\t\t\t\t.setProperty('--inputRange', (event.target.value / songDuration) * 100 + '%');\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) defineCurrentParagraph()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction displayAuthors(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>{el.displayName}</Link>{(i === authorsList.length - 1 ? \"\" : separatingSign)}\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction displayAuthorsFull(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>\r\n\t\t\t\t\t\t<PersonTiny data={el} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction findLen() {\r\n\t\tlet str = \"\"\r\n\t\tcurrentSongData.authors.forEach(el => {\r\n\t\t\tstr += el.displayName\r\n\t\t})\r\n\t\treturn str.length\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = currentSongData.name || 'Soundbubble'\r\n\t}, [currentSongData.name])\r\n\treturn (\r\n\t\t<SongContext.Provider value={\r\n\t\t\t{\r\n\t\t\t\tyourSongs,\r\n\t\t\t\tsetYourSongs,\r\n\t\t\t\tyourPlaylists,\r\n\t\t\t\tyourFriends,\r\n\t\t\t\tcurrentSongQueue,\r\n\t\t\t\tcurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongQueue,\r\n\t\t\t\tsetCurrentSongInQueue,\r\n\t\t\t\tplay,\r\n\t\t\t\tsetPlay,\r\n\t\t\t\tsongSrc: currentSongData.songSrc,\r\n\t\t\t\tcurrentTime,\r\n\t\t\t\tsetCurrentTime,\r\n\t\t\t\tsongDuration,\r\n\t\t\t\tsongRef,\r\n\t\t\t\tname: currentSongData.name,\r\n\t\t\t\tauthors: currentSongData.authors,\r\n\t\t\t\tlyrics: currentSongData.lyrics,\r\n\t\t\t\tcover: currentSongData.cover,\r\n\t\t\t\timgColors,\r\n\t\t\t\tsetImgColors,\r\n\t\t\t\tcurrentSong,\r\n\t\t\t\tsetCurrentSong,\r\n\t\t\t\trepeatMode,\r\n\t\t\t\tsetRepeatMode,\r\n\t\t\t\tshuffleMode,\r\n\t\t\t\tsetShuffleMode,\r\n\t\t\t\tinputRef,\r\n\t\t\t\tleftSideBarInputRef,\r\n\t\t\t\tisThereKaraoke,\r\n\t\t\t\trightSideCurrentPage,\r\n\t\t\t\tcurrentParagraph,\r\n\t\t\t\tcurrentParagraphRef,\r\n\t\t\t\tnextSong,\r\n\t\t\t\tprevSong,\r\n\t\t\t\tplaySong,\r\n\t\t\t\tplaying,\r\n\t\t\t\tdefineCurrentParagraph,\r\n\t\t\t\tsetRightSideCurrentPage,\r\n\t\t\t\tchangeCurrentTime,\r\n\t\t\t\tdisplayAuthors,\r\n\t\t\t\tdisplayAuthorsFull,\r\n\t\t\t\topenFullScreenPlayer,\r\n\t\t\t\tsetOpenFullScreenPlayer,\r\n\t\t\t\tloadSongData,\r\n\t\t\t\tfindLen,\r\n\t\t\t\tfetchYourSongs,\r\n\t\t\t\tsetOpenMenu,\r\n\t\t\t\topenMenu,\r\n\t\t\t\tcurrentSongData,\r\n\t\t\t\tsetCurrentSongData,\r\n\t\t\t\tsetIsThereKaraoke,\r\n\t\t\t\tcheckKaraoke,\r\n\t\t\t\tsetYourPlaylists,\r\n\t\t\t\tyourAuthors,\r\n\t\t\t\tsetYourAuthors,\r\n\t\t\t\tupdateListenCount\r\n\t\t\t}\r\n\t\t}>\r\n\t\t\t{!loading ?\r\n\t\t\t\tchildren :\r\n\t\t\t\t<LoadingData />\r\n\t\t\t}\r\n\t\t</SongContext.Provider>\r\n\t)\r\n}\r\n","\r\nfunction amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nfunction toDateTime(secs) {\r\n\tvar t = new Date(1970, 0, 1); // Epoch\r\n\tt.setSeconds(secs);\r\n\treturn t;\r\n}\r\n\r\nexport default function displayDate(stringDate, displayMode = 0){\r\n\tconst Months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\r\n\tlet newDate = !isNaN(stringDate)?stringDate.seconds?toDateTime(stringDate.seconds + 10800):toDateTime((stringDate/1000) + 10800):new Date(stringDate)\r\n\tif(displayMode === 0){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() \r\n\t}\r\n\r\n\tif(displayMode === 1){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate()\r\n\t}\r\n\r\n\tif(displayMode === 2){\r\n\t\treturn amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n\r\n\tif(displayMode === 3){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() + \" at \" + amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\n\r\nconst ScreenContext = React.createContext()\r\n\r\nexport const useScreen = () =>{\r\n\treturn useContext(ScreenContext)\r\n}\r\n\r\nexport const ScreenProvider = ({children}) => {\r\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth)\r\n\tconst [screenHeight, setScreenHeight] = useState(window.innerHeight)\r\n\tconst [isMobile, setIsMobile] = useState(window.innerWidth < 1000)\r\n\tfunction handleResize() {\r\n\t\tsetScreenWidth(window.innerWidth)\r\n\t\tsetScreenHeight(window.innerHeight)\r\n\t\tsetIsMobile(window.innerWidth < 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('resize', handleResize)\r\n\t\treturn ()=>{\r\n\t\t\twindow.removeEventListener('resize', handleResize)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst value = {\r\n\t\tscreenWidth,\r\n\t\tscreenHeight,\r\n\t\tisMobile\r\n\t}\r\n\treturn (\r\n\t\t<ScreenContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ScreenContext.Provider>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\n\r\nexport const Hint = ({text, direction = \"top\"}) => {\r\n\tconst {isMobile} = useScreen()\r\n\treturn !isMobile?(\r\n\t\t<div className = {\"Hint \" + direction}>\r\n\t\t\t<h5>{text}</h5>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { useHistory } from 'react-router'\r\nimport { Hint } from './Hint'\r\nexport const BackBtn = ({color = \"\"}) => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"BackBtn\">\r\n\t\t\t<button onClick={() => history.goBack()} style = {color.length?{color:color}:{}}>\r\n\t\t\t\t<Hint text = {\"go back\"} direction = {\"bottom\"}/>\r\n\t\t\t\t<FiArrowLeft />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, {useEffect} from 'react'\r\n\r\nexport const SmallImages = ({imagesList, borderColor = \"#fff\"}) => {\r\n\treturn (\r\n\t\t<div className = \"SmallImages\" style = {{marginRight:-7*(imagesList.length-1)}}>\r\n\t\t\t{imagesList.map((image, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"smallImgContainer\" style = {{border:`3px solid ${borderColor}`, transform:`translateX(${-15*index}px)`}} key = {index}>\r\n\t\t\t\t\t\t<img src={image} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function rightFormanForBigNumber(number){\r\n\tif(number < 1000) return number\r\n\r\n\tif(number < 1000000) return parseFloat(number/1000).toFixed(1) + 'K'\r\n\r\n\tif(number < 1000000000) return parseFloat(number / 1000000).toFixed(1) + 'M'\r\n}","import React, { useContext, useState } from 'react'\r\n\r\nconst ModalContext = React.createContext()\r\n\r\nexport const useModal = () =>{\r\n\treturn useContext(ModalContext)\r\n}\r\n\r\nexport const ModalClassProvider = ({children}) => {\r\n\tconst [openModal, setOpenModal] = useState(false)\r\n\tconst [content, setContent] = useState(<h1>Test</h1>)\r\n\tconst [isOpenConfirm, setIsOpenConfirm] = useState(false)\r\n\tconst [confirmContent, setConfirmContent] = useState({confirmText:\"Confirm Action\", rejectText:\"Cancel\", onConfirmL:()=>{return null}, onReject:()=>{return null}})\r\n\tfunction toggleModal(){\r\n\t\tsetOpenModal(!openModal)\r\n\t}\r\n\t\r\n\t//{question:question, confirmText:..., rejectText:..., onConfirm..., onReject:...}\r\n\tfunction openConfirm(question, confirmText, rejectText = \"Cancel\", onConfirm, onReject = closeConfirm){\r\n\t\tsetIsOpenConfirm(true)\r\n\t\tsetConfirmContent({question:question, confirmText:confirmText, rejectText:rejectText, onConfirm:onConfirm, onReject:onReject})\r\n\t}\r\n\r\n\tfunction closeConfirm(){\r\n\t\tsetIsOpenConfirm(false)\r\n\t}\r\n\r\n\tconst value = {\r\n\t\topenModal,\r\n\t\tsetOpenModal,\r\n\t\ttoggleModal, \r\n\t\tsetContent, \r\n\t\tcontent,\r\n\t\tisOpenConfirm,\r\n\t\tsetIsOpenConfirm,\r\n\t\topenConfirm,\r\n\t\tcloseConfirm,\r\n\t\tconfirmContent\r\n\t}\r\n\treturn (\r\n\t\t<ModalContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ModalContext.Provider>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nexport const useOutsideClick = (ref, setFunc) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tsetFunc(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n}\r\n","export default function getUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\tconst piece = (Math.random() * 16) | 0;\r\n\t\tconst elem = c === 'x' ? piece : (piece & 0x3) | 0x8;\r\n\t\treturn elem.toString(16);\r\n\t});\r\n}\r\n","import { firestore } from \"../firebase\"\r\nimport getUID from \"./getUID\"\r\n\r\nexport const createChat = async ( participants, chatUID = getUID(), chatName = \"\", chatImage = \"\", admins = [], imageColors = []) => {\r\n\tfirestore.collection('chats').doc(chatUID).set({\r\n\t\tchatImage:chatImage,\r\n\t\tchatName:chatName,\r\n\t\tid:chatUID,\r\n\t\tmessages:[],\r\n\t\tparticipants:participants,\r\n\t\twallpaper:'undefined',\r\n\t\tadmins:participants.length > 2? admins:[],\r\n\t\ttyping:[],\r\n\t\timageColors:imageColors\r\n\t})\r\n\r\n\tparticipants.map(async personId=>{\r\n\t\tlet chatInfo = (await firestore.collection('users').doc(personId).get()).data().chats\r\n\t\tchatInfo.push(chatUID)\r\n\t\tfirestore.collection('users').doc(personId).update({\r\n\t\t\tchats:chatInfo\r\n\t\t})\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\nimport getUID from \"./getUID\"\r\n\r\nexport const findChatURL = async (allParticipants, currentUser, setShouldCreate, setFriendChatId) => {\r\n\tlet foundChat = false\r\n\tlet chatId = 0\r\n\tif (currentUser.chats) {\r\n\t\t// const chatInfo = (await firestore.collection('chats').where('participants', \"==\", [friendId, currentUser.uid]).get())\r\n\t\t// const chatInfo2 = (await firestore.collection('chats').where('participants', \"==\", [currentUser.uid, friendId]).get())\r\n\t\t// chatInfo.docs.forEach(chat => {\r\n\t\t// \tfoundChat = true\r\n\t\t// \tsetShouldCreate(false)\r\n\t\t// \tsetFriendChatId(chat.data().id)\r\n\t\t// \tchatId = chat.data().id\r\n\t\t// })\r\n\t\t// chatInfo2.docs.forEach(chat => {\r\n\t\t// \tfoundChat = true\r\n\t\t// \tsetShouldCreate(false)\r\n\t\t// \tsetFriendChatId(chat.data().id)\r\n\t\t// \tchatId = chat.data().id\r\n\t\t// })\r\n\r\n\t\t// if (!foundChat) {\r\n\t\t// \tconst random = getUID()\r\n\t\t// \tfoundChat = true\r\n\t\t// \tsetShouldCreate(true)\r\n\t\t// \tsetFriendChatId(random)\r\n\t\t// \tchatId = random\r\n\t\t// }\r\n\r\n\t\t// Принцип работы таков: он ищет все чаты, в которых есть юзер. Затем он проходит по ним. Затем он проходит по выбранным друзьям\r\n\t\t// Если он находит, что друг есть в списке участников чата, добавляет к count 1, если нет, сразу выходит из цикла учатсников\r\n\t\t// После завершения цикла он проверяет, если количество совпадений + 1 (потому что в массив друзей не входит сам пользователь) равно\r\n\t\t// длине конкретного чата и если количество совпадений равно длине поступившего изначально массива участников, тогда нужный чат найден\r\n\t\tconst chatsWhereUserIn = await firestore.collection('chats').where('participants', 'array-contains', currentUser.uid).get()\r\n\t\tchatsWhereUserIn.docs.forEach(chat=>{\r\n\t\t\tlet count = 0\r\n\t\t\tallParticipants.every(personId=>{\r\n\t\t\t\tif(chat.data().participants.includes(personId)){\r\n\t\t\t\t\tcount++\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse return false\r\n\t\t\t})\t\t\t\r\n\t\t\tif(count + 1 === chat.data().participants.length && count === allParticipants.length){\r\n\t\t\t\tfoundChat = true\r\n\t\t\t\tsetShouldCreate(false)\r\n\t\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\t\tchatId = chat.data().id\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\telse return true\r\n\t\t})\r\n\r\n\t\tif (!foundChat) {\r\n\t\t\tconst random = getUID()\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(true)\r\n\t\t\tsetFriendChatId(random)\r\n\t\t\tchatId = random\r\n\t\t}\r\n\t\treturn chatId\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { FiMessageCircle } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport { findChatURL } from '../../functions/findChatURL'\r\n\r\nexport const ChatWithFriendButton = ({ data, color }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([data.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [data.uid])\r\n\r\n\treturn (\r\n\t\t<Link to={`/chat/${friendChatId}`} style = {{display:'block', width:'fit-content', textDecoration: \"none\"}}>\r\n\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, data.uid], friendChatId) }} style = {{background:color}} className = \"ChatWithFriendButton\"><FiMessageCircle /> Messages</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const LoadingCircle = ({top = '20%'}) => {\r\n\treturn (\r\n\t\t<div className = \"LoadingCircle\" style = {{top:top}}>\r\n\t\t\t<img src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const sendMessage = (chatId, chatData, sender, messageText, attachedSongs = [], attachedAlbums = [], attachedAuthors = [], inResponseToMessage) => {\r\n\tif (messageText.length !== 0 || attachedSongs.length !== 0 || attachedAlbums.length !== 0 || attachedAuthors.length !== 0 || inResponseToMessage) {\r\n\t\tconst tempMessages = chatData.messages\r\n\r\n\t\ttempMessages.push({\r\n\t\t\tid: chatData.messages.length,\r\n\t\t\tsender: sender,\r\n\t\t\tmessage: messageText,\r\n\t\t\tsentTime: new Date().toString(),\r\n\t\t\tinResponseToMessage: inResponseToMessage || null,\r\n\t\t\tattachedSongs: attachedSongs,\r\n\t\t\tattachedAlbums: attachedAlbums,\r\n\t\t\tattachedAuthors: attachedAuthors,\r\n\t\t\tseenBy:[sender]\r\n\t\t})\r\n\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\tmessages: tempMessages\r\n\t\t})\r\n\t}\r\n}","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiSearch, FiXCircle } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from './LoadingCircle'\r\nimport normalizeString  from '../../functions/normalizeString'\r\nexport const SearchBar = ({ value, setValue, setAllFoundSongs, setResultPlaylists, setResultAuthorList, focus = false, defaultSearchMode = undefined, inputText = \"Search for songs or for people\", defaultSongsListValue, defaultAuthorsListValue, defaultPlaylistsListValue }) => {\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [foundAnything, setFoundAnything] = useState(false)\r\n\tconst [searchMode, setSearchMode] = useState(0)\r\n\tconst inputRef = useRef(null)\r\n\tlet typingTimeout\r\n\r\n\tasync function findItem(place, defaultList = [], setList) {\r\n\t\tconst foundItemTempArray = []\r\n\t\tlet normalizedSearch = normalizeString(value);\r\n\t\tconst itemsList = await firestore.collection('search').where('variantsOfName', \"array-contains\", normalizedSearch).get();\r\n\t\titemsList.docs.forEach(async item => {\r\n\t\t\tconst itemData = item.data()\r\n\t\t\tif (itemData.place === place) {\r\n\t\t\t\tconst realData = (await firestore.collection(itemData.place).doc(itemData.uid).get()).data()\r\n\t\t\t\tif(defaultList !== undefined && defaultList.length){\r\n\t\t\t\t\tif(defaultList.map(song=>song.id).includes(realData.id)) foundItemTempArray.push(realData)\r\n\t\t\t\t}\r\n\t\t\t\telse if(!realData.isPrivate) foundItemTempArray.push(realData)\r\n\t\t\t\tif (defaultSearchMode === undefined && searchMode === 0 && foundItemTempArray.length !== 0) {\r\n\t\t\t\t\tswitch(itemData.place){\r\n\t\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\t\tfoundItemTempArray.forEach(async song => {\r\n\t\t\t\t\t\t\t\tconst authorsIdsArray = (await firestore.collection('songs').doc(song.id).get()).data().authors\r\n\t\t\t\t\t\t\t\tauthorsIdsArray.forEach(async (author, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst authorData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetResultAuthorList(prev => [...prev, authorData])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"users\":\r\n\t\t\t\t\t\t\tfoundItemTempArray.forEach(async author => {\r\n\t\t\t\t\t\t\t\tconst songsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownSongs\r\n\t\t\t\t\t\t\t\tconst albumsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownPlaylists\r\n\t\t\t\t\t\t\t\tsongsIdsArray.forEach(async (songId, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetAllFoundSongs(prev => [...prev, songData])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\r\n\t\t\t\t\t\t\t\talbumsIdsArray.forEach(async (albumId, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst albumData = (await firestore.collection('playlists').doc(albumId).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetResultPlaylists(prev => [...prev, albumData])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\t\tfoundItemTempArray.forEach(async playlist => {\r\n\t\t\t\t\t\t\t\tconst songsIdsArray = (await firestore.collection('playlists').doc(playlist.id).get()).data().authors\r\n\t\t\t\t\t\t\t\tsongsIdsArray.forEach(async (author, index) => {\r\n\t\t\t\t\t\t\t\t\tif (index < 3) {\r\n\t\t\t\t\t\t\t\t\t\tconst songData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\t\t\t\t\tsetResultAuthorList(prev => [...prev, songData])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsetMessage('Wrong search mode')\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetList(foundItemTempArray)\r\n\t\t\tsetLoading(false)\r\n\t\t\tif (foundItemTempArray.length !== 0) setFoundAnything(true)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction findSomething() {\r\n\t\tsetLoading(true)\r\n\t\tsetFoundAnything(false)\r\n\t\tif (value !== \"\") {\r\n\r\n\t\t\tif (defaultSearchMode === undefined) {\r\n\t\t\t\tif (searchMode === 0 || searchMode === 1) {\r\n\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 2) {\r\n\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 3) {\r\n\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tswitch (defaultSearchMode) {\r\n\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"authors\":\r\n\t\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (defaultSongsListValue !== undefined) setAllFoundSongs(defaultSongsListValue)\r\n\t\t\tif (defaultAuthorsListValue !== undefined) setResultAuthorList(defaultAuthorsListValue)\r\n\t\t\tif (defaultPlaylistsListValue !== undefined) setResultPlaylists(defaultPlaylistsListValue)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\tsetMessage('Not found')\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (focus) inputRef.current.focus()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSomething()\r\n\t}, [searchMode])\r\n\r\n\r\n\treturn (\r\n\t\t<div style = {{marginTop:'10px', width:'100%'}}>\r\n\t\t\t<div className=\"searchBar\">\r\n\t\t\t\t<div className=\"searchBarElement\">\r\n\t\t\t\t\t<FiSearch />\r\n\t\t\t\t\t<span onClick={() => value.length ? setValue(\"\") : null}>{value.length ? <FiXCircle /> : null}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={inputText}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value)}\r\n\t\t\t\t\tonKeyUp={() => timerUpFunc(findSomething)}\r\n\t\t\t\t\tonKeyDown={() => { clearTimeout(typingTimeout) }}\r\n\t\t\t\t\tref={inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"searchFilters\" style={defaultSearchMode !== undefined ? { display: 'none' } : {}}>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(0)} style={searchMode === 0 ? { background: 'var(--lightBlue)' } : {}}>All</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(1)} style={searchMode === 1 ? { background: 'var(--lightBlue)' } : {}}>Songs</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(2)} style={searchMode === 2 ? { background: 'var(--lightBlue)' } : {}}>Authors</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(3)} style={searchMode === 3 ? { background: 'var(--lightBlue)' } : {}}>Playlists</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t{loading ?\r\n\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px', marginTop: '40px' }}>\r\n\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t!foundAnything && value.length !== 0 ? <h2>{message}</h2> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shareWithFriends from '../../functions/shareWithManyFriends'\r\nimport { PersonTiny } from './PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const FriendsListToShareWith = ({ item, whatToShare = 'song' }) => {\r\n\tconst { yourFriends } = useSong()\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [shared, setShared] = useState(false)\r\n\tconst { toggleModal } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [foundPeople, setFoundPeople] = useState([])\r\n\tfunction removeFriendFromList(data) {\r\n\t\tconst filtered = chosenFriends.filter(peopleId => peopleId !== data.uid)\r\n\t\treturn setChosenFriends(filtered)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (shared) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleModal()\r\n\t\t\t\tsetShared(false)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}, [shared])\r\n\r\n\r\n\treturn (\r\n\t\t<div className='FriendsListToShareWith'>\r\n\t\t\t{shared ?\r\n\t\t\t\t<div className=\"successMessageSent\">\r\n\t\t\t\t\t<IoIosCheckmarkCircleOutline />\r\n\t\t\t\t\tSong has sent!\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<div>\t\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundPeople} defaultSearchMode={\"authors\"} inputText = {\"Search for friends\"}/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{foundPeople.length > 0 ?\r\n\t\t\t\t\t\tfoundPeople.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} showChoose chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}):\r\n\t\t\t\t\t\tyourFriends.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} showChoose chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Your message\" style={{ margin: 0 }} onChange={e => setMessageText(e.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"shareBtn\"\r\n\t\t\t\t\tstyle={!chosenFriends.length ?\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (chosenFriends.length > 0) {\r\n\t\t\t\t\t\t\tshareWithFriends(chosenFriends, currentUser, (whatToShare === 'author' ? item.uid : item.id), whatToShare, messageText);\r\n\t\t\t\t\t\t\tsetShared(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\tShare with {chosenFriends.length} {chosenFriends.length > 1 ? \"friends\" : \"friend\"}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\";\r\nimport { createChat } from \"./createChat\";\r\nimport { findChatURL } from \"./findChatURL\";\r\nimport getUID from \"./getUID\";\r\nimport { sendMessage } from \"./sendMessage\";\r\n\r\nexport default function shareWithFriends(shareList, currentUser, itemId, whatToShare, messageText = \"\") {\r\n\t//Сделать через функцию sendMessage\r\n\tshareList.map(async userId => {\r\n\t\tPromise.resolve(findChatURL([userId], currentUser, () => null, () => null)).then(async chatId => {\r\n\t\t\tlet chatData = (await firestore.collection('chats').doc(chatId).get()).data()\r\n\t\t\tif (chatData !== undefined) {\r\n\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst chatUID = getUID()\r\n\t\t\t\tcreateChat([currentUser.uid, userId], chatUID).then(async () => {\r\n\t\t\t\t\tchatData = (await firestore.collection('chats').doc(chatUID).get()).data()\r\n\t\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\r\n\t\t})\r\n\t})\r\n\r\n\r\n}","import React from 'react'\r\n\r\nexport const RadioBtn = ({currentActive, id, label, onClick}) => {\r\n\treturn (\r\n\t\t<div className = \"RadioBtn\" id = {id} onClick = {onClick}>\r\n\t\t\t<span className = \"radioLabel\" style = {currentActive === id?{color:'var(--blue)', opacity:1, fontWeight:'bold'}:{}}>\r\n\t\t\t\t{label}\r\n\t\t\t</span>\r\n\t\t\t<span className = \"radioCircle\" style = {currentActive === id?{background:'var(--blue)'}:{}}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ColorCircles = ({play}) => {\r\n\treturn (\r\n\t\t<div className = 'ColorCircles' style = {!play?{opacity:0, transform:\"scale(.95)\"}:{}}>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from '../FullScreenPlayer/colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { FiCheck, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nexport const SongItemChoice = ({ song, listOfSongs, setListOfSongs, showListens = false, listens = 0, isNewSong = false }) => {\r\n\tconst { setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setYourSongs, yourPlaylists, currentSongQueue, setCurrentSongInQueue, fetchYourSongs } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst {currentUser} = useAuth()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\tfunction addSongToList() {\r\n\t\tif(!listOfSongs.includes(song.id)){\r\n\t\t\treturn setListOfSongs(prev=>[...prev, song.id])\r\n\t\t}\r\n\r\n\t\tlet filteredList = listOfSongs.filter(el=>el !== song.id)\r\n\t\tsetListOfSongs(filteredList)\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToLibrary(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (currentUser.addedSongs.includes(song.id)) {\r\n\t\t\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\taddedSongs:newList\r\n\t\t\t})\r\n\t\t\tfetchYourSongs()\r\n\t\t\tsetOpenMoreWindow(false)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet newList = currentUser.addedSongs\r\n\t\tnewList.push(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedSongs:newList\r\n\t\t})\r\n\t\tfetchYourSongs()\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToPlaylist(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\t\tyourPlaylists[e.target.id].songs = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tyourPlaylists[e.target.id].songs.push(song.id)\r\n\t}\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\tNew\r\n\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'SongItem ' + (listOfSongs.includes(song.id) ? \"inList\" : \"\")} onClick={addSongToList} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t{song.name}\r\n\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t<button onClick={addOrDeleteSongToLibrary}>\r\n\t\t\t\t\t{!currentUser.addedSongs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n","export default function shortWord(word, len = 50){\r\n\treturn word.substr(0, len) + (word.length > len?\"...\":\"\")\r\n}","import shortWord from \"./shortWord\"\r\n\r\nexport const displayAuthorsStr = (authorslist, separator = ' & ', lenLimit = 100) =>{\r\n\tconst authorsString = authorslist.map(author=>author.displayName).join(separator)\r\n\treturn shortWord(authorsString, lenLimit)\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport const addSongToLibrary = (e, song, currentUser, setCurrentUser) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = []\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tif (!currentUser.addedAuthors.includes(authorId)) {\r\n\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t}\r\n\t})\r\n\tlet newList = currentUser.addedSongs\r\n\tnewList.push(song.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: [...finalAuthorsUIDS, ...currentUser.addedAuthors]\r\n\t})\r\n\r\n\tfinalAuthorsUIDS.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers++\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n}","export default function filterArrayWithArray(whatToFilter, withWhatToFilter){\r\n\treturn whatToFilter.filter(\r\n\t\tfunction (e) {\r\n\t\t\treturn this.indexOf(e) < 0;\r\n\t\t},\r\n\t\twithWhatToFilter\r\n\t);\r\n}","import { firestore } from \"../firebase\"\r\nimport filterArrayWithArray from \"./filterArrayWithArray\"\r\n\r\nexport const deleteSongFromLibrary = (e, song, currentUser, yourSongs) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = [] // массив авторов, песни которых еще остались после удаления выбранной песни\r\n\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tyourSongs.forEach(songObj => {\r\n\t\t\tif (newList.includes(songObj.id) && songObj.authors.find(a => a.uid === authorId)) {\r\n\t\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst filtered = filterArrayWithArray(songAuthorsUIDS, finalAuthorsUIDS) // массив людей, которых нужно убрать из библиотеки\r\n\tconst finalFilteredAuthors = filterArrayWithArray(currentUser.addedAuthors, filtered) // массив людей, оставшихся в библиотеке\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: finalFilteredAuthors\r\n\t})\r\n\r\n\tfiltered.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers--\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n\t\r\n}","import { useAuth } from \"../../contexts/AuthContext\"\r\nimport { addSongToLibrary } from \"../../functions/addSongToLibrary\"\r\nimport { deleteSongFromLibrary } from \"../../functions/deleteSongFromLibrary\"\r\nimport {FiPlusCircle, FiTrash2} from 'react-icons/fi'\r\nimport { useSong } from \"../../contexts/SongContext\"\r\nimport { useModal } from \"../../contexts/ModalContext\"\r\nexport default function AddOrDeleteButtonFull({song}) {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {yourSongs} = useSong()\r\n\tconst {openConfirm, setOpenModal} = useModal()\r\n\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\treturn <span onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t<FiPlusCircle />\r\n\t\t\tAdd\r\n\t\t</span>\r\n\t}\r\n\telse {\r\n\t\treturn <span onClick = {(e)=>{e.stopPropagation();setOpenModal(false);openConfirm(\"You sure you want to delete this song from library?\", \"Yes, delete it\", \"No, just kidding\", (e) => deleteSongFromLibrary(e, song, currentUser, yourSongs))}}>\r\n\t\t\t<FiTrash2 />\r\n\t\t\tDelete\r\n\t\t</span>\r\n\t}\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const PersonTinyVerticalItem = ({person}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t<div className = \"PersonTinyVerticalItem\">\r\n\t\t\t\t<div className=\"personTinyImage\">\r\n\t\t\t\t\t<img src={person.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"personTinyName\">\r\n\t\t\t\t\t{person.displayName}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\nimport { firestore } from '../../firebase';\r\nimport { PersonTinyVerticalItem } from './PersonTinyVerticalItem'\r\n\r\nexport const PersonTinyList = ({data, title}) => {\r\n\tconst [listOfPeople, setListOfPeople] = useState([])\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(listOfPeople.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfPeople])\r\n\r\n\tfunction fetchFriends(){\r\n\t\tsetListOfPeople([])\r\n\t\tdata.friends.forEach(async personObj => {\r\n\t\t\tif(personObj.status === 'added'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(personObj.uid).get()).data()\r\n\t\t\t\tsetListOfPeople(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetListOfPeople([])\r\n\t\tfetchFriends()\r\n\t}, [data.uid])\r\n\treturn listOfPeople.length > 0? (\r\n\t\t<div className = 'PersonTinyList'>\r\n\t\t\t{title && <h2>{title}</h2>}\r\n\t\t\t<div style = {{position:'relative'}}>\t\r\n\t\t\t\t<div className=\"personTinyListWrapper\" ref = {wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t\t{listOfPeople.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { PersonTinyList } from '../AuthorPage/PersonTinyList'\r\nimport {CgMusicNote} from 'react-icons/cg'\r\nimport {PersonTinyVerticalItem} from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nexport const SongInfo = ({song}) => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tconst {displayAuthors} = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisSong] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisSong(){\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisSong([])\r\n\t\tconst people = await firestore.collection('users').where('addedSongs', 'array-contains', songData.id).get()\r\n\t\tpeople.forEach(person=>{\r\n\t\t\tif(currentUser.friends.find(friend=>friend.uid === person.data().uid)) setFriendsThatHaveThisSong(prev=>[...prev, person.data()])\r\n\t\t\tconsole.log(person.data())\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(song !== undefined) setSongData(song)\r\n\t}, [song && song.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisSong()\r\n\t}, [songData.id])\r\n\r\n\treturn (\r\n\t\t<div className = 'SongInfo'>\r\n\t\t\t<div className=\"songImage\">\r\n\t\t\t\t<img src={songData.cover} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className = \"songInfoContent\">\r\n\t\t\t\t<h3 style = {{color:songData.imageColors[0]}}>{songData.name}</h3>\r\n\t\t\t\t<span>{displayAuthors(songData.authors, ', ')}</span>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center', opacity:'0.6', fontSize:'.9em', position:\"relative\"}} className = \"listensAndDate\">\r\n\t\t\t\t\t<p className = \"infoListens\" style = {{marginRight:'15px', position:'relative'}}>{songData.listens} <CgMusicNote /></p>\r\n\t\t\t\t\t<span>{displayDate(songData.releaseDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style = {{margin:'10px 0'}}>{friendsThatHaveThisSong.length > 0? 'Friends that listen that song': 'None of your friends listens this'}</h4>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t{friendsThatHaveThisSong.length <= 0?<button className = \"shareBtn\" style = {{minHeight:'35px', background:songData.imageColors[0]}} onClick = {()=>{setContent(<FriendsListToShareWith item = {songData} whatToShare = {'song'}/>)}}>Share</button>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { addOrDeleteSongToPlaylist } from '../../functions/addOrDeleteSongToPlaylist'\r\nimport {FiPlusCircle, FiCheck} from 'react-icons/fi'\r\nimport { Hint } from '../Basic/Hint'\r\nexport const AddToPlaylists = ({song}) => {\r\n\tconst {yourPlaylists, currentSongData} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tuseEffect(() => {\r\n\t\tif(song && song.id){\r\n\t\t\tsetSongData(song)\r\n\t\t}\r\n\t}, [song])\r\n\treturn (\r\n\t\t<div className = \"AddToPlaylists\">\r\n\t\t\t<div style = {{display:'flex', flexDirection:'column'}}>\r\n\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={(e) => addOrDeleteSongToPlaylist(e, playlist.id, songData, yourPlaylists)} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t{!playlist.songs.includes(songData.id) ? <><Hint text = {`Add \"${songData.name}\" to playlist`}/><FiPlusCircle /></> : <><Hint text = {`Remove ${currentSongData.name} from playlist`}/><FiCheck /></>}\r\n\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const addOrDeleteSongToPlaylist = (e, playlistId, song, yourPlaylists) => {\r\n\r\n\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\tconst newSongsList = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\tyourPlaylists[e.target.id].songs = newSongsList\r\n\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\tsongs: newSongsList\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n\tconst newSongsList = yourPlaylists[e.target.id].songs\r\n\tnewSongsList.unshift(song.id)\r\n\tyourPlaylists[e.target.id].songs = newSongsList\r\n\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\tsongs: newSongsList\r\n\t})\r\n}","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport {AddToPlaylists} from '../FullScreenPlayer/AddToPlaylists'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nimport {SongInfo} from '../Basic/SongInfo'\r\nexport const SongItemMoreWindow = ({openMoreWindow, song, moreWindowPosRelativeToViewport}) => {\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn openMoreWindow ? (\r\n\t\t(\r\n\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t<AddToPlaylists song={song} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t) : null\r\n\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\n\r\nexport const AuthorsList = ({listOfAuthors}) => {\r\n\tconst { displayAuthorsFull } = useSong()\r\n\treturn (\r\n\t\t<div className=\"rightSideAuthorsList\" >\r\n\t\t\t<div className=\"rightSideAuthorsListCentralBlock\">\r\n\t\t\t\t{displayAuthorsFull(listOfAuthors)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag, FiUsers } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { AuthorsList } from '../FullScreenPlayer/AuthorsList'\r\nexport const SongItemMobileMoreWindow = ({ song }) => {\r\n\tconst { setContent } = useModal()\r\n\treturn (\r\n\t\t<div className=\"SongItemMobileMoreWindow\">\r\n\t\t\t<div className=\"simpleSongElement\" style = {{background:song.imageColors[0]}}>\r\n\t\t\t\t<div className=\"simpleSongElementImage\" >\r\n\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>{song.name}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>setContent(<AddToPlaylists song={song} />)}>\r\n\t\t\t\t<MdPlaylistAdd />Add to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<AuthorsList listOfAuthors={song.authors} title={\"Authors\"} />) }}><FiUsers />Authors</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from './colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { FiX, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { MdKeyboardArrowRight, MdPlaylistAdd } from 'react-icons/md'\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { deleteSongFromLibrary } from '../../functions/deleteSongFromLibrary'\r\nimport { addSongToLibrary } from '../../functions/addSongToLibrary'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {AddToPlaylists} from './AddToPlaylists'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { displayAuthorsStr } from '../../functions/displayAuthorsStr'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { SongItemMoreWindow } from '../Windows/SongItemMoreWindow'\r\nimport { SongItemMobileMoreWindow } from '../Windows/SongItemMobileMoreWindow'\r\nexport const SongItem = ({ song, localIndex, showListens = false, isNewSong = false, listOfChosenSongs, setListOfSongs }) => {\r\n\tconst { yourSongs, setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setCurrentSongInQueue } = useSong()\r\n\tconst {isMobile} = useScreen()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst { currentUser, setCurrentUser } = useAuth()\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction chooseSongItem() {\r\n\t\tsetCurrentSong(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: song.id\r\n\t\t})\r\n\t\tsetCurrentSongInQueue(localIndex)\r\n\t\tif (song.id === currentSong && play) {\r\n\t\t\tsongRef.current.pause();\r\n\t\t\tsetPlay(false)\r\n\t\t\t// clearTimeout(listenCountTimeOut)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsongRef.current.play();\r\n\t\tsetPlay(true)\r\n\t}\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(song.listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\tfunction addOrDeleteButton() {\r\n\t\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\t\treturn <button onClick={(e) => addSongToLibrary(e, song, currentUser, setCurrentUser)} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"add song\"}/>\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <button onClick = {(e)=>{e.stopPropagation();openConfirm(`You sure you want to delete \"${song.name}\" from library?`, \"Yes, delete it\", \"No, just kidding\", (e) => {deleteSongFromLibrary(e, song, currentUser, yourSongs);closeConfirm()})}} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"delete song\"}/>\r\n\t\t\t\t<FiX />\r\n\t\t\t</button>\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenSongs} setListOfChosenItems = {setListOfSongs} itemId = {song.id}/>\r\n\t\t\t<div className={'SongItem ' + (song.id === currentSong && play ? \"playingNow\" : \"\")} onClick={chooseSongItem} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t{shortWord(song.name, window.innerWidth > 1000?30:17) }\r\n\t\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{!isMobile?<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>:<div className=\"songItemAuthor\">{displayAuthorsStr(song.authors, ' & ', 30)}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMoreBtn\" >\r\n\t\t\t\t\t{addOrDeleteButton()}\r\n\t\t\t\t\t<button onClick={isMobile?(e)=>{e.stopPropagation();toggleModal();setContent(<SongItemMobileMoreWindow song = {song}/>)}:openSongItemMoreWindow}>\r\n\t\t\t\t\t\t<Hint text = {\"more\"}/>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<SongItemMoreWindow openMoreWindow = {openMoreWindow} song = {song} moreWindowPosRelativeToViewport = {moreWindowPosRelativeToViewport}/>\r\n\t\t\t</div >\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const MoreBtn = ({func, lenOfList, maxLen = 5, boolVal}) => {\r\n\treturn (\r\n\t\t<div onClick = {lenOfList > maxLen?func:null} className = \"MoreBtn\" style = {lenOfList <= maxLen?{display:'none'}:{}}>\r\n\t\t\t<button style = {boolVal?{background:'var(--pink)', color:'#ff8db2'}:{}}>\r\n\t\t\t\t{boolVal?\"Close\":\"More\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { MoreBtn } from './MoreBtn'\r\n\r\nexport const TitleWithMoreBtn = ({title, func, boolVal, lenOfList, maxLen = 5, marginBottom = 0}) => {\r\n\treturn lenOfList !== 0?(\r\n\t\t<div className=\"topTitle\" style = {{margin:'10px 0'}}>\r\n\t\t\t<h2 style = {{margin:marginBottom}}>{title}</h2>\r\n\t\t\t<MoreBtn func={func} boolVal={boolVal} lenOfList={lenOfList} maxLen = {maxLen}/>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { FaPlay, } from 'react-icons/fa'\r\nimport { TiArrowShuffle , TiMediaPlay} from 'react-icons/ti'\r\nimport { BsPlayFill} from 'react-icons/bs'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { displayAuthorsStr } from '../../functions/displayAuthorsStr'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SearchBar } from './SearchBar'\r\nimport { TitleWithMoreBtn } from './TitleWithMoreBtn'\r\nimport shuffleSongs from '../../functions/shuffleSongs'\r\n\r\nexport const SongList = ({ listOfSongs, source, title = \"\", showListens = false, isNewSong = false, showCount = false, listOfChosenSongs, setListOfSongs, showSearch = false, displayIfEmpty }) => {\r\n\tconst { setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSong } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [showMoreSongs, setShowMoreSongs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displaySongs, setDisplaySongs] = useState(listOfSongs)\r\n\tuseEffect(() => {\r\n\t\tsetDisplaySongs(listOfSongs)\r\n\t\tif(listOfSongs.length > 1) displayAuthorsStr(listOfSongs[1].authors)\r\n\t}, [listOfSongs])\r\n\t\r\n\tfunction setQueueInSongList() {\r\n\t\tif(source !== 'no' && listOfSongs.length !== 0){\r\n\t\t\tsetCurrentSongQueue(listOfSongs)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tconst listSongsIds = listOfSongs.map(song => song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playShuffledList(e){\r\n\t\te.stopPropagation()\r\n\t\tlet newList = shuffleSongs(listOfSongs)\r\n\t\tconsole.log(newList)\r\n\t\tsetCurrentSongQueue(newList)\r\n\t\tsetCurrentSongPlaylistSource(source)\r\n\t\tconst listSongsIds = newList.map(song => song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastQueue: {\r\n\t\t\t\timage: source.image,\r\n\t\t\t\tname: source.name,\r\n\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\tsource: source.source\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetCurrentSong(newList[0].id)\r\n\t\tplaySong()\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className=\"SongList\" onClick={setQueueInSongList}>\r\n\t\t\t{title.length !== 0 ? <TitleWithMoreBtn title={title} func={() => setShowMoreSongs(!showMoreSongs)} boolVal={showMoreSongs} lenOfList={listOfSongs.length} /> : null}\r\n\t\t\t{showSearch?<SearchBar value = {searchValue} setValue = {setSearchValue} allFoundSongs = {displaySongs} setAllFoundSongs = {setDisplaySongs} defaultSearchMode = {\"songs\"} defaultSongsListValue = {listOfSongs} inputText = {\"Search for songs\"}/>:null}\r\n\t\t\t{/* {showControls?\r\n\t\t\t\t<div className = \"listControlButtons\">\r\n\t\t\t\t\t<button className = \"standartButton\"><BsPlayFill /></button>\r\n\t\t\t\t\t<button className = \"standartButton\" onClick = {playShuffledList}><TiArrowShuffle /></button>\r\n\t\t\t\t</div> :null\r\n\t\t\t} */}\r\n\t\t\t{displaySongs.map((song, index) => {\r\n\t\t\t\tif (title.length !== 0) {\r\n\t\t\t\t\tif (showMoreSongs) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (index < 5) {\r\n\t\t\t\t\t\t\treturn <span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t{listOfSongs.length === 0?displayIfEmpty:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const CustomizeAlbum = ({ playlist }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(playlist.name)\r\n\tconst [playlistCover, setPlaylistCover] = useState(playlist.image)\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(playlist.authors)\r\n\tconst [releaseDate, setReleaseDate] = useState(playlist.creationDate)\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState(playlist.songs)\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(playlist.isAlbum?1:0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(playlist.isPrivate ? 1 : 0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(playlist.imageColors)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (songsSearch.length === 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tconsole.log(songId)\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetLoadingSongs(false)\r\n\t\t\t\tconsole.log(songData)\r\n\t\t\t\tsetAllSongs(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t}\r\n\t}, [songsSearch])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend => { if (friend.status === 'added') return friend.uid })\r\n\t\tconst response = currentUser.isAdmin ?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue) :\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (chosenAuthors.length > playlist.authors.length) {\r\n\t\t\tconst newAuthors = chosenAuthors.filter(author => { return !playlist.authors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(playlist.id)\r\n\t\t\t\tconsole.log(authorPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(chosenAuthors.length < playlist.authors.length){\r\n\t\t\tconst newAuthors = playlist.authors.filter(author => { return !chosenAuthors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tconst filteredPlaylists = authorPlaylists.filter(playlistId => playlistId !== playlist.id)\r\n\t\t\t\tconsole.log(filteredPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: filteredPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfirestore.collection('playlists').doc(playlist.id).update(\r\n\t\t\t{\r\n\t\t\t\tid: playlist.id,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: playlist.listens,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:playlist.subscribers,\r\n\t\t\t\tisAlbum:playlistStatus === 1,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate == true\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\t// console.log([5, 4, 2, 1])\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={() => timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Search for songs\" value={songsSearch} onChange={(e) => setSongsSearch(e.target.value)} onKeyDown={findSongs} onKeyUp={() => timerUpFunc(findSongs)} onKeyDown={() => { return clearTimeout(typingTimeout) }} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<SongList listOfSongs={allSongs} source={'no'} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// allSongs.map((data, index) => {\r\n\t\t\t\t\t\t\t// return (\r\n\t\t\t\t\t\t\t// \t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Update playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const addAuthorToLibrary = async (authorData , currentUser) => {\r\n\tconst addedAuthors = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedAuthors\r\n\taddedAuthors.push(authorData.uid)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedAuthors: addedAuthors\r\n\t})\r\n\tlet subscribers = authorData.subscribers\r\n\tsubscribers++\r\n\tfirestore.collection('users').doc(authorData.uid).update({\r\n\t\tsubscribers: subscribers\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport default function addFriend(friendData, currentUser){\r\n\tconst updatedDataForFriend = friendData.friends\r\n\tconst updatedDataForCurrentUser = currentUser.friends\r\n\tupdatedDataForFriend.push({status:'requested', uid:currentUser.uid})\r\n\tupdatedDataForCurrentUser.push({status:'awaiting', uid:friendData.uid})\r\n\r\n\tfirestore.collection('users').doc(friendData.uid).update({\r\n\t\tfriends:updatedDataForFriend\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends:updatedDataForCurrentUser\r\n\t})\r\n\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport displayDate from '../../functions/displayDate'\r\n\r\nexport const LastSeen = ({userUID}) => {\r\n\tconst [lastSeen, setLastSeen] = useState(\"\")\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t\tif(doc.data().online === undefined) setLastSeen(\"offline\")\r\n\t\t\t\telse if(!isOnline) setLastSeen(\"last seen \" + displayDate(doc.data().online, 3))\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<span>Online</span>:<span>{lastSeen}</span>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const  addPlaylistToLibrary = async(playlistData, currentUser) => {\r\n\tconst addedPlaylists = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedPlaylists\r\n\taddedPlaylists.push(playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists: addedPlaylists\r\n\t})\r\n\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:++playlistData.subscribers\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport const removePlaylistFromLibrary = async (playlistData, currentUser) =>{\r\n\tconst filteredPlaylists = currentUser.addedPlaylists.filter(id=>id !== playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists:filteredPlaylists\r\n\t})\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:--playlistData.subscribers\r\n\t})\r\n}","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const GeneralSettings = () => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"GeneralSettings\">\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport {FiMenu} from 'react-icons/fi'\r\nimport {IoIosArrowForward} from 'react-icons/io'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport \"../../styles/Settings.css\"\r\nimport { GeneralSettings } from './GeneralSettings'\r\nexport const SettingsList = () => {\r\n\tconst {setContent} = useModal()\r\n\tconst settingsList = [\r\n\t\t{\r\n\t\t\tid:0, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<GeneralSettings/>,\r\n\t\t\tcolor:'var(--red)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:1, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--lightBlue)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:2, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--green)'\r\n\t\t}\r\n\t]\r\n\treturn (\r\n\t\t<div className = \"SettingsList\">\r\n\t\t\t{settingsList.map(settingItem=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className = \"SettingItem\" style = {{color:settingItem.color}} key = {settingItem.id} onClick = {()=>setContent(settingItem.to)}>\r\n\t\t\t\t\t\t<div className = \"settingItemIconAndTitle\">\r\n\t\t\t\t\t\t\t{settingItem.icon}\r\n\t\t\t\t\t\t\t<h3>{settingItem.title}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IoIosArrowForward/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport { FiFlag, FiInfo, FiShare } from 'react-icons/fi'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nexport const AuthorMoreWindow = ({data}) => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"AuthorMoreWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => {setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => {setContent(<h2>test</h2>) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const CirclePages = ({amountOfPages, currentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"CirclePages\">\r\n\t\t\t{amountOfPages.map((_, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"circleItem\" style = {index === currentPage?{background:'var(--reallyLightBlue)'}:{}}></div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiEdit2, FiFlag, FiHeadphones, FiInfo, FiMoreVertical, FiPlusCircle, FiSettings, FiShare, FiTrash, FiUserCheck, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { SmallImages } from './SmallImages'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { IoMdExit } from 'react-icons/io'\r\nimport { firestore } from '../../firebase'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { CgCheckO, CgLock } from 'react-icons/cg'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { ChatWithFriendButton } from './ChatWithFriendButton'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai'\r\nimport { BiLoaderAlt } from 'react-icons/bi'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { CustomizeAlbum } from '../AlbumPage/CustomizeAlbum'\r\nimport { addAuthorToLibrary } from '../../functions/addAuthorToLibrary'\r\nimport addFriend from '../../functions/addFriend'\r\nimport { LastSongListened } from './LastSongListened'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { addPlaylistToLibrary } from '../../functions/addPlaylistToLibrary'\r\nimport { removePlaylistFromLibrary } from '../../functions/removePlaylistFromLibrary'\r\nimport { SettingsList } from '../Settings/SettingsList'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { AuthorMoreWindow } from '../Windows/AuthorMoreWindow'\r\nimport { CirclePages } from '../Tools/CirclePages'\r\nimport { useSwipeable } from 'react-swipeable'\r\nexport const Header = ({ data, headerColors }) => {\r\n\tconst { isMobile } = useScreen()\r\n\tconst { displayAuthors, setYourPlaylists } = useSong()\r\n\tconst [albumAuthors, setAlbumAuthors] = useState([])\r\n\tconst [authorsImages, setAuthorsImages] = useState([])\r\n\tconst { currentUser, logout } = useAuth()\r\n\tconst [mobileCurrentPage, setMobileCurrentPage] = useState(0)\r\n\tconst [deltaX, setDeltaX] = useState(0)\r\n\tconst [transformTransition, setTransformTransition] = useState(0.05)\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst headerRef = useRef(null)\r\n\tconst handlers = useSwipeable({\r\n\t\tonSwiping: (event) => { setDeltaX(event.deltaX); }\r\n\t})\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tconst isFriend = currentUser.friends.find(friend => (friend.uid === data.uid && friend.status === 'added'))\r\n\tconst moreWindowRef = useRef(null)\r\n\tuseOutsideClick(moreWindowRef, setOpenMoreWindow)\r\n\r\n\r\n\tfunction returnToInitial() {\r\n\t\tlet dropDelta\r\n\t\tclearTimeout(dropDelta)\r\n\t\tsetTransformTransition(0.2)\r\n\t\tsetDeltaX(0)\r\n\t\tdropDelta = setTimeout(() => {\r\n\t\t\tsetTransformTransition(0)\r\n\t\t\t\r\n\t\t}, 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (mobileCurrentPage === 0 && deltaX < -150) {\r\n\t\t\tsetMobileCurrentPage(1)\r\n\t\t\tsetDeltaX(0)\r\n\t\t}\r\n\t\telse if (mobileCurrentPage === 1 && deltaX > 150) {\r\n\t\t\tsetMobileCurrentPage(0)\r\n\t\t\tsetDeltaX(0)\r\n\t\t}\r\n\t}, [deltaX])\r\n\r\n\tconsole.log(deltaX)\r\n\r\n\tasync function fetchAuthorsData() {\r\n\t\tif (data.authors !== undefined && !albumAuthors.length) {\r\n\t\t\tconst ids = data.authors.map(author => author.uid)\r\n\t\t\tconst response = firestore.collection(\"users\").where(\"uid\", \"in\", ids)\r\n\t\t\tconst authrorsData = await response.get();\r\n\t\t\tauthrorsData.docs.forEach((a) => {\r\n\t\t\t\tconsole.log(a.data())\r\n\t\t\t\tsetAlbumAuthors(prev => [...prev, a.data()])\r\n\t\t\t\tsetAuthorsImages(prev => [...prev, a.data().photoURL])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [data])\r\n\r\n\tconst refPassthroughHeader = (el) => {\r\n\t\thandlers.ref(el);\r\n\t\theaderRef.current = el;\r\n\t}\r\n\r\n\tfunction displayCreationDateIfExists() {\r\n\t\treturn data.creationDate !== undefined ?\r\n\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t<span>{displayDate(data.creationDate)}</span>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction isAlbumOrIsAuthor() {\r\n\t\treturn data.authors !== undefined ? data.isAlbum ? <h5>Album</h5> : <h5>Playlist</h5> : data.isAuthor ? <h5>Author</h5> : <h5>User {data.authors === undefined && isFriend ? <LastSeen userUID={data.uid} /> : null}</h5>\r\n\t}\r\n\r\n\tfunction showCreatorsIfExist() {\r\n\t\treturn data.authors !== undefined ?\r\n\t\t\t<div className=\"headerAuthorsImagesAndNames\">\r\n\t\t\t\t<SmallImages imagesList={authorsImages} borderColor={headerColors[2]} />\r\n\t\t\t\t<div className=\"headerAuthors\">{displayAuthors(albumAuthors, \", \")}</div>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction findIfIsVerified() {\r\n\t\treturn data.isVerified ? <ImCheckmark style={{ color: headerColors[0] }} /> : null\r\n\t}\r\n\r\n\tfunction deleteFriend() {\r\n\r\n\t}\r\n\r\n\tfunction deletePlaylist() {\r\n\r\n\t}\r\n\r\n\tfunction whatButtonToRender() {\r\n\t\tif (data.authors) {\r\n\t\t\tif (currentUser.ownPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to DELETE this playlist forever?!\", \"Yes, pretty sure\", \"No, I Don't!\", () => { deletePlaylist(data, currentUser); closeConfirm() })}><Hint text={\"delete playlist\"} direction={\"bottom\"} /><FiTrash /></button>\r\n\t\t\telse if (currentUser.addedPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to remove this playlist from library?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { removePlaylistFromLibrary(data, currentUser); closeConfirm() })}><Hint text={\"remove playlist from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse return <button onClick={() => addPlaylistToLibrary(data, currentUser)}><Hint text={\"add playlist\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (currentUser.addedAuthors.includes(data.uid)) return <button><Hint text={\"remove author from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse if (currentUser.uid === data.uid) return <button onClick={() => { toggleModal(); setContent(<SettingsList />) }}><Hint text={\"settings\"} direction={\"bottom\"} /><FiSettings /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => friend.uid === data.uid && friend.status === 'added')) return <button onClick={deleteFriend}><Hint text={\"remove from friend list\"} direction={\"bottom\"} /><FiUserCheck /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => ((friend.uid === data.uid) && (friend.status === 'awaiting')))) return <button onClick={addFriend}><Hint text={\"waiting for response\"} direction={\"bottom\"} /><BiLoaderAlt style={{ animation: 'loading 1s infinite linear' }} /></button>\r\n\t\t\telse if (!data.isAuthor) return <button onClick={() => addFriend(data, currentUser)}><Hint text={\"add friend\"} direction={\"bottom\"} /><FiUserPlus /></button>\r\n\t\t\telse return <button onClick={() => addAuthorToLibrary(data, currentUser)}><Hint text={\"subscribe\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findIfIsPrivate() {\r\n\t\treturn data.isPrivate ? <CgLock /> : null\r\n\t}\r\n\r\n\tfunction editButton() {\r\n\t\treturn (data.authors && data.authors.find(person => person.uid === currentUser.uid)) || (data.authors && currentUser.isAdmin) ? <button onClick={() => { toggleModal(); setContent(<CustomizeAlbum playlist={data} />) }} className=\"customizeAlbumBtn\"><FiEdit2 /></button> : null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Header\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[2]}, ${headerColors[0]})` } : { background: 'var(--yellowAndPinkGrad)' }} ref={refPassthroughHeader} onTouchEnd={returnToInitial}>\r\n\t\t\t<div className=\"headerBtns\" style={{ background: headerColors[2] }}>\r\n\t\t\t\t<BackBtn />\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div className=\"headerBackBtn\">\r\n\t\t\t\t\t\t{whatButtonToRender()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerMoreBtn\" ref={moreWindowRef}>\r\n\t\t\t\t\t\t<button onClick={!isMobile ? () => setOpenMoreWindow(!openMoreWindow) : () => { toggleModal(); setContent(<AuthorMoreWindow data={data} />) }}>\r\n\t\t\t\t\t\t\t<Hint text={\"more\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<h2>test</h2>) }}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.uid === data.uid ?\r\n\t\t\t\t\t\t<button onClick={logout} >\r\n\t\t\t\t\t\t\t<Hint text={\"quit\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<IoMdExit />\r\n\t\t\t\t\t\t</button> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div style={{ transform: `translateX(${deltaX}px)`, transition:transformTransition + 's', opacity: 1 - Math.abs(deltaX / 200) }}> \r\n\t\t\t\t{mobileCurrentPage === 0 ?\r\n\t\t\t\t\t<div >\r\n\t\t\t\t\t\t<div className=\"headerAuthorsImage\" style={data.authors === undefined ? { animation: \"floatingBorderRadius 10s infinite ease-in-out\" } : {}}>\r\n\t\t\t\t\t\t\t<img src={data.photoURL || data.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"headerAuthorInfo\">\r\n\t\t\t\t\t\t\t<div className=\"headerAuthorsName\">\r\n\t\t\t\t\t\t\t\t{isAlbumOrIsAuthor()}\r\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', margin: \"2px 0 10px 0\" }}>\r\n\t\t\t\t\t\t\t\t\t<h1>{data.displayName || data.name}</h1>\r\n\t\t\t\t\t\t\t\t\t{findIfIsVerified()}\r\n\t\t\t\t\t\t\t\t\t{findIfIsPrivate()}\r\n\t\t\t\t\t\t\t\t\t{editButton()}\r\n\t\t\t\t\t\t\t\t\t{/* <LastSongListened data = {data}/> */}\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{showCreatorsIfExist()}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"headerListenersAndSubs\">\r\n\t\t\t\t\t\t\t\t<div className=\"headerListenersAndSubsItem\" title={(data.listens ?? data.numberOfListenersPerMonth) + ' listeners per month'}>\r\n\t\t\t\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.listens ?? data.numberOfListenersPerMonth)}</span>\r\n\t\t\t\t\t\t\t\t\t<FiHeadphones />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"headerListenersAndSubsItem\" title={data.subscribers + ' subscribers'}>\r\n\t\t\t\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.subscribers)}</span>\r\n\t\t\t\t\t\t\t\t\t<FiUserPlus />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{displayCreationDateIfExists()}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{isFriend ? <ChatWithFriendButton data={data} color={headerColors[3]} /> : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> : \r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\thello\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t{isMobile ? <CirclePages amountOfPages={[1, 2]} currentPage={mobileCurrentPage} /> : null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { SongList } from '../components/Basic/SongList'\r\nexport const AlbumPage = () => {\r\n\tconst match = useRouteMatch('/albums/:albumId')\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { albumId } = match.params\r\n\tconst [albumData, setAlbumData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAlbumsData() {\r\n\t\tfirestore.collection(\"playlists\").doc(albumId).onSnapshot(doc => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\tsetAlbumData(doc.data())\r\n\t\t\t\tsetHeaderColors(doc.data().imageColors)\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif (albumData.length !== 0) {\r\n\t\t\talbumData.songs.map(async songId => {\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev => [...prev, albumSong])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAlbumsData()\r\n\t}, [albumId, firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSongsInAlbum()\r\n\t}, [albumData])\r\n\r\n\treturn (\r\n\t\t<div className=\"AlbumPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{\r\n\t\t\t\tloading ? <LoadingCircle top={'50%'} /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header data={albumData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t\t<SongList listOfSongs={playlistSongs} source={{ source: `/albums/${albumData.id}`, name: albumData.name, image: albumData.image, songsList: playlistSongs }} showSearch defaultSearchMode={\"songs\"} />\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/findVariantsOfName'\r\nexport const AddPlaylist = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(\"\")\r\n\tconst [playlistCover, setPlaylistCover] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin?[{uid:currentUser.uid, photoURL:currentUser.photoURL, displayName:currentUser.displayName}]:[])\r\n\tconst [releaseDate, setReleaseDate] = useState(currentUser.isAdmin?\"\":new Date().toString())\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState([])\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\t\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend=>{if(friend.status === 'added') return friend.uid})\r\n\t\tconst response = currentUser.isAdmin?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue):\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tfirestore.collection('playlists').doc(uid).set(\r\n\t\t\t{\r\n\t\t\t\tid: uid,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:0,\r\n\t\t\t\tisAlbum:playlistStatus,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\t\tchosenAuthors.forEach(async author=>{\r\n\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\tconst authorData = authorRef.data()\r\n\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\tauthorPlaylists.push(uid)\r\n\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\townPlaylists:authorPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\tplace:'playlists',\r\n\t\t\tuid:uid,\r\n\t\t\tvariantsOfName:findVariantsOfName(playlistName)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<form onSubmit={addPlaylistToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={()=>timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid?null:removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Search for songs\" value={songsSearch} onChange={(e) => setSongsSearch(e.target.value)} onKeyDown={findSongs} onKeyUp={() => timerUpFunc(findSongs)} onKeyDown={() => { return clearTimeout(typingTimeout) }} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\tallSongs.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor?\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t</label>:null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../../firebase'\r\nexport const DownloadPhotoButton = ({setErrorMessage, setImageLocalPath, downloadedPhoto, setDownloadedPhoto, place, btnText = \"Download song cover\"}) => {\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/' || place === 'chatCovers/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<label className=\"downloadFile\">\r\n\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t{btnText}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"photoLoadLine\" style={downloadedPhoto !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, place, setDownloadedPhoto)} />\r\n\t\t</label>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ErrorPlate = ({errorMessage}) => {\r\n\treturn errorMessage && (\r\n\t\t<div className=\"Alert\">\r\n\t\t\t{errorMessage}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const FullScreenLoading = ({loading}) => {\r\n\treturn (\r\n\t\t<div className = \"FullScreenLoading\" style = {loading?{}:{opacity:'0', visibility:'hidden'}}>\r\n\t\t\t<img src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/findVariantsOfName'\r\nimport getUID from '../../functions/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../Basic/ErrorPlate'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FullScreenLoading} from '../Basic/FullScreenLoading'\r\nimport {SearchBar} from '../Basic/SearchBar'\r\nexport const AddSong = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(\"\")\r\n\tconst [songCover, setSongCover] = useState(\"\")\r\n\tconst [songSrc, setSongSrc] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(\"\")\r\n\tconst [lyrics, setLyrics] = useState(\"\")\r\n\tconst [imageLocalPath, setImageLocalPath] = useState(\"\")\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [lyricsObject, setLyricsObject] = useState([])\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [showSuccessMessage, setShowSuccessMessage] = useState(false)\r\n\tconst [loadingSong, setLoadingSong] = useState(false)\r\n\tlet typingTimeout\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/') {\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\r\n\tfunction transformLyricsToArrayOfObjects(e) {\r\n\t\tconst arrayOfParagraphs = []\r\n\t\tlet startSubstr = 0\r\n\t\tfor (let i = 0; i < lyrics.length; i++) {\r\n\t\t\tif (lyrics[i] === '\\n' || lyrics[i + 1] === undefined) {\r\n\r\n\t\t\t\tarrayOfParagraphs.push({\r\n\t\t\t\t\tstartTime: 'undefined',\r\n\t\t\t\t\ttext: lyrics.substr(startSubstr, i - startSubstr)\r\n\t\t\t\t})\r\n\t\t\t\tstartSubstr = i + 1\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetLyricsObject(arrayOfParagraphs)\r\n\t}\r\n\r\n\tasync function addSongToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tsetLoadingSong(true)\r\n\t\tlet uid = getUID()\r\n\t\tconsole.log(lyricsObject)\r\n\t\tsetErrorMessage(\"\")\r\n\t\tif (songName.length === 0) setErrorMessage(\"Song has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Song has to have at least 1 author')\r\n\t\telse if (songCover.length === 0) setErrorMessage('You didn\\'t load song cover')\r\n\t\telse if (songSrc.length === 0) setErrorMessage('You didn\\'t load song file')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a song')\r\n\t\telse {\r\n\t\t\tfirestore.collection('songs').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tsongSrc: songSrc,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\tcover: songCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\treleaseDate: releaseDate,\r\n\t\t\t\t\tlyrics: lyricsObject,\r\n\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetSongCover('')\r\n\t\t\t\tsetSongName('')\r\n\t\t\t\tsetSongSrc('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetShowSuccessMessage(true)\r\n\t\t\t\tsetImageColors([])\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetErrorMessage(err)\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t})\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\tauthorSongs.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\t\tplace:'songs',\r\n\t\t\t\tuid:uid,\r\n\t\t\t\tvariantsOfName:findVariantsOfName(songName)\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(showSuccessMessage){\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tsetShowSuccessMessage(false)\r\n\t\t\t}, 2000)\r\n\t\t}\r\n\t}, [showSuccessMessage])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<FullScreenLoading loading = {loadingSong}/>\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={addSongToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter song name\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song authors</h3>\r\n\t\t\t\t\t<SearchBar value = {authorsInputValue} setValue = {setAuthorsInputValue} setResultAuthorList = {setAllAuthors} defaultSearchMode = {'authors'}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{/* <label>\r\n\t\t\t\t\t<h3>Add to albums and playlists</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} onKeyDown={findAuthors} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t</label> */}\r\n\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\r\n\t\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage = {setErrorMessage} setImageLocalPath = {setImageLocalPath} downloadedPhoto = {songCover} setDownloadedPhoto = {setSongCover} place = {'songsImages/'}/>\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload song file\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={songSrc !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songs/', setSongSrc)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" placeholder={\"Add song lyrics\"} value = {lyrics} onKeyDown={transformLyricsToArrayOfObjects} onChange={(e) => setLyrics(e.target.value)}></textarea>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">{!showSuccessMessage?\"Add song\":\"Song Successfully added. Congrats!\"}</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Slider = ({pages, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"Slider\">\r\n\t\t\t{pages.map((pageName, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = {\"sliderItem \" + (index === currentPage?\"current\":\"\")} key = {index} onClick = {()=>setCurrentPage(index)}>\r\n\t\t\t\t\t\t{pageName}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiPlus, FiXCircle } from 'react-icons/fi'\r\nimport { auth, firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport getUID from '../../functions/getUID'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\nimport { AddSong } from '../AddWindow/AddSong'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const AddWindow = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAddSongWindow, setOpenAddSongWindow] = useState(false)\r\n\tconst [currentSliderPage, setCurrentSliderPage] = useState(0)\r\n\tconst sliderPages = [<AddSong/>, <AddPlaylist/>]\r\n\treturn (((currentUser.isAdmin) || (data.isAuthor)) && (data.uid === currentUser.uid)) ?\r\n\t\t(\r\n\t\t\t<div className=\"AddSong\">\r\n\t\t\t\t<button onClick={() => setOpenAddSongWindow(!openAddSongWindow)} style={openAddSongWindow ? { background: 'var(--red)' } : {}} className = \"openAddSongWindowBtn\">\r\n\t\t\t\t\t<FiPlus style={openAddSongWindow ? { transform: 'rotate(45deg)' } : {}} />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"addSongWindow\" style={openAddSongWindow ? { display: 'flex' } : {}}>\r\n\t\t\t\t\t<Slider pages = {['Song', 'Playlists']} currentPage = {currentSliderPage} setCurrentPage = {setCurrentSliderPage}/>\r\n\t\t\t\t\t{sliderPages[currentSliderPage]}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) :\r\n\t\tnull\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiX } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const FriendRequestItem = ({person, addFriend, rejectFriend}) => {\r\n\treturn (\r\n\t\t<div className = 'FriendRequestItem'>\r\n\t\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t\t<div className = \"friendRequestImageAndName\">  \r\n\t\t\t\t\t<div className=\"requestImage\">\r\n\t\t\t\t\t\t<img src={person.photoURL} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3>{person.displayName}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"requestButtons\">\r\n\t\t\t\t<button style = {{color:'var(--green)'}} onClick = {()=>addFriend(person.uid)}>\r\n\t\t\t\t\t<FiCheck/>\r\n\t\t\t\t\t<span>Add</span> \r\n\t\t\t\t</button>\r\n\t\t\t\t<button style = {{color:'var( --lightRed)'}} onClick = {()=>rejectFriend(person.uid)}>\r\n\t\t\t\t\t<FiX/>\r\n\t\t\t\t\t<span>Reject</span> \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FriendRequestItem } from './FriendRequestItem'\r\n\r\nexport const FriendRequest = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendRequests, setFriendRequests] = useState([])\r\n\tfunction fetchFriendRequests(){\r\n\t\tcurrentUser.friends.forEach(async (friendObj)=>{\r\n\t\t\tif(friendObj.status === 'requested'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tsetFriendRequests(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendRequests()\r\n\t}, [])\r\n\r\n\tfunction addFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"added\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"added\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\r\n\t\tcurrentUser['friends'] = friendsList\r\n\t}\r\n\r\n\tfunction rejectFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"rejected\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"rejected\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{friendRequests.map((person, index)=>{\r\n\t\t\t\treturn <FriendRequestItem person = {person} key = {index} addFriend = {addFriend} rejectFriend = {rejectFriend}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\";\r\n\r\nexport const findAuthorsAlbums = async (authorsData, setAuthorsPlaylists, currentUserUID, setLoading) => {\r\n\tsetAuthorsPlaylists([])\r\n\tconst tempArray = []\r\n\tif (authorsData.ownPlaylists !== undefined && authorsData.ownPlaylists.length !== 0) {\r\n\t\tauthorsData.ownPlaylists.forEach(async (playlistId, index) => {\r\n\t\t\tconst playlistData = (await firestore.collection(\"playlists\").doc(playlistId).get()).data()\r\n\t\t\tif (playlistData && (!playlistData.isPrivate || (authorsData.uid === currentUserUID && playlistData.isPrivate))) tempArray.push(playlistData)\r\n\t\t\tif (index === authorsData.ownPlaylists.length-1) {\r\n\t\t\t\ttempArray.sort((a, b) => new Date(b.creationDate).getTime() - new Date(a.creationDate).getTime())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetAuthorsPlaylists(tempArray)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nexport const PlaylistItem = ({playlist, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst playlistDate = new Date(playlist.creationDate)\r\n\tconst {currentUser} = useAuth()\r\n\tconst {isMobile} = useScreen()\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tconst source = {source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs}\r\n\t\t\tconst listSongsIds = playlistSongs.map(song => song.id)\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastSongPlayed: playlistSongs[0].id,\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} style = {{textDecoration:'none'}} className = \"playlistWrapper\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAlbums} setListOfChosenItems = {setListOfChosenAlbums} itemId = {playlist.id}/>\r\n\t\t\t<div className=\"playlistItem\">\r\n\t\t\t\t{playlist.image?\r\n\t\t\t\t\t<img src={playlist.image} alt=\"\" />:\r\n\t\t\t\t\t<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>\r\n\t\t\t\t}\r\n\t\t\t\t{/* {!playlist.isAlbum?<h2>{playlist.name}</h2>:null} */}\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<h4 style = {{display:'flex', alignItems:'center', margin:'5px 0'}}>\r\n\t\t\t\t{shortWord(playlist.name, isMobile?10:15)} \r\n\t\t\t\t<span style = {{fontSize:\".6em\", opacity:.6, fontWeight:'500', marginLeft:'7px'}}>\r\n\t\t\t\t\t{playlist.isAlbum?playlist.songs.length === 1?\"single\":'album':'playlist'}\r\n\t\t\t\t</span>\r\n\t\t\t</h4>\r\n\t\t\t<h5 style = {{margin:'5px 0'}}>{playlistDate.getFullYear()}</h5>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { LoadingCircle } from './LoadingCircle'\r\n\r\nexport const AlbumList = ({listOfAlbums, title = \"\", loading = true, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\t// console.log(listOfAlbums)\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 220\r\n\t\tsetScrollLeft(prev - 220)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 220\r\n\t\tsetScrollLeft(prev + 220)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAlbums.length > 0 && !loading){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAlbums])\r\n\treturn listOfAlbums.length > 0?\r\n\t\tloading?<LoadingCircle/>:\r\n\t\t(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAlbums.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key={index} listOfChosenAlbums = {listOfChosenAlbums} setListOfChosenAlbums = {setListOfChosenAlbums}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAuthorsAlbums } from '../../functions/findAuthorsAlbums'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\n\r\nexport const Playlists = ({ authorsData }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [authorsPlaylists, setAuthorsPlaylists] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsAlbums(authorsData, setAuthorsPlaylists, currentUser.uid, setLoading)\r\n\t}, [authorsData.ownPlaylists])\r\n\r\n\treturn <AlbumList listOfAlbums = {authorsPlaylists} title = {\"Albums\"} loading = {loading}/>\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nfunction findSimilarArtistsNames(authorsSongsArr, authorsData, setSimilarAuthors) {\r\n\tlet peopleArray = []\r\n\tauthorsSongsArr.forEach((song) => {\r\n\t\tlet newAuthors = song.authors\r\n\t\tif (newAuthors.length !== 0) {\r\n\t\t\tpeopleArray.push(newAuthors)\r\n\t\t}\r\n\t})\r\n\tpeopleArray = peopleArray.flat()\r\n\tconst uniqueAuthorsSet = new Set(peopleArray.map(people=>people.uid).filter(id=>id!==authorsData.uid))\r\n\tconst uniqueAuthorsIdsArray = Array.from(uniqueAuthorsSet)\r\n\tconst uniqueAuthorsDataArray = []\r\n\tfor (let i = 0; i < uniqueAuthorsIdsArray.length; i++) {\r\n\t\tfor (let j = 0; j < peopleArray.length; j++) {\r\n\t\t\tif(uniqueAuthorsIdsArray[i] === peopleArray[j].uid){\r\n\t\t\t\tuniqueAuthorsDataArray.push(peopleArray[j])\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tsetSimilarAuthors(uniqueAuthorsDataArray)\r\n\treturn uniqueAuthorsDataArray\r\n}\r\n\r\nexport default async function findSimilarArtists(authorsData, setSimilarAuthors) {\r\n\tif (authorsData !== undefined && authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\tconst authorsSongsArray = []\r\n\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\tauthorsSongsArray.push(songData)\r\n\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\treturn findSimilarArtistsNames(authorsSongsArray, authorsData, setSimilarAuthors)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t}\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\n\r\nexport const AuthorItemBig = ({data, listOfChosenAuthors, setListOfChosenAuthors}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${data.uid}`} className = \"AuthorItemBig\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAuthors} setListOfChosenItems = {setListOfChosenAuthors} itemId = {data.uid}/>\r\n\t\t\t<div >\r\n\t\t\t\t<div className = \"AuthorItemBigImage\">\r\n\t\t\t\t\t<img src={data.photoURL} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3>{data.displayName}</h3>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\n\r\nexport const AuthorsList = ({ listOfAuthors, title = \"\", listOfChosenAuthors, setListOfChosenAuthors }) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAuthors.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAuthors])\r\n\treturn listOfAuthors.length > 0?(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAuthors.map((author) => {\r\n\t\t\t\t\treturn <AuthorItemBig data={author} key={author.uid} listOfChosenAuthors = {listOfChosenAuthors} setListOfChosenAuthors = {setListOfChosenAuthors}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current !== null && wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport findSimilarArtists from '../../functions/findSimilarArtists'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const SimilarArtists = ({ data }) => {\r\n\tconst [similarArtists, setSimilarArtists] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSimilarArtists(data, setSimilarArtists)\r\n\t}, [data])\r\n\treturn (\r\n\t\t<AuthorsList listOfAuthors = {similarArtists} title = {\"Similar Authors\"}/>\r\n\t)\r\n}\r\n","export default function findIfSongIsNew(song){\r\n\tconst songReleaseDate = new Date(song.releaseDate)\r\n\t//1 814 400 000 - 3 weeks\r\n\tif((new Date().getTime() - songReleaseDate.getTime()) < 1814400000) return true\r\n\r\n\treturn false\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport findIfSongIsNew from '../../functions/findIfSongIsNew'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const TopSongs = ({ authorId, authorsData, headerColors }) => {\r\n\tconst [popularSongs, setPopularSongs] = useState([])\r\n\tconst [newSongs, setNewSongs] = useState([])\r\n\r\n\tasync function findAuthorsSongs() {\r\n\t\tsetPopularSongs([])\r\n\t\tconst tempArray = []\r\n\t\tif (authorsData.isAuthor) {\r\n\t\t\tif (authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\t\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\t\ttempArray.push(songData)\r\n\t\t\t\t\tif (findIfSongIsNew(songData) && !newSongs.includes(songData)) setNewSongs(prevSongs => [...prevSongs, songData])\r\n\t\t\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\t\t\ttempArray.sort((a, b) => b.listens - a.listens)\r\n\t\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tauthorsData.addedSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\ttempArray.unshift(songData)\r\n\t\t\t\tif(index === authorsData.addedSongs.length - 1){\r\n\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsSongs()\r\n\t\tsetNewSongs([])\r\n\t}, [authorsData.ownSongs])\r\n\r\n\treturn authorsData.isAuthor ?\r\n\t\t(<div className=\"TopSongs\">\r\n\t\t\t<SongList listOfSongs={newSongs} source={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: newSongs }} isNewSong />\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={\"Popular Songs\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t</div>) :\r\n\t\t(\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName + \"'s Library\", image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={authorsData.displayName + \"'s Library\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { AddWindow } from '../components/AuthorPage/AddWindow'\r\nimport { FriendRequest } from '../components/AuthorPage/FriendRequest'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { PersonTinyList } from '../components/AuthorPage/PersonTinyList'\r\nimport { Playlists } from '../components/AuthorPage/Playlists'\r\nimport { SimilarArtists } from '../components/AuthorPage/SimilarArtists'\r\nimport { TopSongs } from '../components/AuthorPage/TopSongs'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useScreen } from '../contexts/ScreenContext'\r\nimport \"../styles/AuthorPage.css\"\r\nexport const AuthorPage = () => {\r\n\tconst match = useRouteMatch('/authors/:authorId')\r\n\tconst {currentUser} = useAuth()\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { authorId } = match.params\r\n\tconst [authorsData, setAuthorsData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAuthorsData() {\r\n\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAuthorsData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t\t setLoading(false)\r\n\t\t\t} else {\r\n\t\t\t\t console.log(\"No such document!\");\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [authorId])\r\n\treturn (\r\n\t\t<div className=\"AuthorPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{loading?\r\n\t\t\t\t<LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data={authorsData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t{currentUser.uid === authorsData.uid?<FriendRequest/>:null} \r\n\t\t\t\t\t<AddWindow data={authorsData} />\r\n\t\t\t\t\t<TopSongs author={authorId} authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{authorsData.friends && !authorsData.isAuthor?<PersonTinyList data = {authorsData} title = {\"Friends\"}/>:null}\r\n\t\t\t\t\t<Playlists authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauthorsData.isAuthor?\r\n\t\t\t\t\t\t<SimilarArtists data={authorsData} />:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\nimport { Slider } from '../Tools/Slider'\r\nexport const AttachmentList = ({ chatId }) => {\r\n\tconst [attachmentList, setAttachmentList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [sliderCurrentPage, setSliderCurrentPage] = useState(0)\r\n\tconst attachmentContent = [\r\n\t\t<SongList listOfSongs={attachmentList} source={{ source: `/chat/${chatId}`, name: `Chat with ${chatId}`, image: \"\", songsList: attachmentList }} />,\r\n\t\t<AuthorsList listOfAuthors={attachmentList} />,\r\n\t\t<AlbumList listOfAlbums={attachmentList} loading={loading} />\r\n\t]\r\n\tasync function fetchAttachedData(attachedType, firebaseCollection) {\r\n\t\t\r\n\t\tconst chatData = await firestore.collection('chats').doc(chatId).get()\r\n\t\tchatData.data().messages.forEach(message => {\r\n\t\t\tif (message[attachedType].length > 0) {\r\n\t\t\t\tmessage[attachedType].forEach(async itemId => {\r\n\t\t\t\t\tfirestore.collection(firebaseCollection).doc(itemId).get().then(songData=>{\r\n\t\t\t\t\t\tsetAttachmentList(prev => [...prev, songData.data()])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tswitch (sliderCurrentPage) {\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchAttachedData('attachedSongs', 'songs').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tfetchAttachedData('attachedAuthors', 'users').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchAttachedData('attachedAlbums', 'playlists').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [sliderCurrentPage])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachmentList([])\r\n\t}, [chatId])\r\n\r\n\tconsole.log(attachmentList)\r\n\r\n\treturn (\r\n\t\t<div className=\"AttachmentList\">\r\n\t\t\t<Slider pages={[\"Songs\", \"Authors\", \"Playlists\"]} currentPage={sliderCurrentPage} setCurrentPage={(page)=>{setSliderCurrentPage(page); setLoading(true); setAttachmentList([])}} />\r\n\t\t\t{loading ? <LoadingCircle /> :\r\n\t\t\t\tattachmentList.length > 0 ? attachmentContent[sliderCurrentPage] : <h2>Nothing here</h2>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchFirebaseData = (setLoading, collection, list, setState, sortCondition, whereCondFP, whereCondSP, whereCondTP, deps = []) => {\r\n\r\n\tasync function fetchData() {\r\n\t\tconst tempArray = []\r\n\t\tif (list === undefined) {\r\n\t\t\tif (whereCondFP !== undefined) {\r\n\t\t\t\tconst items = await firestore.collection(collection).where(whereCondFP, whereCondSP, whereCondTP).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\tconst items = await firestore.collection(collection).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait list.forEach(async (itemId, index) => {\r\n\t\t\t\tconst itemData = (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t\t\ttempArray.push(itemData)\r\n\t\t\t\tif(index === list.length - 1){\r\n\t\t\t\t\tif(sortCondition !== undefined){\r\n\t\t\t\t\t\ttempArray.sort(sortCondition)\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\treturn tempArray\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tsetState([])\r\n\t\tfetchData().then((res)=>{\r\n\t\t\tif(list === undefined) {\r\n\t\t\t\tsetState(res)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}, deps)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { useFetchDocs } from '../../hooks/useFetchDocs'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FiSettings} from 'react-icons/fi'\r\nimport {MdModeEdit} from 'react-icons/md'\r\nimport {RiVolumeUpLine } from 'react-icons/ri'\r\nimport {ImAttachment} from 'react-icons/im'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { Slider } from '../Tools/Slider'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\n\r\nexport const ChatInfo = ({ data }) => {\r\n\tconst [participants, setParticipants] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [chatNameValue, setChatNameValue] = useState(data.chatName)\r\n\tconst [newChatPhoto, setNewChatPhoto] = useState(data.chatImage)\r\n\tconst [newImageLocalPath, setNewImageLocalPath] = useState(\"\")\r\n\tconst [newImageColors, setNewImageColors] = useState(data.imageColors || [])\r\n\tconst {setContent} = useModal()\r\n\tconst [participantsPage, setParticipantsPage] = useState(0)\r\n\tconst [showUpdateBtn, setShowUpdateBtn] = useState(false)\r\n\tuseFetchDocs(setLoading, data.participants, setParticipants, [data.id])\t\r\n\tuseEffect(() => {\r\n\t\tif(chatNameValue.trim() !== data.chatName.trim() || newChatPhoto !== data.chatImage){\r\n\t\t\tsetShowUpdateBtn(true)\r\n\t\t}\r\n\t\telse setShowUpdateBtn(false)\r\n\t}, [chatNameValue, newChatPhoto])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChatNameValue(data.chatName)\r\n\t}, [data.id])\r\n\r\n\tfunction updateChatInfo(){\r\n\t\tfirestore.collection('chats').doc(data.id).update({\r\n\t\t\tchatName:chatNameValue,\r\n\t\t\tchatImage:newChatPhoto,\r\n\t\t\timageColors:newImageColors\r\n\t\t})\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetNewImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\treturn(\r\n\t\t<div className=\"ChatInfo\">\r\n\t\t\t<ColorExtractor src = {newImageLocalPath} getColors = {(colors)=>setNewImageColors(colors)}/>\r\n\t\t\t<div className=\"chatInfoImageAndName\">\r\n\t\t\t\t<div className=\"chatInfoImage\">\r\n\t\t\t\t\t<label className = \"changePhoto\">\r\n\t\t\t\t\t\t<MdModeEdit/>\r\n\t\t\t\t\t\tChange photo\r\n\t\t\t\t\t\t<input type=\"file\" style = {{display:'none'}} onChange = {(e)=>onFileChange(e, 'chatCovers/', setNewChatPhoto)}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<img src={newChatPhoto} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" className = \"standartInput\" value = {chatNameValue} onChange = {(e)=>setChatNameValue(e.target.value)}/>\r\n\t\t\t\t\t<div className = \"chatInfoButtons\">\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiSettings/>\r\n\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\" onClick = {()=>setContent(<AttachmentList chatId = {data.id}/>)}>\r\n\t\t\t\t\t\t\t<ImAttachment/>\r\n\t\t\t\t\t\t\t{shortWord(\"Attachments\", 7)} \r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<RiVolumeUpLine/>\r\n\t\t\t\t\t\t\tSound\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showUpdateBtn?<button className = \"standartButton\" onClick = {updateChatInfo}>Update Chat</button>:null}\r\n\t\t\t</div>\r\n\t\t\t<h4>Chat participants</h4>\r\n\t\t\t<Slider pages = {['All participants', \"Administrators\"]} currentPage = {participantsPage} setCurrentPage = {setParticipantsPage}/>\r\n\t\t\t{!loading?participants.map(person => {\r\n\t\t\t\tif(participantsPage === 1){\r\n\t\t\t\t\tif(data.admins.includes(person.uid)) return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t\t}\r\n\t\t\t\telse return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t}):<LoadingCircle/>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchDocs = (setLoading, listOfItems, setList, deps) => {\r\n\tfunction fetchItem(){\r\n\t\tlistOfItems.forEach(async itemId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(itemId).get()).data()\r\n\t\t\tsetList(prev=>[...prev, personData])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchItem()\r\n\t\treturn ()=>fetchItem()\r\n\t}, deps)\r\n}\r\n","import React from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const WallpaperItem = ({chatId, image, currentWallpaper}) => {\r\n\tfunction changeChatWallpaper(){\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\twallpaper:image\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className = {\"WallpaperItem \" + (image === currentWallpaper?\"active\":\"\")} onClick = {changeChatWallpaper} style = {image === \"undefined\"?{background:'var(--playlistsColor)'}:{}}>\r\n\t\t\t{image !== \"undefined\" ?<img src={image} alt=\"\" />:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { WallpaperItem } from './WallpaperItem'\r\n\r\nexport const Wallpapers = ({chatId, currentWallpaper}) => {\r\n\tconst [wallpaperList, setWallpaperList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading,'chatWallpapers', undefined, setWallpaperList)\r\n\tconsole.log(wallpaperList)\r\n\treturn !loading?(\r\n\t\t<div className='Wallpapers'>\r\n\t\t\t<h2>Wallpapers</h2>\r\n\t\t\t<div className=\"wallpapreWrapper\">\r\n\t\t\t\t<WallpaperItem chatId = {chatId} image={\"undefined\"}/>\r\n\t\t\t\t{wallpaperList.map((wallpaper, index) => {\r\n\t\t\t\t\treturn <WallpaperItem chatId = {chatId} image={wallpaper.image} key={wallpaper.id} currentWallpaper = {currentWallpaper}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):<LoadingCircle/>\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiFolder, FiImage, FiMoreHorizontal, FiSearch, FiTrash, FiInfo } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { ChatInfo } from './ChatInfo'\r\nimport { Wallpapers } from './Wallpapers'\r\n\r\nexport const ChatMoreBtn = ({chatId, currentWallpaper, data}) => {\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst chatMoreBtnRef = useRef(null)\r\n\tuseOutsideClick(chatMoreBtnRef, setOpenMoreWindow)\r\n\treturn (\r\n\t\t<div className=\"ChatMoreBtn\" ref = {chatMoreBtnRef}>\r\n\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t<FiMoreHorizontal />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"chatHeaderMenuWindow\" style = {!openMoreWindow?{display:'none'}:{}}>\r\n\t\t\t\t{data.participants.length > 2? <div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<FiInfo/>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</div>:null}\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiSearch/>\r\n\t\t\t\t\t<span>Search messages</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<AttachmentList chatId = {chatId}/>)}}>\r\n\t\t\t\t\t<FiFolder/>\r\n\t\t\t\t\t<span>Attachments</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<Wallpapers chatId = {chatId} currentWallpaper = {currentWallpaper}/>)}}>\r\n\t\t\t\t\t<FiImage/>\r\n\t\t\t\t\t<span>Change wallpaper</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiTrash/>\r\n\t\t\t\t\t<span>Delete chat</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { ChatMoreBtn } from './ChatMoreBtn'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { ChatInfo } from './ChatInfo'\r\nexport const ChatHeader = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [headerColors, setHeaderColors] = useState(data.chatName === \"\"?[]:data.imageColors)\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = data.participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t\tsetHeaderColors(person.imageColors)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data.chatName === \"\") {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [data.id])\r\n\treturn (\r\n\t\t<div className=\"ChatHeader\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[0]}, ${headerColors[1]})` } : { background: `linear-gradient(45deg, grey, lightgrey)` }}>\r\n\t\t\t<BackBtn />\r\n\t\t\t{data.participants.length === 2 ? <Link className=\"chatHeaderImageAndName\" to={`/authors/${otherPerson.uid}`}>\r\n\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t<img src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Link> :\r\n\t\t\t\t<div className=\"chatHeaderImageAndName\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t\t<img src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<ChatMoreBtn chatId={data.id} data={data} currentWallpaper={data.wallpaper} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function findWhatToWriteInResponseToItem(referedMessage){\r\n\treturn referedMessage.attachedSongs.length ? \"Audio\":\r\n\treferedMessage.attachedAlbums.length? \"Album\":\r\n\treferedMessage.attachedAuthors.length?\"Author\":\r\n\treferedMessage.inResponseToMessage && referedMessage.inResponseToMessage.length?\"Forwarded message\":\"\"\r\n}","import { useEffect, useState } from \"react\"\r\n\r\nexport default function useOnScreen(ref) {\r\n\r\n\tconst [isIntersecting, setIntersecting] = useState(false)\r\n \r\n\tconst observer = new IntersectionObserver(\r\n\t  ([entry]) => setIntersecting(entry.isIntersecting)\r\n\t)\r\n \r\n\tuseEffect(() => {\r\n\t  observer.observe(ref.current)\r\n\t  // Remove the observer as soon as the component is unmounted\r\n\t  return () => { observer.disconnect() }\r\n\t}, [])\r\n \r\n\treturn isIntersecting\r\n }","import React from 'react'\r\n\r\nexport const SongItemLoading = () => {\r\n\treturn (\r\n\t\t<div className = \"SongItem SongItemLoading\">\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\"></div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\"></div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const SeenByCircle = ({listOfSeen}) => {\r\n\treturn (\r\n\t\t<div className = \"SeenByCircle\" style = {listOfSeen !== undefined? listOfSeen.length <= 1?{opacity:'1', visibility:'visible'}:{}:null}></div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { useSwipeable } from 'react-swipeable'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/findWhatToWriteInResponseItem'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItemLoading } from '../Basic/SongItemLoading'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SeenByCircle } from './SeenByCircle'\r\n\r\nexport const MessageItem = ({ messageData, chatId, scrollToMessageRef, setScrollToMessageId, scrollToMessageId, showPhoto = true, otherMessages, inResponseToMessageArr, setInResponseToMessageArr }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {isMobile} = useScreen()\r\n\tconst { message, attachedAlbums, attachedSongs, attachedAuthors, sender, inResponseToMessage, id, sentTime } = messageData\r\n\tconst [userThatSentMessage, setUserThatSentMessage] = useState({})\r\n\tconst messageSentTime = displayDate(sentTime, 2)\r\n\tconst [attachedSongsData, setAttachedSongsData] = useState([])\r\n\tconst [attachedAuthorsData, setAttachedAuthorsData] = useState([])\r\n\tconst [attachedPlaylistsData, setAttachedPlaylistsData] = useState([])\r\n\tconst [inResponseToMessagesData, setInResponseToMessagesData] = useState([])\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst messageRef = useRef()\r\n\tconst isVisible = useOnScreen(messageRef)\r\n\tconst [swipeDeltaX, setSwipeDeltaX] = useState(0)\r\n\tconst [transformTransition, setTransformTransition] = useState(0)\r\n\tconst handlers = useSwipeable({ onSwiping: (event) => {if(event.deltaX < 0) setSwipeDeltaX(event.deltaX)} })\r\n\tconst refPassthrough = (el) => {\r\n\t\t// call useSwipeable ref prop with el\r\n\t\thandlers.ref(el);\r\n\r\n\t\t// set myRef el so you can access it yourself\r\n\t\tmessageRef.current = el;\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (messageData.seenBy !== undefined) {\r\n\t\t\tif (currentUser.uid !== messageData.sender && isVisible) {\r\n\t\t\t\tif (!messageData.seenBy.includes(currentUser.uid)) {\r\n\t\t\t\t\tconst tempMessages = otherMessages\r\n\t\t\t\t\ttempMessages[messageData.id].seenBy.push(currentUser.uid)\r\n\t\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\t\tmessages: tempMessages\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isVisible])\r\n\r\n\tasync function fetchSentMessageUser() {\r\n\t\tconst user = (await firestore.collection('users').doc(messageData.sender).get()).data()\r\n\t\tsetUserThatSentMessage(user)\r\n\t}\r\n\r\n\tfunction fetchAttachedData(list, place, setFunc) {\r\n\t\treturn list.forEach(async (itemId) => {\r\n\t\t\tlet itemData = (await firestore.collection(place).doc(itemId).get()).data()\r\n\t\t\tsetFunc(prev => [...prev, itemData])\r\n\t\t})\r\n\t}\r\n\r\n\tfunction inResponseMessagesFetch() {\r\n\t\tif (inResponseToMessage !== null) {\r\n\t\t\tinResponseToMessage.forEach(async messageId => {\r\n\t\t\t\tsetInResponseToMessagesData(prev => [...prev, otherMessages[messageId]])\r\n\t\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[messageId].sender).get()).data().displayName\r\n\t\t\t\tsetInResponseNames(prev => [name, ...prev])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSentMessageUser()\r\n\t\tfetchAttachedData(attachedSongs, 'songs', setAttachedSongsData)\r\n\t\tfetchAttachedData(attachedAuthors, 'users', setAttachedAuthorsData)\r\n\t\tfetchAttachedData(attachedAlbums, 'playlists', setAttachedPlaylistsData)\r\n\t\tinResponseMessagesFetch()\r\n\t}, [])\r\n\r\n\tfunction addMessageToResponseList() {\r\n\t\tif (!inResponseToMessageArr.includes(id)) {\r\n\t\t\tsetInResponseToMessageArr(prev => [...prev, id])\r\n\t\t}\r\n\t}\r\n\r\n\tfunction returnToInitial() {\r\n\t\tlet dropDelta\r\n\t\tclearTimeout(dropDelta)\r\n\t\tsetTransformTransition(0.2)\r\n\t\tdropDelta = setTimeout(() => {\r\n\t\t  setSwipeDeltaX(0)\r\n\t\t  setTransformTransition(0)\r\n\t\t}, 200)\r\n\t }\r\n\r\n\tuseEffect(() => {\r\n\t\tif(swipeDeltaX < -160){\r\n\t\t\treturnToInitial()\r\n\t\t\taddMessageToResponseList()\r\n\t\t}\r\n\t}, [swipeDeltaX])\r\n\r\n\r\n\tconst emojis = [<FcLike />, <AiFillFire />, <AiFillLike />]\r\n\treturn (\r\n\t\t<div className={\"MessageItem \" + (sender === currentUser.uid ? 'your' : '')} ref={id === scrollToMessageId ? scrollToMessageRef : refPassthrough} style={!isVisible ? { opacity: '0', visibility: 'hidden' } : showPhoto ? { paddingBottom: '15px', transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition } : {transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition}} onTouchEnd = {returnToInitial}>\r\n\t\t\t<div className=\"messageItemImage\">\r\n\t\t\t\t{showPhoto ?\r\n\t\t\t\t\t<img src={userThatSentMessage.photoURL} alt=\"\" /> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t\t<div className=\"messageItemBody\" style={id === scrollToMessageId ? { animation: 'showResponseMessage .5s forwards' } : showPhoto ? { borderRadius: 'var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px' } : {}}>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n\t\t\t\t\t<h5 className=\"messageUserName\">{userThatSentMessage.displayName}</h5>\r\n\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{messageSentTime}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{inResponseToMessage !== null ?\r\n\t\t\t\t\tinResponseToMessagesData.map((messageData, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" onClick={() => setScrollToMessageId(messageData.id)}>\r\n\t\t\t\t\t\t\t\t<span style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t<h5 style={messageData.sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>\r\n\t\t\t\t\t\t\t\t\t\t{inResponseNames[index]}\r\n\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{displayDate(messageData.sentTime, 2)}</div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{messageData.message}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(messageData)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{message}</p>\r\n\t\t\t\t\t{attachedSongsData.map((song, key) => {\r\n\t\t\t\t\t\treturn isVisible ? <SongItem song={song} localIndex={key} key={key} /> : <SongItemLoading />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedPlaylistsData.map((album, index) => {\r\n\t\t\t\t\t\treturn <PlaylistItem playlist={album} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedAuthorsData.map((author, index) => {\r\n\t\t\t\t\t\treturn <AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<SeenByCircle listOfSeen={messageData.seenBy} />\r\n\t\t\t<button className=\"respondToMessageBtn\" onClick={addMessageToResponseList} style = {isMobile?{opacity:-swipeDeltaX/80}:{}}>\r\n\t\t\t\t<BiShare />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { MessageItem } from './MessageItem'\r\n\r\nexport const MessageField = ({message, index, messageList, chatId, inResponseToMessage, setInResponseToMessage, scrollToMessageRef, scrollToMessageId, setScrollToMessageId, setDateRefsArray}) => {\r\n\tconst [showPhoto, setShowPhoto] = useState(false)\r\n\tconst [showDate, setShowDate] = useState(false)\r\n\tconst dateRef = useRef(null)\r\n\tuseEffect(() => {\r\n\t\tif (index === messageList.length - 1) setShowPhoto(true)\r\n\t\telse if (messageList[index + 1].sender !== messageList[index].sender) setShowPhoto(true)\r\n\t\telse if (displayDate(messageList[index + 1].sentTime) !== displayDate(messageList[index].sentTime)) setShowPhoto(true)\r\n\t\r\n\t\tif (index === 0) setShowDate(true)\r\n\t\telse if (displayDate(messageList[index].sentTime) !== displayDate(messageList[index - 1].sentTime)) {\r\n\t\t\tsetShowDate(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dateRef.current !== null) {\r\n\t\t\tsetDateRefsArray(prev=>[...prev, dateRef])\r\n\t\t}\r\n\t}, [showDate])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showDate ?  <div ref = {dateRef} style={{ width: '100%', display: 'flex', justifyContent: 'center', alignItems: \"center\", padding: \"10px 0\" }}>{displayDate(message.sentTime)}</div> : null}\r\n\t\t\t<MessageItem\r\n\t\t\t\tmessageData={message}\r\n\t\t\t\tchatId={chatId}\r\n\t\t\t\tkey={message.id}\r\n\t\t\t\tscrollToMessageRef={scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId={scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId={setScrollToMessageId}\r\n\t\t\t\tshowPhoto={showPhoto}\r\n\t\t\t\totherMessages={messageList}\r\n\t\t\t\tinResponseToMessageArr={inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessageArr={setInResponseToMessage}\r\n\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { MessageField } from './MessageField'\r\n\r\nexport const DisplayChatMessages = ({chatId, messageList, inResponseToMessage, setInResponseToMessage, messagesWindowRef, setDateRefsArray}) => {\r\n\tconst scrollToMessageRef = useRef(null)\r\n\tconst [scrollToMessageId, setScrollToMessageId] = useState(-1)\r\n\tuseEffect(() => {\r\n\t\tif (scrollToMessageId !== -1) {\r\n\t\t\tmessagesWindowRef.current.scrollTo(0, scrollToMessageRef.current.offsetTop - 65 < 0 ? 0 : scrollToMessageRef.current.offsetTop - 65)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetScrollToMessageId(-1)\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}, [scrollToMessageId])\r\n\r\n\treturn messageList.length?<>\r\n\t\t{messageList.map((message, index)=>{\r\n\t\t\treturn <MessageField \r\n\t\t\t\tmessage = {message} \r\n\t\t\t\tindex = {index} \r\n\t\t\t\tkey = {message.id} \r\n\t\t\t\tmessageList = {messageList} \r\n\t\t\t\tchatId = {chatId} \r\n\t\t\t\tinResponseToMessage = {inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessage = {setInResponseToMessage}\r\n\t\t\t\tscrollToMessageRef = {scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId = {scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId = {setScrollToMessageId}\r\n\t\t\t\tsetDateRefsArray = {setDateRefsArray}\r\n\t\t\t/>\r\n\t\t})}\r\n\t</>:null\r\n}\r\n","import React from 'react'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nexport const AttachedItemsInChatInput = ({attachedItems, setAttachedItems, icon}) => {\r\n\tfunction removeItemFromAttached(attachedItems, setItems, itemId) {\r\n\t\tsetItems(attachedItems.filter(id => id !== itemId))\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"AttachedItemsInChatInput\">\r\n\t\t\t{attachedItems.map((itemId, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"attachedSongItem\" key={itemId}>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t<span>{itemId}</span>\r\n\t\t\t\t\t\t<button className=\"removeMessageFromResponse\" onClick={() => removeItemFromAttached(attachedItems, setAttachedItems, itemId)}>\r\n\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport { MdSend } from 'react-icons/md'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/findWhatToWriteInResponseItem'\r\nimport { auth, firestore } from '../../firebase'\r\nimport { sendMessage } from '../../functions/sendMessage'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { AttachedItemsInChatInput } from '../ChatPage/AttachedItemsInChatInput'\r\n\r\nexport const ChatInput = ({ chatId, chatData, messageText, setMessageText, inResponseToMessage, setInResponseToMessage, otherMessages }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAttachWindow, setOpenAttachWindow] = useState(false)\r\n\tconst { yourSongs, yourAuthors, yourPlaylists } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [allFoundSongs, setAllFoundSongs] = useState(yourSongs)\r\n\tconst [searchSongList, setSearchSongList] = useState([])\r\n\tconst [attachedSongs, setAttachedSongs] = useState([])\r\n\tconst [attachedAlbums, setAttachedAlbums] = useState([])\r\n\tconst [attachedAuthors, setAttachedAuthors] = useState([])\r\n\tconst [resultPlaylists, setResultPlaylists] = useState(yourPlaylists)\r\n\tconst [resultAuthorList, setResultAuthorList] = useState(yourAuthors)\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst [attachedSongsNames, setAttachedSongsNames] = useState([])\r\n\tconst attachWindowRef = useRef(null)\r\n\tuseOutsideClick(attachWindowRef, setOpenAttachWindow)\r\n\r\n\tfunction sendMessageFull() {\r\n\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, attachedSongs, attachedAlbums, attachedAuthors, inResponseToMessage);\r\n\t\tsetMessageText(\"\");\r\n\t\tsetAttachedSongs([]);\r\n\t\tsetAttachedAuthors([]);\r\n\t\tsetAttachedAlbums([]);\r\n\t\tsetInResponseToMessage([])\r\n\t\tsetOpenAttachWindow(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (searchValue.length === 0) {\r\n\t\t\tsetAllFoundSongs(yourSongs)\r\n\t\t}\r\n\t}, [searchValue])\r\n\r\n\tfunction removeMessageFromResponseList(messageId) {\r\n\t\tsetInResponseToMessage(inResponseToMessage.filter(id => id !== messageId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(messageText.length === 0){\r\n\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\ttyping:chatData.typing.filter(id=>id !== currentUser.uid)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(!chatData.typing.includes(currentUser.uid)){\r\n\t\t\t\tconst tempArray = chatData.typing\r\n\t\t\t\ttempArray.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\ttyping:tempArray\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [messageText])\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInResponseNames([])\r\n\t\tinResponseToMessage.forEach(async id => {\r\n\r\n\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[id].sender).get()).data().displayName\r\n\t\t\tsetInResponseNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [inResponseToMessage.length])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachedSongsNames([])\r\n\t\tattachedSongs.forEach(async id => {\r\n\t\t\tconst name = (await firestore.collection('songs').doc(id).get()).data().name\r\n\t\t\tsetAttachedSongsNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [attachedSongs.length])\r\n\r\n\treturn (\r\n\t\t<div className=\"chatInput\" style={openAttachWindow ? { borderRadius: \"0 0 var(--standartBorderRadius) var(--standartBorderRadius)\", transition: \".2s\" } : {}} ref={attachWindowRef}>\r\n\t\t\t<div className=\"attachWindow\" style={openAttachWindow ? { height: \"400px\", opacity: '1' } : {}} >\r\n\t\t\t\t{openAttachWindow ?\r\n\t\t\t\t\t<div style={openAttachWindow ? { maxHeight: '100%', overflowY: 'auto' } : { display: 'none' }}>\r\n\t\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\tsetValue={setSearchValue}\r\n\t\t\t\t\t\t\tsetAllFoundSongs={setAllFoundSongs}\r\n\t\t\t\t\t\t\tsetResultPlaylists={setResultPlaylists}\r\n\t\t\t\t\t\t\tsetResultAuthorList={setResultAuthorList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SongList listOfSongs={allFoundSongs} source={'no'} listOfChosenSongs={attachedSongs} setListOfSongs={setAttachedSongs} />\r\n\t\t\t\t\t\t<AuthorsList listOfAuthors={resultAuthorList} listOfChosenAuthors={attachedAuthors} setListOfChosenAuthors={setAttachedAuthors} />\r\n\t\t\t\t\t\t<AlbumList listOfAlbums={resultPlaylists} loading={false} listOfChosenAlbums={attachedAlbums} setListOfChosenAlbums={setAttachedAlbums} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inResponseArea\" style={inResponseToMessage.length || attachedSongsNames.length || attachedAuthors.length || attachedAlbums.length ? {} : { height: '0', padding: '0', opacity: '0', top: \"0\", visibility: 'hidden' }}>\r\n\t\t\t\t<div className=\"responseMessages\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{inResponseToMessage.map((id, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" key={id}>\r\n\t\t\t\t\t\t\t\t<h5 style={otherMessages[id].sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>{inResponseNames[index]}</h5>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{shortWord(otherMessages[id].message, 35)}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(otherMessages[id])}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button onClick={() => removeMessageFromResponseList(id)} className=\"removeMessageFromResponse\">\r\n\t\t\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedSongs} setAttachedItems = { setAttachedSongs} icon = {<CgMusicNote />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAuthors} setAttachedItems = { setAttachedAuthors} icon = {<FiUser />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAlbums} setAttachedItems = { setAttachedAlbums} icon = {<BiAlbum />}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"attachAndEmojis\">\r\n\t\t\t\t<div className=\"attachBtn\">\r\n\t\t\t\t\t<button onClick={() => { setOpenAttachWindow(!openAttachWindow) }}>\r\n\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" style={{ background: 'var(--lightGrey)', border: 'none', outline: 'none', minHeight: '100%' }} value={messageText} onChange={(e) => { setMessageText(e.target.value) }} onKeyUp={(e) => { if (e.key === 'Enter') { sendMessageFull() } }} />\r\n\t\t\t\t{/* <div className=\"emojis\">\r\n\t\t\t\t\t<div className=\"emojiItem\">\r\n\t\t\t\t\t\t<FcLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--red)' }}>\r\n\t\t\t\t\t\t<AiFillFire />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--lightBlue)' }}>\r\n\t\t\t\t\t\t<AiFillLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t\t<button className=\"sendBtn\" onClick={() => { sendMessageFull() }}>\r\n\t\t\t\t<MdSend />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport displayDate from '../../functions/displayDate'\r\n\r\nexport const DateOnTop = ({date}) => {\r\n\treturn (\r\n\t\t<div className = \"DateOnTop\">\r\n\t\t\t{displayDate(date)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {SmallImages} from '../AuthorPage/SmallImages'\r\nexport const TypingAnimation = ({ typingPeople }) => {\r\n\tconst [typingPeopleData, setTypingPeopleData] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tsetTypingPeopleData([])\r\n\t\ttypingPeople.map(async personId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(personId).get()).data()\r\n\t\t\tif(personData.uid !== currentUser.uid) setTypingPeopleData(prev=>[...prev, personData])\r\n\t\t})\r\n\t}, [typingPeople])\r\n\treturn typingPeopleData.length > 0 ? (\r\n\t\t<div className = \"typingWrapper\">\r\n\t\t\t<SmallImages imagesList = {typingPeopleData.map(person=>person.photoURL)} borderColor = {'var(--navItemColor)'}/>\r\n\t\t\t<div className=\"TypingAnimation\">\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React, { createRef } from 'react'\r\nimport { useState } from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport { ChatHeader } from '../components/ChatPage/ChatHeader'\r\nimport { MessageItem } from '../components/ChatPage/MessageItem'\r\nimport { DisplayChatMessages } from '../components/ChatPage/DisplayChatMessages'\r\nimport { useRef } from 'react'\r\nimport { ChatInput } from '../components/AuthorPage/ChatInput'\r\nimport { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport displayDate from '../functions/displayDate'\r\nimport { DateOnTop } from '../components/ChatPage/DateOnTop'\r\nimport { TypingAnimation } from '../components/ChatPage/TypingAnimation'\r\nimport { useScreen } from '../contexts/ScreenContext'\r\nexport const DialoguePage = () => {\r\n\tconst match = useRouteMatch('/chat/:chatId')\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatId } = match.params\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [chatData, setChatData] = useState([])\r\n\tconst scrollToBottomElementRef = useRef(null)\r\n\tconst messagesWindowRef = useRef(null)\r\n\tconst {screenHeight} = useScreen()\r\n\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tconst [messageList, setMessageList] = useState([])\r\n\tconst [inResponseToMessage, setInResponseToMessage] = useState([])\r\n\tconst [currentDateOnTop, setCurrentDateOnTop] = useState(\"\")\r\n\tconst [dateRefsArray, setDateRefsArray] = useState([])\r\n\tconst history = useHistory()\r\n\tconst scrollToMyRef = () => {\r\n\t\tconst scroll = messagesWindowRef.current.scrollHeight - messagesWindowRef.current.clientHeight;\r\n\t\tmessagesWindowRef.current.scrollTo(0, scroll);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('chats').doc(chatId)\r\n\t\t\t.onSnapshot(snapshot => {\r\n\t\t\t\tsetChatData(snapshot.data())\r\n\t\t\t\tsetMessageList(snapshot.data().messages)\r\n\t\t\t\t\r\n\t\t\t\tsetCurrentDateOnTop(snapshot.data().messages.length?snapshot.data().messages[0].sentTime:new Date().toString())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, chatId])\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatData.participants !== undefined) {\r\n\t\t\tif (!chatData.participants.includes(currentUser.uid)) history.push('/chat')\r\n\t\t}\r\n\t}, [chatData])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (messagesWindowRef.current !== null && messageList.length > 0) scrollToMyRef()\r\n\t}, [messageList])\r\n\r\n\tfunction findTopDate(e){\r\n\t\tdateRefsArray.forEach(ref=>{\r\n\t\t\tif(ref.current !== null) {\r\n\t\t\t\tif(ref.current.offsetTop - 70 <= e.target.scrollTop) setCurrentDateOnTop(ref.current.innerHTML)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"DialoguePage\">\r\n\t\t\t{\r\n\t\t\t\tloading ?\r\n\t\t\t\t\t<LoadingCircle /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ChatHeader data={chatData} />\r\n\t\t\t\t\t\t<DateOnTop date = {currentDateOnTop}/>\r\n\t\t\t\t\t\t<div className=\"chatMessagesWindow\" ref={messagesWindowRef} onScroll = {findTopDate} style = {{height:screenHeight-170 + 'px'}}>\r\n\t\t\t\t\t\t\t<DisplayChatMessages chatId = {chatId} messageList = {messageList} inResponseToMessage = {inResponseToMessage} setInResponseToMessage = {setInResponseToMessage} messagesWindowRef = {messagesWindowRef} setDateRefsArray = {setDateRefsArray}/>\r\n\t\t\t\t\t\t\t<span className=\"scrollToBottomElement\" ref={scrollToBottomElementRef}></span>\r\n\t\t\t\t\t\t\t<TypingAnimation typingPeople = {chatData.typing}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ChatInput \r\n\t\t\t\t\t\t\tchatId={chatId} \r\n\t\t\t\t\t\t\tchatData = {chatData}\r\n\t\t\t\t\t\t\tmessageText={messageText} \r\n\t\t\t\t\t\t\tsetMessageText={setMessageText} \r\n\t\t\t\t\t\t\tinResponseToMessage = {inResponseToMessage} \r\n\t\t\t\t\t\t\tsetInResponseToMessage = {setInResponseToMessage} \r\n\t\t\t\t\t\t\totherMessages = {messageList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t{chatData.wallpaper !== \"undefined\"?<img src={chatData.wallpaper} className = \"chatWallpaper\" alt=\"\"/>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export const LOGIN_ROUTE = '/login'\r\nexport const SIGNUP_ROUTE = '/signup'\r\nexport const HOME_ROUTE = '/home'\r\nexport const LIBRARY_ROUTE = '/library'\r\nexport const SEARCH_ROUTE = '/search'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const NOTFOUND_ROUTE = '/no-such-page'","import React from 'react'\r\n\r\nexport const BlurredBg = () => {\r\n\treturn (\r\n\t\t<div className = \"BlurredBg\">\r\n\t\t\t<div className=\"circle circle1\"></div>\r\n\t\t\t<div className=\"circle circle2\"></div>\r\n\t\t\t<div className=\"circle circle3\"></div>\r\n\t\t\t<div className=\"circle circle4\"></div>\r\n\t\t\t<div className=\"circle circle5\"></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nexport const TitleAndLogo = ({title}) => {\r\n\treturn (\r\n\t\t<div className=\"titleAndLogo\">\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<h1>{title}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport {LoadingCircle} from '../Basic/LoadingCircle'\r\nimport { BlurredBg } from '../SignIn-Up/BlurredBg'\r\nexport const MainBanner = () => {\r\n\tconst [bannerColors, setBannerColors] = useState([])\r\n\tconst [currentSliderPage, setcurrentSliderPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\t\r\n\tconst [topAuthor, setTopAuthor] = useState({})\r\n\tconst [topSong, setTopSong] = useState({})\r\n\tconst [topAlbum, setTopAlbum] = useState({})\r\n\t\r\n\tasync function findTop(setFunc, list, criterion) {\r\n\t\tconst response = await (await firestore.collection(list).orderBy(criterion, 'desc').get()).docs[0].data()\r\n\t\tsetFunc(response)\r\n\t\tsetBannerColors(prev=>[...prev, response.imageColors[0]])\r\n\t\tif(list === 'playlists') setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindTop(setTopAuthor, 'users', 'subscribers')\r\n\t\tfindTop(setTopSong, 'songs', 'listens')\r\n\t\tfindTop(setTopAlbum, 'playlists', 'listens')\r\n\t\t\r\n\t}, [])\r\n\t// function findCurrentPicture(){\r\n\t// \tif(currentSliderPage === 0){\r\n\t// \t\treturn topAuthor.image\r\n\t// \t}\r\n\r\n\t// \tif(currentSliderPage === 1){\r\n\t// \t\treturn topSong.cover\r\n\t// \t}\r\n\r\n\t// \treturn topAlbum.image\r\n\t// }\r\n\treturn (\r\n\t\t<div className = \"MainBanner\" style = {{background:bannerColors[currentSliderPage]}}>\r\n\t\t\t{loading? <LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 0?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular artist on platform</h3>\r\n\t\t\t\t\t\t\t<AuthorItemBig data = {topAuthor}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 1?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular song on platform</h3>\r\n\t\t\t\t\t\t\t<SongItem song = {topSong} localIndex = {0} showListens/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 2?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular album on platform</h3>\r\n\t\t\t\t\t\t\t<PlaylistItem playlist = {topAlbum}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"sliderBtns\">\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage-1, 2, 0))}><BiChevronLeft/></button>\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage+1, 2, 0))}><BiChevronRight/></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <BlurredBg circleColor = \"#fff\"/> */}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findIfSongIsNew from '../../functions/findIfSongIsNew'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\n\r\nexport const RecentSongs = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recentSongs, setRecentSongs] = useState([])\r\n\tfunction findRecentSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async songId=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(findIfSongIsNew(songData) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecentSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(yourAuthors !== undefined && yourAuthors.length !== 0 && recentSongs.length === 0) findRecentSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<SongList listOfSongs = {recentSongs} source = {{source: `/home`, name: \"New Songs\", image: \"\", songsList: recentSongs}} title = {\"New Songs\"} isNewSong/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findSimilarArtists from '../../functions/findSimilarArtists'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const RecommendedAuthors = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recommendationAuthors, setRecommendationAuthors] = useState([])\r\n\r\n\tconst [uniqueAuthors, setUniqueAuthors] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tif (yourAuthors !== undefined) {\r\n\t\t\tyourAuthors.forEach((author) => {\r\n\t\t\t\tfindSimilarArtists(author, setRecommendationAuthors)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\trecommendationAuthors.forEach(author=>{\r\n\t\t\tconst uniqueAuthorsUIDSArray = uniqueAuthors.map(author=>author.uid)\r\n\t\t\tif(!currentUser.addedAuthors.includes(author.uid) && !uniqueAuthorsUIDSArray.includes(author.uid)){\r\n\t\t\t\tsetUniqueAuthors(prev=>[...prev, author])\r\n\t\t\t}\r\n\t\t})\r\n}, [recommendationAuthors])\r\n\treturn (\r\n\t\t<div className = \"RecommendedAuthors\">\r\n\t\t\t<AuthorsList listOfAuthors = {uniqueAuthors} title = {\"Recommended Authors\"}/>\r\n\t\t\t{/* <h2>Recommended Authors</h2>\r\n\t\t\t<div className=\"artistsWrapper\">\r\n\t\t\t\t{uniqueAuthors.map((author, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ImportantMessage = ({message, image, button}) => {\r\n\treturn (\r\n\t\t<div className = \"importantMessage\">\r\n\t\t\t<div>\r\n\t\t\t\t{image?<img src={image} alt=\"\" />:null}\r\n\t\t\t\t<h3>{message}</h3>\r\n\t\t\t\t{button?button:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {useSong} from '../../contexts/SongContext'\r\nimport { SongList } from '../Basic/SongList'\r\nimport {ImportantMessage} from '../Basic/ImportantMessage'\r\nexport const RecommendedSongs = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [recommendedSongs, setRecommendedSongs] = useState([])\r\n\tfunction fetchRecommendedSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(!currentUser.addedSongs.includes(songId) && !tempSongsIds.includes(songData.id) && index <= 3){\r\n\t\t\t\t\tsetRecommendedSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// tempSongArray.sort((songA, songB)=>songB.listens - songA.listens)\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRecommendedSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = 'RecommendedSongs'>\r\n\t\t\t<SongList listOfSongs = {recommendedSongs} source = {{source: `/home`, name: \"Recommended Songs\", image: \"\", songsList: recommendedSongs}} title = {\"Recommended Songs\"} displayIfEmpty = {<ImportantMessage message = {\"No songs recommended. Add favorite authors so we could know what to recommend\"} image = {\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\"}/>}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { SongList } from '../Basic/SongList'\r\n\r\nexport const Top15Songs = () => {\r\n\tconst [topSongs, setTopSongs] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tfunction fetchTopSongs(){\r\n\t\tfirestore.collection('songs').orderBy('listens', 'desc').limit(15).get().then(res=>{\r\n\t\t\tres.docs.forEach(song=>{\r\n\t\t\t\tsetTopSongs(prev=>[...prev, song.data()])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchTopSongs()\r\n\t}, [])\r\n\treturn !loading?(\r\n\t\t<SongList \r\n\t\t\tlistOfSongs = {topSongs} \r\n\t\t\tsource = {{source:`/home`,name:\"Top 15 Songs\", image:\"https://media.istockphoto.com/vectors/fire-icon-illustration-for-design-stock-vector-vector-id931601050?k=6&m=931601050&s=170667a&w=0&h=fhRQfwwsW6aXK9OSDM-yj842SFFl2Q9ll6ch-xCK5es=\", songsList:topSongs}}\r\n\t\t\ttitle = {'Top 15 Songs'}\r\n\t\t\tshowListens\t\r\n\t\t\tshowCount\r\n\t\t/>\r\n\t):<LoadingCircle/>\r\n}\r\n","export default __webpack_public_path__ + \"static/media/wave2.f62cb572.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useEffect } from 'react'\r\nexport const LibraryPlaylistItem = ({playlist}) => {\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource({source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} className = \"playlistWrapper\">\r\n\t\t\t<div className=\"library playlistItem\">\r\n\t\t\t\t{playlist.image?<img src={playlist.image} alt=\"\" />:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t<h2 style = {{background:playlist.imageColors[2]}}>{shortWord(playlist.name, 10) }</h2>\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport wave from '../../images/wave2.svg'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { LibraryPlaylistItem } from '../../components/LibraryPage/LibraryPlaylistItem'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nexport const SongsPage = () => {\r\n\tconst { yourSongs, yourPlaylists, setYourSongs } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\treturn (\r\n\t\t<div className=\"SongsPage\">\r\n\t\t\t<div className=\"playLists\">\r\n\t\t\t\t<div className=\"playlistContent\">\r\n\t\t\t\t\t{yourPlaylists.map((p, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LibraryPlaylistItem playlist={p} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"playlistsBackground\">\r\n\t\t\t\t\t<img src={wave} alt=\"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"yourSongsList\">\r\n\t\t\t\t<SongList listOfSongs={yourSongs} source={{ source: '/library', name: \"Your Library\", image: currentUser.photoURL, songsList: yourSongs }} showSearch displayIfEmpty={<Link to=\"/search\"><button className=\"standartButton\">Search for songs</button></Link>} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\n\r\nexport const CreatePlaylistPage = () => {\r\n\treturn (\r\n\t\t<div className = 'CreatePlaylistPage'>\r\n\t\t\t<AddPlaylist/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {PlaylistItem} from '../AuthorPage/PlaylistItem'\r\nimport {BiFolderPlus} from 'react-icons/bi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { CreatePlaylistPage } from './CreatePlaylistPage'\r\nexport const PlaylistsPage = () => {\r\n\tconst {yourPlaylists} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"PlaylistsPage\">\r\n\t\t\t<button className = \"createPlaylistBtn\" onClick = {()=>{toggleModal(); setContent(<CreatePlaylistPage/>)}}>\r\n\t\t\t\t<BiFolderPlus/>\r\n\t\t\t\tCreate Playlist\r\n\t\t\t</button>\r\n\t\t\t<div className=\"playlistsContainer\">\r\n\t\t\t\t{yourPlaylists && yourPlaylists.map((playlist, index)=>{\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {AuthorItemBig} from '../AuthorPage/AuthorItemBig'\r\nexport const AuthorsPage = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\treturn (\r\n\t\t<div className = \"AuthorsPage\">\r\n\t\t\t<div className=\"authorsContainer\">\r\n\t\t\t\t{yourAuthors.map((authorData)=>{\r\n\t\t\t\t\treturn <AuthorItemBig data = {authorData} key = {authorData.uid}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const IsUserOnlineCircle = ({userUID}) => {\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<div className = \"onlineCircle\"></div>:null\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAmountOfUnseenMessages } from '../../functions/findAmountOfUnseenMessages'\r\nexport const AmountOfUnseenMessages = ({amountOfUnseen}) => {\r\n\t\r\n\treturn amountOfUnseen !== 0?(\r\n\t\t<div className = \"AmountOfUnseenMessages\">\r\n\t\t\t{amountOfUnseen}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiMusic, FiUser } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {BsDot} from 'react-icons/bs'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { SeenByCircle } from './SeenByCircle'\r\nexport const LastSentMessage = ({ messages }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [lastAttachedItem, setLastAttachedItem] = useState(\"\")\r\n\tconst [shouldPutDot, setShouldPutDot] = useState(false)\r\n\tconst [lastMessage, setLastMessage] = useState(\"\")\r\n\tconst messageIcons = [null, <FiMusic />, <BiAlbum />, <FiUser />]\r\n\tconst [lastIcon, setLastIcon] = useState(0)\r\n\tasync function findWhatToWriteUnderName() {\r\n\t\tif (messages !== undefined) {\r\n\t\t\tconst lastAttachedItem = messages[messages.length - 1]\r\n\t\t\tsetLastMessage(str => str += lastAttachedItem.message)\r\n\t\t\tsetShouldPutDot(lastAttachedItem.message.length !== 0) \r\n\t\t\tif (lastAttachedItem.attachedSongs.length) {\r\n\t\t\t\tconst songName = (await firestore.collection('songs').doc(lastAttachedItem.attachedSongs[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(1)\r\n\t\t\t\tsetLastAttachedItem(str => str += songName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAlbums.length) {\r\n\t\t\t\tconst playlistName = (await firestore.collection('playlists').doc(lastAttachedItem.attachedAlbums[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(2)\r\n\t\t\t\tsetLastAttachedItem(str => str +=playlistName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAuthors.length) {\r\n\t\t\t\tconst authorName = (await firestore.collection('users').doc(lastAttachedItem.attachedAuthors[0]).get()).data().displayName\r\n\t\t\t\tsetLastIcon(3)\r\n\t\t\t\tsetLastAttachedItem(str => str +=authorName)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindWhatToWriteUnderName()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className=\"messageShowOutside\">\r\n\t\t\t{messages[messages.length - 1].sender === currentUser.uid?<span style = {{marginRight:'5px'}}>You:</span>:null}\r\n\t\t\t{shortWord(lastMessage, 30)}\r\n\t\t\t{shouldPutDot && lastAttachedItem.length?<BsDot/>:null}\r\n\t\t\t{messageIcons[lastIcon]}\r\n\t\t\t{lastAttachedItem}\r\n\t\t\t<SeenByCircle listOfSeen = {messages[messages.length - 1].seenBy}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { findAmountOfUnseenMessages } from '../../functions/findAmountOfUnseenMessages'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\nimport { AmountOfUnseenMessages } from './AmountOfUnseenMessages'\r\nimport { LastSentMessage } from './LastSentMessage'\r\n\r\nexport const ChatItem = ({ chatData }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatName, chatImage, participants, messages } = chatData\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [amountOfUnseen, setAmountOfUnseen] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountOfUnseen(findAmountOfUnseenMessages(messages, currentUser))\r\n\t}, [])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName === '') {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [])\r\n\treturn chatData?(\r\n\t\t<Link to={`/chat/${chatData.id}`}>\r\n\t\t\t<div className={\"ChatItem \" + (amountOfUnseen > 0?\"unseen\":\"\")} >\r\n\t\t\t\t<div className=\"chatItemImage\">\r\n\t\t\t\t\t<img src={chatImage || otherPerson.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<IsUserOnlineCircle userUID = {otherPerson.uid}/>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<h4 style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n\t\t\t\t\t\t<span>{chatName || otherPerson.displayName}</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{messages.length?<span style={{ opacity: '.6', fontWeight: '500', fontSize: '.8em' }}>{displayDate(messages[messages.length - 1].sentTime, chatData && ( Date.now() - new Date(messages[messages.length - 1].sentTime).getTime()) > 86000000 ? 0 : 2)}</span>:null}\r\n\t\t\t\t\t\t\t<AmountOfUnseenMessages amountOfUnseen = {amountOfUnseen}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t{messages.length?<p style={messages[messages.length - 1].sender !== currentUser.uid ? { color: '#fff' } : {}}>{<LastSentMessage messages={messages} />}</p>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t):null\r\n}\r\n","export function findAmountOfUnseenMessages(messages, currentUser) {\r\n\treturn messages.reduce((accum, message)=>{\r\n\t\tif(message.sender !== currentUser.uid){\r\n\t\t\tif(message.seenBy !== undefined){\r\n\t\t\t\tif(!message.seenBy.includes(currentUser.uid)){\r\n\t\t\t\t\tconsole.log(\"i'm here\")\r\n\t\t\t\t\treturn ++accum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn accum\r\n\t}, 0)\r\n}","import React, { useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport {useScreen} from '../../contexts/ScreenContext'\r\nexport const ModalWindow = ({...restProps}) => {\r\n\tconst {openModal, setOpenModal, content} = useModal()\r\n\tconst modalRef = useRef(null)\r\n\tconst {screenHeight} = useScreen()\r\n\tuseOutsideClick(modalRef, setOpenModal)\r\n\treturn (\r\n\t\t<div className = \"modal_darkBg\" style = {!openModal?{opacity:0, visibility:'hidden'}:{height:screenHeight}} >\r\n\t\t\t<div className = \"ModalWindow\" {...restProps} ref = {modalRef} style = {!openModal?{opacity:0, visibility:'hidden', transform:'translateY(40px)'}:{}}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport getUID from '../../functions/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../Basic/ErrorPlate'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport {findChatURL} from '../../functions/findChatURL'\r\nexport const CreateChat = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [foundFriends, setFoundFriends] = useState(yourFriends)\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst [chatCover, setChatCover] = useState(\"\")\r\n\tconst [chatName, setChatName] = useState(\"\")\r\n\tconst [errorMessage, setRrrorMessage] = useState(\"\")\r\n\tconst chatId = getUID()\r\n\tconst history = useHistory()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tuseEffect(() => {\r\n\t\tif(chosenFriends.length >= 1){\r\n\t\t\tfindChatURL(chosenFriends, currentUser, setShouldCreate, setFriendChatId)\r\n\t\t}\r\n\t}, [chosenFriends])\r\n\treturn (\r\n\t\t<div className=\"CreateChat\">\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundFriends} focus inputText={\"Search for friends\"} defaultSearchMode={\"authors\"} />\r\n\t\t\t{foundFriends.map(friend => {\r\n\t\t\t\treturn <PersonTiny data={friend} chosenArray={chosenFriends} setChosenArray={setChosenFriends} />\r\n\t\t\t})}\r\n\t\t\t{chosenFriends.length > 1 && shouldCreate ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" style={{ marginBottom: '10px' }} className=\"standartInput\" placeholder={\"Enter chat name\"} value={chatName} onChange={e => setChatName(e.target.value)} />\r\n\t\t\t\t\t<DownloadPhotoButton setErrorMessage={setRrrorMessage} setImageLocalPath={() => { return null }} downloadedPhoto={chatCover} setDownloadedPhoto={setChatCover} place={'chatCovers/'} btnText = {\"Download chat image\"}/>\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t{chosenFriends.length >= 1?<button className=\"addSongBtn\" onClick = {()=>{if(shouldCreate) {createChat([currentUser.uid, ...chosenFriends], chatId, chatName, chatCover, [currentUser.uid]); history.push(`/chat/${chatId}`)} else history.push(`/chat/${friendChatId}`)}}>{shouldCreate?\"Create Chat\":\"Go to chat\"}</button>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const SwitchToggle = ({boolValue, setBoolValue}) => {\r\n\treturn (\r\n\t\t<div className = \"SwitchToggle\" onClick = {()=>setBoolValue(!boolValue)}>\r\n\t\t\t<div className=\"switchInnerCircle\" style = {boolValue?{transform:'translateX(100%)', background:'var(--green)'}:{}}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, LOGIN_ROUTE, SEARCH_ROUTE, SIGNUP_ROUTE } from \"./utils/consts\";\r\nimport {LogInPage} from './pages/LogInPage'\r\nimport {SignUpPage} from './pages/SignUpPage'\r\nimport { Home } from \"./pages/Home\";\r\nimport { SearchPage } from \"./pages/SearchPage\";\r\nimport { LibraryPage } from \"./pages/LibraryPage\";\r\nimport { ChatPage } from \"./pages/ChatPage\";\r\nexport const publicRoutes = [\r\n\t{\r\n\t\tpath:LOGIN_ROUTE,\r\n\t\tComponent:LogInPage,\r\n\t},\r\n\t{\r\n\t\tpath:SIGNUP_ROUTE,\r\n\t\tComponent:SignUpPage,\r\n\t}\r\n]\r\n\r\nexport const privateRoutes = [\r\n\t{\r\n\t\tpath:HOME_ROUTE,\r\n\t\tComponent:Home,\r\n\t},\r\n\t{\r\n\t\tpath:LIBRARY_ROUTE,\r\n\t\tComponent:LibraryPage,\r\n\t},\r\n\t{\r\n\t\tpath:SEARCH_ROUTE,\r\n\t\tComponent:SearchPage,\r\n\t},\r\n\t{\r\n\t\tpath:CHAT_ROUTE,\r\n\t\tComponent:ChatPage,\r\n\t}\r\n]","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { ErrorPlate } from '../components/Basic/ErrorPlate'\r\nimport { FullScreenLoading } from '../components/Basic/FullScreenLoading'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { HOME_ROUTE, LOGIN_ROUTE, SIGNUP_ROUTE } from '../utils/consts'\r\n\r\nexport const LogInPage = () => {\r\n\tconst {login} = useAuth()\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst isValid = email.length !== 0 && password.length !== 0\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\t\tawait login(email, password, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className = \"In-Up-Container\">\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title=\"Log In\"/>\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Enter your password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" disabled = {loading}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {SIGNUP_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tCreate new account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../styles/SignIn-Up.css'\r\nimport { Link } from 'react-router-dom'\r\nimport {HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { RadioBtn } from '../components/SignIn-Up/RadioBtn'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { FullScreenLoading } from '../components/Basic/FullScreenLoading'\r\nexport const SignUpPage = () => {\r\n\tconst [currentRoleChoice, setCurrentRoleChoice] = useState(1)\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst {signup} = useAuth()\r\n\tconst [photoURL, setPhotoURL] = useState(\"\")\r\n\tconst isValid = email.length !== 0 && password.length !== 0 && name.length !== 0\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tasync function onFileChange(e){\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(`usersImages/${file.name}`)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetPhotoURL(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\tawait signup(email, name, password, currentRoleChoice, photoURL, imageColors, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"In-Up-Container\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title = \"Sign Up\"/>\r\n\t\t\t\t\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" onChange = {(e)=>setName(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Create a password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div style = {{display:'flex', width:'100%', justifyContent:'center', margin:'5px 0 15px 0'}}>\r\n\t\t\t\t\t\t<RadioBtn label = \"User\" onClick = {()=>setCurrentRoleChoice(0)} currentActive = {currentRoleChoice} id = {0}/>\r\n\t\t\t\t\t\t<RadioBtn label = \"Author\" onClick = {()=>setCurrentRoleChoice(1)} currentActive = {currentRoleChoice} id = {1}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className = \"downloadFile\">\r\n\t\t\t\t\t\t<div className = \"downloadPhoto\">\r\n\t\t\t\t\t\t\t{photoURL === ''?<span className = \"downloadBtnText\">\r\n\t\t\t\t\t\t\t\t<AiOutlineCloudDownload/>\r\n\t\t\t\t\t\t\t\tDownload photo\r\n\t\t\t\t\t\t\t</span>:<span className = \"downloadBtnText\">Done</span>}\r\n\t\t\t\t\t\t\t<span className=\"photoLoadLine\" style = {photoURL !== ''?{width:'100%'}:{}}></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange = {onFileChange}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" type = \"submit\" disabled = {loading}>\r\n\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {LOGIN_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tAlready have the account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../styles/HomePage.css'\r\nimport { MainBanner } from '../components/HomePage/MainBanner'\r\nimport { RecentSongs } from '../components/HomePage/RecentSongs'\r\nimport { RecommendedAuthors } from '../components/HomePage/RecommendedAuthors'\r\nimport { RecommendedSongs } from '../components/HomePage/RecommendedSongs'\r\nimport { Top15Songs } from '../components/HomePage/Top15Songs'\r\n\r\nexport const Home = () => {\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards' }} className=\"HomePage\">\r\n\t\t\t<MainBanner />\r\n\t\t\t<RecentSongs />\r\n\t\t\t<RecommendedSongs />\r\n\t\t\t<RecommendedAuthors />\r\n\t\t\t<Top15Songs />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport \"../styles/LibraryPage.css\"\r\nimport { Slider } from '../components/Tools/Slider'\r\nimport { SongsPage } from '../components/LibraryPage/SongsPage'\r\nimport { PlaylistsPage } from '../components/LibraryPage/PlaylistsPage'\r\nimport { AuthorsPage } from '../components/LibraryPage/AuthorsPage'\r\n\r\nexport const LibraryPage = () => {\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst libraryPages = [<SongsPage/>, <PlaylistsPage/>, <AuthorsPage/>]\r\n\treturn (\r\n\t\t<div className=\"LibraryPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t<Slider pages = {['Songs', \"Playlists\", \"Authors\"]} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t{libraryPages[currentPage]}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport \"../styles/SearchPage.css\"\r\nimport { PlaylistItem } from '../components/AuthorPage/PlaylistItem'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { BackBtn } from '../components/Basic/BackBtn'\r\nimport { FiSearch, FiX } from 'react-icons/fi'\r\nimport { TitleWithMoreBtn } from '../components/Basic/TitleWithMoreBtn'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { SearchBar } from '../components/Basic/SearchBar'\r\nimport {AuthorItemBig} from '../components/AuthorPage/AuthorItemBig'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { SongList } from '../components/Basic/SongList'\r\nimport { AuthorsList } from '../components/Basic/AuthorsList'\r\nimport { AlbumList } from '../components/Basic/AlbumList'\r\nexport const SearchPage = () => {\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [resultSongList, setResultSongList] = useState([])\r\n\tconst [resultAuthorList, setResultAuthorList] = useState([])\r\n\tconst [resultAlbumList, setResultAlbumList] = useState([])\r\n\tconst [shadowColor, setShadowColor] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetResultSongList([])\r\n\t\tsetResultAuthorList([])\r\n\t\tsetResultAlbumList([])\r\n\t}, [searchValue])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(resultSongList.length !== 0){\r\n\t\t\tsetShadowColor(resultSongList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAuthorList.length !== 0){\r\n\t\t\tsetShadowColor(resultAuthorList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAlbumList.length !== 0){\r\n\t\t\tsetShadowColor(resultAlbumList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse setShadowColor(\"\")\r\n\t}, [resultSongList, resultAuthorList, resultAlbumList])\r\n\treturn (\r\n\t\t<div className=\"SearchPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<SearchBar\r\n\t\t\t\tvalue={searchValue}\r\n\t\t\t\tsetValue = {setSearchValue}\r\n\t\t\t\tallFoundSongs = {resultSongList}\r\n\t\t\t\tsetAllFoundSongs = {setResultSongList}\r\n\t\t\t\tsetResultPlaylists = {setResultAlbumList}\r\n\t\t\t\tsetResultAuthorList = {setResultAuthorList}\r\n\t\t\t\tfocus\r\n\t\t\t/>\r\n\r\n\t\t\t<SongList listOfSongs = {resultSongList} source = {{ source: '/search', name: \"Search\", image: \"https://lh3.googleusercontent.com/proxy/PJSN5iZPJhIuQKV-efbS0KD_HoL9nu4cyDmwOfWatZdeOyLBsEtosSWHTw4aK9ZKhrTEW2LGZCGxmH9vYFYx_PT16PIrETeNqijSxA\", songsList:resultSongList }} title = {\"Songs\"} showListens displayIfEmpty = {\"\"}/>\r\n\t\t\t<AuthorsList listOfAuthors = {resultAuthorList} title = {\"Authors\"}/>\r\n\t\t\t<AlbumList listOfAlbums = {resultAlbumList} title = {\"Albums and Playlists\"} loading = {false}/>\r\n\t\t\t<div className=\"colorfullShadow\" style={{ background: shadowColor }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { ChatItem } from '../components/ChatPage/ChatItem'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport '../styles/ChatPage.css'\r\nimport { ModalWindow } from '../components/Basic/ModalWindow'\r\nimport { useFetchFirebaseData } from '../hooks/fetchFirebaseData'\r\nimport {FiPlus} from 'react-icons/fi'\r\nimport { useModal } from '../contexts/ModalContext'\r\nimport {CreateChat} from '../components/ChatPage/CreateChat'\r\nimport { SwitchToggle } from '../components/Basic/SwitchToggle'\r\nexport const ChatPage = () => {\r\n\tconst [yourChats, setYourChats] = useState([])\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [switchValue, setSwitchValue] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tuseFetchFirebaseData(setLoading, 'chats', currentUser.chats, setYourChats, (a, b)=>{if(b.messages.length && a.messages.length) return new Date(b.messages[b.messages.length - 1].sentTime).getTime() - new Date(a.messages[a.messages.length - 1].sentTime).getTime()})\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards', minHeight: \"100%\" }}>\r\n\t\t\t<div style = {{marginBottom:'10px', display:'flex', alignItems:'start', width:'100%'}}>\r\n\r\n\t\t\t\t<button className = \"standartButton\" onClick = {()=>{toggleModal();setContent(<CreateChat/>)}}>\r\n\t\t\t\t\t<FiPlus/>\r\n\t\t\t\t\tCreate chat\r\n\t\t\t\t</button>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t<span style = {{margin:'0px 10px'}}>No sound</span> \r\n\t\t\t\t\t<SwitchToggle boolValue = {switchValue} setBoolValue = {setSwitchValue}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{loading ?\r\n\t\t\t\t<LoadingCircle />\r\n\t\t\t\t:\r\n\t\t\t\t<div className=\"chatsWrapper\">\r\n\t\t\t\t\t{yourChats.map((chat, index) => {\r\n\t\t\t\t\t\treturn <ChatItem chatData={chat} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { AlbumPage } from '../pages/AlbumPage'\r\nimport { AuthorPage } from '../pages/AuthorPage'\r\nimport { DialoguePage } from '../pages/DialoguePage'\r\nimport { privateRoutes, publicRoutes } from '../routes'\r\nimport { HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nexport const ContentRouter = () => {\r\n\tconst user = false\r\n\t\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<Route path={'/authors/:authorId'} component={AuthorPage} exact/>\r\n\t\t\t<Route path={'/albums/:albumId'} component={AlbumPage} exact/>\r\n\t\t\t<Route path={'/chat/:chatId'} component={DialoguePage} exact/>\r\n\t\t\t{privateRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={HOME_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","function amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nexport default function correctTimeDisplay(seconds) {\r\n\treturn amountOfZeros(Math.floor(seconds / 60)) + \":\" + amountOfZeros(Math.floor(seconds % 60))\r\n}","import React from 'react'\r\nimport { FaBackward, FaForward, FaPause, FaPlay } from 'react-icons/fa'\r\nimport { TiArrowRepeat, TiArrowShuffle } from 'react-icons/ti'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport correctTimeDisplay from '../../functions/correctTimeDisplay'\r\nimport { displayAuthorsStr } from '../../functions/displayAuthorsStr'\r\nimport { ColorCircles } from './colorCircles'\r\n\r\nexport const Player = ({inputRef, textLimit = 18, linkToAuthors = true}) => {\r\n\tconst { \r\n\t\tcurrentSongData,\r\n\t\tfindLen,  \r\n\t\tcurrentTime, \r\n\t\tchangeCurrentTime, \r\n\t\tsongDuration, \r\n\t\tsetRepeatMode, \r\n\t\trepeatMode, \r\n\t\tplay, \r\n\t\tprevSong, \r\n\t\tplaySong, \r\n\t\tnextSong, \r\n\t\tsetShuffleMode, \r\n\t\tshuffleMode, \r\n\t\tdisplayAuthors,\r\n\t\tname, \r\n\t\tauthors, \r\n\t\tcover} = useSong()\r\n\treturn currentSongData.id !== -1?(\r\n\t\t<div className=\"player\">\r\n\t\t\t<div className=\"playerUpperSide\">\r\n\t\t\t\t<div className=\"songCover\">\r\n\t\t\t\t\t<img src={cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"nameAndAuthors\">\r\n\t\t\t\t\t<h2 title={name.length > textLimit ? name : null} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={name.length > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{name}</div>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h3 title={authors.map((el) => ' ' + el.displayName)} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t{linkToAuthors?<div style={findLen() > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{displayAuthors()}</div>:<div>{displayAuthorsStr(authors, ' & ', 33)}</div>}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"controlPanel\">\r\n\t\t\t\t<input type=\"range\" min=\"0\" ref={inputRef} step=\"1\" value={currentTime} onChange={(event)=>{changeCurrentTime(event)}} />\r\n\t\t\t\t<div className=\"startAndEndTime\">\r\n\t\t\t\t\t<span>{correctTimeDisplay(currentTime)}</span>\r\n\t\t\t\t\t<span>{correctTimeDisplay(songDuration)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<button className=\"shuffleBtn\" onClick={() => setShuffleMode(checkNumber(shuffleMode + 1, 1))} style={shuffleMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowShuffle style={shuffleMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={prevSong}><FaBackward /></button>\r\n\t\t\t\t\t<button onClick={playSong}>{play ? <FaPause /> : <FaPlay />}</button>\r\n\t\t\t\t\t<button onClick={nextSong}><FaForward /></button>\r\n\t\t\t\t\t<button className=\"repeatBtn\" onClick={() => setRepeatMode(checkNumber(repeatMode + 1, 2))} style={repeatMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowRepeat style={repeatMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t\t<span style={repeatMode === 2 ? { opacity: 1 } : {}}></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { BiMusic, BiSearch } from \"react-icons/bi\";\r\nimport { FiHome, FiMessageCircle } from \"react-icons/fi\";\r\nimport { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, SEARCH_ROUTE } from \"../utils/consts\";\r\n\r\nexport const leftSideBar = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<FiHome/>,\r\n\t\ttitle:'Home',\r\n\t\tlink:HOME_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiMusic/>,\r\n\t\ttitle:'Library',\r\n\t\tlink:LIBRARY_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<BiSearch/>,\r\n\t\ttitle:'Search',\r\n\t\tlink:SEARCH_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<FiMessageCircle/>,\r\n\t\ttitle:'Chat',\r\n\t\tlink:CHAT_ROUTE\r\n\t},\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const MobileControlBarItem = ({element, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<Link to = {element.link} className = 'MobileControlBarItem' onClick = {()=>setCurrentPage(element.id)} style = {element.id === currentPage?{color:'var(--blue)'}:{}}>\t\r\n\t\t\t{element.icon}\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../../styles/BottomControlBar.css'\r\nimport {leftSideBar} from '../../data/leftSideBar'\r\nimport { MobileControlBarItem } from '../BottomControlBar/MobileControlBarItem'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { BiUserCircle } from 'react-icons/bi'\r\nimport normalizeString from '../../functions/normalizeString'\r\nexport const BottomControlBar = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst userElement = {\r\n\t\ticon:<BiUserCircle/>,\r\n\t\tlink:`/authors/${currentUser.uid}`,\r\n\t}\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tconsole.log(window.location.hash)\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className = \"BottomControlBar\">\r\n\t\t\t{leftSideBar.map((el, i)=>{\r\n\t\t\t\treturn <MobileControlBarItem element = {el} key = {i} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t})}\r\n\t\t\t<MobileControlBarItem element = {userElement} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BottomControlBar } from './BottomControlBar'\r\n\r\nexport const FullBottomSide = () => {\r\n\tconst {setOpenFullScreenPlayer} = useSong()\r\n\treturn (\r\n\t\t<div className = \"FullBottomSide\">\r\n\t\t\t<span onClick = {()=>setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t<Player textLimit = {25} linkToAuthors = {false}/>\r\n\t\t\t</span>\r\n\t\t\t<BottomControlBar/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Loading = ({currentTime, timeSpan, id}) => {\r\n\treturn (\r\n\t\t<div className = \"Loading\" id = {id}>\r\n\t\t\t<div className=\"outer\" style = {{pointerEvents:'none'}}>\r\n\t\t\t\t<div className=\"inner\" style = {currentTime/timeSpan < 1?{width:(currentTime/timeSpan)*100 + \"%\"}:{width:0 + \"%\", opacity:'0'}}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Loading } from './Loading'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nexport const LyricsParagraph = ({ el, index, lyricsModeratorMode, karaokeModeratorTimes,  setKaraokeModeratorTimes, setInputKaraokeTime, inputKaraokeTime }) => {\r\n\tconst { currentSongData, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, lyrics} = useSong()\r\n\tconst paragraphRef = useRef()\r\n\tconst isVisible = useOnScreen(currentParagraph === index ? currentParagraphRef : paragraphRef)\r\n\tconst paragraphStyle = currentParagraph === index ?\r\n\t{} : window.innerWidth > 1000 ?\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-58px)' } : { transform: 'scale(.75) translateX(-78px)' } :\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-11.5%)' } : { transform: 'scale(.75) translateX(-15.6%)' }\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"lyricsBlock\" key={index} id={index} onClick={(e) => changeCurrentTime(e, el.startTime)} style={play ? currentParagraph === index || !isVisible ? {} : Math.abs(currentParagraph - index) < 2? { opacity: .5, filter: 'blur(1px)' } : { opacity: .2, filter: 'blur(2px)' } : {}} ref={currentParagraph === index ? currentParagraphRef : paragraphRef} >\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t<span onClick={e => e.stopPropagation()}>{karaokeModeratorTimes[index] !== undefined && karaokeModeratorTimes[index].length !== 0 ? <BiCheckCircle style={{ background: 'var(--themeColor3)', color: 'var(--themeColor)' }} /> : <FiXCircle />} </span>\r\n\t\t\t\t\t\t<input type=\"number\" value={karaokeModeratorTimes[index] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, index)} onClick={e => e.stopPropagation()} />\r\n\t\t\t\t\t\t<div className=\"addLyricsElementBtns\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'up') }}><BiUpArrow /></button>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'down') }}><BiDownArrow /></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tel.text === \"@loading\" ?\r\n\t\t\t\t\t<Loading currentTime={currentTime - lyrics[index].startTime} timeSpan={lyrics[index + 1].startTime - lyrics[index].startTime} id={index} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\tel.text === \"@end\" ? <></>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<p key={index} id={index} style={paragraphStyle}>{el.text}</p>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { Share } from '../components/FullScreenPlayer/Share';\r\nimport { Options } from '../components/FullScreenPlayer/Options';\r\nimport { Lyrics } from '../components/FullScreenPlayer/Lyrics';\r\nimport { Queue } from '../components/FullScreenPlayer/Queue';\r\nimport { BiDotsVerticalRounded, BiShare } from 'react-icons/bi';\r\nimport {RiPlayListFill} from 'react-icons/ri'\r\nimport {FiAlignLeft} from 'react-icons/fi'\r\nimport { TiDocumentText } from 'react-icons/ti';\r\nimport { AuthorsList } from '../components/FullScreenPlayer/AuthorsList';\r\nimport { SongInfo } from '../components/Basic/SongInfo';\r\nimport { AddToPlaylists } from '../components/FullScreenPlayer/AddToPlaylists';\r\nexport const rightSide = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<BiShare/>,\r\n\t\ttitle:'Share',\r\n\t\tcomponent:Share\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiDotsVerticalRounded/>,\r\n\t\ttitle:'More',\r\n\t\tcomponent:Options\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<TiDocumentText/>,\r\n\t\ttitle:'Lyrics',\r\n\t\tcomponent:Lyrics\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<RiPlayListFill/>,\r\n\t\ttitle:'Queue',\r\n\t\tcomponent:Queue\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\ticon:null,\r\n\t\ttitle:'Go To Authors',\r\n\t\tcomponent:AuthorsList\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\ticon:null,\r\n\t\ttitle:'Add to playlist',\r\n\t\tcomponent:AddToPlaylists\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\ticon:null,\r\n\t\ttitle:'Info',\r\n\t\tcomponent:SongInfo\r\n\t},\r\n]","import React from 'react'\r\nimport { FaFacebookF, FaTelegramPlane, FaVk } from 'react-icons/fa'\r\nimport { FiCopy } from 'react-icons/fi'\r\nimport { AiFillInstagram } from 'react-icons/ai'\r\nimport { ImWhatsapp } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nexport const Share = () => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst socialMedia = [\r\n\t\t<ImWhatsapp />,\r\n\t\t<FaFacebookF />,\r\n\t\t<FaTelegramPlane />,\r\n\t\t<FaVk />,\r\n\t\t<AiFillInstagram />\r\n\t]\r\n\treturn (\r\n\t\t<div className=\"Share\">\r\n\t\t\t<button className=\"shareCopyLink\">\r\n\t\t\t\t<FiCopy />\r\n\t\t\t\tCopy link\r\n\t\t\t</button>\r\n\t\t\t<div className=\"shareOnSocial\">\r\n\t\t\t\t{socialMedia.map((social, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"shareSocialIcon\" key={index}>\r\n\t\t\t\t\t\t\t{social}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sharePeopleShort\">\r\n\t\t\t\t<FriendsListToShareWith item = {currentSongData} whatToShare = {'song'}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {MdPlaylistAdd} from 'react-icons/md'\r\nimport { BiAlbum, BiHeart, BiInfoCircle, BiPlusCircle, BiUserCircle } from \"react-icons/bi\";\r\nimport {FiTrash2, FiPlusCircle, FiInfo} from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton';\r\nexport const Options = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {currentSongData, setRightSideCurrentPage} = useSong()\r\n\treturn (\r\n\t\t<div className='Options'>\r\n\t\t\t<div className='OptionItem' >\r\n\t\t\t\t<AddOrDeleteButtonFull song = {currentSongData}/>\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(4)}>\r\n\t\t\t\t<BiUserCircle />\r\n\t\t\t\tGo to author\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(5)}>\r\n\t\t\t\t<MdPlaylistAdd />\r\n\t\t\t\tAdd to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(6)}>\r\n\t\t\t\t<FiInfo/>\r\n\t\t\t\tInfo\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { Slider } from '../Tools/Slider'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { LyricsParagraph } from './LyricsParagraph'\r\nexport const Lyrics = () => {\r\n\tconst { setIsThereKaraoke, currentSongData, setCurrentSongData, isThereKaraoke, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, currentSong, lyrics, rightSideCurrentPage, openFullScreenPlayer, openMenu } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [inputKaraokeTime, setInputKaraokeTime] = useState(0)\r\n\tconst [karaokeModeratorTimes, setKaraokeModeratorTimes] = useState([])\r\n\tconst [lyricsModeratorMode, setLyricsModeratorMode] = useState(0)\r\n\tconst [canUpdateLyrics, setCanUpdateLyrics] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (isThereKaraoke && (openMenu && rightSideCurrentPage === 2) && openFullScreenPlayer) currentParagraphRef.current.scrollIntoView()\r\n\t}, [currentParagraph])\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\t// console.log(karaokeModeratorTimes)\r\n\r\n\tuseEffect(() => {\r\n\t\tif(lyrics[0] && lyrics[0].startTime !== 'undefined'){\r\n\t\t\tlyrics.forEach(paragraph => {\r\n\t\t\t\tkaraokeModeratorTimes.push(paragraph.startTime)\r\n\t\t\t});\r\n\t\t\tsetCanUpdateLyrics(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet tempSongData = currentSongData\r\n\t\t// console.log(tempSongData)\r\n\t\tif (tempSongData !== undefined && inputKaraokeTime !== 0) {\r\n\t\t\ttempSongData.lyrics.forEach((paragraph, index) => {\r\n\t\t\t\tparagraph.startTime = karaokeModeratorTimes[index] || 'undefined'\r\n\t\t\t})\r\n\t\t\tsetCurrentSongData(tempSongData)\r\n\t\t\tsetIsThereKaraoke(true)\r\n\t\t}\r\n\r\n\t\tif(!currentSongData.lyrics.some(paragraph=>paragraph.startTime === 'undefined')) setCanUpdateLyrics(true)\r\n\t\telse setCanUpdateLyrics(false)\r\n\t}, [inputKaraokeTime])\r\n\tfunction updateLyrics() {\r\n\t\t//TODO: add if statement to prevent adding lyrics time spans to not everysingle paragraph block\r\n\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\tlyrics: currentSongData.lyrics\r\n\t\t})\r\n\t}\r\n\r\n\t// console.log(currentSongData)\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Lyrics\">\r\n\t\t\t{\r\n\t\t\t\tcurrentUser.isAdmin ?\r\n\t\t\t\t\t<Slider pages={['Listen mode', 'Edit Mode']} currentPage={lyricsModeratorMode} setCurrentPage={setLyricsModeratorMode} /> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tisThereKaraoke ?\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LyricsParagraph el = {el} index = {i} lyricsModeratorMode = {lyricsModeratorMode} karaokeModeratorTimes = {karaokeModeratorTimes} setKaraokeModeratorTimes = {setKaraokeModeratorTimes} setInputKaraokeTime = {setInputKaraokeTime} inputKaraokeTime = {inputKaraoke}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} \r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'up')}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'down')}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<p>{el.text}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<h6 className={\"lyricsAuthors \" + (currentParagraph === lyrics.length - 1 ? \"active\" : \"\")}>Authors:  {displayAuthors()}</h6>\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<button onClick={canUpdateLyrics?updateLyrics:null} className=\"updateLyricsBtn\" style = {!canUpdateLyrics?{opacity:0.3}:{}}>Update Lyrics</button> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { SongItem } from './SongItem'\r\n\r\nexport const Queue = () => {\r\n\tconst { currentSongQueue, currentSongPlaylistSource, setOpenFullScreenPlayer } = useSong()\r\n\treturn (\r\n\t\t<div className=\"Queue\">\r\n\t\t\t<div className=\"queueNowIsPlaying\">\r\n\t\t\t\t<h5 style={{ marginTop: 2 }}>\r\n\t\t\t\t\tNow is playing:\r\n\t\t\t\t\t<Link onClick={() => setOpenFullScreenPlayer(false)} to={currentSongPlaylistSource.source} className=\"queueAlbumName\">\r\n\t\t\t\t\t\t<div className=\"queueImage\">\r\n\t\t\t\t\t\t\t<img src={currentSongPlaylistSource.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>{shortWord(currentSongPlaylistSource.name, 25)}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t\t{currentSongQueue.map((song, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SongItem song={song} localIndex={index} key={index} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../../App.css';\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { BiChevronLeft } from 'react-icons/bi'\r\nimport { rightSide } from '../../data/playerRightSide'\r\nimport { Player } from '../FullScreenPlayer/Player';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport {useSwipeable} from 'react-swipeable'\r\nimport checkNumber from '../../functions/checkNumber';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\nimport { useScreen } from '../../contexts/ScreenContext';\r\n\r\nexport default function FullScreenPlayer() {\r\n  const {\r\n    imgColors,\r\n    inputRef,\r\n    rightSideCurrentPage,\r\n    setRightSideCurrentPage,\r\n    openFullScreenPlayer,\r\n    setOpenFullScreenPlayer,\r\n    lyrics,\r\n    openMenu,\r\n    setOpenMenu\r\n  } = useSong()\r\n  const {isMobile, screenHeight} = useScreen()\r\n  const lyricsRef = useRef(null)\r\n  const [transformTransition, setTransformTransition] = useState(0.05)\r\n  const [mobileMenuTransition, setMobileMenuTransition] = useState(0)\r\n  // const [swipeDown, setSwipeDown] = useState(false)\r\n  const [deltaY, setDeltaY] = useState(0)\r\n  const [deltaYMobileMenu, setDeltaYMobileMenu] = useState(0)\r\n  const mobileContentScroll = useRef()\r\n  // setup ref for your usage\r\n  const mobileMenuRef = React.useRef();\r\n  useOutsideClick(mobileMenuRef, setOpenMenu)\r\n  const handlers = useSwipeable({\r\n    // onSwiped: (eventData) => {setSwipeDown(eventData.dir === 'Down')},\r\n    onSwiping: (event) => { if (event.deltaY > 0) setDeltaY(event.deltaY); }\r\n  })\r\n\r\n  // setup ref for your usage\r\n  const bgRef = React.useRef();\r\n\r\n  const handlersForMobileMenu = useSwipeable({\r\n    onSwiping: (event) => {event.event.stopPropagation();if (openMenu && mobileContentScroll.current.scrollTop === 0 &&  event.deltaY > 0) setDeltaYMobileMenu(event.deltaY); else if (!openMenu && event.deltaY < 0) setDeltaYMobileMenu(event.deltaY) },\r\n    onSwipedLeft:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage+1, 3))},\r\n    onSwipedRight:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage-1, 3))}\r\n  })\r\n  \r\n\r\n  function returnToInitialMobileMenu() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setMobileMenuTransition(0)\r\n    dropDelta = setTimeout(() => {\r\n      setMobileMenuTransition(0.2)\r\n      setDeltaYMobileMenu(0)\r\n    }, 300)\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    if (deltaY > 150) {\r\n      setOpenFullScreenPlayer(false)\r\n    }\r\n  }, [deltaY])\r\n\r\n  useEffect(() => {\r\n    if (!openMenu && deltaYMobileMenu < -100) {\r\n      setOpenMenu(true)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else if (openMenu && deltaYMobileMenu > 150) {\r\n      setOpenMenu(false)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else {\r\n      returnToInitialMobileMenu()\r\n    }\r\n  }, [deltaYMobileMenu])\r\n\r\n  \r\n\r\n  function returnToInitial() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setTransformTransition(0.2)\r\n    dropDelta = setTimeout(() => {\r\n      setDeltaY(0)\r\n      setTransformTransition(0)\r\n    }, 100)\r\n  }\r\n\r\n  const refPassthroughBg = (el) => {\r\n    handlers.ref(el);\r\n    bgRef.current = el;\r\n  }\r\n\r\n  const refPassthroughMobileMenu = (el) => {\r\n    handlersForMobileMenu.ref(el);\r\n    mobileMenuRef.current = el;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (imgColors.length !== 0) {\r\n      document.documentElement.style.setProperty('--themeColor', imgColors[1]);\r\n      document.documentElement.style.setProperty('--themeColor2', imgColors[0]);\r\n      document.documentElement.style.setProperty('--themeColor3', imgColors[2]);\r\n      document.documentElement.style.setProperty('--themeColor4', imgColors[5]);\r\n      document.documentElement.style.setProperty('--themeColorTransparent', imgColors[0] + '6e');\r\n    }\r\n  }, [imgColors])\r\n\r\n\r\n  function rightSideContent(currentPage) {\r\n    let RightSidePage = rightSide[currentPage].component\r\n    return (<RightSidePage />)\r\n  }\r\n\r\n  function noLyrics() {\r\n    return lyrics && lyrics.length === 0\r\n  }\r\n\r\n  function changeRightSidePage(el) {\r\n    if (el.id === 2 && noLyrics()) return null\r\n    setMobileMenuTransition(0.2)\r\n    setRightSideCurrentPage(el.id);\r\n    setOpenMenu(true)\r\n  }\r\n  return (\r\n    <div className=\"bg\"\r\n      style={\r\n        openFullScreenPlayer ?\r\n          {\r\n            height:screenHeight + \"px\",\r\n            top: 0,\r\n            opacity: 1,\r\n            visibility: 'visible',\r\n            zIndex: 10,\r\n            transform: `translateY(${deltaY}px)`,\r\n            borderRadius: `${deltaY < 20 ? deltaY : 20}px ${deltaY < 20 ? deltaY : 20}px 0 0`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          } :\r\n          {\r\n            transform: `translateY(${deltaY}px)`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          }\r\n      }\r\n      ref={refPassthroughBg}\r\n      {...handlers}\r\n      onTouchEnd={returnToInitial}\r\n    >\r\n\r\n      <div className=\"auroraWrapper\">\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n      </div>\r\n      \r\n      <div className=\"closeFullScreen\" onClick={() => { setOpenFullScreenPlayer(false) }}>\r\n        {window.innerWidth > 1000 ? <HiChevronDown /> : <FiMinus style={{ opacity: .6 }} />}\r\n      </div>\r\n      <div className=\"FullScreenPlayer\" >\r\n        <div className=\"leftSide\" style={!openMenu ? { width: '100%' } : isMobile?{\r\n            opacity: 0.6,\r\n            visibility: 'visible',\r\n            transform: `translateY(20px)`,\r\n            borderRadius: `10px`,\r\n            transition: `.4s`}:null}>\r\n          <Player inputRef={inputRef} />\r\n        </div>\r\n        {window.innerWidth > 1000 ?\r\n          <div className=\"rightSideWrapper\" style={!openMenu ? { transform: 'translateX(calc(100% - 90px))', width: 0 } : {}}>\r\n            <button className=\"menuBtn\" style={openMenu ? { transform: 'rotate(180deg)' } : { opacity: 0, visibility: 'hidden' }} onClick={() => setOpenMenu(!openMenu)}><BiChevronLeft /></button>\r\n            <div className=\"rightSideControl\">\r\n              {rightSide.map((el, i) => {\r\n                return (\r\n                  <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--themeColor)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={() => changeRightSidePage(el)}>\r\n                    {el.icon}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"rightSide\" ref={lyricsRef} style={!openMenu ? { display: 'none' } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div> :\r\n          <div className=\"mobilePlayerMenu\" {...handlersForMobileMenu} ref={refPassthroughMobileMenu} style={\r\n            openMenu ?\r\n              {\r\n                top: `calc(100% - calc(70vh + 55px) + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n\r\n              } :\r\n              {\r\n                top: `calc(100% - 55px + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n              }\r\n\r\n          }\r\n          // onTouchStart = {returnToInitialMobileMenu}\r\n          >\r\n            <div className=\"mobilePlayerMenuClose\">\r\n              <FiMinus style={{ opacity: .6, width: '50px' }} onClick={() => setOpenMenu(!openMenu)} />\r\n            </div>\r\n            <div className=\"controlIconsWrapper\">\r\n              {rightSide.map((el, i) => {\r\n                if(i <= 3){\r\n                  return (\r\n                    <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--transparentWhite)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={(e) => changeRightSidePage(el)}>\r\n                      {el.title}\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n            <div className=\"mobilePlayerMenuContent\" ref = {mobileContentScroll} style = {!openMenu?{opacity:0}:{}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NavigationItem({id, title, icon, link, currentPage, setCurrentPage}) {\r\n\treturn (\r\n\t\t<Link to = {link}>\r\n\t\t\t<div className={\"NavigationItem \" + (id === currentPage?\"active\":\"\")} onClick={() => setCurrentPage(id)}>\r\n\t\t\t\t<div className=\"icon\">{icon}</div>\r\n\t\t\t\t<b>{title}</b>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FiMessageCircle, FiUser } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport { findChatURL } from '../../functions/findChatURL'\r\nimport getUID from '../../functions/getUID'\r\nimport shareWithOneFriend from '../../functions/shareWithOneFriend'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\n\r\nexport const Person = ({ index, friend }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([friend.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [])\r\n\tconst { currentSong } = useSong()\r\n\treturn (\r\n\t\t<div className=\"person\" key={index} id={friend.uid} >\r\n\t\t\t<div className=\"personBtns\">\r\n\t\t\t\t<Link to={`/chat/${friendChatId}`}>\r\n\t\t\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, friend.uid], friendChatId) }}>\r\n\t\t\t\t\t\t<Hint text={'chat'} />\r\n\t\t\t\t\t\t<FiMessageCircle />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={`/authors/${friend.uid}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'profile'} />\r\n\t\t\t\t\t\t<FiUser />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={(e) => shareWithOneFriend(e, currentSong)}>\r\n\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t<BiShare />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pesronImg\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t<img src={friend.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<IsUserOnlineCircle userUID={friend.uid} />\r\n\t\t\t<div className=\"personName\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t{friend.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import createRandomId from \"./createRandomId\"\r\n\r\nfunction createChat(id, songId, albumId = null, authorId = null) {\r\n\tconst randId = createRandomId()\r\n\t// chat[randId] =\r\n\t// {\r\n\t// \tid: randId,\r\n\t// \tparticipants: [30, parseInt(id)],\r\n\t// \timage: '',\r\n\t// \tmessages: [\r\n\t// \t\t{\r\n\t// \t\t\tid: 0,\r\n\t// \t\t\tsender: 30,\r\n\t// \t\t\tmessage: '',\r\n\t// \t\t\tsentTime: new Date(),\r\n\t// \t\t\tinResponseToMessage: null,\r\n\t// \t\t\tattachedSongs: [songId],\r\n\t// \t\t\tattachedAlbums: albumId !== null? [albumId]:[],\r\n\t// \t\t\tattachedAuthors: authorId !== null? [authorId]:[],\r\n\t// \t\t}\r\n\t// \t]\r\n\t// }\r\n}\r\n\r\nexport default function shareWithOneFriend(e, songId, albumId = null, authorId = null) {\r\n\tconsole.log(\"id:\",e.target.id, \"songId:\", songId)\r\n\t// let isThereChat = false\r\n\t// Object.keys(chat).forEach((chatId) => {\r\n\t// \tif (chat[chatId].participants.includes(parseInt(e.target.id)) && chat[chatId].participants.includes(30)) {\r\n\t// \t\tisThereChat = true\r\n\t// \t\tchat[chatId].messages.push(\r\n\t// \t\t\t{\r\n\t// \t\t\t\tid: chat[chatId].messages.length,\r\n\t// \t\t\t\tsender: 30,\r\n\t// \t\t\t\tmessage: '',\r\n\t// \t\t\t\tsentTime: new Date(),\r\n\t// \t\t\t\tinResponseToMessage: null,\r\n\t// \t\t\t\tattachedSongs: [songId],\r\n\t// \t\t\t\tattachedAlbums: albumId !== null? [albumId]:[],\r\n\t// \t\t\t\tattachedAuthors: authorId !== null? [authorId]:[],\r\n\t// \t\t\t}\r\n\t// \t\t)\r\n\t// \t}\r\n\t// })\r\n\r\n\t// if (!isThereChat) createChat(e.target.id, songId, albumId, authorId)\r\n}","import React from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiPlayCircle, FiPlusCircle, FiShare } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const TinyPlaylist = ({playlist}) => {\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"TinyPlaylist\">\r\n\t\t\t<div className=\"TinyPlaylistBtns\">\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<Hint text={'add song'} />\r\n\t\t\t\t\t<FiPlusCircle/>\r\n\t\t\t\t</button>\r\n\t\t\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'album'} /><BiAlbum />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<Hint text={'play'} />\r\n\t\t\t\t\t<FiPlayCircle/>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"TinyPlaylistImg\">\r\n\t\t\t\t<img src={playlist.image} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div style = {{display:'flex', flexDirection:'column'}}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{shortWord(playlist.name, 13) }\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style = {{fontSize:'0.8em', color:'grey', fontWeight:'500'}}>\r\n\t\t\t\t\t{playlist.isAlbum?\"album\":\"playlist\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const NotificationCircle = () => {\r\n\treturn (\r\n\t\t<div className = \"NotificationCircle\"></div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { leftSideBar } from '../../data/leftSideBar'\r\nimport NavigationItem from '../LeftsideBar/NavigationItem'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nimport '../../styles/LeftsideBar.css'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BiFolderPlus, BiFullscreen} from 'react-icons/bi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { Person } from '../LeftsideBar/Person'\r\nimport { CreatePlaylistPage } from '../LibraryPage/CreatePlaylistPage'\r\nimport { TinyPlaylist } from '../LeftsideBar/TinyPlaylist'\r\nimport { NotificationCircle } from './NotificationCircle'\r\nexport const LeftsideBar = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {\r\n\t\tleftSideBarInputRef,\r\n\t\tsetOpenFullScreenPlayer,\r\n\t\tcurrentSongData,\r\n\t\tyourFriends,\r\n\t\tyourPlaylists\r\n\t} = useSong()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [currentFriendToPlaylistPage, setCurrentFriendToPlaylistPage] = useState(0)\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\treturn (\r\n\t\t<div className=\"LeftsideBar\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t\t\t<h3>Soundbubble</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\" onClick = {()=>setCurrentPage(-1)} >\r\n\t\t\t\t<Link to={`/authors/${currentUser.uid}`}>\r\n\t\t\t\t\t<div className=\"person\" style = {currentPage === -1?{background:'var(--blue)'}:{}}>\r\n\t\t\t\t\t\t{currentUser.friends.some(friend=>friend.status === 'requested')?<NotificationCircle/>:null}\r\n\t\t\t\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t\t\t\t<img src={currentUser.photoURL} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"personName\">\r\n\t\t\t\t\t\t\t{currentUser.displayName}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"NavigationPanel\">\r\n\t\t\t\t{leftSideBar.map(({ id, title, icon, link }, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavigationItem key={index} id={id} title={title} icon={icon} link={link} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer friendsAndPlaylists\">\r\n\t\t\t\t<span style={{display: !currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromBottom .2s forwards' }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tyourFriends.length > 0?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t{yourFriends.map((friend, index) => {\r\n\t\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Person index={friend.uid} friend={friend}/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<h4 className=\"seeMoreBtn\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={currentSongData} whatToShare = {\"song\"}/>) }}>See more</h4>\r\n\t\t\t\t\t\t</>:\r\n\t\t\t\t\t\t<h4 style = {{alignSelf:'center',width:'100%', display:'flex', alignItems:'center', justifyContent:'center'}}>No friends added</h4>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{display: currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromTop .2s forwards' }}>\r\n\t\t\t\t\t{yourPlaylists.map((playlist, index) => {\r\n\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\treturn <TinyPlaylist playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }} style = {{margin:'5px 0'}}>\r\n\t\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\t\tCreate Playlist\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"upAndDownBtns\">\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(0)} style={!currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronUp /></button>\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(1)} style={currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronDown /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t{\r\n\t\t\t\t\t(currentSongData.id === -1)?\r\n\t\t\t\t\tnull:<div className=\"littlePlayer\">\r\n\t\t\t\t\t\t<Player textLimit={15} inputRef={leftSideBarInputRef} />\r\n\t\t\t\t\t\t<div className=\"fullScreenBtn\" onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t\t\t\t<BiFullscreen />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\n\r\nexport const ConfirmWindow = () => {\r\n\tconst { isOpenConfirm, confirmContent, setIsOpenConfirm, closeComfirm } = useModal()\r\n\tconst confirmRef = useRef(null)\r\n\tuseOutsideClick(confirmRef, setIsOpenConfirm)\r\n\treturn (\r\n\t\t<div className=\"modal_darkBg confirm\" style={!isOpenConfirm ? { opacity: 0, visibility: 'hidden' } : {}} >\r\n\t\t\t<div className=\"ConfirmWindow\" ref = {confirmRef} style={!isOpenConfirm ? { transform: 'translateY(40px)' } : {}}>\r\n\t\t\t\t<h3>{confirmContent.question}</h3>\r\n\t\t\t\t<div className=\"confirmButtons\">\r\n\t\t\t\t\t<button onClick={confirmContent.onConfirm} className = \"standartButton\">{confirmContent.confirmText}</button>\r\n\t\t\t\t\t<button onClick={confirmContent.onReject} className = \"standartButton\">{confirmContent.rejectText}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { ContentRouter } from '../../routers/ContentRouter'\r\nimport { FullBottomSide } from '../Mobile/FullBottomSide'\r\nimport FullScreenPlayer from './FullScreenPlayer'\r\nimport { LeftsideBar } from './LeftsideBar'\r\nimport { ModalWindow } from './ModalWindow'\r\nimport '../../styles/FullScreenPlayer.css'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { ConfirmWindow } from '../Windows/ConfirmWindow'\r\n\r\nexport const ContentWrapper = () => {\r\n\tconst { songRef, loadSongData, playing, songSrc, openFullScreenPlayer, repeatMode, setPlay, prevSong, currentSongQueue, nextSong, updateListenCount, currentSongInQueue} = useSong()\r\n\tconst { isMobile, screenHeight } = useScreen()\r\n\tconst { currentUser, setCurrentUser  } = useAuth()\r\n\tconst fiveMinutes = 300000 // ten minutes, or whatever makes sense for your app\r\n\tconst [intervalExciter, setIntervalExciter] = useState(true)\r\n\t// \"maintain connection\"\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t\t\tsetIntervalExciter(!intervalExciter)\r\n\t\t}, fiveMinutes)\r\n\t\treturn () => clearInterval(interval);\r\n\t}, [intervalExciter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t}, [])\r\n\r\n\tfunction audioEnded() {\r\n\t\tconsole.log(\"i workdfasd\")\r\n\t\tif (repeatMode === 0) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t\tsetPlay(false)\r\n\t\t\treturn prevSong()\r\n\t\t}\r\n\t\telse if (repeatMode === 1) {\r\n\t\t\tif (currentSongQueue.length === 1) {\r\n\t\t\t\tprevSong()\r\n\t\t\t\tupdateListenCount()\r\n\t\t\t\treturn songRef.current.play()\r\n\t\t\t}\r\n\t\t\treturn nextSong()\r\n\t\t}\r\n\t\tprevSong()\r\n\t\tupdateListenCount()\r\n\t\tsongRef.current.play()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<audio src={songSrc} ref={songRef} onLoadedData={loadSongData} onTimeUpdate={playing} onEnded={audioEnded}></audio>\r\n\t\t\t<div className={\"Wrapper \" + (openFullScreenPlayer ? \"turnedOff\" : \"\")} style={isMobile ? { height: screenHeight } : { height: \"100vh\" }}>\r\n\t\t\t\t{!isMobile ? <LeftsideBar /> : window.location.hash.substr(2, 4) === 'chat' && window.location.hash.length > 6 ? null : <FullBottomSide />}\r\n\t\t\t\t<div className=\"Content\">\r\n\t\t\t\t\t<ContentRouter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalWindow />\r\n\t\t\t\t<ConfirmWindow/>\r\n\t\t\t</div>\r\n\t\t\t<FullScreenPlayer />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { ContentWrapper } from '../components/Basic/ContentWrapper'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { publicRoutes } from '../routes'\r\nimport { LOGIN_ROUTE} from '../utils/consts'\r\nexport const AppRouter = () => {\r\n\tconst {currentUser} = useAuth()\r\n\treturn currentUser.uid ?\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t<Route path='/' component = {ContentWrapper} />\r\n\t\t</Switch>\r\n\t):\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t{publicRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={LOGIN_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","import './App.css';\r\nimport React from 'react'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { AppRouter } from './routers/AppRouter';\r\nexport default function App() {\r\n  \r\n\r\n  return (\r\n    <HashRouter basename = \"/\">\r\n      <AppRouter/>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { ModalClassProvider } from './contexts/ModalContext';\r\nimport { ScreenProvider } from './contexts/ScreenContext';\r\nimport { SongProvider } from './contexts/SongContext';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ScreenProvider>\r\n      <AuthProvider>\r\n        <SongProvider>\r\n          <ModalClassProvider>\r\n            <App />\r\n          </ModalClassProvider>\r\n        </SongProvider>\r\n      </AuthProvider>\r\n    </ScreenProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}