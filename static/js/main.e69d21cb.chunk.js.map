{"version":3,"sources":["images/Logo3.svg","components/Basic/LoadingData.js","components/Basic/AddToListCircle.jsx","components/Basic/PersonTiny.js","images/Cadillac.jpg","images/Shape-of-you.jpg","images/da-da-da.jpg","images/ayo.jpg","images/movie.jpg","images/coming-home.jpg","images/boulevard-of-broken-dreams.png","images/Гипноз.jpg","images/hitmyphone.jpg","images/Clout-cobain.png","images/Mood.jpg","images/Ты_горишь_как_огонь.jpg","images/лбтд.jpg","images/On-my-own.png","images/Buster-Keaton.jpeg","images/loyal.png","images/freaky-friday.jpg","images/Dont-check-on-me.jpg","images/changes.jpg","images/im-the-one.jpg","images/authors/justin-bieber.png","images/Rich-love.jpg","images/No-vacancy.jpg","images/Main-chick.jpg","images/revolver.jpg","images/Yamakasi.jpeg","images/roxanne.png","images/I-can-fucking-tell.png","images/Leck.jpg","images/tasm2Ost.jpg","images/Earth.png","images/Новая-волна.jpg","images/Can-we-kiss-forever.jpg","images/Drinking-problem.jpeg","images/Drunk-in-love.jpg","music/Da da da.mp3","music/Shape of You.mp3","music/Cadillac.mp3","music/Ayo.mp3","music/Movie.mp3","music/Coming Home.mp3","music/Boulevard of broken dreams.mp3","music/Гипноз.mp3","music/Hit My Phone.mp3","music/CLOUT COBAIN  CLOUT CO13A1N.mp3","music/Mood.mp3","music/ТЫ ГОРИШЬ КАК ОГОНЬ.mp3","music/лбтд.mp3","music/On My Own.mp3","music/Angel.mp3","music/Loyal.mp3","music/Freaky Friday.mp3","music/Don't check on me.mp3","music/Intentions.mp3","music/I'm the one.mp3","music/Yummy.mp3","music/Hold On.mp3","music/Rich Love.mp3","music/No Vacancy.mp3","music/Main Chick.mp3","music/Best Love Song.mp3","music/Tantra.mp3","music/Drunk In Love.mp3","music/Roxanne.mp3","music/Drinking Problem.mp3","music/I Can Fvcking Tell.mp3","music/Can we kiss forever.mp3","music/Leck.mp3","music/Need Somebody.mp3","music/I Chose You.mp3","music/I'm Moving To England.mp3","music/Earth.mp3","firebase.js","functions/checkNumber.js","functionality/AuthContext.js","functionality/SongPlay/SongContext.js","functions/shuffleSongs.js","functions/displayDate.js","components/Basic/BackBtn.js","images/authors/Denzel-Curry.jpg","images/authors/Morgenshtern.jpg","images/authors/Tyomcha.jpg","images/authors/yvng-swag.jpg","images/authors/chris-brown.jpg","images/authors/tyga.jpg","images/authors/diddy.jpg","images/authors/greenday.jpg","images/authors/johny-koch.jpg","images/authors/andro.jpg","images/authors/qontrast.jpg","images/authors/jaden.jpg","images/authors/kid-cudi.png","images/authors/dirty-money.jpg","images/authors/OneRepublic.jpg","images/authors/t-pain.jpg","images/authors/Kid-ink.jpg","images/authors/Chance-the-rapper.jpg","images/authors/Bob.jpg","images/authors/Lil-dicky.png","images/authors/Arizona-zervas.jpg","images/authors/Andy-panda.jpg","images/authors/Adriana-proenza.jpg","data/authors.js","images/authors/bluelake.jpg","images/authors/quavo.jpg","images/authors/Fetty-wap.png","components/AuthorPage/SmallImages.js","functions/rightFormatForBigNumber.js","functionality/ModalClass.js","hooks/useOutsideClick.js","functions/getUID.js","functions/createChat.js","functions/findChatURL.js","components/AuthorPage/ChatWithFriendButton.js","components/Basic/LoadingCircle.js","functions/sendMessage.js","components/Basic/SearchBar.js","components/Basic/FriendsListToShareWith.js","functions/shareWithManyFriends.js","components/SignIn-Up/RadioBtn.js","components/FullScreenPlayer/colorCircles.js","data/friends.js","data/chat.js","functions/createRandomId.js","functions/shareWithOneFriend.js","components/Basic/SongItemChoice.js","functions/addSongToLibrary.js","functions/filterArrayWithArray.js","functions/deleteSongFromLibrary.js","components/FullScreenPlayer/AddOrDeleteSongButton.jsx","components/AuthorPage/PersonTinyVerticalItem.js","components/AuthorPage/PersonTinyList.js","components/Basic/SongInfo.js","functions/shortWord.js","functions/addOrDeleteSongToPlaylist.js","components/FullScreenPlayer/AddToPlaylists.jsx","components/FullScreenPlayer/SongItem.js","components/Basic/MoreBtn.js","components/Basic/TitleWithMoreBtn.js","components/Basic/SongList.js","components/AlbumPage/CustomizeAlbum.js","functions/addAuthorToLibrary.js","functions/addFriend.js","components/Basic/LastSeen.jsx","components/AuthorPage/Header.js","pages/AlbumPage.js","components/AddWindow/AddPlaylist.js","components/Basic/DownloadPhotoButton.jsx","components/Basic/ErrorPlate.jsx","components/AddWindow/AddSong.js","components/Tools/Slider.js","components/AuthorPage/AddWindow.js","components/AuthorPage/FriendRequestItem.js","components/AuthorPage/FriendRequest.js","functions/findAuthorsAlbums.js","functions/normalizeString.js","components/AuthorPage/PlaylistItem.js","components/Basic/AlbumList.js","components/AuthorPage/Playlists.js","functions/findSimilarArtists.js","components/AuthorPage/AuthorItemBig.js","components/Basic/AuthorsList.js","components/AuthorPage/SimilarArtists.js","functions/findIfSongIsNew.js","components/AuthorPage/TopSongs.js","pages/AuthorPage.js","components/ChatPage/AttachmentList.jsx","hooks/fetchFirebaseData.js","components/ChatPage/ChatInfo.jsx","hooks/useFetchDocs.js","components/ChatPage/WallpaperItem.jsx","components/ChatPage/Wallpapers.jsx","components/ChatPage/ChatMoreBtn.js","components/ChatPage/ChatHeader.js","functions/findWhatToWriteInResponseItem.js","components/ChatPage/SeenByCircle.jsx","components/ChatPage/MessageItem.js","hooks/useOnScreen.js","components/ChatPage/MessageField.jsx","components/ChatPage/DisplayChatMessages.jsx","components/ChatPage/AttachedItemsInChatInput.jsx","components/AuthorPage/ChatInput.js","components/ChatPage/DateOnTop.jsx","components/ChatPage/TypingAnimation.jsx","pages/DialoguePage.js","utils/consts.js","components/SignIn-Up/BlurredBg.js","components/SignIn-Up/TitleAndLogo.js","components/HomePage/MainBanner.js","components/HomePage/RecentSongs.js","components/HomePage/RecommendedAuthors.js","components/HomePage/RecommendedSongs.js","images/wave2.svg","components/LibraryPage/LibraryPlaylistItem.js","components/LibraryPage/SongsPage.js","components/LibraryPage/CreatePlaylistPage.js","components/LibraryPage/PlaylistsPage.js","components/LibraryPage/AuthorsPage.js","components/Basic/IsUserOnlineCircle.jsx","components/ChatPage/AmountOfUnseenMessages.jsx","components/ChatPage/LastSentMessage.js","components/ChatPage/ChatItem.js","functions/findAmountOfUnseenMessages.js","components/Basic/ModalWindow.js","components/ChatPage/CreateChat.jsx","routes.js","pages/LogInPage.js","pages/SignUpPage.js","pages/Home.js","pages/LibraryPage.js","pages/SearchPage.js","pages/ChatPage.js","routers/ContentRouter.js","functions/correctTimeDisplay.js","components/FullScreenPlayer/Player.js","data/leftSideBar.js","components/BottomControlBar/MobileControlBarItem.js","components/Mobile/BottomControlBar.js","components/Mobile/FullBottomSide.js","components/FullScreenPlayer/Loading.js","data/playerRightSide.js","components/FullScreenPlayer/Share.js","components/FullScreenPlayer/Options.js","components/FullScreenPlayer/Lyrics.js","components/FullScreenPlayer/Queue.js","components/FullScreenPlayer/AuthorsList.jsx","components/Basic/FullScreenPlayer.js","components/LeftsideBar/NavigationItem.js","components/LeftsideBar/Person.js","components/LeftsideBar/TinyPlaylist.js","components/Basic/NotificationCircle.js","components/Basic/LeftsideBar.js","components/Basic/ContentWrapper.js","routers/AppRouter.js","App.js","index.js"],"names":["LoadingData","className","src","Logo","alt","AddToListCircle","listOfChosenItems","setListOfChosenItems","itemId","undefined","onClick","e","preventDefault","includes","type","filteredList","filter","el","style","color","prev","PersonTiny","data","chosenArray","setChosenArray","restProps","uid","photoURL","displayName","_","console","log","process","app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","storage","firestore","checkNumber","number","max","min","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","a","user","collection","doc","get","then","snapshot","fullUserInfo","value","login","email","password","signInWithEmailAndPassword","signup","name","role","imageColors","createUserWithEmailAndPassword","result","set","isAuthor","parseInt","isVerified","numberOfListenersPerMonth","ownSongs","ownPlaylists","addedSongs","addedPlaylists","addedAuthors","lastSongPlayed","lastQueue","chats","friends","subscribers","regDate","FieldValue","serverTimestamp","logout","signOut","Provider","SongContext","useSong","SongProvider","yourSongs","setYourSongs","yourPlaylists","setYourPlaylists","yourAuthors","setYourAuthors","yourFriends","setYourFriends","currentSongQueue","setCurrentSongQueue","currentSong","setCurrentSong","currentSongInQueue","setCurrentSongInQueue","currentSongPlaylistSource","setCurrentSongPlaylistSource","currentSongData","setCurrentSongData","imgColors","setImgColors","play","setPlay","currentTime","setCurrentTime","songDuration","setSongDuration","repeatMode","setRepeatMode","shuffleMode","setShuffleMode","currentParagraph","setCurrentParagraph","isThereKaraoke","setIsThereKaraoke","openFullScreenPlayer","setOpenFullScreenPlayer","songRef","useRef","currentParagraphRef","inputRef","leftSideBarInputRef","rightSideCurrentPage","setRightSideCurrentPage","openMenu","setOpenMenu","checkKaraoke","lyrics","length","startTime","tempSongObject","id","songSrc","authors","cover","listens","releaseDate","curSong","curQueue","source","image","songsList","docRef","exists","songData","catch","error","fetchYourSongs","map","song","i","fetchCurrentSongInitial","playlistId","forEach","friendObj","friend","status","songId","findIndex","authorId","fetchCurrentSong","shuffledSongsArray","songsArray","randomIndexesArray","newSongsNumbersArray","Array","counter","randNum","Math","floor","random","push","shuffleSongs","listenCountTimeOut","defineCurrentParagraph","first","last","roundedTime","parseFloat","current","toFixed","midPoint","blockStartTime","nextBlockStartTime","nextSong","stopPropagation","correctSongNumber","currentSongId","update","prevSong","clearTimeout","setTimeout","document","title","playSong","pause","playing","event","target","defineCurrentParagraphLight","documentElement","setProperty","changeCurrentTime","localName","displayAuthors","authorsList","separatingSign","to","displayAuthorsFull","loadSongData","duration","window","innerWidth","findLen","str","amountOfZeros","toDateTime","secs","t","Date","setSeconds","displayDate","stringDate","displayMode","Months","newDate","isNaN","seconds","getMonth","getDate","getFullYear","getHours","getMinutes","BackBtn","history","useHistory","goBack","morgen","songs","eldjey","johnykoch","greenday","andro","qontrast","yvngswag","jaden","kidcudi","miyagi","crhisbrown","tyga","tyomcha","diddy","dirtymoney","denzel","LilDicky","justinBieber","oneRepublic","tPain","andyPanda","chanceTheRapper","kidInk","Bob","arizonaZervas","adrianaProezna","SmallImages","imagesList","borderColor","marginRight","index","border","transform","rightFormanForBigNumber","ModalContext","useModal","ModalClassProvider","openModal","setOpenModal","content","setContent","toggleModal","useOutsideClick","ref","setFunc","handleClickOutside","contains","addEventListener","removeEventListener","getUID","replace","c","piece","toString","createChat","participants","chatUID","chatName","chatImage","admins","messages","wallpaper","admin","fullySeenBy","typing","personId","chatInfo","findChatURL","friendId","setShouldCreate","setFriendChatId","foundChat","chatId","where","chatInfo2","docs","chat","ChatWithFriendButton","shouldCreate","friendChatId","display","width","textDecoration","background","LoadingCircle","top","sendMessage","chatData","sender","messageText","attachedSongs","attachedAlbums","attachedAuthors","inResponseToMessage","tempMessages","message","sentTime","seenBy","SearchBar","typingTimeout","setValue","setAllFoundSongs","setResultPlaylists","setResultAuthorList","focus","defaultSearchMode","inputText","defaultSongsListValue","setMessage","foundAnything","setFoundAnything","searchMode","setSearchMode","findSongs","foundItemTempArray","response","item","author","authorData","findAuthors","songsIdsArray","albumsIdsArray","albumId","albumData","findPlaylists","playlist","findSomething","placeholder","onChange","onKeyUp","func","onKeyDown","position","height","marginTop","FriendsListToShareWith","whatToShare","chosenFriends","setChosenFriends","setMessageText","shared","setShared","searchValue","setSearchValue","foundPeople","setFoundPeople","showChoose","margin","maxWidth","opacity","shareList","userId","res","shareWithFriends","RadioBtn","currentActive","label","fontWeight","ColorCircles","createRandomId","len","randId","shareWithOneFriend","isThereChat","Object","keys","SongItemChoice","listOfSongs","setListOfSongs","showListens","isNewSong","openMoreWindow","setOpenMoreWindow","moreWindowPosRelativeToViewport","setMoreWindowPosRelativeToViewport","currentItemRef","addOrDeleteSongToLibrary","newList","songNum","addOrDeleteSongToPlaylist","visibility","alignItems","marginLeft","fontSize","getBoundingClientRect","innerHeight","bottom","key","isAlbum","addSongToLibrary","songAuthorsUIDS","finalAuthorsUIDS","filterArrayWithArray","whatToFilter","withWhatToFilter","this","indexOf","deleteSongFromLibrary","songObj","find","filtered","finalFilteredAuthors","AddOrDeleteButtonFull","PersonTinyVerticalItem","person","PersonTinyList","listOfPeople","setListOfPeople","scrollLeft","setScrollLeft","wrapperRef","shouldRenderRightArrow","setShouldRenderRightArrow","scrollWidth","offsetWidth","personObj","personData","onScroll","SongInfo","setSongData","friendsThatHaveThisSong","setFriendsThatHaveThisSong","findFriendsThatHaveThisSong","minHeight","shortWord","word","substr","AddToPlaylists","flexDirection","newSongsList","unshift","SongItem","localIndex","listOfChosenSongs","MoreBtn","lenOfList","maxLen","boolVal","TitleWithMoreBtn","marginBottom","SongList","showCount","showSearch","displayIfEmpty","showMoreSongs","setShowMoreSongs","displaySongs","setDisplaySongs","listSongsIds","allFoundSongs","CustomizeAlbum","playlistName","setPlaylistName","playlistCover","setPlaylistCover","authorsInputValue","setAuthorsInputValue","allAuthors","setAllAuthors","chosenAuthors","setChosenAuthors","creationDate","setReleaseDate","songsSearch","setSongsSearch","allSongs","setAllSongs","chosenSongs","setChosenSongs","playlistStatus","setPlaylistStatus","isPrivate","isPlaylistPrivate","setIsPlaylistPrivate","loadingAuthors","setLoadingAuthors","loadingSongs","setLoadingSongs","imageLocalPath","setImageLocalPath","setImageColors","friendsIds","isAdmin","removeAuthorFromList","people","place","file","files","URL","createObjectURL","storageRef","fileRef","child","put","getDownloadURL","authorRef","authorPlaylists","filteredPlaylists","err","timerUpFunc","getColors","colors","required","some","addAuthor","removeSongFromList","justifyContent","onFileChange","addAuthorToLibrary","addFriend","friendData","updatedDataForFriend","updatedDataForCurrentUser","LastSeen","userUID","lastSeen","setLastSeen","isOnline","setIsOnline","unsubscribe","onSnapshot","fiveMinutesAgo","getTime","online","Header","headerColors","albumAuthors","setAlbumAuthors","authorsImages","setAuthorsImages","isFriend","moreWindowRef","ids","addPlaylistToLibrary","deleteFriend","fetchAuthorsData","animation","AlbumPage","match","useRouteMatch","playlistSongs","setPlaylistSongs","setHeaderColors","params","setAlbumData","fetchAlbumsData","albumSong","AddPlaylist","onSubmit","DownloadPhotoButton","setErrorMessage","downloadedPhoto","setDownloadedPhoto","isValid","validExtensions","ext","ex","ErrorPlate","errorMessage","AddSong","songName","setSongName","songCover","setSongCover","setSongSrc","setLyrics","lyricsObject","setLyricsObject","authorSongs","padding","borderRadius","manuallyChangeColor","arrayOfParagraphs","startSubstr","text","Slider","pages","currentPage","setCurrentPage","pageName","AddWindow","openAddSongWindow","setOpenAddSongWindow","currentSliderPage","setCurrentSliderPage","sliderPages","FriendRequestItem","rejectFriend","FriendRequest","friendRequests","setFriendRequests","friendsList","otherUserFriendList","obj","findAuthorsAlbums","authorsData","setAuthorsPlaylists","currentUserUID","tempArray","playlistData","sort","b","normalizeString","toLowerCase","PlaylistItem","listOfChosenAlbums","setListOfChosenAlbums","playlistDate","split","AlbumList","listOfAlbums","Playlists","authorsPlaylists","findSimilarArtistsNames","authorsSongsArr","setSimilarAuthors","peopleArray","newAuthors","flat","uniqueAuthorsSet","Set","uniqueAuthorsIdsArray","from","uniqueAuthorsDataArray","j","findSimilarArtists","authorsSongsArray","AuthorItemBig","listOfChosenAuthors","setListOfChosenAuthors","AuthorsList","listOfAuthors","SimilarArtists","similarArtists","setSimilarArtists","findIfSongIsNew","songReleaseDate","TopSongs","popularSongs","setPopularSongs","newSongs","setNewSongs","prevSongs","findAuthorsSongs","AuthorPage","setAuthorsData","AttachmentList","attachmentList","setAttachmentList","sliderCurrentPage","setSliderCurrentPage","attachmentContent","fetchAttachedData","attachedType","firebaseCollection","page","useFetchFirebaseData","list","setState","sortCondition","whereCondFP","whereCondSP","whereCondTP","deps","fetchData","itemData","ChatInfo","setParticipants","chatNameValue","setChatNameValue","participantsPage","setParticipantsPage","listOfItems","setList","fetchItem","useFetchDocs","WallpaperItem","currentWallpaper","Wallpapers","wallpaperList","setWallpaperList","ChatMoreBtn","chatMoreBtnRef","ChatHeader","otherPerson","setOtherPerson","otherPersonId","fetchOtherPerson","findWhatToWriteInResponseToItem","referedMessage","SeenByCircle","listOfSeen","MessageItem","messageData","scrollToMessageRef","setScrollToMessageId","scrollToMessageId","showPhoto","otherMessages","inResponseToMessageArr","setInResponseToMessageArr","userThatSentMessage","setUserThatSentMessage","messageSentTime","attachedSongsData","setAttachedSongsData","attachedAuthorsData","setAttachedAuthorsData","attachedPlaylistsData","setAttachedPlaylistsData","inResponseToMessagesData","setInResponseToMessagesData","inResponseNames","setInResponseNames","messageRef","isVisible","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","disconnect","useOnScreen","fetchSentMessageUser","messageId","paddingBottom","album","MessageField","messageList","setInResponseToMessage","setDateRefsArray","setShowPhoto","showDate","setShowDate","dateRef","DisplayChatMessages","messagesWindowRef","scrollTo","offsetTop","AttachedItemsInChatInput","attachedItems","setAttachedItems","icon","setItems","removeItemFromAttached","ChatInput","openAttachWindow","setOpenAttachWindow","setAttachedSongs","setAttachedAlbums","setAttachedAuthors","resultPlaylists","resultAuthorList","attachedSongsNames","setAttachedSongsNames","attachWindowRef","sendMessageFull","transition","maxHeight","overflowY","outline","DateOnTop","date","TypingAnimation","typingPeople","typingPeopleData","setTypingPeopleData","DialoguePage","setChatData","scrollToBottomElementRef","setMessageList","currentDateOnTop","setCurrentDateOnTop","dateRefsArray","scroll","scrollHeight","clientHeight","scrollToMyRef","scrollTop","innerHTML","left","zIndex","LOGIN_ROUTE","SIGNUP_ROUTE","HOME_ROUTE","LIBRARY_ROUTE","SEARCH_ROUTE","CHAT_ROUTE","BlurredBg","TitleAndLogo","MainBanner","bannerColors","setBannerColors","setcurrentSliderPage","topAuthor","setTopAuthor","topSong","setTopSong","topAlbum","setTopAlbum","findTop","criterion","orderBy","boxShadow","circleColor","RecentSongs","recentSongs","setRecentSongs","tempSongsIds","findRecentSongs","RecommendedAuthors","recommendationAuthors","setRecommendationAuthors","uniqueAuthors","setUniqueAuthors","uniqueAuthorsUIDSArray","RecommendedSongs","recommendedSongs","setRecommendedSongs","fetchRecommendedSongs","LibraryPlaylistItem","SongsPage","p","wave","CreatePlaylistPage","PlaylistsPage","AuthorsPage","IsUserOnlineCircle","AmountOfUnseenMessages","amountOfUnseen","LastSentMessage","lastAttachedItem","setLastAttachedItem","shouldPutDot","setShouldPutDot","lastMessage","setLastMessage","messageIcons","lastIcon","setLastIcon","authorName","findWhatToWriteUnderName","ChatItem","setAmountOfUnseen","reduce","accum","findAmountOfUnseenMessages","now","ModalWindow","modalRef","CreateChat","foundFriends","setFoundFriends","chatCover","setChatCover","setChatName","setRrrorMessage","publicRoutes","path","Component","setEmail","setPassword","disabled","currentRoleChoice","setCurrentRoleChoice","setName","setPhotoURL","privateRoutes","libraryPages","resultSongList","setResultSongList","resultAlbumList","setResultAlbumList","shadowColor","setShadowColor","yourChats","setYourChats","ContentRouter","component","exact","correctTimeDisplay","Player","textLimit","overflow","whiteSpace","step","leftSideBar","link","MobileControlBarItem","element","BottomControlBar","userElement","location","pathname","FullBottomSide","Loading","timeSpan","pointerEvents","rightSide","socialMedia","social","inputKaraokeTime","setInputKaraokeTime","karaokeModeratorTimes","setKaraokeModeratorTimes","lyricsModeratorMode","setLyricsModeratorMode","canUpdateLyrics","setCanUpdateLyrics","inputKaraoke","convertedToNumber","addLyricsBlock","indexOfRelativeElement","direction","tempTimes","splice","scrollIntoView","paragraph","tempSongData","abs","FullScreenPlayer","lyricsRef","transformTransition","setTransformTransition","mobileMenuTransition","setMobileMenuTransition","deltaY","setDeltaY","deltaYMobileMenu","setDeltaYMobileMenu","mobileContentScroll","mobileMenuRef","handlers","useSwipeable","onSwiping","bgRef","handlersForMobileMenu","onSwipedLeft","onSwipedRight","dropDelta","returnToInitialMobileMenu","rightSideContent","RightSidePage","noLyrics","changeRightSidePage","onTouchEnd","NavigationItem","Person","TinyPlaylist","NotificationCircle","LeftsideBar","currentFriendToPlaylistPage","setCurrentFriendToPlaylistPage","ContentWrapper","intervalExciter","setIntervalExciter","interval","setInterval","clearInterval","onLoadedData","onTimeUpdate","AppRouter","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e69d21cb.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo3.fc53f4ac.svg\";","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const LoadingData = () => {\r\n\treturn (\r\n\t\t<div className = \"LoadingData\">\r\n\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {IoIosCheckmarkCircle, IoIosRadioButtonOff} from 'react-icons/io'\r\n\r\nexport const AddToListCircle = ({listOfChosenItems, setListOfChosenItems, itemId}) => {\r\n\treturn listOfChosenItems !== undefined ? (\r\n\t\t<div onClick = {e=>e.preventDefault()}>\r\n\t\t\t{\r\n\t\t\t\tlistOfChosenItems.includes(itemId) ?\r\n\t\t\t\t\t<button type=\"button\" onClick={(e) => { let filteredList = listOfChosenItems.filter(el => el !== itemId); setListOfChosenItems(filteredList) }} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosCheckmarkCircle style={{ color: 'var(--lightBlue)' }} />\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button type=\"button\" onClick={() => setListOfChosenItems(prev => [...prev, itemId])} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosRadioButtonOff />\r\n\t\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React from 'react'\r\nimport { AddToListCircle } from './AddToListCircle'\r\nexport const PersonTiny = ({data, chosenArray, setChosenArray, ...restProps}) => {\r\n\treturn (\r\n\t\t<div className=\"person\" {...restProps}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {chosenArray} setListOfChosenItems = {setChosenArray} itemId = {data.uid}/>\r\n\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t<img src={data.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"personName\">\r\n\t\t\t\t{data.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Cadillac.70f03a2c.jpg\";","export default __webpack_public_path__ + \"static/media/Shape-of-you.a9a52651.jpg\";","export default __webpack_public_path__ + \"static/media/da-da-da.6ec71e46.jpg\";","export default __webpack_public_path__ + \"static/media/ayo.2964bde9.jpg\";","export default __webpack_public_path__ + \"static/media/movie.51e02da0.jpg\";","export default __webpack_public_path__ + \"static/media/coming-home.849a02e0.jpg\";","export default __webpack_public_path__ + \"static/media/boulevard-of-broken-dreams.026872d7.png\";","export default __webpack_public_path__ + \"static/media/Гипноз.c34c3a56.jpg\";","export default __webpack_public_path__ + \"static/media/hitmyphone.ee7a3893.jpg\";","export default __webpack_public_path__ + \"static/media/Clout-cobain.f0f828dc.png\";","export default __webpack_public_path__ + \"static/media/Mood.076fb483.jpg\";","export default __webpack_public_path__ + \"static/media/Ты_горишь_как_огонь.f4a80a70.jpg\";","export default __webpack_public_path__ + \"static/media/лбтд.5172f440.jpg\";","export default __webpack_public_path__ + \"static/media/On-my-own.a68b20c0.png\";","export default __webpack_public_path__ + \"static/media/Buster-Keaton.7efbdcda.jpeg\";","export default __webpack_public_path__ + \"static/media/loyal.92e2953d.png\";","export default __webpack_public_path__ + \"static/media/freaky-friday.144e27db.jpg\";","export default __webpack_public_path__ + \"static/media/Dont-check-on-me.eab9cb77.jpg\";","export default __webpack_public_path__ + \"static/media/changes.0625d65a.jpg\";","export default __webpack_public_path__ + \"static/media/im-the-one.51c78f3d.jpg\";","export default __webpack_public_path__ + \"static/media/justin-bieber.a64412fc.png\";","export default __webpack_public_path__ + \"static/media/Rich-love.1ee38a35.jpg\";","export default __webpack_public_path__ + \"static/media/No-vacancy.51f83469.jpg\";","export default __webpack_public_path__ + \"static/media/Main-chick.edb4134a.jpg\";","export default __webpack_public_path__ + \"static/media/revolver.0f049b67.jpg\";","export default __webpack_public_path__ + \"static/media/Yamakasi.42ff7e12.jpeg\";","export default __webpack_public_path__ + \"static/media/roxanne.2420c14f.png\";","export default __webpack_public_path__ + \"static/media/I-can-fucking-tell.e8584039.png\";","export default __webpack_public_path__ + \"static/media/Leck.71d82d26.jpg\";","export default __webpack_public_path__ + \"static/media/tasm2Ost.a62e9888.jpg\";","export default __webpack_public_path__ + \"static/media/Earth.5a524f61.png\";","export default __webpack_public_path__ + \"static/media/Новая-волна.44af3a15.jpg\";","export default __webpack_public_path__ + \"static/media/Can-we-kiss-forever.163e90ed.jpg\";","export default __webpack_public_path__ + \"static/media/Drinking-problem.2a6a8f72.jpeg\";","export default __webpack_public_path__ + \"static/media/Drunk-in-love.1e3f9eb5.jpg\";","export default __webpack_public_path__ + \"static/media/Da da da.6fe02252.mp3\";","export default __webpack_public_path__ + \"static/media/Shape of You.5b915f48.mp3\";","export default __webpack_public_path__ + \"static/media/Cadillac.704f0c05.mp3\";","export default __webpack_public_path__ + \"static/media/Ayo.ed690ad5.mp3\";","export default __webpack_public_path__ + \"static/media/Movie.2b583995.mp3\";","export default __webpack_public_path__ + \"static/media/Coming Home.c063172e.mp3\";","export default __webpack_public_path__ + \"static/media/Boulevard of broken dreams.30184a4c.mp3\";","export default __webpack_public_path__ + \"static/media/Гипноз.a2a6b5b8.mp3\";","export default __webpack_public_path__ + \"static/media/Hit My Phone.468aae34.mp3\";","export default __webpack_public_path__ + \"static/media/CLOUT COBAIN  CLOUT CO13A1N.5b1f1720.mp3\";","export default __webpack_public_path__ + \"static/media/Mood.85484109.mp3\";","export default __webpack_public_path__ + \"static/media/ТЫ ГОРИШЬ КАК ОГОНЬ.e5c27654.mp3\";","export default __webpack_public_path__ + \"static/media/лбтд.ca049aa1.mp3\";","export default __webpack_public_path__ + \"static/media/On My Own.7d96c332.mp3\";","export default __webpack_public_path__ + \"static/media/Angel.3bda6e1f.mp3\";","export default __webpack_public_path__ + \"static/media/Loyal.c5aaabae.mp3\";","export default __webpack_public_path__ + \"static/media/Freaky Friday.0036b7a4.mp3\";","export default __webpack_public_path__ + \"static/media/Don't check on me.10b27dbf.mp3\";","export default __webpack_public_path__ + \"static/media/Intentions.d7f98e4b.mp3\";","export default __webpack_public_path__ + \"static/media/I'm the one.9fef9dce.mp3\";","export default __webpack_public_path__ + \"static/media/Yummy.dac00ec9.mp3\";","export default __webpack_public_path__ + \"static/media/Hold On.264abaa7.mp3\";","export default __webpack_public_path__ + \"static/media/Rich Love.cd0ab1c2.mp3\";","export default __webpack_public_path__ + \"static/media/No Vacancy.7298c78e.mp3\";","export default __webpack_public_path__ + \"static/media/Main Chick.1938e956.mp3\";","export default __webpack_public_path__ + \"static/media/Best Love Song.ba132a5c.mp3\";","export default __webpack_public_path__ + \"static/media/Tantra.a9e921b2.mp3\";","export default __webpack_public_path__ + \"static/media/Drunk In Love.261db7ba.mp3\";","export default __webpack_public_path__ + \"static/media/Roxanne.e09cd702.mp3\";","export default __webpack_public_path__ + \"static/media/Drinking Problem.242a7c1a.mp3\";","export default __webpack_public_path__ + \"static/media/I Can Fvcking Tell.831c76d1.mp3\";","export default __webpack_public_path__ + \"static/media/Can we kiss forever.a3ee0569.mp3\";","export default __webpack_public_path__ + \"static/media/Leck.60200232.mp3\";","export default __webpack_public_path__ + \"static/media/Need Somebody.b53be172.mp3\";","export default __webpack_public_path__ + \"static/media/I Chose You.c9a00b79.mp3\";","export default __webpack_public_path__ + \"static/media/I'm Moving To England.2a420fd3.mp3\";","export default __webpack_public_path__ + \"static/media/Earth.ffc7df51.mp3\";","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport seedDatabase from './seedDatabase';\r\n\r\nconsole.log(process.env.REACT_APP_FIREBASE_API_KEY)\r\nconst app = firebase.initializeApp({\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n\tappId:process.env.REACT_APP_FIREBASE_APP_ID,\r\n\tmeasurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n});\r\nexport const auth = app.auth()\r\nexport const storage = app.storage()\r\nexport const firestore = app.firestore()\r\n// seedDatabase(firestore)\r\nexport default app","export default function checkNumber(number, max, min = 0){\r\n\tif(number > max) return min\r\n\tif(number < min) return max\r\n\r\n\treturn number\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { auth, firestore } from '../firebase'\r\nimport firebase from 'firebase'\r\nimport { LoadingData } from '../components/Basic/LoadingData'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport const useAuth = () => {\r\n\treturn useContext(AuthContext)\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [currentUser, setCurrentUser] = useState({})\r\n\tconst [loading, setLoading] = useState(true)\r\n\tfunction login(email, password) {\r\n\t\treturn auth.signInWithEmailAndPassword(email, password)\r\n\t}\r\n\r\n\tfunction logout() {\r\n\t\treturn auth.signOut()\r\n\t}\r\n\r\n\tfunction signup(email, name, password, role, photoURL, imageColors) {\r\n\t\treturn auth.createUserWithEmailAndPassword(email, password)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tfirestore.collection('users')\r\n\t\t\t\t\t.doc(result.user.uid)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\t\tdisplayName: name,\r\n\t\t\t\t\t\tphotoURL: photoURL || \"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg\",\r\n\t\t\t\t\t\tisAuthor: parseInt(role) === 1,\r\n\t\t\t\t\t\tisVerified: parseInt(role) === 1,\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: 0,\r\n\t\t\t\t\t\townSongs: [],\r\n\t\t\t\t\t\townPlaylists: [],\r\n\t\t\t\t\t\taddedSongs: [],\r\n\t\t\t\t\t\taddedPlaylists: [],\r\n\t\t\t\t\t\taddedAuthors: [],\r\n\t\t\t\t\t\tlastSongPlayed:\"\",\r\n\t\t\t\t\t\tlastQueue:{},\r\n\t\t\t\t\t\tchats: [],\r\n\t\t\t\t\t\tfriends: [],\r\n\t\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\t\tregDate: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t}\r\n\r\n\tasync function fetchUserInfo(userId) {\r\n\t\tlet dataObject = {}\r\n\r\n\t\treturn dataObject\r\n\t}\r\n\r\n\t// useEffect(() => {\r\n\t// \tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t// \t\tif (user) {\r\n\t// \t\t\tconst response = await firestore.collection('users').doc(user.uid).onSnapshot(snapshot => {\r\n\t// \t\t\t\tconst fullUserInfo = { ...user, ...snapshot.data() }\r\n\t// \t\t\t\tconsole.log(\"worked!\")\r\n\t// \t\t\t\tsetCurrentUser(fullUserInfo)\r\n\t// \t\t\t})\r\n\t// \t\t}\r\n\t// \t})\r\n\t// \treturn unsubscribe\r\n\t// }, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tconst response = await firestore.collection('users').doc(user.uid).get().then(snapshot => {\r\n\t\t\t\t\tconst fullUserInfo = { ...user, ...snapshot.data() }\r\n\t\t\t\t\tsetCurrentUser(fullUserInfo)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentUser(user)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn unsubscribe\r\n\t}, [])\r\n\t\r\n\r\n\tconst value = {\r\n\t\tcurrentUser,\r\n\t\tsetCurrentUser,\r\n\t\tlogin,\r\n\t\tsignup,\r\n\t\tlogout,\r\n\t\tloading,\r\n\t\tsetLoading\r\n\t}\r\n\treturn (\r\n\t\t<AuthContext.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n","import React, { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { LoadingData } from '../../components/Basic/LoadingData'\r\nimport { PersonTiny } from '../../components/Basic/PersonTiny'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport shuffleSongs from '../../functions/shuffleSongs'\r\nimport { useAuth } from '../AuthContext'\r\n\r\nconst SongContext = createContext(null)\r\n\r\nexport const useSong = () => {\r\n\treturn useContext(SongContext)\r\n}\r\n\r\nexport const SongProvider = ({ children }) => {\r\n\tconst { currentUser, loading, setLoading } = useAuth()\r\n\tconst [yourSongs, setYourSongs] = useState([])\r\n\tconst [yourPlaylists, setYourPlaylists] = useState([])\r\n\tconst [yourAuthors, setYourAuthors] = useState([])\r\n\tconst [yourFriends, setYourFriends] = useState([])\r\n\tconst [currentSongQueue, setCurrentSongQueue] = useState()\r\n\tconst [currentSong, setCurrentSong] = useState('')\r\n\tconst [currentSongInQueue, setCurrentSongInQueue] = useState(0)\r\n\tconst [currentSongPlaylistSource, setCurrentSongPlaylistSource] = useState({})\r\n\r\n\tconst [currentSongData, setCurrentSongData] = useState({})\r\n\r\n\tconst [imgColors, setImgColors] = useState([])\r\n\tconst [play, setPlay] = useState(false)\r\n\tconst [currentTime, setCurrentTime] = useState(0)\r\n\tconst [songDuration, setSongDuration] = useState(0)\r\n\tconst [repeatMode, setRepeatMode] = useState(1)\r\n\tconst [shuffleMode, setShuffleMode] = useState(0)\r\n\tconst [currentParagraph, setCurrentParagraph] = useState(0)\r\n\tconst [isThereKaraoke, setIsThereKaraoke] = useState(true)\r\n\tconst [openFullScreenPlayer, setOpenFullScreenPlayer] = useState(false)\r\n\tconst songRef = useRef(null)\r\n\tconst currentParagraphRef = useRef(null)\r\n\tconst inputRef = useRef(null)\r\n\tconst leftSideBarInputRef = useRef(null)\r\n\tconst [rightSideCurrentPage, setRightSideCurrentPage] = useState(0)\r\n\tconst [openMenu, setOpenMenu] = useState(false)\r\n\tfunction checkKaraoke() {\r\n\t\tif (currentSongData.lyrics !== undefined && currentSongData.lyrics.length === 0) return false\r\n\r\n\t\tif (currentSongData.lyrics !== undefined) {\r\n\t\t\tconsole.log(currentSongData.lyrics.length)\r\n\t\t\tif (currentSongData.lyrics[0].startTime === 'undefined') return false\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n\r\n\tfunction fetchYourFriends() {\r\n\t\tsetYourFriends([])\r\n\t\tif (currentUser.friends !== undefined) {\r\n\t\t\tconsole.log(currentUser.friends)\r\n\t\t\tcurrentUser.friends.forEach(async friendObj => {\r\n\t\t\t\tconst friend = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tconsole.log(friend)\r\n\t\t\t\tif (friendObj.status === 'added') {\r\n\t\t\t\t\tsetYourFriends(prev => [...prev, friend])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// async function fetchLastPlayedSong() {\r\n\t// \tconsole.log('ewqeqw')\r\n\t// \tlet songId = 0\r\n\t// \tconst userRef = firestore.collection('users').doc(currentUser.uid)\r\n\t// \tconst lastSong = userRef.get()\r\n\r\n\t// }\r\n\r\n\tfunction fetchQueue() {\r\n\t\tsetCurrentSongQueue([])\r\n\t\tif(currentUser.lastQueue){\r\n\t\t\tcurrentUser.lastQueue.songsList.forEach(async songId=>{\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetCurrentSongQueue(prev=>[songData, ...prev])\r\n\t\t\t})\r\n\t\t\tsetCurrentSongInQueue(currentUser.lastQueue.songsList.findIndex(songId => songId === currentSong))\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSongInitial() {\r\n\r\n\t\tif (currentUser.uid !== undefined) {\r\n\t\t\tconst tempSongObject = {\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsongSrc: \"\",\r\n\t\t\t\tauthors: [],\r\n\t\t\t\tcover: \"\",\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\treleaseDate: \"\",\r\n\t\t\t\tlyrics: [],\r\n\t\t\t\timageColors: []\r\n\t\t\t}\r\n\t\t\tconst curSong = currentUser.lastSongPlayed || currentUser.addedSongs[0] || tempSongObject.id\r\n\t\t\tconst curQueue = currentUser.lastQueue || { source: '/library', name: 'Your Library', image: currentUser.photoURL, songsList: yourSongs } || []\r\n\t\t\tsetCurrentSong(curSong)\r\n\t\t\tsetCurrentSongPlaylistSource(curQueue)\r\n\r\n\t\t\tif (curSong !== -1) {\r\n\t\t\t\tconst docRef = firestore.collection('songs').doc(curSong)\r\n\t\t\t\tconst docData = docRef.get()\r\n\t\t\t\t\t.then(doc => {\r\n\t\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongData(tempSongObject)\r\n\t\t\t\tsetImgColors([])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSong() {\r\n\t\tif (currentSong !== -1) {\r\n\t\t\tconst docRef = firestore.collection('songs').doc(currentSong)\r\n\t\t\tconst docData = docRef.get()\r\n\t\t\t\t.then(doc => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourSongs() {\r\n\t\tsetYourSongs([])\r\n\t\tif (currentUser.addedSongs) {\r\n\t\t\tcurrentUser.addedSongs.map((song, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"songs\").doc(song)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourSongs(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction fetchYourPlaylists() {\r\n\t\tsetYourPlaylists([])\r\n\t\tif (currentUser.ownPlaylists) {\r\n\t\t\tcurrentUser.ownPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourPlaylists(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (currentUser.addedPlaylists) {\r\n\t\t\tcurrentUser.addedPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourPlaylists(prev => [...prev, doc.data()])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fetchYourAuthors() {\r\n\t\tsetYourAuthors([])\r\n\t\tif (currentUser.addedAuthors) {\r\n\t\t\tcurrentUser.addedAuthors.map((authorId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\tsetYourAuthors(prev => [doc.data(), ...prev])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser) {\r\n\t\t\tsetLoading(true)\r\n\t\t\tfetchYourSongs()\r\n\t\t\tfetchCurrentSongInitial()\r\n\t\t\tfetchYourPlaylists()\r\n\t\t\tfetchYourFriends()\r\n\t\t\tfetchQueue()\r\n\t\t\tfetchYourAuthors()\r\n\t\t}\r\n\t}, [currentUser])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUser && currentSong) {\r\n\t\t\tfetchCurrentSong()\r\n\t\t}\r\n\t}, [currentSong])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsThereKaraoke(checkKaraoke())\r\n\t}, [currentSongData.lyrics])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!loading) {\r\n\t\t\tif (shuffleMode) {\r\n\t\t\t\tlet shuffledSongsArray = shuffleSongs(currentSongQueue)\r\n\t\t\t\tsetCurrentSongQueue(shuffledSongsArray)\r\n\t\t\t\tsetCurrentSongInQueue(shuffledSongsArray.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongQueue(currentSongPlaylistSource.songsList)\r\n\t\t\t\tsetCurrentSongInQueue(currentSongPlaylistSource.songsList.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [shuffleMode])\r\n\tlet listenCountTimeOut = useRef()\r\n\tfunction playSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (play) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\r\n\t\tsetPlay(!play)\r\n\t}\r\n\r\n\tfunction updateListenCount() {\r\n\t\tconsole.log('listen Count Update')\r\n\t\tlistenCountTimeOut.current = setTimeout(() => {\r\n\t\t\tconsole.log('count added')\r\n\t\t\tlet listens = currentSongData.listens\r\n\t\t\tlistens++\r\n\t\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\t\tlistens: listens\r\n\t\t\t})\r\n\t\t}, songDuration * 1000 * 0.5)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(listenCountTimeOut.current)\r\n\t\tif (play) {\r\n\t\t\tupdateListenCount()\r\n\t\t}\r\n\t}, [play, currentSongData.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentParagraph(0)\r\n\t}, [currentSongData.id])\r\n\r\n\tfunction loadSongData(e) {\r\n\t\tsetCurrentTime(e.target.currentTime)\r\n\t\tsetSongDuration(e.target.duration)\r\n\t\tinputRef.current.max = e.target.duration\r\n\t\tif (window.innerWidth > 1000) leftSideBarInputRef.current.max = e.target.duration\r\n\t\tdocument.documentElement.style.setProperty('--inputRange', 0 + '%')\r\n\t\tif (play) { e.target.play() }\r\n\t\telse e.target.pause()\r\n\t}\r\n\r\n\tfunction defineCurrentParagraph() {\r\n\t\t//Well, I'm maybe not a great mathematician or smth, but I want to make this not linear, but binary, hence O(logN)\r\n\t\t// currentSongData.lyrics.find((el, i) => {\r\n\t\t// \tif (el.startTime <= songRef.current.currentTime) {\r\n\t\t// \t\tsetCurrentParagraph(i)\r\n\t\t// \t\treturn false\r\n\t\t// \t}\r\n\t\t// \t// currentParagraphRef.current.scrollIntoView()\r\n\t\t// \treturn true\r\n\t\t// })\r\n\r\n\t\tlet first = 0, last = currentSongData.lyrics.length - 1\r\n\t\tlet roundedTime = parseFloat(parseFloat(songRef.current.currentTime).toFixed(1))\r\n\t\twhile (first <= last) {\r\n\t\t\tlet midPoint = Math.floor((first + last) / 2)\r\n\t\t\tlet blockStartTime = parseFloat(parseFloat(currentSongData.lyrics[midPoint].startTime).toFixed(1))\r\n\t\t\tlet nextBlockStartTime = midPoint !== currentSongData.lyrics.length - 1 ? parseFloat(parseFloat(currentSongData.lyrics[midPoint + 1].startTime).toFixed(1)) : last\r\n\t\t\tif (currentSongData.lyrics[midPoint].startTime !== 'undefined') {\r\n\t\t\t\tif (roundedTime >= blockStartTime && roundedTime <= nextBlockStartTime) {\r\n\t\t\t\t\tsetCurrentParagraph(midPoint)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\telse if (blockStartTime < roundedTime) first = midPoint + 1\r\n\t\t\t\telse last = midPoint - 1\r\n\r\n\t\t\t}\r\n\t\t\telse return\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(rightSideCurrentPage === 2) defineCurrentParagraph()\r\n\t}, [rightSideCurrentPage])\r\n\r\n\tfunction defineCurrentParagraphLight() {\r\n\t\tif (currentParagraph !== (currentSongData.lyrics.length - 1) && parseFloat(currentSongData.lyrics[currentParagraph + 1].startTime) <= songRef.current.currentTime) {\r\n\t\t\t// console.log(parseFloat(currentSongData.lyrics[currentParagraph+1].startTime), songRef.current.currentTime)\r\n\t\t\treturn setCurrentParagraph(currentParagraph + 1)\r\n\t\t}\r\n\t}\r\n\tfunction playing(event) {\r\n\r\n\t\tif (event.target.currentTime === songDuration) {\r\n\t\t\tif (repeatMode === 0) {\r\n\t\t\t\tsongRef.current.pause()\r\n\t\t\t\tsetPlay(false)\r\n\t\t\t\treturn prevSong()\r\n\t\t\t}\r\n\t\t\telse if (repeatMode === 1) {\r\n\t\t\t\tif (currentSongQueue.length === 1) {\r\n\t\t\t\t\tprevSong()\r\n\t\t\t\t\treturn songRef.current.play()\r\n\t\t\t\t}\r\n\t\t\t\treturn nextSong()\r\n\t\t\t}\r\n\t\t\tprevSong()\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\t\tsetCurrentTime(event.target.currentTime)\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer && openMenu) defineCurrentParagraphLight()\r\n\t\tdocument.documentElement.style\r\n\t\t\t.setProperty('--inputRange', (event.target.currentTime / songDuration) * 100 + '%');\r\n\t}\r\n\r\n\tasync function nextSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue + 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tasync function prevSong(e) {\r\n\t\tif (e) e.stopPropagation()\r\n\t\tif (currentTime > 5) {\r\n\t\t\tsongRef.current.currentTime = 0\r\n\t\t\tsetCurrentTime(0)\r\n\t\t\tsetCurrentParagraph(0)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue - 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tfunction changeCurrentTime(event, startTime = 0) {\r\n\t\tif (event.target.localName === 'div' || event.target.localName === \"p\") {\r\n\t\t\tsetCurrentTime(startTime)\r\n\t\t\tsongRef.current.currentTime = startTime\r\n\t\t\tdocument.documentElement.style\r\n\t\t\t\t.setProperty('--inputRange', (startTime / songDuration) * 100 + '%');\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) setCurrentParagraph(parseInt(event.target.id))\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\treturn\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetCurrentTime(event.target.value)\r\n\t\t\tsongRef.current.currentTime = event.target.value\r\n\t\t\tdocument.documentElement.style\r\n\t\t\t\t.setProperty('--inputRange', (event.target.value / songDuration) * 100 + '%');\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) defineCurrentParagraph()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction displayAuthors(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>{el.displayName}</Link>{(i === authorsList.length - 1 ? \"\" : separatingSign)}\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction displayAuthorsFull(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>\r\n\t\t\t\t\t\t<PersonTiny data = {el}/>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction findLen() {\r\n\t\tlet str = \"\"\r\n\t\tcurrentSongData.authors.forEach(el => {\r\n\t\t\tstr += el.displayName\r\n\t\t})\r\n\t\treturn str.length\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = currentSongData.name || 'Soundbubble'\r\n\t}, [currentSongData.name])\r\n\treturn (\r\n\t\t<SongContext.Provider value={\r\n\t\t\t{\r\n\t\t\t\tyourSongs,\r\n\t\t\t\tsetYourSongs,\r\n\t\t\t\tyourPlaylists,\r\n\t\t\t\tyourFriends,\r\n\t\t\t\tcurrentSongQueue,\r\n\t\t\t\tcurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongQueue,\r\n\t\t\t\tsetCurrentSongInQueue,\r\n\t\t\t\tplay,\r\n\t\t\t\tsetPlay,\r\n\t\t\t\tsongSrc: currentSongData.songSrc,\r\n\t\t\t\tcurrentTime,\r\n\t\t\t\tsetCurrentTime,\r\n\t\t\t\tsongDuration,\r\n\t\t\t\tsongRef,\r\n\t\t\t\tname: currentSongData.name,\r\n\t\t\t\tauthors: currentSongData.authors,\r\n\t\t\t\tlyrics: currentSongData.lyrics,\r\n\t\t\t\tcover: currentSongData.cover,\r\n\t\t\t\timgColors,\r\n\t\t\t\tsetImgColors,\r\n\t\t\t\tcurrentSong,\r\n\t\t\t\tsetCurrentSong,\r\n\t\t\t\trepeatMode,\r\n\t\t\t\tsetRepeatMode,\r\n\t\t\t\tshuffleMode,\r\n\t\t\t\tsetShuffleMode,\r\n\t\t\t\tinputRef,\r\n\t\t\t\tleftSideBarInputRef,\r\n\t\t\t\tisThereKaraoke,\r\n\t\t\t\trightSideCurrentPage,\r\n\t\t\t\tcurrentParagraph,\r\n\t\t\t\tcurrentParagraphRef,\r\n\t\t\t\tnextSong,\r\n\t\t\t\tprevSong,\r\n\t\t\t\tplaySong,\r\n\t\t\t\tplaying,\r\n\t\t\t\tdefineCurrentParagraph,\r\n\t\t\t\tsetRightSideCurrentPage,\r\n\t\t\t\tchangeCurrentTime,\r\n\t\t\t\tdisplayAuthors,\r\n\t\t\t\tdisplayAuthorsFull,\r\n\t\t\t\topenFullScreenPlayer,\r\n\t\t\t\tsetOpenFullScreenPlayer,\r\n\t\t\t\tloadSongData,\r\n\t\t\t\tfindLen,\r\n\t\t\t\tfetchYourSongs,\r\n\t\t\t\tsetOpenMenu,\r\n\t\t\t\topenMenu,\r\n\t\t\t\tcurrentSongData,\r\n\t\t\t\tsetCurrentSongData,\r\n\t\t\t\tsetIsThereKaraoke,\r\n\t\t\t\tcheckKaraoke,\r\n\t\t\t\tsetYourPlaylists,\r\n\t\t\t\tyourAuthors,\r\n\t\t\t\tsetYourAuthors\r\n\t\t\t}\r\n\t\t}>\r\n\t\t\t{!loading ?\r\n\t\t\t\tchildren :\r\n\t\t\t\t<LoadingData />\r\n\t\t\t}\r\n\t\t</SongContext.Provider>\r\n\t)\r\n}\r\n","export default function shuffleSongs(songsArray){\r\n\tconst randomIndexesArray = []\r\n\tconst newSongsNumbersArray = new Array(songsArray.length)\r\n\tlet counter = 0\r\n\twhile(counter < songsArray.length){\r\n\t\tconst randNum = Math.floor(Math.random()*(songsArray.length))\r\n\t\tif(!randomIndexesArray.includes(randNum)){\r\n\t\t\trandomIndexesArray.push(randNum)\r\n\t\t\tnewSongsNumbersArray[randNum] = songsArray[counter]\r\n\t\t\tcounter++\r\n\t\t}\r\n\t}\r\n\treturn newSongsNumbersArray\r\n}","\r\nfunction amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nfunction toDateTime(secs) {\r\n\t// console.log(\"ewqeqw\")\r\n\tvar t = new Date(1970, 0, 1); // Epoch\r\n\tt.setSeconds(secs);\r\n\treturn t;\r\n}\r\n\r\nexport default function displayDate(stringDate, displayMode = 0){\r\n\tconst Months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\r\n\tlet newDate = !isNaN(stringDate)?stringDate.seconds?toDateTime(stringDate.seconds + 10800):toDateTime((stringDate/1000) + 10800):new Date(stringDate)\r\n\tif(displayMode === 0){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() \r\n\t}\r\n\r\n\tif(displayMode === 1){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate()\r\n\t}\r\n\r\n\tif(displayMode === 2){\r\n\t\treturn amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n\r\n\tif(displayMode === 3){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() + \" at \" + amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n}","import React from 'react'\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { useHistory } from 'react-router'\r\n\r\nexport const BackBtn = ({color = \"\"}) => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"BackBtn\">\r\n\t\t\t<button onClick={() => history.goBack()} style = {color.length?{color:color}:{}}>\r\n\t\t\t\t<FiArrowLeft />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Denzel-Curry.84494049.jpg\";","export default __webpack_public_path__ + \"static/media/Morgenshtern.2047a5bb.jpg\";","export default __webpack_public_path__ + \"static/media/Tyomcha.1a7e66ed.jpg\";","export default __webpack_public_path__ + \"static/media/yvng-swag.e9572d73.jpg\";","export default __webpack_public_path__ + \"static/media/chris-brown.256f093e.jpg\";","export default __webpack_public_path__ + \"static/media/tyga.38622b96.jpg\";","export default __webpack_public_path__ + \"static/media/diddy.5dd4ad63.jpg\";","export default __webpack_public_path__ + \"static/media/greenday.656475fd.jpg\";","export default __webpack_public_path__ + \"static/media/johny-koch.5c8fed82.jpg\";","export default __webpack_public_path__ + \"static/media/andro.38ce0477.jpg\";","export default __webpack_public_path__ + \"static/media/qontrast.452f5fe9.jpg\";","export default __webpack_public_path__ + \"static/media/jaden.c4c50d52.jpg\";","export default __webpack_public_path__ + \"static/media/kid-cudi.ff281840.png\";","export default __webpack_public_path__ + \"static/media/dirty-money.2644bf3e.jpg\";","export default __webpack_public_path__ + \"static/media/OneRepublic.d5d9b523.jpg\";","export default __webpack_public_path__ + \"static/media/t-pain.da79c258.jpg\";","export default __webpack_public_path__ + \"static/media/Kid-ink.4a8065f2.jpg\";","export default __webpack_public_path__ + \"static/media/Chance-the-rapper.672005ab.jpg\";","export default __webpack_public_path__ + \"static/media/Bob.6bb6be52.jpg\";","export default __webpack_public_path__ + \"static/media/Lil-dicky.2fc4ceab.png\";","export default __webpack_public_path__ + \"static/media/Arizona-zervas.78d1344a.jpg\";","export default __webpack_public_path__ + \"static/media/Andy-panda.6f59b7ec.jpg\";","export default __webpack_public_path__ + \"static/media/Adriana-proenza.2fc46e8e.jpg\";","import denzel from '../images/authors/Denzel-Curry.jpg'\r\nimport morgen from '../images/authors/Morgenshtern.jpg'\r\nimport eldjey from '../images/Cadillac.jpg'\r\nimport tyomcha from '../images/authors/Tyomcha.jpg'\r\nimport yvngswag from '../images/authors/yvng-swag.jpg'\r\nimport crhisbrown from '../images/authors/chris-brown.jpg'\r\nimport tyga from '../images/authors/tyga.jpg'\r\nimport diddy from '../images/authors/diddy.jpg'\r\nimport bluelake from '../images/authors/bluelake.jpg'\r\nimport greenday from '../images/authors/greenday.jpg'\r\nimport johnykoch from '../images/authors/johny-koch.jpg'\r\nimport andro from '../images/authors/andro.jpg'\r\nimport qontrast from '../images/authors/qontrast.jpg'\r\nimport jaden from '../images/authors/jaden.jpg'\r\nimport kidcudi from '../images/authors/kid-cudi.png'\r\nimport dirtymoney from '../images/authors/dirty-money.jpg'\r\nimport justinBieber from '../images/authors/justin-bieber.png'\r\nimport miyagi from '../images/Buster-Keaton.jpeg'\r\nimport oneRepublic from '../images/authors/OneRepublic.jpg'\r\nimport tPain from '../images/authors/t-pain.jpg'\r\nimport kidInk from '../images/authors/Kid-ink.jpg'\r\nimport chanceTheRapper from '../images/authors/Chance-the-rapper.jpg'\r\nimport Bob from '../images/authors/Bob.jpg'\r\nimport LilDicky from '../images/authors/Lil-dicky.png'\r\nimport arizonaZervas from '../images/authors/Arizona-zervas.jpg'\r\nimport andyPanda from '../images/authors/Andy-panda.jpg'\r\nimport adrianaProezna from '../images/authors/Adriana-proenza.jpg'\r\nimport quavo from '../images/authors/quavo.jpg'\r\nimport fettyWap from '../images/authors/Fetty-wap.png'\r\nexport const authors = [\r\n\t{\r\n\t\tid:0, \r\n\t\tname:'MORGENSHTERN', \r\n\t\timage:morgen,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 123,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t0\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\tname:'Элджей', \r\n\t\timage:eldjey,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 100,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t0\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\tname:'Ed Sheeran', \r\n\t\timage:'https://cdns-images.dzcdn.net/images/artist/f4daf253b92a1a9646844c5162e2a968/264x264.jpg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 93,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t1\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\tname:'Nate Good', \r\n\t\timage:'https://is1-ssl.mzstatic.com/image/thumb/Features114/v4/2f/5d/0f/2f5d0f3e-349f-77e8-3878-7efe934f5183/pr_source.png/800x800bb.jpeg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 54,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\tname:'Bluelake', \r\n\t\timage:bluelake,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 14,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\tname:'Johny Koch', \r\n\t\timage:johnykoch,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 68,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\tname:'Greenday', \r\n\t\timage:greenday,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 34,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:7, \r\n\t\tname:'Andro', \r\n\t\timage:andro,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 72,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:8, \r\n\t\tname:'QONTRAST', \r\n\t\timage:qontrast,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 71,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:9, \r\n\t\tname:'Hiro', \r\n\t\timage:\"https://is2-ssl.mzstatic.com/image/thumb/Features114/v4/8f/24/99/8f249900-47f1-4942-4749-713973f58dde/pr_source.png/190x190cc-60.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 25,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:10, \r\n\t\tname:'Yvng Swag', \r\n\t\timage:yvngswag,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 51,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:11, \r\n\t\tname:'Slava Marlow', \r\n\t\timage:\"https://upload.wikimedia.org/wikipedia/commons/c/cb/Slava_Marlow.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 34,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:12, \r\n\t\tname:'кис-кис', \r\n\t\timage:\"https://i1.sndcdn.com/artworks-vkNIueBuHJ2fSa1D-fRw8mA-t500x500.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 44,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:13, \r\n\t\tname:'Jaden', \r\n\t\timage:jaden,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 74,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:14, \r\n\t\tname:'Kid Cudi', \r\n\t\timage:kidcudi,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 61,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:15, \r\n\t\tname:'Miyagi', \r\n\t\timage:miyagi,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 102,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:16, \r\n\t\tname:'Chris Brown', \r\n\t\timage:crhisbrown,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 41,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:17, \r\n\t\tname:'Tyga', \r\n\t\timage:tyga,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 80,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:18, \r\n\t\tname:'Tanir', \r\n\t\timage: \"https://i.scdn.co/image/92455c398cf7be1eda78df4f1de572ade87aa95e\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 89,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:19, \r\n\t\tname:'Tyomcha', \r\n\t\timage: tyomcha,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 92,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:20, \r\n\t\tname:'Diddy', \r\n\t\timage:diddy,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 105,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:21, \r\n\t\tname:'Dirty Money', \r\n\t\timage:dirtymoney,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 10,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:22, \r\n\t\tname:'Denzel Curry', \r\n\t\timage:denzel,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 170,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:23, \r\n\t\tname:'Lil Dicky', \r\n\t\timage:LilDicky,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 134,\r\n\t\tsubscribers:10,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:24, \r\n\t\tname:'Justin Bieber', \r\n\t\timage:justinBieber,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 251,\r\n\t\tsubscribers:50,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:25, \r\n\t\tname:'Lil Wayne', \r\n\t\timage:\"https://static01.nyt.com/images/2020/11/19/arts/17lilwayne/17lilwayne-mediumSquareAt3X.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 10,\r\n\t\tsubscribers:50,\r\n\t\tsongs:[\r\n\t\t\t4, 10\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:26, \r\n\t\tname:'OneRepublic', \r\n\t\timage:oneRepublic,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:100,\r\n\t\tsongs:[\r\n\t\t\t22\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:27, \r\n\t\tname:'Seeb', \r\n\t\timage:\"https://pbs.twimg.com/profile_images/1354787716123262976/FbiITgXt_400x400.jpg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:100,\r\n\t\tsongs:[\r\n\t\t\t22\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:28, \r\n\t\tname:'T-Pain', \r\n\t\timage:tPain,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:100,\r\n\t\tsongs:[\r\n\t\t\t22\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:29, \r\n\t\tname:'Andy Panda', \r\n\t\timage:andyPanda,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:30, \r\n\t\tname:'Kostya Doloz', \r\n\t\timage:'https://sun9-66.userapi.com/impf/c636628/v636628089/46fc5/jZmb1Eadwqs.jpg?size=960x1280&quality=96&sign=ee424378e70207bd5f8ab2aa5a669b81&type=album',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:31, \r\n\t\tname:'Lil Magnum', \r\n\t\timage:'https://sun9-59.userapi.com/impg/ABnwxJFpZUNHG9-dbMnKEH-cT8YGWdpZ5DvSbA/Vr_Dkiu--VQ.jpg?size=1620x2160&quality=96&sign=7685b9ae04fed10f41f56729c93e6d89&type=album',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:32, \r\n\t\tname:'Dj Khaled', \r\n\t\timage:'https://cdn.smehost.net/2020sonymusiccouk-ukprod/wp-content/uploads/2017/05/c16367f4d6cf286d282eaffd0d3b9928-1040x1040.jpg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:33, \r\n\t\tname:'Quavo', \r\n\t\timage:quavo,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:34, \r\n\t\tname:'Chance the Rapper', \r\n\t\timage:chanceTheRapper,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:35, \r\n\t\tname:'Kid Ink', \r\n\t\timage:kidInk,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:36, \r\n\t\tname:'B.O.B', \r\n\t\timage:Bob,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:37, \r\n\t\tname:'27CLUB', \r\n\t\timage:\"https://is1-ssl.mzstatic.com/image/thumb/Music113/v4/0a/55/67/0a5567bf-63ad-9a26-5029-8742b18f8d4e/pr_source.png/800x800bb.jpeg\",\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 23,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t46\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:38, \r\n\t\tname:'Arizona Zervas', \r\n\t\timage:arizonaZervas,\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:39, \r\n\t\tname:'SAINt JHN', \r\n\t\timage:\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/SAINt_JHN_2018.jpg/1200px-SAINt_JHN_2018.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:40, \r\n\t\tname:'Kina', \r\n\t\timage:\"https://cdns-images.dzcdn.net/images/artist/ba417fffce8682b5094d732ad3d49765/264x264.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:41, \r\n\t\tname:'Adriana Proenza', \r\n\t\timage:adrianaProezna,\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:42, \r\n\t\tname:'Fetty Wap', \r\n\t\timage:fettyWap,\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:43, \r\n\t\tname:'Imanbek', \r\n\t\timage:\"https://cdn1.img.sputniknews-uz.com/img/07e5/03/0f/17749204_227:0:768:541_1920x0_80_0_0_f4e2bfe387d8690c6cb3fc128dcaed57.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:44, \r\n\t\tname:'KDDK', \r\n\t\timage:\"https://www.bongminesentertainment.com/wp-content/uploads/2021/01/KDDK-press-photo.jpg\",\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 103,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t47\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:45, \r\n\t\tname:'Brian O\\'Connor', \r\n\t\timage:'https://n1s1.hsmedia.ru/42/0f/52/420f52159635528d6c9113041a35a7f3/300x300_21_70fe4fecaff57e56a94b2397a6ddf682@620x620_0xc0a839a2_10034582461461587506.jpeg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:46, \r\n\t\tname:'Aurora Lane', \r\n\t\timage:'https://citaty.info/files/characters/181456.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:47, \r\n\t\tname:'Leonardo', \r\n\t\timage:'https://i.quotev.com/img/q/u/19/5/18/7pk32vqtql.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:48, \r\n\t\tname:'Aubrey Miller', \r\n\t\timage:'https://thumbs.dfs.ivi.ru/storage28/contents/8/b/8a3578d0280ffbb0de11e7fc6cb6f6.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:49, \r\n\t\tname:'Peter Parker', \r\n\t\timage:'https://stuki-druki.com/aforizms/Andrew-Garfield-01.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:50, \r\n\t\tname:'Tayler Durden', \r\n\t\timage:'https://i.guim.co.uk/img/media/44eddd0655bf11d1a7b029f15439f9f7b9efb201/181_28_2208_1324/master/2208.jpg?width=1200&height=1200&quality=85&auto=format&fit=crop&s=431814d186eb7fc54568cb7442a58f27',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:51, \r\n\t\tname:'Dave Hodgman', \r\n\t\timage:'https://i.pinimg.com/originals/fb/ab/f0/fbabf08ce7d0f8ed467a737d88ef2433.jpg',\r\n\t\tisVerified:false,\r\n\t\tnumberOfListenersPerMonth: 40,\r\n\t\tsubscribers:42,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:false\r\n\t},\r\n\t{\r\n\t\tid:52, \r\n\t\tname:\"XUITCASECITY\", \r\n\t\timage:'https://images.squarespace-cdn.com/content/v1/56f1aeae7da24fd2594ac9e1/1542717650261-VIDWSX14VA6NGAQL32Z1/ke17ZwdGBToddI8pDm48kK60W-ob1oA2Fm-j4E_9NQB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0kD6Ec8Uq9YczfrzwR7e2Mh5VMMOxnTbph8FXiclivDQnof69TlCeE0rAhj6HUpXkw/Xuitcasecity+by+Icon+PR',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 13,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n\t{\r\n\t\tid:53, \r\n\t\tname:\"Hanz Zimmer\", \r\n\t\timage:'https://i1.sndcdn.com/artworks-000068635202-eb0j3j-t500x500.jpg',\r\n\t\tisVerified:true,\r\n\t\tnumberOfListenersPerMonth: 13,\r\n\t\tsubscribers:12,\r\n\t\tsongs:[\r\n\t\t\t26\r\n\t\t],\r\n\t\tisAuthor:true\r\n\t},\r\n]","export default \"data:image/jpeg;base64,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\"","export default __webpack_public_path__ + \"static/media/quavo.931877b3.jpg\";","export default __webpack_public_path__ + \"static/media/Fetty-wap.6389d241.png\";","import React, {useEffect} from 'react'\r\nimport { authors } from '../../data/authors'\r\n\r\nexport const SmallImages = ({imagesList, borderColor = \"#fff\"}) => {\r\n\treturn (\r\n\t\t<div className = \"SmallImages\" style = {{marginRight:-7*(imagesList.length-1)}}>\r\n\t\t\t{imagesList.map((image, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"smallImgContainer\" style = {{border:`3px solid ${borderColor}`, transform:`translateX(${-15*index}px)`}} key = {index}>\r\n\t\t\t\t\t\t<img src={image} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function rightFormanForBigNumber(number){\r\n\tif(number < 1000) return number\r\n\r\n\tif(number < 1000000) return parseFloat(number/1000).toFixed(1) + 'K'\r\n\r\n\tif(number < 1000000000) return parseFloat(number / 1000000).toFixed(1) + 'M'\r\n}","import React, { useContext, useState } from 'react'\r\n\r\nconst ModalContext = React.createContext()\r\n\r\nexport const useModal = () =>{\r\n\treturn useContext(ModalContext)\r\n}\r\n\r\nexport const ModalClassProvider = ({children}) => {\r\n\tconst [openModal, setOpenModal] = useState(false)\r\n\tconst [content, setContent] = useState(<h1>Test</h1>)\r\n\t\r\n\tfunction toggleModal(){\r\n\t\tsetOpenModal(!openModal)\r\n\t}\r\n\r\n\tconst value = {\r\n\t\topenModal,\r\n\t\tsetOpenModal,\r\n\t\ttoggleModal, \r\n\t\tsetContent, \r\n\t\tcontent\r\n\t}\r\n\treturn (\r\n\t\t<ModalContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ModalContext.Provider>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nexport const useOutsideClick = (ref, setFunc) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tsetFunc(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n}\r\n","export default function getUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\tconst piece = (Math.random() * 16) | 0;\r\n\t\tconst elem = c === 'x' ? piece : (piece & 0x3) | 0x8;\r\n\t\treturn elem.toString(16);\r\n\t});\r\n}\r\n","import { firestore } from \"../firebase\"\r\nimport getUID from \"./getUID\"\r\n\r\nexport const createChat = async ( participants, chatUID = getUID(), chatName = \"\", chatImage = \"\", admins = []) => {\r\n\tconsole.log(participants, chatUID)\r\n\tfirestore.collection('chats').doc(chatUID).set({\r\n\t\tchatImage:chatImage,\r\n\t\tchatName:chatName,\r\n\t\tid:chatUID,\r\n\t\tmessages:[],\r\n\t\tparticipants:participants,\r\n\t\twallpaper:'undefined',\r\n\t\tadmin:participants.length > 2? admins:[],\r\n\t\tfullySeenBy:[],\r\n\t\ttyping:[],\r\n\t})\r\n\r\n\tparticipants.map(async personId=>{\r\n\t\tlet chatInfo = (await firestore.collection('users').doc(personId).get()).data().chats\r\n\t\tchatInfo.push(chatUID)\r\n\t\tfirestore.collection('users').doc(personId).update({\r\n\t\t\tchats:chatInfo\r\n\t\t})\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\nimport getUID from \"./getUID\"\r\n\r\nexport const findChatURL = async (friendId, currentUser, setShouldCreate, setFriendChatId) => {\r\n\tlet foundChat = false\r\n\tlet chatId = 0\r\n\tif (currentUser.chats) {\r\n\t\tconst chatInfo = (await firestore.collection('chats').where('participants', \"==\", [friendId, currentUser.uid]).get())\r\n\t\tconst chatInfo2 = (await firestore.collection('chats').where('participants', \"==\", [currentUser.uid, friendId]).get())\r\n\t\tchatInfo.docs.forEach(chat => {\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(false)\r\n\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\tchatId = chat.data().id\r\n\t\t})\r\n\t\tchatInfo2.docs.forEach(chat => {\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(false)\r\n\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\tchatId = chat.data().id\r\n\t\t})\r\n\r\n\t\tif (!foundChat) {\r\n\t\t\tconst random = getUID()\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(true)\r\n\t\t\tsetFriendChatId(random)\r\n\t\t\tchatId = random\r\n\t\t}\r\n\t\treturn chatId\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { FiMessageCircle } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport { findChatURL } from '../../functions/findChatURL'\r\n\r\nexport const ChatWithFriendButton = ({ data, color }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL(data.uid, currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [data.uid])\r\n\r\n\treturn (\r\n\t\t<Link to={`/chat/${friendChatId}`} style = {{display:'block', width:'fit-content', textDecoration: \"none\"}}>\r\n\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, data.uid], friendChatId) }} style = {{background:color}} className = \"ChatWithFriendButton\"><FiMessageCircle /> Messages</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const LoadingCircle = ({top = '20%'}) => {\r\n\treturn (\r\n\t\t<div className = \"LoadingCircle\" style = {{top:top}}>\r\n\t\t\t<img src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const sendMessage = (chatId, chatData, sender, messageText, attachedSongs = [], attachedAlbums = [], attachedAuthors = [], inResponseToMessage) => {\r\n\tif (messageText.length !== 0 || attachedSongs.length !== 0 || attachedAlbums.length !== 0 || attachedAuthors.length !== 0 || inResponseToMessage) {\r\n\t\tconst tempMessages = chatData.messages\r\n\r\n\t\ttempMessages.push({\r\n\t\t\tid: chatData.messages.length,\r\n\t\t\tsender: sender,\r\n\t\t\tmessage: messageText,\r\n\t\t\tsentTime: new Date().toString(),\r\n\t\t\tinResponseToMessage: inResponseToMessage || null,\r\n\t\t\tattachedSongs: attachedSongs,\r\n\t\t\tattachedAlbums: attachedAlbums,\r\n\t\t\tattachedAuthors: attachedAuthors,\r\n\t\t\tseenBy:[sender]\r\n\t\t})\r\n\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\tmessages: tempMessages\r\n\t\t})\r\n\t}\r\n}","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiSearch, FiXCircle} from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { BackBtn } from './BackBtn'\r\nimport { LoadingCircle } from './LoadingCircle'\r\n\r\nexport const SearchBar = ({value, setValue, setAllFoundSongs, setResultPlaylists, setResultAuthorList, focus = false, defaultSearchMode = undefined, inputText = \"Search for songs or for people\",defaultSongsListValue}) => {\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [foundAnything, setFoundAnything] = useState(false)\r\n\tconst [searchMode, setSearchMode] = useState(0)\r\n\tconst inputRef = useRef(null)\r\n\tlet typingTimeout\r\n\r\n\tasync function findSongs(){\r\n\t\tconst foundItemTempArray = []\r\n\t\tlet response = firestore.collection('songs')\r\n\t\t\t.where('name', \"==\", value)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tif(defaultSongsListValue && defaultSongsListValue.length){\r\n\t\t\t\tif(defaultSongsListValue.map(song=>song.id).includes(item.id)) foundItemTempArray.push(item.data())\r\n\t\t\t}\r\n\t\t\telse foundItemTempArray.push(item.data())\r\n\t\t})\r\n\r\n\t\tif(foundItemTempArray.length !== 0 && searchMode === 0 && defaultSearchMode === undefined) {\r\n\t\t\tfoundItemTempArray.forEach(async song=>{\r\n\t\t\t\tconst authorsIdsArray = (await firestore.collection('songs').doc(song.id).get()).data().authors\r\n\t\t\t\tauthorsIdsArray.forEach(async (author, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst authorData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\tsetResultAuthorList(prev=>[...prev, authorData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetAllFoundSongs(foundItemTempArray)\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length !== 0)setFoundAnything(true)\r\n\t}\r\n\r\n\tasync function findAuthors(){\r\n\t\tconst foundItemTempArray = []\r\n\t\tconst response = firestore.collection('users')\r\n\t\t\t.where('displayName', \"==\", value)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tfoundItemTempArray.push(item.data())\r\n\t\t})\r\n\t\tif(defaultSearchMode === undefined && foundItemTempArray.length !== 0 && searchMode === 0) {\r\n\t\t\t\r\n\t\t\tfoundItemTempArray.forEach(async author=>{\r\n\t\t\t\tconst songsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownSongs\r\n\t\t\t\tconst albumsIdsArray = (await firestore.collection('users').doc(author.uid).get()).data().ownPlaylists\r\n\t\t\t\tsongsIdsArray.forEach(async (songId, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\t\t\tsetAllFoundSongs(prev=>[...prev, songData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\talbumsIdsArray.forEach(async (albumId, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst albumData = (await firestore.collection('playlists').doc(albumId).get()).data()\r\n\t\t\t\t\t\tsetResultPlaylists(prev=>[...prev, albumData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetResultAuthorList(foundItemTempArray)\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length !== 0)setFoundAnything(true)\r\n\t}\r\n\r\n\tasync function findPlaylists(){\r\n\t\tconst foundItemTempArray = []\r\n\t\tconst response = firestore.collection('playlists')\r\n\t\t\t.where('name', \"==\", value).where('isPrivate', '==', false)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tfoundItemTempArray.push(item.data())\r\n\t\t})\r\n\t\tif(foundItemTempArray.length !== 0 && searchMode === 0) {\r\n\t\t\t\r\n\t\t\tfoundItemTempArray.forEach(async playlist=>{\r\n\t\t\t\tconst songsIdsArray = (await firestore.collection('playlists').doc(playlist.id).get()).data().authors\r\n\t\t\t\tsongsIdsArray.forEach(async (author, index)=>{\r\n\t\t\t\t\tif(index < 3){\r\n\t\t\t\t\t\tconst songData = (await firestore.collection('users').doc(author.uid).get()).data()\r\n\t\t\t\t\t\tsetResultAuthorList(prev=>[...prev, songData])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tsetResultPlaylists(foundItemTempArray)\r\n\t\tsetLoading(false)\r\n\t\tif(foundItemTempArray.length !== 0)setFoundAnything(true)\r\n\t}\r\n\r\n\tfunction findSomething() {\r\n\t\tsetLoading(true)\r\n\t\tsetFoundAnything(false)\r\n\t\tif(value !== \"\"){\r\n\r\n\t\t\tif(defaultSearchMode === undefined){\r\n\t\t\t\tif(searchMode === 0 || searchMode === 1) {\r\n\t\t\t\t\tfindSongs()\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif(searchMode === 0 || searchMode === 2) \r\n\t\t\t\t{\r\n\t\t\t\t\tfindAuthors()\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif(searchMode === 0 || searchMode === 3) \r\n\t\t\t\t{\r\n\t\t\t\t\tfindPlaylists()\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tswitch(defaultSearchMode){\r\n\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\tfindSongs()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\tfindPlaylists()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"authors\":\r\n\t\t\t\t\t\tfindAuthors()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tfindSongs()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(defaultSongsListValue !== undefined) setAllFoundSongs(defaultSongsListValue)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\tsetMessage('Not found')\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(focus) inputRef.current.focus()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSomething()\r\n\t}, [searchMode])\r\n\r\n\t\r\n\treturn (\r\n\t\t<div> \r\n\t\t\t<div className=\"searchBar\">\r\n\t\t\t\t<div className=\"searchBarElement\">\r\n\t\t\t\t\t<FiSearch />\r\n\t\t\t\t\t<span onClick={() => value.length ? setValue(\"\") : null}>{value.length ? <FiXCircle /> : null}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input \r\n\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\tplaceholder={inputText} \r\n\t\t\t\t\tvalue={value} \r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value)} \r\n\t\t\t\t\tonKeyUp={() => timerUpFunc(findSomething)} \r\n\t\t\t\t\tonKeyDown={() => {clearTimeout(typingTimeout)} } \r\n\t\t\t\t\tref = {inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"searchFilters\" style = {defaultSearchMode !== undefined?{display:'none'}:{}}>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(0)} style = {searchMode === 0?{background:'var(--lightBlue)'}:{}}>All</button>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(1)} style = {searchMode === 1?{background:'var(--lightBlue)'}:{}}>Songs</button>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(2)} style = {searchMode === 2?{background:'var(--lightBlue)'}:{}}>Authors</button>\r\n\t\t\t\t\t<button onClick = {()=>setSearchMode(3)} style = {searchMode === 3?{background:'var(--lightBlue)'}:{}}>Playlists</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t{loading ?\r\n\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px', marginTop:'40px' }}>\r\n\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t!foundAnything && value.length !== 0?<h2>{message}</h2>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport shareWithFriends from '../../functions/shareWithManyFriends'\r\nimport { PersonTiny } from './PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const FriendsListToShareWith = ({ item, whatToShare = 'song' }) => {\r\n\tconst { yourFriends } = useSong()\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [shared, setShared] = useState(false)\r\n\tconst { toggleModal } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [foundPeople, setFoundPeople] = useState([])\r\n\tfunction removeFriendFromList(data) {\r\n\t\tconst filtered = chosenFriends.filter(peopleId => peopleId !== data.uid)\r\n\t\treturn setChosenFriends(filtered)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (shared) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleModal()\r\n\t\t\t\tsetShared(false)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}, [shared])\r\n\r\n\r\n\treturn (\r\n\t\t<div className='FriendsListToShareWith'>\r\n\t\t\t{shared ?\r\n\t\t\t\t<div className=\"successMessageSent\">\r\n\t\t\t\t\t<IoIosCheckmarkCircleOutline />\r\n\t\t\t\t\tSong has sent!\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundPeople} defaultSearchMode={\"authors\"} inputText = {\"Search for friends\"}/>\r\n\t\t\t{/* <h2>Share with friends</h2> */}\r\n\t\t\t<div>\r\n\t\t\t\t{foundPeople.length > 0 ?\r\n\t\t\t\t\tfoundPeople.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} showChoose chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}):\r\n\t\t\t\t\tyourFriends.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} showChoose chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Your message\" style={{ margin: 0 }} onChange={e => setMessageText(e.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"shareBtn\"\r\n\t\t\t\t\tstyle={!chosenFriends.length ?\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (chosenFriends.length > 0) {\r\n\t\t\t\t\t\t\tshareWithFriends(chosenFriends, currentUser, (whatToShare === 'author' ? item.uid : item.id), whatToShare, messageText);\r\n\t\t\t\t\t\t\tsetShared(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\tShare with {chosenFriends.length} {chosenFriends.length > 1 ? \"friends\" : \"friend\"}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\";\r\nimport { createChat } from \"./createChat\";\r\nimport { findChatURL } from \"./findChatURL\";\r\nimport getUID from \"./getUID\";\r\nimport { sendMessage } from \"./sendMessage\";\r\n\r\nexport default function shareWithFriends(shareList, currentUser, itemId, whatToShare, messageText = \"\") {\r\n\t//Сделать через функцию sendMessage\r\n\tshareList.map(async userId=>{\r\n\t\tconst chatId = findChatURL(userId, currentUser, ()=>null, ()=>null)\r\n\t\tchatId.then(async (res)=>{\r\n\t\t\tlet chatData = (await firestore.collection('chats').doc(res).get()).data()\r\n\t\t\tif(chatData !== undefined){\r\n\t\t\t\tswitch(whatToShare){\r\n\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tconst chatUID = getUID()\r\n\t\t\t\tcreateChat([currentUser.uid, userId], chatUID).then(async ()=>{\r\n\t\t\t\t\tchatData = (await firestore.collection('chats').doc(chatUID).get()).data()\r\n\t\t\t\t\tswitch(whatToShare){\r\n\t\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsendMessage(chatUID, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\r\n\t\t\t\r\n\t\t})\r\n\t})\r\n\r\n\t\r\n}","import React from 'react'\r\n\r\nexport const RadioBtn = ({currentActive, id, label, onClick}) => {\r\n\treturn (\r\n\t\t<div className = \"RadioBtn\" id = {id} onClick = {onClick}>\r\n\t\t\t<span className = \"radioLabel\" style = {currentActive === id?{color:'var(--blue)', opacity:1, fontWeight:'bold'}:{}}>\r\n\t\t\t\t{label}\r\n\t\t\t</span>\r\n\t\t\t<span className = \"radioCircle\" style = {currentActive === id?{background:'var(--blue)'}:{}}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ColorCircles = ({play}) => {\r\n\treturn (\r\n\t\t<div className = 'ColorCircles' style = {!play?{opacity:0, transform:\"scale(.95)\"}:{}}>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export const friends = {\r\n\t\"30\":[\r\n\t\t31, 45, 46, 47, 48, 49, 50, 51\r\n\t]\r\n}","export const chat = {\r\n\t\"1234561231\":{\r\n\t\tid:\"1234561231\",\r\n\t\tparticipants:[30, 31],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[23, 12, 22],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[3],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'1',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0, 1, 5],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:1,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[4],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:3,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:0,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:4,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:0,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:5,\r\n\t\t\t\tsender:31,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:4,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:6,\r\n\t\t\t\tsender:31,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:1,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[6],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:7,\r\n\t\t\t\tsender:31,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:2,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[2],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t]\r\n\t},\r\n\t\"5147654342\":{\r\n\t\tid:\"5147654342\",\r\n\t\tparticipants:[30, 34],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'1',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[4],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:34,\r\n\t\t\t\tmessage:'3',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:1,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[5],\r\n\t\t\t},\r\n\t\t]\r\n\t},\r\n\t\"1456526216\":{\r\n\t\tid:\"1456526216\",\r\n\t\tparticipants:[30, 45],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:45,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:45,\r\n\t\t\t\tmessage:'1',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:2,\r\n\t\t\t\tsender:45,\r\n\t\t\t\tmessage:'2',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[4],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:3,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'2',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[],\r\n\t\t\t\tattachedAlbums:[3],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t]\r\n\t},\r\n\t\"1431626216\":{\r\n\t\tid:\"1431626216\",\r\n\t\tparticipants:[30, 48],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:48,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'4',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[20],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\r\n\t\t]\r\n\t},\r\n\t\"1435324567\":{\r\n\t\tid:\"1435324567\",\r\n\t\tparticipants:[30, 49],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t\t{\r\n\t\t\t\tid:0,\r\n\t\t\t\tsender:48,\r\n\t\t\t\tmessage:'0',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[0],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:1,\r\n\t\t\t\tsender:30,\r\n\t\t\t\tmessage:'4',\r\n\t\t\t\tsentTime:'May 2, 2021 11:50:12',\r\n\t\t\t\tinResponseToMessage:null,\r\n\t\t\t\tattachedSongs:[20],\r\n\t\t\t\tattachedAlbums:[],\r\n\t\t\t\tattachedAuthors:[],\r\n\t\t\t},\r\n\r\n\t\t]\r\n\t},\r\n\t\"1435324517\":{\r\n\t\tid:\"1435324517\",\r\n\t\tparticipants:[30, 50],\r\n\t\timage:'',\r\n\t\tmessages:[\r\n\t\t]\r\n\t},\r\n\r\n}","export default function createRandomId(len = 10) {\r\n\tlet str = \"\"\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tlet randNum = Math.floor(Math.random() * 10)\r\n\t\tstr += randNum\r\n\t}\r\n\treturn str\r\n}","import { chat } from \"../data/chat\"\r\nimport createRandomId from \"./createRandomId\"\r\n\r\nfunction createChat(id, songId, albumId = null, authorId = null) {\r\n\tconst randId = createRandomId()\r\n\tchat[randId] =\r\n\t{\r\n\t\tid: randId,\r\n\t\tparticipants: [30, parseInt(id)],\r\n\t\timage: '',\r\n\t\tmessages: [\r\n\t\t\t{\r\n\t\t\t\tid: 0,\r\n\t\t\t\tsender: 30,\r\n\t\t\t\tmessage: '',\r\n\t\t\t\tsentTime: new Date(),\r\n\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\tattachedSongs: [songId],\r\n\t\t\t\tattachedAlbums: albumId !== null? [albumId]:[],\r\n\t\t\t\tattachedAuthors: authorId !== null? [authorId]:[],\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n\r\nexport default function shareWithOneFriend(e, songId, albumId = null, authorId = null) {\r\n\tconsole.log(\"id:\",e.target.id, \"songId:\", songId)\r\n\tlet isThereChat = false\r\n\tObject.keys(chat).forEach((chatId) => {\r\n\t\tif (chat[chatId].participants.includes(parseInt(e.target.id)) && chat[chatId].participants.includes(30)) {\r\n\t\t\tisThereChat = true\r\n\t\t\tchat[chatId].messages.push(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: chat[chatId].messages.length,\r\n\t\t\t\t\tsender: 30,\r\n\t\t\t\t\tmessage: '',\r\n\t\t\t\t\tsentTime: new Date(),\r\n\t\t\t\t\tinResponseToMessage: null,\r\n\t\t\t\t\tattachedSongs: [songId],\r\n\t\t\t\t\tattachedAlbums: albumId !== null? [albumId]:[],\r\n\t\t\t\t\tattachedAuthors: authorId !== null? [authorId]:[],\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t})\r\n\r\n\tif (!isThereChat) createChat(e.target.id, songId, albumId, authorId)\r\n}","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from '../FullScreenPlayer/colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { FiCheck, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { songs } from '../../data/songs'\r\nimport { MdPlaylistAdd } from 'react-icons/md'\r\nimport { friends } from '../../data/friends'\r\nimport { authors } from '../../data/authors'\r\nimport shareWithOneFriend from '../../functions/shareWithOneFriend'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nexport const SongItemChoice = ({ song, listOfSongs, setListOfSongs, showListens = false, listens = 0, isNewSong = false }) => {\r\n\tconst { setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setYourSongs, yourPlaylists, currentSongQueue, setCurrentSongInQueue, fetchYourSongs } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst {currentUser} = useAuth()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\tfunction addSongToList() {\r\n\t\tif(!listOfSongs.includes(song.id)){\r\n\t\t\treturn setListOfSongs(prev=>[...prev, song.id])\r\n\t\t}\r\n\r\n\t\tlet filteredList = listOfSongs.filter(el=>el !== song.id)\r\n\t\tsetListOfSongs(filteredList)\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToLibrary(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (currentUser.addedSongs.includes(song.id)) {\r\n\t\t\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\taddedSongs:newList\r\n\t\t\t})\r\n\t\t\tfetchYourSongs()\r\n\t\t\tsetOpenMoreWindow(false)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet newList = currentUser.addedSongs\r\n\t\tnewList.push(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedSongs:newList\r\n\t\t})\r\n\t\tfetchYourSongs()\r\n\t}\r\n\r\n\tfunction addOrDeleteSongToPlaylist(e) {\r\n\t\te.stopPropagation()\r\n\t\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\t\tyourPlaylists[e.target.id].songs = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tyourPlaylists[e.target.id].songs.push(song.id)\r\n\t}\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\tNew\r\n\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'SongItem ' + (listOfSongs.includes(song.id) ? \"inList\" : \"\")} onClick={addSongToList} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t{song.name}\r\n\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t<button onClick={addOrDeleteSongToLibrary}>\r\n\t\t\t\t\t{!currentUser.addedSongs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button>\r\n\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{openMoreWindow ?\r\n\t\t\t\t(\r\n\t\t\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToLibrary}>{currentUser.addedSongs.includes(song.id) ? <span><FiTrash2 />Delete</span> : <span><FiPlusCircle />Add</span>}</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\t\t\t\t\tif (!playlist.isAlbum && playlist.authors.includes(30))\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToPlaylist} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{!yourPlaylists[key].songs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<MdPlaylistAdd />Add to playlist\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t{friends['30'].map((friendId, key) => {\r\n\t\t\t\t\t\t\t\t\tconst friend = authors[friendId]\r\n\t\t\t\t\t\t\t\t\tif (key < 3)\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={(e)=>shareWithOneFriend(e, song.id)} key={key} id={friendId}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItemImgWrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={friend.image} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{friend.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiInfo />Info</div>\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) :\r\n\t\t\t\tnull\r\n\t\t\t}\r\n\r\n\t\t</div >\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const addSongToLibrary = (e, song, currentUser) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = []\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tif (!currentUser.addedAuthors.includes(authorId)) {\r\n\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t}\r\n\t})\r\n\tlet newList = currentUser.addedSongs\r\n\tnewList.push(song.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: [...finalAuthorsUIDS, ...currentUser.addedAuthors]\r\n\t})\r\n\r\n\tfinalAuthorsUIDS.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers++\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n}","export default function filterArrayWithArray(whatToFilter, withWhatToFilter){\r\n\treturn whatToFilter.filter(\r\n\t\tfunction (e) {\r\n\t\t\treturn this.indexOf(e) < 0;\r\n\t\t},\r\n\t\twithWhatToFilter\r\n\t);\r\n}","import { firestore } from \"../firebase\"\r\nimport filterArrayWithArray from \"./filterArrayWithArray\"\r\n\r\nexport const deleteSongFromLibrary = (e, song, currentUser, yourSongs) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = [] // массив авторов, песни которых еще остались после удаления выбранной песни\r\n\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tyourSongs.forEach(songObj => {\r\n\t\t\tif (newList.includes(songObj.id) && songObj.authors.find(a => a.uid === authorId)) {\r\n\t\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst filtered = filterArrayWithArray(songAuthorsUIDS, finalAuthorsUIDS) // массив людей, которых нужно убрать из библиотеки\r\n\tconst finalFilteredAuthors = filterArrayWithArray(currentUser.addedAuthors, filtered) // массив людей, оставшихся в библиотеке\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: finalFilteredAuthors\r\n\t})\r\n\r\n\tfiltered.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers--\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n\t\r\n}","import { useAuth } from \"../../functionality/AuthContext\"\r\nimport { addSongToLibrary } from \"../../functions/addSongToLibrary\"\r\nimport { deleteSongFromLibrary } from \"../../functions/deleteSongFromLibrary\"\r\nimport {FiPlusCircle, FiTrash2} from 'react-icons/fi'\r\nimport { useSong } from \"../../functionality/SongPlay/SongContext\"\r\nexport default function AddOrDeleteButtonFull({song}) {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {yourSongs} = useSong()\r\n\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\treturn <span onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t<FiPlusCircle />\r\n\t\t\tAdd\r\n\t\t</span>\r\n\t}\r\n\telse {\r\n\t\treturn <span onClick={(e) => deleteSongFromLibrary(e, song, currentUser, yourSongs)}>\r\n\t\t\t<FiTrash2 />\r\n\t\t\tDelete\r\n\t\t</span>\r\n\t}\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const PersonTinyVerticalItem = ({person}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t<div className = \"PersonTinyVerticalItem\">\r\n\t\t\t\t<div className=\"personTinyImage\">\r\n\t\t\t\t\t<img src={person.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"personTinyName\">\r\n\t\t\t\t\t{person.displayName}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\nimport { firestore } from '../../firebase';\r\nimport { PersonTinyVerticalItem } from './PersonTinyVerticalItem'\r\n\r\nexport const PersonTinyList = ({data, title}) => {\r\n\tconst [listOfPeople, setListOfPeople] = useState([])\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(listOfPeople.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfPeople])\r\n\r\n\tfunction fetchFriends(){\r\n\t\tsetListOfPeople([])\r\n\t\tdata.friends.forEach(async personObj => {\r\n\t\t\tif(personObj.status === 'added'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(personObj.uid).get()).data()\r\n\t\t\t\tsetListOfPeople(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetListOfPeople([])\r\n\t\tfetchFriends()\r\n\t}, [data.uid])\r\n\treturn listOfPeople.length > 0? (\r\n\t\t<div className = 'PersonTinyList'>\r\n\t\t\t{title && <h2>{title}</h2>}\r\n\t\t\t<div style = {{position:'relative'}}>\t\r\n\t\t\t\t<div className=\"personTinyListWrapper\" ref = {wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t\t{listOfPeople.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { PersonTinyList } from '../AuthorPage/PersonTinyList'\r\nimport {CgMusicNote} from 'react-icons/cg'\r\nimport {PersonTinyVerticalItem} from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nexport const SongInfo = ({song}) => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tconst {displayAuthors} = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisSong] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisSong(){\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisSong([])\r\n\t\tconst people = await firestore.collection('users').where('addedSongs', 'array-contains', songData.id).get()\r\n\t\tpeople.forEach(person=>{\r\n\t\t\tif(currentUser.friends.find(friend=>friend.uid === person.data().uid)) setFriendsThatHaveThisSong(prev=>[...prev, person.data()])\r\n\t\t\tconsole.log(person.data())\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(song !== undefined) setSongData(song)\r\n\t}, [song && song.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisSong()\r\n\t}, [songData.id])\r\n\r\n\treturn (\r\n\t\t<div className = 'SongInfo'>\r\n\t\t\t<div className=\"songImage\">\r\n\t\t\t\t<img src={songData.cover} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className = \"songInfoContent\">\r\n\t\t\t\t<h3 style = {{color:songData.imageColors[0]}}>{songData.name}</h3>\r\n\t\t\t\t<span>{displayAuthors(songData.authors, ', ')}</span>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center', opacity:'0.6', fontSize:'.9em', position:\"relative\"}} className = \"listensAndDate\">\r\n\t\t\t\t\t<p className = \"infoListens\" style = {{marginRight:'15px', position:'relative'}}>{songData.listens} <CgMusicNote /></p>\r\n\t\t\t\t\t<span>{displayDate(songData.releaseDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style = {{margin:'10px 0'}}>{friendsThatHaveThisSong.length > 0? 'Friends that listen that song': 'None of your friends listens this'}</h4>\r\n\t\t\t\t<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t{friendsThatHaveThisSong.length <= 0?<button className = \"shareBtn\" style = {{minHeight:'35px', background:songData.imageColors[0]}} onClick = {()=>{setContent(<FriendsListToShareWith item = {songData} whatToShare = {'song'}/>)}}>Share</button>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function shortWord(word, len = 50){\r\n\treturn word.substr(0, len) + (word.length > len?\"...\":\"\")\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport const addOrDeleteSongToPlaylist = (e, playlistId, song, yourPlaylists) => {\r\n\r\n\tif (yourPlaylists[e.target.id].songs.includes(song.id)) {\r\n\t\tconst newSongsList = yourPlaylists[e.target.id].songs.filter(songNum => songNum !== song.id)\r\n\t\tyourPlaylists[e.target.id].songs = newSongsList\r\n\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\tsongs: newSongsList\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n\tconst newSongsList = yourPlaylists[e.target.id].songs\r\n\tnewSongsList.unshift(song.id)\r\n\tyourPlaylists[e.target.id].songs = newSongsList\r\n\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\tsongs: newSongsList\r\n\t})\r\n}","import React, { useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { addOrDeleteSongToPlaylist } from '../../functions/addOrDeleteSongToPlaylist'\r\nimport {FiPlusCircle, FiCheck} from 'react-icons/fi'\r\nexport const AddToPlaylists = ({song}) => {\r\n\tconst {yourPlaylists, currentSongData} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [songData, setsongData] = useState(song || currentSongData)\r\n\treturn (\r\n\t\t<div className = \"AddToPlaylists\">\r\n\t\t\t<div style = {{display:'flex', flexDirection:'column'}}>\r\n\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={(e) => addOrDeleteSongToPlaylist(e, playlist.id, songData, yourPlaylists)} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t{!playlist.songs.includes(songData.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from './colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { FiCheck, FiFlag, FiInfo, FiMoreVertical, FiPlusCircle, FiShare, FiTrash2 } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { MdKeyboardArrowRight, MdPlaylistAdd } from 'react-icons/md'\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { SongInfo } from '../Basic/SongInfo'\r\nimport { IoIosCheckmarkCircle, IoIosRadioButtonOff } from 'react-icons/io'\r\nimport { deleteSongFromLibrary } from '../../functions/deleteSongFromLibrary'\r\nimport { addSongToLibrary } from '../../functions/addSongToLibrary'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {AddToPlaylists} from './AddToPlaylists'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nexport const SongItem = ({ song, localIndex, showListens = false, isNewSong = false, listOfChosenSongs, setListOfSongs }) => {\r\n\tconst { yourSongs, setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setCurrentSongInQueue } = useSong()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst { currentUser } = useAuth()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction chooseSongItem() {\r\n\t\tsetCurrentSong(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: song.id\r\n\t\t})\r\n\t\tsetCurrentSongInQueue(localIndex)\r\n\t\tif (song.id === currentSong && play) {\r\n\t\t\tsongRef.current.pause();\r\n\t\t\tsetPlay(false)\r\n\t\t\t// clearTimeout(listenCountTimeOut)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsongRef.current.play();\r\n\t\tsetPlay(true)\r\n\t}\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(song.listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\tfunction addOrDeleteButton() {\r\n\t\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\t\treturn <button onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <button onClick={(e) => deleteSongFromLibrary(e, song, currentUser, yourSongs)}>\r\n\t\t\t\t<FiCheck />\r\n\t\t\t</button>\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenSongs} setListOfChosenItems = {setListOfSongs} itemId = {song.id}/>\r\n\t\t\t<div className={'SongItem ' + (song.id === currentSong && play ? \"playingNow\" : \"\")} onClick={chooseSongItem} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img src={song.cover} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t{shortWord(song.name, window.innerWidth > 1000?30:17) }\r\n\t\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMoreBtn\" onClick={openSongItemMoreWindow}>\r\n\t\t\t\t\t{addOrDeleteButton()}\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song = {song}/></div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t\t<AddToPlaylists song = {song}/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div >\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const MoreBtn = ({func, lenOfList, maxLen = 5, boolVal}) => {\r\n\treturn (\r\n\t\t<div onClick = {lenOfList > maxLen?func:null} className = \"MoreBtn\" style = {lenOfList <= maxLen?{display:'none'}:{}}>\r\n\t\t\t<button style = {boolVal?{background:'var(--pink)', color:'#ff8db2'}:{}}>\r\n\t\t\t\t{boolVal?\"Close\":\"More\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { MoreBtn } from './MoreBtn'\r\n\r\nexport const TitleWithMoreBtn = ({title, func, boolVal, lenOfList, maxLen = 5, marginBottom = 0}) => {\r\n\treturn lenOfList !== 0?(\r\n\t\t<div className=\"topTitle\">\r\n\t\t\t<h2 style = {{marginBottom:marginBottom}}>{title}</h2>\r\n\t\t\t<MoreBtn func={func} boolVal={boolVal} lenOfList={lenOfList} maxLen = {maxLen}/>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SearchBar } from './SearchBar'\r\nimport { TitleWithMoreBtn } from './TitleWithMoreBtn'\r\n\r\nexport const SongList = ({ listOfSongs, source, title = \"\", showListens = false, isNewSong = false, showCount = false, listOfChosenSongs, setListOfSongs, showSearch = false, displayIfEmpty }) => {\r\n\tconst { setCurrentSongQueue, setCurrentSongPlaylistSource } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [showMoreSongs, setShowMoreSongs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displaySongs, setDisplaySongs] = useState(listOfSongs)\r\n\tuseEffect(() => {\r\n\t\tsetDisplaySongs(listOfSongs)\r\n\t}, [listOfSongs])\r\n\t\r\n\tfunction setQueueInSongList() {\r\n\t\tif(source !== 'no'){\r\n\t\t\tsetCurrentSongQueue(listOfSongs)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tconst listSongsIds = listOfSongs.map(song => song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"SongList\" onClick={setQueueInSongList}>\r\n\t\t\t{title.length !== 0 ? <TitleWithMoreBtn title={title} func={() => setShowMoreSongs(!showMoreSongs)} boolVal={showMoreSongs} lenOfList={listOfSongs.length} /> : null}\r\n\t\t\t{showSearch?<SearchBar value = {searchValue} setValue = {setSearchValue} allFoundSongs = {displaySongs} setAllFoundSongs = {setDisplaySongs} defaultSearchMode = {\"songs\"} defaultSongsListValue = {listOfSongs} inputText = {\"Search for songs\"}/>:null}\r\n\t\t\t{displaySongs.map((song, index) => {\r\n\t\t\t\tif (title.length !== 0) {\r\n\t\t\t\t\tif (showMoreSongs) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (index < 5) {\r\n\t\t\t\t\t\t\treturn <span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t{listOfSongs.length === 0?displayIfEmpty:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const CustomizeAlbum = ({ playlist }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(playlist.name)\r\n\tconst [playlistCover, setPlaylistCover] = useState(playlist.image)\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(playlist.authors)\r\n\tconst [releaseDate, setReleaseDate] = useState(playlist.creationDate)\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState(playlist.songs)\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(playlist.isAlbum?1:0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(playlist.isPrivate ? 1 : 0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(playlist.imageColors)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (songsSearch.length === 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tconsole.log(songId)\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetLoadingSongs(false)\r\n\t\t\t\tconsole.log(songData)\r\n\t\t\t\tsetAllSongs(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t}\r\n\t}, [songsSearch])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend => { if (friend.status === 'added') return friend.uid })\r\n\t\tconst response = currentUser.isAdmin ?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue) :\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (chosenAuthors.length > playlist.authors.length) {\r\n\t\t\tconst newAuthors = chosenAuthors.filter(author => { return !playlist.authors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(playlist.id)\r\n\t\t\t\tconsole.log(authorPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(chosenAuthors.length < playlist.authors.length){\r\n\t\t\tconst newAuthors = playlist.authors.filter(author => { return !chosenAuthors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tconst filteredPlaylists = authorPlaylists.filter(playlistId => playlistId !== playlist.id)\r\n\t\t\t\tconsole.log(filteredPlaylists)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: filteredPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfirestore.collection('playlists').doc(playlist.id).update(\r\n\t\t\t{\r\n\t\t\t\tid: playlist.id,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: playlist.listens,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:playlist.subscribers,\r\n\t\t\t\tisAlbum:playlistStatus === 1,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate == true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\t// console.log([5, 4, 2, 1])\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={() => timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Search for songs\" value={songsSearch} onChange={(e) => setSongsSearch(e.target.value)} onKeyDown={findSongs} onKeyUp={() => timerUpFunc(findSongs)} onKeyDown={() => { return clearTimeout(typingTimeout) }} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<SongList listOfSongs={allSongs} source={'no'} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// allSongs.map((data, index) => {\r\n\t\t\t\t\t\t\t// return (\r\n\t\t\t\t\t\t\t// \t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t// )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Update playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nexport const addAuthorToLibrary = async (authorData , currentUser) => {\r\n\tconst addedAuthors = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedAuthors\r\n\taddedAuthors.push(authorData.uid)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedAuthors: addedAuthors\r\n\t})\r\n\tlet subscribers = authorData.subscribers\r\n\tsubscribers++\r\n\tfirestore.collection('users').doc(authorData.uid).update({\r\n\t\tsubscribers: subscribers\r\n\t})\r\n}","import { firestore } from \"../firebase\"\r\n\r\nexport default function addFriend(friendData, currentUser){\r\n\tconst updatedDataForFriend = friendData.friends\r\n\tconst updatedDataForCurrentUser = currentUser.friends\r\n\tupdatedDataForFriend.push({status:'requested', uid:currentUser.uid})\r\n\tupdatedDataForCurrentUser.push({status:'awaiting', uid:friendData.uid})\r\n\r\n\tfirestore.collection('users').doc(friendData.uid).update({\r\n\t\tfriends:updatedDataForFriend\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends:updatedDataForCurrentUser\r\n\t})\r\n\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport displayDate from '../../functions/displayDate'\r\n\r\nexport const LastSeen = ({userUID}) => {\r\n\tconst [lastSeen, setLastSeen] = useState(\"\")\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t\tif(doc.data().online === undefined) setLastSeen(\"offline\")\r\n\t\t\t\telse if(!isOnline) setLastSeen(\"last seen \" + displayDate(doc.data().online, 3))\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<span>Online</span>:<span>{lastSeen}</span>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiEdit2, FiFlag, FiHeadphones, FiInfo, FiMoreVertical, FiPlusCircle, FiSettings, FiShare, FiTrash, FiUserCheck, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { SmallImages } from './SmallImages'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { IoMdExit } from 'react-icons/io'\r\nimport { firestore } from '../../firebase'\r\nimport rightFormanForBigNumber from '../../functions/rightFormatForBigNumber'\r\nimport { CgCheckO, CgLock } from 'react-icons/cg'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { ChatWithFriendButton } from './ChatWithFriendButton'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai'\r\nimport { BiLoaderAlt } from 'react-icons/bi'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\nimport { CustomizeAlbum } from '../AlbumPage/CustomizeAlbum'\r\nimport { addAuthorToLibrary } from '../../functions/addAuthorToLibrary'\r\nimport addFriend from '../../functions/addFriend'\r\nimport { LastSongListened } from './LastSongListened'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nexport const Header = ({ data, headerColors }) => {\r\n\tconst { displayAuthors, setYourPlaylists } = useSong()\r\n\tconst [albumAuthors, setAlbumAuthors] = useState([])\r\n\tconst [authorsImages, setAuthorsImages] = useState([])\r\n\tconst { currentUser, logout } = useAuth()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst isFriend = currentUser.friends.find(friend=>(friend.uid === data.uid && friend.status === 'added'))\r\n\tconst moreWindowRef = useRef(null)\r\n\tuseOutsideClick(moreWindowRef, setOpenMoreWindow)\r\n\tasync function fetchAuthorsData() {\r\n\t\tif (data.authors !== undefined && !albumAuthors.length) {\r\n\t\t\tconst ids = data.authors.map(author => author.uid)\r\n\t\t\tconst response = firestore.collection(\"users\").where(\"uid\", \"in\", ids)\r\n\t\t\tconst authrorsData = await response.get();\r\n\t\t\tauthrorsData.docs.forEach((a) => {\r\n\t\t\t\tconsole.log(a.data())\r\n\t\t\t\tsetAlbumAuthors(prev => [...prev, a.data()])\r\n\t\t\t\tsetAuthorsImages(prev => [...prev, a.data().photoURL])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [data])\r\n\r\n\tfunction displayCreationDateIfExists() {\r\n\t\treturn data.creationDate !== undefined ?\r\n\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t<span>{displayDate(data.creationDate)}</span>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction isAlbumOrIsAuthor() {\r\n\t\treturn data.authors !== undefined ? data.isAlbum ? <h5>Album</h5> : <h5>Playlist</h5> : data.isAuthor ? <h5>Author</h5> : <h5>User {data.authors === undefined && isFriend?<LastSeen userUID = {data.uid}/>:null}</h5>\r\n\t}\r\n\r\n\tfunction showCreatorsIfExist() {\r\n\t\treturn data.authors !== undefined ?\r\n\t\t\t<div className=\"headerAuthorsImagesAndNames\">\r\n\t\t\t\t<SmallImages imagesList={authorsImages} borderColor={headerColors[2]} />\r\n\t\t\t\t<div className=\"headerAuthors\">{displayAuthors(albumAuthors, \", \")}</div>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction findIfIsVerified() {\r\n\t\treturn data.isVerified ? <ImCheckmark style={{ color: headerColors[0] }} /> : null\r\n\t}\r\n\r\n\tasync function addPlaylistToLibrary() {\r\n\t\tconst addedPlaylists = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedPlaylists\r\n\t\taddedPlaylists.push(data.id)\r\n\t\tsetYourPlaylists(prev => [data.id, ...prev])\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\taddedPlaylists: addedPlaylists\r\n\t\t})\r\n\t}\r\n\r\n\t\r\n\r\n\t\r\n\r\n\tfunction deleteFriend(){\r\n\r\n\t}\r\n\r\n\tfunction whatButtonToRender() {\r\n\t\tif (data.authors) {\r\n\t\t\tif (currentUser.ownPlaylists.includes(data.id)) return <button><FiTrash /></button>\r\n\t\t\telse if (currentUser.addedPlaylists.includes(data.id)) return <button><CgCheckO /></button>\r\n\t\t\telse return <button onClick={addPlaylistToLibrary}><FiPlusCircle /></button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (currentUser.addedAuthors.includes(data.uid)) return <button><CgCheckO /></button>\r\n\t\t\telse if (currentUser.uid === data.uid) return <button onClick = {()=>{toggleModal();setContent(<h2>Settings here</h2>)}}><FiSettings /></button>\r\n\t\t\telse if(!data.isAuthor && currentUser.friends.find(friend=>friend.uid === data.uid && friend.status === 'added')) return <button onClick={deleteFriend}><FiUserCheck /></button>\r\n\t\t\telse if(!data.isAuthor && currentUser.friends.find(friend=>((friend.uid === data.uid) && (friend.status === 'awaiting')))) return <button onClick={addFriend}><BiLoaderAlt style = {{animation:'loading 1s infinite linear'}}/></button>\r\n\t\t\telse if(!data.isAuthor) return <button onClick={()=>addFriend(data, currentUser)}><FiUserPlus /></button>\r\n\t\t\telse return <button onClick={()=>addAuthorToLibrary(data, currentUser)}><FiPlusCircle /></button>\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findIfIsPrivate() {\r\n\t\treturn data.isPrivate ? <CgLock /> : null\r\n\t}\r\n\r\n\tfunction editButton(){\r\n\t\treturn (data.authors && data.authors.find(person => person.uid === currentUser.uid)) || (data.authors && currentUser.isAdmin)?<button onClick = {()=>{toggleModal(); setContent(<CustomizeAlbum playlist = {data}/>)}} className = \"customizeAlbumBtn\"><FiEdit2/></button>:null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Header\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[2]}, ${headerColors[0]})` } : { background: 'var(--yellowAndPinkGrad)' }}>\r\n\t\t\t<div className=\"headerBtns\" style={{ background: headerColors[2] }}>\r\n\t\t\t\t<BackBtn />\r\n\t\t\t\t<div className=\"headerBackBtn\">\r\n\t\t\t\t\t{whatButtonToRender()}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"headerMoreBtn\" ref = {moreWindowRef}>\r\n\t\t\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t\t\t\t\t\t{/* <div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToLibrary}>{currentUser.addedSongs.includes(song.id) ? <span><FiTrash2 />Delete</span> : <span><FiPlusCircle />Add</span>}</div> */}\r\n\t\t\t\t\t\t\t\t{/* <div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t\t\t\t\t{yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={addOrDeleteSongToPlaylist} key={key} id={key}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!yourPlaylists[key].songs.includes(song.id) ? <FiPlusCircle /> : <FiCheck />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{playlist.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<FriendsListToShareWith item = {data} whatToShare = {data.authors !== undefined ?'playlist':'author'}/>)}}>\r\n\t\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal();setContent(<h2>test</h2>)}}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\"><FiFlag />Flag</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.uid === data.uid ?\r\n\t\t\t\t\t\t<button onClick={logout} >\r\n\t\t\t\t\t\t\t<IoMdExit />\r\n\t\t\t\t\t\t</button> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorsImage\" style={data.authors === undefined ? { animation: \"floatingBorderRadius 10s infinite ease-in-out\" } : {}}>\r\n\t\t\t\t<img src={data.photoURL || data.image} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorInfo\">\r\n\t\t\t\t<div className=\"headerAuthorsName\">\r\n\t\t\t\t\t{isAlbumOrIsAuthor()}\r\n\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', margin: \"2px 0 10px 0\" }}>\r\n\t\t\t\t\t\t<h1>{data.displayName || data.name}</h1>\r\n\t\t\t\t\t\t{findIfIsVerified()}\r\n\t\t\t\t\t\t{findIfIsPrivate()}\r\n\t\t\t\t\t\t{editButton()}\r\n\t\t\t\t\t\t{/* <LastSongListened data = {data}/> */}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showCreatorsIfExist()}\r\n\t\t\t\t<div className=\"headerListenersAndSubs\">\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\" title={(data.listens ?? data.numberOfListenersPerMonth) + ' listeners per month'}>\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.listens ?? data.numberOfListenersPerMonth)}</span>\r\n\t\t\t\t\t\t<FiHeadphones />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\" title={data.subscribers + ' subscribers'}>\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.subscribers)}</span>\r\n\t\t\t\t\t\t<FiUserPlus />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{displayCreationDateIfExists()}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isFriend?<ChatWithFriendButton data = {data} color = {headerColors[3]}/>:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport {Header} from '../components/AuthorPage/Header'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { SongList } from '../components/Basic/SongList'\r\nexport const AlbumPage = () => {\r\n\tconst match = useRouteMatch('/albums/:albumId')\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { albumId } = match.params\r\n\tconst [albumData, setAlbumData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAlbumsData() {\r\n\t\tconst response = firestore.collection(\"playlists\").doc(albumId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAlbumData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t} else {\r\n\t\t\t\t console.log(\"No such document!\");\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif(albumData.length !== 0){\r\n\t\t\talbumData.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAlbumsData()\r\n\t}, [albumId])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSongsInAlbum()\r\n\t}, [albumData])\r\n\r\n\treturn (\r\n\t\t<div className = \"AlbumPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t{\r\n\t\t\t\tloading?<LoadingCircle top = {'50%'}/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data = {albumData} headerColors = {headerColors} setHeaderColors = {setHeaderColors}/>\r\n\t\t\t\t\t<SongList listOfSongs = {playlistSongs} source = {{source:`/albums/${albumData.id}`,name:albumData.name, image:albumData.image, songsList:playlistSongs}} showSearch defaultSearchMode = {\"songs\"}/>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItemChoice } from '../Basic/SongItemChoice'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nexport const AddPlaylist = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(\"\")\r\n\tconst [playlistCover, setPlaylistCover] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin?[{uid:currentUser.uid, photoURL:currentUser.photoURL, displayName:currentUser.displayName}]:[])\r\n\tconst [releaseDate, setReleaseDate] = useState(currentUser.isAdmin?\"\":new Date().toString())\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState([])\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\t\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst friendsIds = currentUser.friends.map(friend=>{if(friend.status === 'added') return friend.uid})\r\n\t\tconst response = currentUser.isAdmin?\r\n\t\t\tfirestore.collection(\"users\").where(\"displayName\", \"==\", authorsInputValue):\r\n\t\t\tfirestore.collection(\"users\").where(\"uid\", \"in\", friendsIds).where(\"displayName\", \"==\", authorsInputValue)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tasync function findSongs(e) {\r\n\t\tsetLoadingSongs(true)\r\n\t\tsetAllSongs([])\r\n\t\tconst response = firestore.collection(\"songs\")\r\n\t\t\t.where(\"name\", \"==\", songsSearch)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tsetAllSongs([...allAuthors, item.data()])\r\n\t\t})\r\n\t\tsetLoadingSongs(false)\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tfirestore.collection('playlists').doc(uid).set(\r\n\t\t\t{\r\n\t\t\t\tid: uid,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:0,\r\n\t\t\t\tisAlbum:playlistStatus,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === true\r\n\t\t\t}\r\n\t\t).then(() => {\r\n\t\t\tsetAllAuthors([])\r\n\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\tsetChosenAuthors([])\r\n\t\t\tsetPlaylistCover('')\r\n\t\t\tsetPlaylistName('')\r\n\t\t\tsetReleaseDate('')\r\n\t\t\tsetSongsSearch('')\r\n\t\t\tsetChosenSongs([])\r\n\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\r\n\r\n\t\tchosenAuthors.forEach(async author=>{\r\n\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\tconst authorData = authorRef.data()\r\n\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\tauthorPlaylists.push(uid)\r\n\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\townPlaylists:authorPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<form onSubmit={addPlaylistToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={()=>timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid?null:removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Search for songs\" value={songsSearch} onChange={(e) => setSongsSearch(e.target.value)} onKeyDown={findSongs} onKeyUp={() => timerUpFunc(findSongs)} onKeyDown={() => { return clearTimeout(typingTimeout) }} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\tallSongs.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SongItemChoice song={data} listOfSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div>:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor?\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t</label>:null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../../firebase'\r\nexport const DownloadPhotoButton = ({setErrorMessage, setImageLocalPath, downloadedPhoto, setDownloadedPhoto, place}) => {\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/' || place === 'chatCovers/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<label className=\"downloadFile\">\r\n\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\tDownload song cover\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"photoLoadLine\" style={downloadedPhoto !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, place, setDownloadedPhoto)} />\r\n\t\t</label>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ErrorPlate = ({errorMessage}) => {\r\n\treturn errorMessage && (\r\n\t\t<div className=\"Alert\">\r\n\t\t\t{errorMessage}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport getUID from '../../functions/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../Basic/ErrorPlate'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\n\r\nexport const AddSong = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(\"\")\r\n\tconst [songCover, setSongCover] = useState(\"\")\r\n\tconst [songSrc, setSongSrc] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(\"\")\r\n\tconst [lyrics, setLyrics] = useState([])\r\n\tconst [imageLocalPath, setImageLocalPath] = useState(\"\")\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [lyricsObject, setLyricsObject] = useState([])\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tlet typingTimeout\r\n\tasync function findAuthors(e) {\r\n\t\tsetLoadingAuthors(true)\r\n\t\tsetAllAuthors([])\r\n\t\tconst response = firestore.collection(\"users\")\r\n\t\t\t.where(\"displayName\", \"==\", authorsInputValue)\r\n\t\t// .where('isAuthor', '==', true)\r\n\t\tconst data = await response.get();\r\n\t\tif (data !== undefined) {\r\n\t\t\tdata.docs.forEach(item => {\r\n\t\t\t\tsetAllAuthors([...allAuthors, item.data()])\r\n\t\t\t})\r\n\t\t\tsetLoadingAuthors(false)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/') {\r\n\t\t\tconsole.log(\"image\")\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconsole.log(\"song\")\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\r\n\tfunction transformLyricsToArrayOfObjects(e) {\r\n\t\tconst arrayOfParagraphs = []\r\n\t\tlet startSubstr = 0\r\n\t\tfor (let i = 0; i < lyrics.length; i++) {\r\n\t\t\tif (lyrics[i] === '\\n' || lyrics[i + 1] === undefined) {\r\n\r\n\t\t\t\tarrayOfParagraphs.push({\r\n\t\t\t\t\tstartTime: 'undefined',\r\n\t\t\t\t\ttext: lyrics.substr(startSubstr, i - startSubstr)\r\n\t\t\t\t})\r\n\t\t\t\tstartSubstr = i + 1\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetLyricsObject(arrayOfParagraphs)\r\n\t}\r\n\r\n\tasync function addSongToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tlet uid = getUID()\r\n\t\tconsole.log(lyricsObject)\r\n\t\tsetErrorMessage(\"\")\r\n\t\tif (songName.length === 0) setErrorMessage(\"Song has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Song has to have at least 1 author')\r\n\t\telse if (songCover.length === 0) setErrorMessage('You didn\\'t load song cover')\r\n\t\telse if (songSrc.length === 0) setErrorMessage('You didn\\'t load song file')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a song')\r\n\t\telse {\r\n\t\t\tfirestore.collection('songs').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tsongSrc: songSrc,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\tcover: songCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\treleaseDate: releaseDate,\r\n\t\t\t\t\tlyrics: lyricsObject,\r\n\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetSongCover('')\r\n\t\t\t\tsetSongName('')\r\n\t\t\t\tsetSongSrc('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\tauthorSongs.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction timerUpFunc(func) {\r\n\t\tclearTimeout(typingTimeout)\r\n\t\ttypingTimeout = setTimeout(func, 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(imageColors)\r\n\t}, [imageColors])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\t// const tempArr = imageColors; tempArr[i] = e.taget.value;\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={addSongToFirebase}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter song name\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song authors</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={() => timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{/* <label>\r\n\t\t\t\t\t<h3>Add to albums and playlists</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} onKeyDown={findAuthors} style={{ marginBottom: '5px' }} />\r\n\t\t\t\t</label> */}\r\n\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\r\n\t\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage = {setErrorMessage} setImageLocalPath = {setImageLocalPath} downloadedPhoto = {songCover} setDownloadedPhoto = {setSongCover} place = {'songsImages/'}/>\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload song file\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={songSrc !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songs/', setSongSrc)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" placeholder={\"Add song lyrics\"} onKeyDown={transformLyricsToArrayOfObjects} onChange={(e) => setLyrics(e.target.value)}></textarea>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"submit\" className=\"addSongBtn\">Add song</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Slider = ({pages, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"Slider\">\r\n\t\t\t{pages.map((pageName, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = {\"sliderItem \" + (index === currentPage?\"current\":\"\")} key = {index} onClick = {()=>setCurrentPage(index)}>\r\n\t\t\t\t\t\t{pageName}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiPlus, FiXCircle } from 'react-icons/fi'\r\nimport { auth, firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport getUID from '../../functions/getUID'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\nimport { AddSong } from '../AddWindow/AddSong'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const AddWindow = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAddSongWindow, setOpenAddSongWindow] = useState(false)\r\n\tconst [currentSliderPage, setCurrentSliderPage] = useState(0)\r\n\tconst sliderPages = [<AddSong/>, <AddPlaylist/>]\r\n\treturn (((currentUser.isAdmin) || (data.isAuthor)) && (data.uid === currentUser.uid)) ?\r\n\t\t(\r\n\t\t\t<div className=\"AddSong\">\r\n\t\t\t\t<button onClick={() => setOpenAddSongWindow(!openAddSongWindow)} style={openAddSongWindow ? { background: 'var(--red)' } : {}} className = \"openAddSongWindowBtn\">\r\n\t\t\t\t\t<FiPlus style={openAddSongWindow ? { transform: 'rotate(45deg)' } : {}} />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"addSongWindow\" style={openAddSongWindow ? { display: 'flex' } : {}}>\r\n\t\t\t\t\t<Slider pages = {['Song', 'Playlists']} currentPage = {currentSliderPage} setCurrentPage = {setCurrentSliderPage}/>\r\n\t\t\t\t\t{sliderPages[currentSliderPage]}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) :\r\n\t\tnull\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiX } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const FriendRequestItem = ({person, addFriend, rejectFriend}) => {\r\n\treturn (\r\n\t\t<div className = 'FriendRequestItem'>\r\n\t\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t\t<div className = \"friendRequestImageAndName\">  \r\n\t\t\t\t\t<div className=\"requestImage\">\r\n\t\t\t\t\t\t<img src={person.photoURL} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3>{person.displayName}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"requestButtons\">\r\n\t\t\t\t<button style = {{color:'var(--green)'}} onClick = {()=>addFriend(person.uid)}>\r\n\t\t\t\t\t<FiCheck/>\r\n\t\t\t\t\t<span>Add</span> \r\n\t\t\t\t</button>\r\n\t\t\t\t<button style = {{color:'var( --lightRed)'}} onClick = {()=>rejectFriend(person.uid)}>\r\n\t\t\t\t\t<FiX/>\r\n\t\t\t\t\t<span>Reject</span> \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { FriendRequestItem } from './FriendRequestItem'\r\n\r\nexport const FriendRequest = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendRequests, setFriendRequests] = useState([])\r\n\tfunction fetchFriendRequests(){\r\n\t\tcurrentUser.friends.forEach(async (friendObj)=>{\r\n\t\t\tif(friendObj.status === 'requested'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\tsetFriendRequests(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendRequests()\r\n\t}, [])\r\n\r\n\tfunction addFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"added\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"added\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\r\n\t\tcurrentUser['friends'] = friendsList\r\n\t}\r\n\r\n\tfunction rejectFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"rejected\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"rejected\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{friendRequests.map((person, index)=>{\r\n\t\t\t\treturn <FriendRequestItem person = {person} key = {index} addFriend = {addFriend} rejectFriend = {rejectFriend}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../firebase\";\r\n\r\nexport const findAuthorsAlbums = async (authorsData, setAuthorsPlaylists, currentUserUID, setLoading) => {\r\n\tsetAuthorsPlaylists([])\r\n\tconst tempArray = []\r\n\tif (authorsData.ownPlaylists !== undefined && authorsData.ownPlaylists.length !== 0) {\r\n\t\tauthorsData.ownPlaylists.forEach(async (playlistId, index) => {\r\n\t\t\tconst playlistData = (await firestore.collection(\"playlists\").doc(playlistId).get()).data()\r\n\t\t\tif (playlistData && (!playlistData.isPrivate || (authorsData.uid === currentUserUID && playlistData.isPrivate))) tempArray.push(playlistData)\r\n\t\t\tif (index === authorsData.ownPlaylists.length-1) {\r\n\t\t\t\ttempArray.sort((a, b) => new Date(b.creationDate).getTime() - new Date(a.creationDate).getTime())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetAuthorsPlaylists(tempArray)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}","export default function normalizeString(str){\r\n\treturn str.replace(/\\s/g, '-').toLowerCase()\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\nexport const PlaylistItem = ({playlist, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst playlistDate = new Date(playlist.creationDate)\r\n\tconst {currentUser} = useAuth()\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tconst source = {source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs}\r\n\t\t\tconst listSongsIds = playlistSongs.map(song => song.id)\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastSongPlayed: playlistSongs[0].id,\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} style = {{textDecoration:'none'}} className = \"playlistWrapper\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAlbums} setListOfChosenItems = {setListOfChosenAlbums} itemId = {playlist.id}/>\r\n\t\t\t<div className=\"playlistItem\">\r\n\t\t\t\t{playlist.image?<img src={playlist.image} alt=\"\" />:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t{/* {!playlist.isAlbum?<h2>{playlist.name}</h2>:null} */}\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<h4 style = {{display:'flex', alignItems:'center', margin:'5px 0'}}>\r\n\t\t\t\t{shortWord(playlist.name, 15)} \r\n\t\t\t\t<span style = {{fontSize:\".6em\", opacity:.6, fontWeight:'500', marginLeft:'7px'}}>\r\n\t\t\t\t\t{playlist.isAlbum?playlist.songs.length === 1?\"single\":'album':'playlist'}\r\n\t\t\t\t</span>\r\n\t\t\t</h4>\r\n\t\t\t<h5 style = {{margin:'5px 0'}}>{playlistDate.getFullYear()}</h5>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { LoadingCircle } from './LoadingCircle'\r\n\r\nexport const AlbumList = ({listOfAlbums, title = \"\", loading = true, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\t// console.log(listOfAlbums)\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 220\r\n\t\tsetScrollLeft(prev - 220)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 220\r\n\t\tsetScrollLeft(prev + 220)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAlbums.length > 0 && !loading){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAlbums])\r\n\treturn listOfAlbums.length > 0?\r\n\t\tloading?<LoadingCircle/>:\r\n\t\t(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAlbums.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key={index} listOfChosenAlbums = {listOfChosenAlbums} setListOfChosenAlbums = {setListOfChosenAlbums}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { findAuthorsAlbums } from '../../functions/findAuthorsAlbums'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\n\r\nexport const Playlists = ({ authorsData }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [authorsPlaylists, setAuthorsPlaylists] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsAlbums(authorsData, setAuthorsPlaylists, currentUser.uid, setLoading)\r\n\t}, [authorsData.ownPlaylists])\r\n\r\n\treturn <AlbumList listOfAlbums = {authorsPlaylists} title = {\"Albums\"} loading = {loading}/>\r\n}\r\n","import { firestore } from \"../firebase\"\r\n\r\nfunction findSimilarArtistsNames(authorsSongsArr, authorsData, setSimilarAuthors) {\r\n\tlet peopleArray = []\r\n\tauthorsSongsArr.forEach((song) => {\r\n\t\tlet newAuthors = song.authors\r\n\t\tif (newAuthors.length !== 0) {\r\n\t\t\tpeopleArray.push(newAuthors)\r\n\t\t}\r\n\t})\r\n\tpeopleArray = peopleArray.flat()\r\n\tconst uniqueAuthorsSet = new Set(peopleArray.map(people=>people.uid).filter(id=>id!==authorsData.uid))\r\n\tconst uniqueAuthorsIdsArray = Array.from(uniqueAuthorsSet)\r\n\tconst uniqueAuthorsDataArray = []\r\n\tfor (let i = 0; i < uniqueAuthorsIdsArray.length; i++) {\r\n\t\tfor (let j = 0; j < peopleArray.length; j++) {\r\n\t\t\tif(uniqueAuthorsIdsArray[i] === peopleArray[j].uid){\r\n\t\t\t\tuniqueAuthorsDataArray.push(peopleArray[j])\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tsetSimilarAuthors(uniqueAuthorsDataArray)\r\n\treturn uniqueAuthorsDataArray\r\n}\r\n\r\nexport default async function findSimilarArtists(authorsData, setSimilarAuthors) {\r\n\tif (authorsData !== undefined && authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\tconst authorsSongsArray = []\r\n\t\tconst response = firestore.collection(\"songs\").where(\"id\", \"in\", authorsData.ownSongs)\r\n\t\tconst data = await response.get();\r\n\t\tdata.docs.forEach(item => {\r\n\t\t\tauthorsSongsArray.push(item.data())\r\n\t\t})\r\n\t\treturn findSimilarArtistsNames(authorsSongsArray, authorsData, setSimilarAuthors)\r\n\t}\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport { AddToListCircle } from '../Basic/AddToListCircle'\r\n\r\nexport const AuthorItemBig = ({data, listOfChosenAuthors, setListOfChosenAuthors}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${data.uid}`} className = \"AuthorItemBig\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAuthors} setListOfChosenItems = {setListOfChosenAuthors} itemId = {data.uid}/>\r\n\t\t\t<div >\r\n\t\t\t\t<div className = \"AuthorItemBigImage\">\r\n\t\t\t\t\t<img src={data.photoURL} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3>{data.displayName}</h3>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\n\r\nexport const AuthorsList = ({ listOfAuthors, title = \"\", listOfChosenAuthors, setListOfChosenAuthors }) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAuthors.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAuthors])\r\n\treturn listOfAuthors.length > 0?(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAuthors.map((author) => {\r\n\t\t\t\t\treturn <AuthorItemBig data={author} key={author.uid} listOfChosenAuthors = {listOfChosenAuthors} setListOfChosenAuthors = {setListOfChosenAuthors}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current !== null && wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport findSimilarArtists from '../../functions/findSimilarArtists'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const SimilarArtists = ({ data }) => {\r\n\tconst [similarArtists, setSimilarArtists] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSimilarArtists(data, setSimilarArtists)\r\n\t}, [data])\r\n\treturn (\r\n\t\t<AuthorsList listOfAuthors = {similarArtists} title = {\"Similar Authors\"}/>\r\n\t)\r\n}\r\n","export default function findIfSongIsNew(song){\r\n\tconst songReleaseDate = new Date(song.releaseDate)\r\n\t//1 814 400 000 - 3 weeks\r\n\tif((new Date().getTime() - songReleaseDate.getTime()) < 1814400000) return true\r\n\r\n\treturn false\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport findIfSongIsNew from '../../functions/findIfSongIsNew'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const TopSongs = ({ authorId, authorsData, headerColors }) => {\r\n\tconst [popularSongs, setPopularSongs] = useState([])\r\n\tconst [newSongs, setNewSongs] = useState([])\r\n\r\n\tasync function findAuthorsSongs() {\r\n\t\tsetPopularSongs([])\r\n\t\tconst tempArray = []\r\n\t\tif (authorsData.isAuthor) {\r\n\t\t\tif (authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\t\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\t\ttempArray.push(songData)\r\n\t\t\t\t\tif (findIfSongIsNew(songData) && !newSongs.includes(songData)) setNewSongs(prevSongs => [...prevSongs, songData])\r\n\t\t\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\t\t\ttempArray.sort((a, b) => b.listens - a.listens)\r\n\t\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tauthorsData.addedSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tconst songData = (await firestore.collection(\"songs\").doc(songId).get()).data()\r\n\t\t\t\ttempArray.unshift(songData)\r\n\t\t\t\tif(index === authorsData.addedSongs.length - 1){\r\n\t\t\t\t\tsetPopularSongs(tempArray)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsSongs()\r\n\t\tsetNewSongs([])\r\n\t}, [authorsData.ownSongs])\r\n\r\n\treturn authorsData.isAuthor ?\r\n\t\t(<div className=\"TopSongs\">\r\n\t\t\t<SongList listOfSongs={newSongs} source={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: newSongs }} isNewSong />\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={\"Popular Songs\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t</div>) :\r\n\t\t(\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName + \"'s Library\", image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={authorsData.displayName + \"'s Library\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { AddWindow } from '../components/AuthorPage/AddWindow'\r\nimport { FriendRequest } from '../components/AuthorPage/FriendRequest'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { PersonTinyList } from '../components/AuthorPage/PersonTinyList'\r\nimport { Playlists } from '../components/AuthorPage/Playlists'\r\nimport { SimilarArtists } from '../components/AuthorPage/SimilarArtists'\r\nimport { TopSongs } from '../components/AuthorPage/TopSongs'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport \"../styles/AuthorPage.css\"\r\nexport const AuthorPage = () => {\r\n\tconst match = useRouteMatch('/authors/:authorId')\r\n\tconst {currentUser} = useAuth()\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { authorId } = match.params\r\n\tconst [authorsData, setAuthorsData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function fetchAuthorsData() {\r\n\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAuthorsData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t\t setLoading(false)\r\n\t\t\t} else {\r\n\t\t\t\t console.log(\"No such document!\");\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [authorId])\r\n\treturn (\r\n\t\t<div className=\"AuthorPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{loading?\r\n\t\t\t\t<LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data={authorsData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t{currentUser.uid === authorsData.uid?<FriendRequest/>:null} \r\n\t\t\t\t\t<AddWindow data={authorsData} />\r\n\t\t\t\t\t<TopSongs author={authorId} authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{authorsData.friends && !authorsData.isAuthor?<PersonTinyList data = {authorsData} title = {\"Friends\"}/>:null}\r\n\t\t\t\t\t<Playlists authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauthorsData.isAuthor?\r\n\t\t\t\t\t\t<SimilarArtists data={authorsData} />:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\nimport { Slider } from '../Tools/Slider'\r\nexport const AttachmentList = ({ chatId }) => {\r\n\tconst [attachmentList, setAttachmentList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [sliderCurrentPage, setSliderCurrentPage] = useState(0)\r\n\tconst attachmentContent = [\r\n\t\t<SongList listOfSongs={attachmentList} source={{ source: `/chat/${chatId}`, name: `Chat with ${chatId}`, image: \"\", songsList: attachmentList }} />,\r\n\t\t<AuthorsList listOfAuthors={attachmentList} />,\r\n\t\t<AlbumList listOfAlbums={attachmentList} loading={loading} />\r\n\t]\r\n\tasync function fetchAttachedData(attachedType, firebaseCollection) {\r\n\t\t\r\n\t\tconst chatData = await firestore.collection('chats').doc(chatId).get()\r\n\t\tchatData.data().messages.forEach(message => {\r\n\t\t\tif (message[attachedType].length > 0) {\r\n\t\t\t\tmessage[attachedType].forEach(async itemId => {\r\n\t\t\t\t\tfirestore.collection(firebaseCollection).doc(itemId).get().then(songData=>{\r\n\t\t\t\t\t\tsetAttachmentList(prev => [...prev, songData.data()])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tswitch (sliderCurrentPage) {\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchAttachedData('attachedSongs', 'songs').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tfetchAttachedData('attachedAuthors', 'users').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchAttachedData('attachedAlbums', 'playlists').then(()=>setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [sliderCurrentPage])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachmentList([])\r\n\t}, [chatId])\r\n\r\n\tconsole.log(attachmentList)\r\n\r\n\treturn (\r\n\t\t<div className=\"AttachmentList\">\r\n\t\t\t<Slider pages={[\"Songs\", \"Authors\", \"Playlists\"]} currentPage={sliderCurrentPage} setCurrentPage={(page)=>{setSliderCurrentPage(page); setLoading(true); setAttachmentList([])}} />\r\n\t\t\t{loading ? <LoadingCircle /> :\r\n\t\t\t\tattachmentList.length > 0 ? attachmentContent[sliderCurrentPage] : <h2>Nothing here</h2>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchFirebaseData = (setLoading, collection, list, setState, sortCondition, whereCondFP, whereCondSP, whereCondTP, deps = []) => {\r\n\r\n\tasync function fetchData() {\r\n\t\tconst tempArray = []\r\n\t\tif (list === undefined) {\r\n\t\t\tif (whereCondFP !== undefined) {\r\n\t\t\t\tconst items = await firestore.collection(collection).where(whereCondFP, whereCondSP, whereCondTP).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\tconst items = await firestore.collection(collection).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait list.forEach(async (itemId, index) => {\r\n\t\t\t\tconst itemData = (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t\t\ttempArray.push(itemData)\r\n\t\t\t\tif(index === list.length - 1){\r\n\t\t\t\t\tif(sortCondition !== undefined){\r\n\t\t\t\t\t\ttempArray.sort(sortCondition)\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\treturn tempArray\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tsetState([])\r\n\t\tfetchData().then((res)=>{\r\n\t\t\tif(list === undefined) {\r\n\t\t\t\tsetState(res)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}, deps)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { useFetchDocs } from '../../hooks/useFetchDocs'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport {FiSettings, FiVolume2} from 'react-icons/fi'\r\nimport { BiCrown } from 'react-icons/bi'\r\nimport {ImAttachment} from 'react-icons/im'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const ChatInfo = ({ data }) => {\r\n\tconst [participants, setParticipants] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [chatNameValue, setChatNameValue] = useState(data.chatName)\r\n\tconst {setContent} = useModal()\r\n\tconst [participantsPage, setParticipantsPage] = useState(0)\r\n\tuseFetchDocs(setLoading, data.participants, setParticipants, [data.id])\t\r\n\treturn(\r\n\t\t<div className=\"ChatInfo\">\r\n\t\t\t<div className=\"chatInfoImageAndName\">\r\n\t\t\t\t<div className=\"chatInfoImage\">\r\n\t\t\t\t\t<img src={data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" className = \"standartInput\" value = {chatNameValue} onChange = {(e)=>setChatNameValue(e.target.value)}/>\r\n\t\t\t\t\t<div className = \"chatInfoButtons\">\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiSettings/>\r\n\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\" onClick = {()=>setContent(<AttachmentList chatId = {data.id}/>)}>\r\n\t\t\t\t\t\t\t<ImAttachment/>\r\n\t\t\t\t\t\t\t{shortWord(\"Attachments\", 7)} \r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiVolume2/>\r\n\t\t\t\t\t\t\tSound\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<h4>Chat participants</h4>\r\n\t\t\t<Slider pages = {['All participants', \"Administrators\"]} currentPage = {participantsPage} setCurrentPage = {setParticipantsPage}/>\r\n\t\t\t{!loading?participants.map(person => {\r\n\t\t\t\tif(participantsPage === 1){\r\n\t\t\t\t\tif(data.admins.includes(person.uid)) return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t\t}\r\n\t\t\t\telse return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t}):<LoadingCircle/>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchDocs = (setLoading, listOfItems, setList, deps) => {\r\n\tfunction fetchItem(){\r\n\t\tlistOfItems.forEach(async itemId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(itemId).get()).data()\r\n\t\t\tsetList(prev=>[...prev, personData])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchItem()\r\n\t\treturn ()=>fetchItem()\r\n\t}, deps)\r\n}\r\n","import React from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const WallpaperItem = ({chatId, image, currentWallpaper}) => {\r\n\tfunction changeChatWallpaper(){\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\twallpaper:image\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className = {\"WallpaperItem \" + (image === currentWallpaper?\"active\":\"\")} onClick = {changeChatWallpaper} style = {image === \"undefined\"?{background:'var(--playlistsColor)'}:{}}>\r\n\t\t\t{image !== \"undefined\" ?<img src={image} alt=\"\" />:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { LoadingCircle } from '../Basic/LoadingCircle'\r\nimport { WallpaperItem } from './WallpaperItem'\r\n\r\nexport const Wallpapers = ({chatId, currentWallpaper}) => {\r\n\tconst [wallpaperList, setWallpaperList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading,'chatWallpapers', undefined, setWallpaperList)\r\n\tconsole.log(wallpaperList)\r\n\treturn !loading?(\r\n\t\t<div className='Wallpapers'>\r\n\t\t\t<h2>Wallpapers</h2>\r\n\t\t\t<div className=\"wallpapreWrapper\">\r\n\t\t\t\t<WallpaperItem chatId = {chatId} image={\"undefined\"}/>\r\n\t\t\t\t{wallpaperList.map((wallpaper, index) => {\r\n\t\t\t\t\treturn <WallpaperItem chatId = {chatId} image={wallpaper.image} key={wallpaper.id} currentWallpaper = {currentWallpaper}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):<LoadingCircle/>\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiFolder, FiImage, FiMoreHorizontal, FiSearch, FiTrash, FiInfo } from 'react-icons/fi'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { ChatInfo } from './ChatInfo'\r\nimport { Wallpapers } from './Wallpapers'\r\n\r\nexport const ChatMoreBtn = ({chatId, currentWallpaper, data}) => {\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst chatMoreBtnRef = useRef(null)\r\n\tuseOutsideClick(chatMoreBtnRef, setOpenMoreWindow)\r\n\treturn (\r\n\t\t<div className=\"ChatMoreBtn\" ref = {chatMoreBtnRef}>\r\n\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t<FiMoreHorizontal />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"chatHeaderMenuWindow\" style = {!openMoreWindow?{display:'none'}:{}}>\r\n\t\t\t\t{data.participants.length > 2? <div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<FiInfo/>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</div>:null}\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiSearch/>\r\n\t\t\t\t\t<span>Search messages</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<AttachmentList chatId = {chatId}/>)}}>\r\n\t\t\t\t\t<FiFolder/>\r\n\t\t\t\t\t<span>Attachments</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<Wallpapers chatId = {chatId} currentWallpaper = {currentWallpaper}/>)}}>\r\n\t\t\t\t\t<FiImage/>\r\n\t\t\t\t\t<span>Change wallpaper</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiTrash/>\r\n\t\t\t\t\t<span>Delete chat</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { BackBtn } from '../Basic/BackBtn'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { ChatMoreBtn } from './ChatMoreBtn'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { ChatInfo } from './ChatInfo'\r\nexport const ChatHeader = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = data.participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t\tsetHeaderColors(person.imageColors)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data.chatName === \"\") {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [data.id])\r\n\treturn (\r\n\t\t<div className=\"ChatHeader\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[0]}, ${headerColors[1]})` } : { background: `linear-gradient(45deg, grey, lightgrey)` }}>\r\n\t\t\t<BackBtn />\r\n\t\t\t{data.participants.length === 2 ? <Link className=\"chatHeaderImageAndName\" to={`/authors/${otherPerson.uid}`}>\r\n\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t<img src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Link> :\r\n\t\t\t\t<div className=\"chatHeaderImageAndName\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t\t<img src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<ChatMoreBtn chatId={data.id} data={data} currentWallpaper={data.wallpaper} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function findWhatToWriteInResponseToItem(referedMessage){\r\n\treturn referedMessage.attachedSongs.length ? \"Audio\":\r\n\treferedMessage.attachedAlbums.length? \"Album\":\r\n\treferedMessage.attachedAuthors.length?\"Author\":\r\n\treferedMessage.inResponseToMessage && referedMessage.inResponseToMessage.length?\"Forwarded message\":\"\"\r\n}","import React from 'react'\r\n\r\nexport const SeenByCircle = ({listOfSeen}) => {\r\n\treturn (\r\n\t\t<div className = \"SeenByCircle\" style = {listOfSeen !== undefined? listOfSeen.length <= 1?{opacity:'1', visibility:'visible'}:{}:null}></div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { authors } from '../../data/authors'\r\nimport { chat } from '../../data/chat'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/findWhatToWriteInResponseItem'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SeenByCircle } from './SeenByCircle'\r\n\r\nexport const MessageItem = ({ messageData, chatId, scrollToMessageRef, setScrollToMessageId, scrollToMessageId, showPhoto = true, otherMessages, inResponseToMessageArr, setInResponseToMessageArr }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { message, attachedAlbums, attachedSongs, attachedAuthors, sender, inResponseToMessage, id, sentTime } = messageData\r\n\tconst [userThatSentMessage, setUserThatSentMessage] = useState({})\r\n\tconst messageSentTime = displayDate(sentTime, 2)\r\n\tconst [attachedSongsData, setAttachedSongsData] = useState([])\r\n\tconst [attachedAuthorsData, setAttachedAuthorsData] = useState([])\r\n\tconst [attachedPlaylistsData, setAttachedPlaylistsData] = useState([])\r\n\tconst [inResponseToMessagesData, setInResponseToMessagesData] = useState([])\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst messageRef = useRef()\r\n\tconst isVisible = useOnScreen(messageRef)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(messageData.seenBy !== undefined){\r\n\t\t\tif(messageData.seenBy.length === 1 && currentUser.uid !== messageData.sender){\r\n\t\t\t\tconst tempMessages = otherMessages\r\n\t\t\t\ttempMessages[messageData.id].seenBy.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\tmessages:tempMessages\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isVisible])\r\n\r\n\tasync function fetchSentMessageUser() {\r\n\t\tconst user = (await firestore.collection('users').doc(messageData.sender).get()).data()\r\n\t\tsetUserThatSentMessage(user)\r\n\t}\r\n\r\n\tfunction fetchAttachedData(list, place, setFunc) {\r\n\t\treturn list.forEach(async (itemId) => {\r\n\t\t\tlet itemData = (await firestore.collection(place).doc(itemId).get()).data()\r\n\t\t\tsetFunc(prev => [...prev, itemData])\r\n\t\t})\r\n\t}\r\n\r\n\tfunction inResponseMessagesFetch() {\r\n\t\tif (inResponseToMessage !== null) {\r\n\t\t\tinResponseToMessage.forEach(async messageId => {\r\n\t\t\t\tsetInResponseToMessagesData(prev => [...prev, otherMessages[messageId]])\r\n\t\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[messageId].sender).get()).data().displayName\r\n\t\t\t\tsetInResponseNames(prev => [name, ...prev])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSentMessageUser()\r\n\t\tfetchAttachedData(attachedSongs, 'songs', setAttachedSongsData)\r\n\t\tfetchAttachedData(attachedAuthors, 'users', setAttachedAuthorsData)\r\n\t\tfetchAttachedData(attachedAlbums, 'playlists', setAttachedPlaylistsData)\r\n\t\tinResponseMessagesFetch()\r\n\t}, [])\r\n\r\n\tfunction addMessageToResponseList() {\r\n\t\tif (!inResponseToMessageArr.includes(id)) {\r\n\t\t\tsetInResponseToMessageArr(prev => [...prev, id])\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst emojis = [<FcLike />, <AiFillFire />, <AiFillLike />]\r\n\treturn (\r\n\t\t<div className={\"MessageItem \" + (sender === currentUser.uid ? 'your' : '')} ref={id === scrollToMessageId ? scrollToMessageRef : messageRef} style={showPhoto ? { paddingBottom: '15px' } : {}}>\r\n\t\t\t<div className=\"messageItemImage\">\r\n\t\t\t\t{showPhoto ?\r\n\t\t\t\t\t<img src={userThatSentMessage.photoURL} alt=\"\" /> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t\t<div className=\"messageItemBody\" style={id === scrollToMessageId ? { animation: 'showResponseMessage .5s forwards' } : showPhoto ? { borderRadius: 'var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px' } : {}}>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n\t\t\t\t\t<h5 className=\"messageUserName\">{userThatSentMessage.displayName}</h5>\r\n\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{messageSentTime}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{inResponseToMessage !== null ?\r\n\t\t\t\t\tinResponseToMessagesData.map((messageData, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" onClick={() => setScrollToMessageId(messageData.id)}>\r\n\t\t\t\t\t\t\t\t<span style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t\t\t\t\t\t<h5 style={messageData.sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>\r\n\t\t\t\t\t\t\t\t\t\t{inResponseNames[index]}\r\n\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{displayDate(messageData.sentTime, 2)}</div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{messageData.message}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(messageData)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{message}</p>\r\n\t\t\t\t\t{attachedSongsData.map((song, key) => {\r\n\t\t\t\t\t\treturn <SongItem song={song} localIndex={key} key={key} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedPlaylistsData.map((album, index) => {\r\n\t\t\t\t\t\treturn <PlaylistItem playlist={album} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedAuthorsData.map((author, index) => {\r\n\t\t\t\t\t\treturn <AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<SeenByCircle listOfSeen = {messageData.seenBy}/>\r\n\t\t\t<button className=\"respondToMessageBtn\" onClick={addMessageToResponseList}>\r\n\t\t\t\t<BiShare />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nexport default function useOnScreen(ref) {\r\n\r\n\tconst [isIntersecting, setIntersecting] = useState(false)\r\n \r\n\tconst observer = new IntersectionObserver(\r\n\t  ([entry]) => setIntersecting(entry.isIntersecting)\r\n\t)\r\n \r\n\tuseEffect(() => {\r\n\t  observer.observe(ref.current)\r\n\t  // Remove the observer as soon as the component is unmounted\r\n\t  return () => { observer.disconnect() }\r\n\t}, [])\r\n \r\n\treturn isIntersecting\r\n }","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { MessageItem } from './MessageItem'\r\n\r\nexport const MessageField = ({message, index, messageList, chatId, inResponseToMessage, setInResponseToMessage, scrollToMessageRef, scrollToMessageId, setScrollToMessageId, setDateRefsArray}) => {\r\n\tconst [showPhoto, setShowPhoto] = useState(false)\r\n\tconst [showDate, setShowDate] = useState(false)\r\n\tconst dateRef = useRef(null)\r\n\tuseEffect(() => {\r\n\t\tif (index === messageList.length - 1) setShowPhoto(true)\r\n\t\telse if (messageList[index + 1].sender !== messageList[index].sender) setShowPhoto(true)\r\n\t\telse if (displayDate(messageList[index + 1].sentTime) !== displayDate(messageList[index].sentTime)) setShowPhoto(true)\r\n\t\r\n\t\tif (index === 0) setShowDate(true)\r\n\t\telse if (displayDate(messageList[index].sentTime) !== displayDate(messageList[index - 1].sentTime)) {\r\n\t\t\tsetShowDate(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dateRef.current !== null) {\r\n\t\t\tsetDateRefsArray(prev=>[...prev, dateRef])\r\n\t\t}\r\n\t}, [showDate])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showDate ?  <div ref = {dateRef} style={{ width: '100%', display: 'flex', justifyContent: 'center', alignItems: \"center\", padding: \"10px 0\" }}>{displayDate(message.sentTime)}</div> : null}\r\n\t\t\t<MessageItem\r\n\t\t\t\tmessageData={message}\r\n\t\t\t\tchatId={chatId}\r\n\t\t\t\tkey={message.id}\r\n\t\t\t\tscrollToMessageRef={scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId={scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId={setScrollToMessageId}\r\n\t\t\t\tshowPhoto={showPhoto}\r\n\t\t\t\totherMessages={messageList}\r\n\t\t\t\tinResponseToMessageArr={inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessageArr={setInResponseToMessage}\r\n\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { MessageField } from './MessageField'\r\n\r\nexport const DisplayChatMessages = ({chatId, messageList, inResponseToMessage, setInResponseToMessage, messagesWindowRef, setDateRefsArray}) => {\r\n\tconst scrollToMessageRef = useRef(null)\r\n\tconst [scrollToMessageId, setScrollToMessageId] = useState(-1)\r\n\tuseEffect(() => {\r\n\t\tif (scrollToMessageId !== -1) {\r\n\t\t\tmessagesWindowRef.current.scrollTo(0, scrollToMessageRef.current.offsetTop - 65 < 0 ? 0 : scrollToMessageRef.current.offsetTop - 65)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetScrollToMessageId(-1)\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}, [scrollToMessageId])\r\n\r\n\treturn messageList.length?<>\r\n\t\t{messageList.map((message, index)=>{\r\n\t\t\treturn <MessageField \r\n\t\t\t\tmessage = {message} \r\n\t\t\t\tindex = {index} \r\n\t\t\t\tkey = {message.id} \r\n\t\t\t\tmessageList = {messageList} \r\n\t\t\t\tchatId = {chatId} \r\n\t\t\t\tinResponseToMessage = {inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessage = {setInResponseToMessage}\r\n\t\t\t\tscrollToMessageRef = {scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId = {scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId = {setScrollToMessageId}\r\n\t\t\t\tsetDateRefsArray = {setDateRefsArray}\r\n\t\t\t/>\r\n\t\t})}\r\n\t</>:null\r\n}\r\n","import React from 'react'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nexport const AttachedItemsInChatInput = ({attachedItems, setAttachedItems, icon}) => {\r\n\tfunction removeItemFromAttached(attachedItems, setItems, itemId) {\r\n\t\tsetItems(attachedItems.filter(id => id !== itemId))\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"AttachedItemsInChatInput\">\r\n\t\t\t{attachedItems.map((itemId, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"attachedSongItem\" key={itemId}>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t<span>{itemId}</span>\r\n\t\t\t\t\t\t<button className=\"removeMessageFromResponse\" onClick={() => removeItemFromAttached(attachedItems, setAttachedItems, itemId)}>\r\n\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport { MdSend } from 'react-icons/md'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\nimport { AlbumList } from '../Basic/AlbumList'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/findWhatToWriteInResponseItem'\r\nimport { auth, firestore } from '../../firebase'\r\nimport { sendMessage } from '../../functions/sendMessage'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { AttachedItemsInChatInput } from '../ChatPage/AttachedItemsInChatInput'\r\n\r\nexport const ChatInput = ({ chatId, chatData, messageText, setMessageText, inResponseToMessage, setInResponseToMessage, otherMessages }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAttachWindow, setOpenAttachWindow] = useState(false)\r\n\tconst { yourSongs, yourAuthors, yourPlaylists } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [allFoundSongs, setAllFoundSongs] = useState(yourSongs)\r\n\tconst [searchSongList, setSearchSongList] = useState([])\r\n\tconst [attachedSongs, setAttachedSongs] = useState([])\r\n\tconst [attachedAlbums, setAttachedAlbums] = useState([])\r\n\tconst [attachedAuthors, setAttachedAuthors] = useState([])\r\n\tconst [resultPlaylists, setResultPlaylists] = useState(yourPlaylists)\r\n\tconst [resultAuthorList, setResultAuthorList] = useState(yourAuthors)\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst [attachedSongsNames, setAttachedSongsNames] = useState([])\r\n\tconst attachWindowRef = useRef(null)\r\n\tuseOutsideClick(attachWindowRef, setOpenAttachWindow)\r\n\r\n\tfunction sendMessageFull() {\r\n\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, attachedSongs, attachedAlbums, attachedAuthors, inResponseToMessage);\r\n\t\tsetMessageText(\"\");\r\n\t\tsetAttachedSongs([]);\r\n\t\tsetAttachedAuthors([]);\r\n\t\tsetAttachedAlbums([]);\r\n\t\tsetInResponseToMessage([])\r\n\t\tsetOpenAttachWindow(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (searchValue.length === 0) {\r\n\t\t\tsetAllFoundSongs(yourSongs)\r\n\t\t}\r\n\t}, [searchValue])\r\n\r\n\tfunction removeMessageFromResponseList(messageId) {\r\n\t\tsetInResponseToMessage(inResponseToMessage.filter(id => id !== messageId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(messageText.length === 0){\r\n\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\ttyping:chatData.typing.filter(id=>id !== currentUser.uid)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(!chatData.typing.includes(currentUser.uid)){\r\n\t\t\t\tconst tempArray = chatData.typing\r\n\t\t\t\ttempArray.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\ttyping:tempArray\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [messageText])\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInResponseNames([])\r\n\t\tinResponseToMessage.forEach(async id => {\r\n\r\n\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[id].sender).get()).data().displayName\r\n\t\t\tsetInResponseNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [inResponseToMessage.length])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachedSongsNames([])\r\n\t\tattachedSongs.forEach(async id => {\r\n\t\t\tconst name = (await firestore.collection('songs').doc(id).get()).data().name\r\n\t\t\tsetAttachedSongsNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [attachedSongs.length])\r\n\r\n\treturn (\r\n\t\t<div className=\"chatInput\" style={openAttachWindow ? { borderRadius: \"0 0 var(--standartBorderRadius) var(--standartBorderRadius)\", transition: \".2s\" } : {}} ref={attachWindowRef}>\r\n\t\t\t<div className=\"attachWindow\" style={openAttachWindow ? { height: \"400px\", opacity: '1' } : {}} >\r\n\t\t\t\t{openAttachWindow ?\r\n\t\t\t\t\t<div style={openAttachWindow ? { maxHeight: '100%', overflowY: 'auto' } : { display: 'none' }}>\r\n\t\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\tsetValue={setSearchValue}\r\n\t\t\t\t\t\t\tsetAllFoundSongs={setAllFoundSongs}\r\n\t\t\t\t\t\t\tsetResultPlaylists={setResultPlaylists}\r\n\t\t\t\t\t\t\tsetResultAuthorList={setResultAuthorList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SongList listOfSongs={allFoundSongs} source={'no'} listOfChosenSongs={attachedSongs} setListOfSongs={setAttachedSongs} />\r\n\t\t\t\t\t\t<AuthorsList listOfAuthors={resultAuthorList} listOfChosenAuthors={attachedAuthors} setListOfChosenAuthors={setAttachedAuthors} />\r\n\t\t\t\t\t\t<AlbumList listOfAlbums={resultPlaylists} loading={false} listOfChosenAlbums={attachedAlbums} setListOfChosenAlbums={setAttachedAlbums} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inResponseArea\" style={inResponseToMessage.length || attachedSongsNames.length || attachedAuthors.length || attachedAlbums.length ? {} : { height: '0', padding: '0', opacity: '0', top: \"0\", visibility: 'hidden' }}>\r\n\t\t\t\t<div className=\"responseMessages\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{inResponseToMessage.map((id, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" key={id}>\r\n\t\t\t\t\t\t\t\t<h5 style={otherMessages[id].sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>{inResponseNames[index]}</h5>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{shortWord(otherMessages[id].message, 35)}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(otherMessages[id])}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button onClick={() => removeMessageFromResponseList(id)} className=\"removeMessageFromResponse\">\r\n\t\t\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedSongs} setAttachedItems = { setAttachedSongs} icon = {<CgMusicNote />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAuthors} setAttachedItems = { setAttachedAuthors} icon = {<FiUser />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAlbums} setAttachedItems = { setAttachedAlbums} icon = {<BiAlbum />}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"attachAndEmojis\">\r\n\t\t\t\t<div className=\"attachBtn\">\r\n\t\t\t\t\t<button onClick={() => { setOpenAttachWindow(!openAttachWindow) }}>\r\n\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" style={{ background: 'var(--lightGrey)', border: 'none', outline: 'none', minHeight: '100%' }} value={messageText} onChange={(e) => { setMessageText(e.target.value) }} onKeyUp={(e) => { if (e.key === 'Enter') { sendMessageFull() } }} />\r\n\t\t\t\t<div className=\"emojis\">\r\n\t\t\t\t\t<div className=\"emojiItem\">\r\n\t\t\t\t\t\t<FcLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--red)' }}>\r\n\t\t\t\t\t\t<AiFillFire />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--lightBlue)' }}>\r\n\t\t\t\t\t\t<AiFillLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<button className=\"sendBtn\" onClick={() => { sendMessageFull() }}>\r\n\t\t\t\t<MdSend />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport displayDate from '../../functions/displayDate'\r\n\r\nexport const DateOnTop = ({date}) => {\r\n\treturn (\r\n\t\t<div className = \"DateOnTop\">\r\n\t\t\t{displayDate(date)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {SmallImages} from '../AuthorPage/SmallImages'\r\nexport const TypingAnimation = ({ typingPeople }) => {\r\n\tconst [typingPeopleData, setTypingPeopleData] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tsetTypingPeopleData([])\r\n\t\ttypingPeople.map(async personId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(personId).get()).data()\r\n\t\t\tif(personData.uid !== currentUser.uid) setTypingPeopleData(prev=>[...prev, personData])\r\n\t\t})\r\n\t}, [typingPeople])\r\n\treturn typingPeopleData.length > 0 ? (\r\n\t\t<div className = \"typingWrapper\">\r\n\t\t\t<SmallImages imagesList = {typingPeopleData.map(person=>person.photoURL)} borderColor = {'var(--navItemColor)'}/>\r\n\t\t\t<div className=\"TypingAnimation\">\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React, { createRef } from 'react'\r\nimport { useState } from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport { ChatHeader } from '../components/ChatPage/ChatHeader'\r\nimport { MessageItem } from '../components/ChatPage/MessageItem'\r\nimport { DisplayChatMessages } from '../components/ChatPage/DisplayChatMessages'\r\nimport { useRef } from 'react'\r\nimport { ChatInput } from '../components/AuthorPage/ChatInput'\r\nimport { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport displayDate from '../functions/displayDate'\r\nimport { DateOnTop } from '../components/ChatPage/DateOnTop'\r\nimport { TypingAnimation } from '../components/ChatPage/TypingAnimation'\r\nexport const DialoguePage = () => {\r\n\tconst match = useRouteMatch('/chat/:chatId')\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatId } = match.params\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [chatData, setChatData] = useState([])\r\n\tconst scrollToBottomElementRef = useRef(null)\r\n\tconst messagesWindowRef = useRef(null)\r\n\t\r\n\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tconst [messageList, setMessageList] = useState([])\r\n\tconst [inResponseToMessage, setInResponseToMessage] = useState([])\r\n\tconst [currentDateOnTop, setCurrentDateOnTop] = useState(\"\")\r\n\tconst [dateRefsArray, setDateRefsArray] = useState([])\r\n\tconst history = useHistory()\r\n\tconst scrollToMyRef = () => {\r\n\t\tconst scroll = messagesWindowRef.current.scrollHeight - messagesWindowRef.current.clientHeight;\r\n\t\tmessagesWindowRef.current.scrollTo(0, scroll);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('chats').doc(chatId)\r\n\t\t\t.onSnapshot(snapshot => {\r\n\t\t\t\tsetChatData(snapshot.data())\r\n\t\t\t\tsetMessageList(snapshot.data().messages)\r\n\t\t\t\tsetCurrentDateOnTop(snapshot.data().messages.length?snapshot.data().messages[0].sentTime:new Date().toString())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, chatId])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatData.participants !== undefined) {\r\n\t\t\tif (!chatData.participants.includes(currentUser.uid)) history.push('/chat')\r\n\t\t}\r\n\t}, [chatData])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (messagesWindowRef.current !== null && messageList.length > 0) scrollToMyRef()\r\n\t}, [messageList])\r\n\r\n\tfunction findTopDate(e){\r\n\t\tdateRefsArray.forEach(ref=>{\r\n\t\t\tif(ref.current !== null) {\r\n\t\t\t\tif(ref.current.offsetTop - 70 <= e.target.scrollTop) setCurrentDateOnTop(ref.current.innerHTML)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"DialoguePage\">\r\n\t\t\t{\r\n\t\t\t\tloading ?\r\n\t\t\t\t\t<LoadingCircle /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ChatHeader data={chatData} />\r\n\t\t\t\t\t\t<DateOnTop date = {currentDateOnTop}/>\r\n\t\t\t\t\t\t<div className=\"chatMessagesWindow\" ref={messagesWindowRef} onScroll = {findTopDate}>\r\n\t\t\t\t\t\t\t<DisplayChatMessages chatId = {chatId} messageList = {messageList} inResponseToMessage = {inResponseToMessage} setInResponseToMessage = {setInResponseToMessage} messagesWindowRef = {messagesWindowRef} setDateRefsArray = {setDateRefsArray}/>\r\n\t\t\t\t\t\t\t<span className=\"scrollToBottomElement\" ref={scrollToBottomElementRef}></span>\r\n\t\t\t\t\t\t\t<TypingAnimation typingPeople = {chatData.typing}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ChatInput \r\n\t\t\t\t\t\t\tchatId={chatId} \r\n\t\t\t\t\t\t\tchatData = {chatData}\r\n\t\t\t\t\t\t\tmessageText={messageText} \r\n\t\t\t\t\t\t\tsetMessageText={setMessageText} \r\n\t\t\t\t\t\t\tinResponseToMessage = {inResponseToMessage} \r\n\t\t\t\t\t\t\tsetInResponseToMessage = {setInResponseToMessage} \r\n\t\t\t\t\t\t\totherMessages = {messageList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t{chatData.wallpaper !== \"undefined\"?<img src={chatData.wallpaper} alt=\"\" style = {{position:'absolute', top:\"-30px\", left:\"-30px\", width:'calc(100% + 60px)', height:'calc(100% + 65px)', zIndex:'-1', outline:'none'}}/>:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export const LOGIN_ROUTE = '/login'\r\nexport const SIGNUP_ROUTE = '/signup'\r\nexport const HOME_ROUTE = '/home'\r\nexport const LIBRARY_ROUTE = '/library'\r\nexport const SEARCH_ROUTE = '/search'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const NOTFOUND_ROUTE = '/no-such-page'","import React from 'react'\r\n\r\nexport const BlurredBg = () => {\r\n\treturn (\r\n\t\t<div className = \"BlurredBg\">\r\n\t\t\t<div className=\"circle circle1\"></div>\r\n\t\t\t<div className=\"circle circle2\"></div>\r\n\t\t\t<div className=\"circle circle3\"></div>\r\n\t\t\t<div className=\"circle circle4\"></div>\r\n\t\t\t<div className=\"circle circle5\"></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nexport const TitleAndLogo = ({title}) => {\r\n\treturn (\r\n\t\t<div className=\"titleAndLogo\">\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<h1>{title}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi'\r\nimport { authors } from '../../data/authors'\r\nimport { playlists } from '../../data/playlists'\r\nimport { songs } from '../../data/songs'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport {LoadingCircle} from '../Basic/LoadingCircle'\r\nimport { BlurredBg } from '../SignIn-Up/BlurredBg'\r\nexport const MainBanner = () => {\r\n\tconst [bannerColors, setBannerColors] = useState([])\r\n\tconst [currentSliderPage, setcurrentSliderPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\t\r\n\tconst [topAuthor, setTopAuthor] = useState({})\r\n\tconst [topSong, setTopSong] = useState({})\r\n\tconst [topAlbum, setTopAlbum] = useState({})\r\n\t\r\n\tasync function findTop(setFunc, list, criterion) {\r\n\t\tconst response = await (await firestore.collection(list).orderBy(criterion, 'desc').get()).docs[0].data()\r\n\t\tsetFunc(response)\r\n\t\tsetBannerColors(prev=>[...prev, response.imageColors[0]])\r\n\t\tif(list === 'playlists') setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindTop(setTopAuthor, 'users', 'subscribers')\r\n\t\tfindTop(setTopSong, 'songs', 'listens')\r\n\t\tfindTop(setTopAlbum, 'playlists', 'listens')\r\n\t\t\r\n\t}, [])\r\n\t// function findCurrentPicture(){\r\n\t// \tif(currentSliderPage === 0){\r\n\t// \t\treturn topAuthor.image\r\n\t// \t}\r\n\r\n\t// \tif(currentSliderPage === 1){\r\n\t// \t\treturn topSong.cover\r\n\t// \t}\r\n\r\n\t// \treturn topAlbum.image\r\n\t// }\r\n\treturn (\r\n\t\t<div className = \"MainBanner\" style = {{background:bannerColors[currentSliderPage], boxShadow:`0 0 50px ${bannerColors[currentSliderPage] + 'ab'}`}}>\r\n\t\t\t{loading? <LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 0?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular artist on platform</h3>\r\n\t\t\t\t\t\t\t<AuthorItemBig data = {topAuthor}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 1?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular song on platform</h3>\r\n\t\t\t\t\t\t\t<SongItem song = {topSong} localIndex = {0} showListens/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 2?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular album on platform</h3>\r\n\t\t\t\t\t\t\t<PlaylistItem playlist = {topAlbum}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"sliderBtns\">\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage-1, 2, 0))}><BiChevronLeft/></button>\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage+1, 2, 0))}><BiChevronRight/></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<BlurredBg circleColor = \"#fff\"/>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport findIfSongIsNew from '../../functions/findIfSongIsNew'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\n\r\nexport const RecentSongs = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recentSongs, setRecentSongs] = useState([])\r\n\tfunction findRecentSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async songId=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(findIfSongIsNew(songData) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecentSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(yourAuthors !== undefined && yourAuthors.length !== 0 && recentSongs.length === 0) findRecentSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<SongList listOfSongs = {recentSongs} source = {{source: `/home`, name: \"New Songs\", image: \"\", songsList: recentSongs}} title = {\"New Songs\"} isNewSong/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport findSimilarArtists from '../../functions/findSimilarArtists'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { AuthorsList } from '../Basic/AuthorsList'\r\n\r\nexport const RecommendedAuthors = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recommendationAuthors, setRecommendationAuthors] = useState([])\r\n\r\n\tconst [uniqueAuthors, setUniqueAuthors] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tif (yourAuthors !== undefined) {\r\n\t\t\tyourAuthors.forEach((author) => {\r\n\t\t\t\tfindSimilarArtists(author, setRecommendationAuthors)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\trecommendationAuthors.forEach(author=>{\r\n\t\t\tconst uniqueAuthorsUIDSArray = uniqueAuthors.map(author=>author.uid)\r\n\t\t\tif(!currentUser.addedAuthors.includes(author.uid) && !uniqueAuthorsUIDSArray.includes(author.uid)){\r\n\t\t\t\tsetUniqueAuthors(prev=>[...prev, author])\r\n\t\t\t}\r\n\t\t})\r\n}, [recommendationAuthors])\r\n\treturn (\r\n\t\t<div className = \"RecommendedAuthors\">\r\n\t\t\t<AuthorsList listOfAuthors = {uniqueAuthors} title = {\"Recommended Authors\"}/>\r\n\t\t\t{/* <h2>Recommended Authors</h2>\r\n\t\t\t<div className=\"artistsWrapper\">\r\n\t\t\t\t{uniqueAuthors.map((author, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {useSong} from '../../functionality/SongPlay/SongContext'\r\nimport { SongList } from '../Basic/SongList'\r\nexport const RecommendedSongs = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [recommendedSongs, setRecommendedSongs] = useState([])\r\n\tfunction fetchRecommendedSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async (songId)=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(!currentUser.addedSongs.includes(songId) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecommendedSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// tempSongArray.sort((songA, songB)=>songB.listens - songA.listens)\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRecommendedSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = 'RecommendedSongs'>\r\n\t\t\t<SongList listOfSongs = {recommendedSongs} source = {{source: `/home`, name: \"Recommended Songs\", image: \"\", songsList: recommendedSongs}} title = {\"Recommended Songs\"} displayIfEmpty = {<div className = \"importantMessage\"><p><img src = {\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\"}/><h3>No songs recommended. Add favorite authors so we could know what to recommend</h3></p></div>}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/wave2.f62cb572.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport shortWord from '../../functions/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useEffect } from 'react'\r\nexport const LibraryPlaylistItem = ({playlist}) => {\r\n\tconst playlistDate = new Date(playlist.creationDate)\r\n\tconst {setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSongInQueue, setCurrentSong, currentSongPlaylistSource, songRef, setPlay, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tif(playlist.length !== 0){\r\n\t\t\tplaylist.songs.map(async songId=>{\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev=>[...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e){\r\n\t\te.preventDefault()\r\n\t\tif(currentSongPlaylistSource.name === playlist.name){\r\n\t\t\tplaySong()\r\n\t\t\treturn \r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\t\t\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(playlistSongs.length){\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource({source:`/albums/${playlist.id}`, name:playlist.name, image:playlist.image, songsList:playlistSongs})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t<div className=\"library playlistItem\">\r\n\t\t\t\t{playlist.image?<img src={playlist.image} alt=\"\" />:<h1>{playlist.name.split(' ')[0][0]}{playlist.name.split(' ')[1][0]}</h1>}\r\n\t\t\t\t<h2 style = {{background:playlist.imageColors[2]}}>{shortWord(playlist.name, 10) }</h2>\r\n\t\t\t\t<button onClick = {playChosenPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport wave from '../../images/wave2.svg'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {LibraryPlaylistItem} from '../../components/LibraryPage/LibraryPlaylistItem'\r\nimport { SongList } from '../Basic/SongList'\r\nimport { Link } from 'react-router-dom'\r\nexport const SongsPage = () => {\r\n\tconst {yourSongs, yourPlaylists } = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\treturn (\r\n\t\t<div className = \"SongsPage\">\r\n\t\t\t<div className=\"playLists\">\r\n\t\t\t\t<div className=\"playlistContent\">\r\n\t\t\t\t\t{yourPlaylists.map((p, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LibraryPlaylistItem playlist = {p} key = {index}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"playlistsBackground\">\r\n\t\t\t\t\t<img src={wave} alt=\"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"yourSongsList\">\r\n\t\t\t\t<SongList listOfSongs = {yourSongs} source = {{ source: '/library', name: \"Your Library\", image: currentUser.photoURL, songsList: yourSongs}} showSearch displayIfEmpty = {<Link to = \"/search\"><button className = \"standartButton\">Search for songs</button></Link>}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\n\r\nexport const CreatePlaylistPage = () => {\r\n\treturn (\r\n\t\t<div className = 'CreatePlaylistPage'>\r\n\t\t\t<AddPlaylist/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport {PlaylistItem} from '../AuthorPage/PlaylistItem'\r\nimport {BiFolderPlus} from 'react-icons/bi'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { CreatePlaylistPage } from './CreatePlaylistPage'\r\nexport const PlaylistsPage = () => {\r\n\tconst {yourPlaylists} = useSong()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"PlaylistsPage\">\r\n\t\t\t<button className = \"createPlaylistBtn\" onClick = {()=>{toggleModal(); setContent(<CreatePlaylistPage/>)}}>\r\n\t\t\t\t<BiFolderPlus/>\r\n\t\t\t\tCreate Playlist\r\n\t\t\t</button>\r\n\t\t\t<div className=\"playlistsContainer\">\r\n\t\t\t\t{yourPlaylists && yourPlaylists.map((playlist, index)=>{\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport {AuthorItemBig} from '../AuthorPage/AuthorItemBig'\r\nexport const AuthorsPage = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\treturn (\r\n\t\t<div className = \"AuthorsPage\">\r\n\t\t\t<div className=\"authorsContainer\">\r\n\t\t\t\t{yourAuthors.map((authorData)=>{\r\n\t\t\t\t\treturn <AuthorItemBig data = {authorData} key = {authorData.uid}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const IsUserOnlineCircle = ({userUID}) => {\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<div className = \"onlineCircle\"></div>:null\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { findAmountOfUnseenMessages } from '../../functions/findAmountOfUnseenMessages'\r\nexport const AmountOfUnseenMessages = ({amountOfUnseen}) => {\r\n\t\r\n\treturn amountOfUnseen !== 0?(\r\n\t\t<div className = \"AmountOfUnseenMessages\">\r\n\t\t\t{amountOfUnseen}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiMusic, FiUser } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport {BsDot} from 'react-icons/bs'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { SeenByCircle } from './SeenByCircle'\r\nexport const LastSentMessage = ({ messages }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [lastAttachedItem, setLastAttachedItem] = useState(\"\")\r\n\tconst [shouldPutDot, setShouldPutDot] = useState(false)\r\n\tconst [lastMessage, setLastMessage] = useState(\"\")\r\n\tconst messageIcons = [null, <FiMusic />, <BiAlbum />, <FiUser />]\r\n\tconst [lastIcon, setLastIcon] = useState(0)\r\n\tasync function findWhatToWriteUnderName() {\r\n\t\tif (messages !== undefined) {\r\n\t\t\tconst lastAttachedItem = messages[messages.length - 1]\r\n\t\t\tsetLastMessage(str => str += lastAttachedItem.message)\r\n\t\t\tsetShouldPutDot(lastAttachedItem.message.length !== 0) \r\n\t\t\tif (lastAttachedItem.attachedSongs.length) {\r\n\t\t\t\tconst songName = (await firestore.collection('songs').doc(lastAttachedItem.attachedSongs[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(1)\r\n\t\t\t\tsetLastAttachedItem(str => str += songName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAlbums.length) {\r\n\t\t\t\tconst playlistName = (await firestore.collection('playlists').doc(lastAttachedItem.attachedAlbums[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(2)\r\n\t\t\t\tsetLastAttachedItem(str => str +=playlistName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAuthors.length) {\r\n\t\t\t\tconst authorName = (await firestore.collection('users').doc(lastAttachedItem.attachedAuthors[0]).get()).data().displayName\r\n\t\t\t\tsetLastIcon(3)\r\n\t\t\t\tsetLastAttachedItem(str => str +=authorName)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindWhatToWriteUnderName()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className=\"messageShowOutside\">\r\n\t\t\t{messages[messages.length - 1].sender === currentUser.uid?<span style = {{marginRight:'5px'}}>You:</span>:null}\r\n\t\t\t{shortWord(lastMessage, 30)}\r\n\t\t\t{shouldPutDot && lastAttachedItem.length?<BsDot/>:null}\r\n\t\t\t{messageIcons[lastIcon]}\r\n\t\t\t{lastAttachedItem}\r\n\t\t\t<SeenByCircle listOfSeen = {messages[messages.length - 1].seenBy}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport displayDate from '../../functions/displayDate'\r\nimport { findAmountOfUnseenMessages } from '../../functions/findAmountOfUnseenMessages'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\nimport { AmountOfUnseenMessages } from './AmountOfUnseenMessages'\r\nimport { LastSentMessage } from './LastSentMessage'\r\n\r\nexport const ChatItem = ({ chatData }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatName, chatImage, participants, messages } = chatData\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [amountOfUnseen, setAmountOfUnseen] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountOfUnseen(findAmountOfUnseenMessages(messages, currentUser))\r\n\t}, [])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName === '') {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [])\r\n\treturn chatData?(\r\n\t\t<Link to={`/chat/${chatData.id}`}>\r\n\t\t\t<div className={\"ChatItem \" + (amountOfUnseen > 0?\"unseen\":\"\")} >\r\n\t\t\t\t<div className=\"chatItemImage\">\r\n\t\t\t\t\t<img src={chatImage || otherPerson.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<IsUserOnlineCircle userUID = {otherPerson.uid}/>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<h4 style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n\t\t\t\t\t\t<span>{chatName || otherPerson.displayName}</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{messages.length?<span style={{ opacity: '.6', fontWeight: '500', fontSize: '.8em' }}>{displayDate(messages[messages.length - 1].sentTime, chatData && ( Date.now() - new Date(messages[messages.length - 1].sentTime).getTime()) > 86000000 ? 0 : 2)}</span>:null}\r\n\t\t\t\t\t\t\t<AmountOfUnseenMessages amountOfUnseen = {amountOfUnseen}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t{messages.length?<p style={messages[messages.length - 1].sender !== currentUser.uid ? { color: '#fff' } : {}}>{<LastSentMessage messages={messages} />}</p>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t):null\r\n}\r\n","export function findAmountOfUnseenMessages(messages, currentUser) {\r\n\treturn messages.reduce((accum, message)=>{\r\n\t\tif(message.sender !== currentUser.uid){\r\n\t\t\tif(message.seenBy !== undefined){\r\n\t\t\t\tif(!message.seenBy.includes(currentUser.uid)){\r\n\t\t\t\t\tconsole.log(\"i'm here\")\r\n\t\t\t\t\treturn ++accum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn accum\r\n\t}, 0)\r\n}","import React, { useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\n\r\nexport const ModalWindow = ({children, ...restProps}) => {\r\n\tconst {openModal, setOpenModal, content} = useModal()\r\n\tconst modalRef = useRef(null)\r\n\tuseOutsideClick(modalRef, setOpenModal)\r\n\treturn (\r\n\t\t<div className = \"modal_darkBg\" style = {!openModal?{opacity:0, visibility:'hidden', transform:'scale(.95)'}:{}} >\r\n\t\t\t<div className = \"ModalWindow\" {...restProps} ref = {modalRef}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport getUID from '../../functions/getUID'\r\nimport { DownloadPhotoButton } from '../Basic/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../Basic/ErrorPlate'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const CreateChat = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [foundFriends, setFoundFriends] = useState(yourFriends)\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst [chatCover, setChatCover] = useState(\"\")\r\n\tconst [chatName, setChatName] = useState(\"\")\r\n\tconst [errorMessage, setRrrorMessage] = useState(\"\")\r\n\tconst chatId = getUID()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className=\"CreateChat\">\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundFriends} focus inputText={\"Search for friends\"} defaultSearchMode={\"authors\"} />\r\n\t\t\t{foundFriends.map(friend => {\r\n\t\t\t\treturn <PersonTiny data={friend} chosenArray={chosenFriends} setChosenArray={setChosenFriends} />\r\n\t\t\t})}\r\n\t\t\t{chosenFriends.length > 1 ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" style={{ marginBottom: '10px' }} className=\"standartInput\" placeholder={\"Enter chat name\"} value={chatName} onChange={e => setChatName(e.target.value)} />\r\n\t\t\t\t\t<DownloadPhotoButton setErrorMessage={setRrrorMessage} setImageLocalPath={() => { return null }} downloadedPhoto={chatCover} setDownloadedPhoto={setChatCover} place={'chatCovers/'} />\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t<button className=\"addSongBtn\" onClick = {()=>{createChat([currentUser.uid, ...chosenFriends], chatId, chatName, chatCover, [currentUser.uid]); history.push(`/chat/${chatId}`)}}>Create Chat</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, LOGIN_ROUTE, SEARCH_ROUTE, SIGNUP_ROUTE } from \"./utils/consts\";\r\nimport {LogInPage} from './pages/LogInPage'\r\nimport {SignUpPage} from './pages/SignUpPage'\r\nimport { Home } from \"./pages/Home\";\r\nimport { SearchPage } from \"./pages/SearchPage\";\r\nimport { LibraryPage } from \"./pages/LibraryPage\";\r\nimport { ChatPage } from \"./pages/ChatPage\";\r\nexport const publicRoutes = [\r\n\t{\r\n\t\tpath:LOGIN_ROUTE,\r\n\t\tComponent:LogInPage,\r\n\t},\r\n\t{\r\n\t\tpath:SIGNUP_ROUTE,\r\n\t\tComponent:SignUpPage,\r\n\t}\r\n]\r\n\r\nexport const privateRoutes = [\r\n\t{\r\n\t\tpath:HOME_ROUTE,\r\n\t\tComponent:Home,\r\n\t},\r\n\t{\r\n\t\tpath:LIBRARY_ROUTE,\r\n\t\tComponent:LibraryPage,\r\n\t},\r\n\t{\r\n\t\tpath:SEARCH_ROUTE,\r\n\t\tComponent:SearchPage,\r\n\t},\r\n\t{\r\n\t\tpath:CHAT_ROUTE,\r\n\t\tComponent:ChatPage,\r\n\t}\r\n]","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { HOME_ROUTE, LOGIN_ROUTE, SIGNUP_ROUTE } from '../utils/consts'\r\n\r\nexport const LogInPage = () => {\r\n\tconst {login} = useAuth()\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst isValid = email.length !== 0 && password.length !== 0\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tsetLoading(true)\r\n\t\t\tsetErrorMessage('')\r\n\t\t\tawait login(email, password)\r\n\t\t} catch{\r\n\t\t\tsetErrorMessage('Some error happend')\r\n\t\t}\r\n\r\n\t\tsetLoading(false)\r\n\t}\r\n\treturn (\r\n\t\t<div className = \"In-Up-Container\">\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<TitleAndLogo title=\"Log In\"/>\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Enter your password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" disabled = {loading}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {SIGNUP_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tCreate new account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../styles/SignIn-Up.css'\r\nimport { Link } from 'react-router-dom'\r\nimport {HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { RadioBtn } from '../components/SignIn-Up/RadioBtn'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport {AiOutlineCloudDownload} from 'react-icons/ai'\r\nimport { storage } from '../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nexport const SignUpPage = () => {\r\n\tconst [currentRoleChoice, setCurrentRoleChoice] = useState(1)\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst {signup} = useAuth()\r\n\tconst [photoURL, setPhotoURL] = useState(\"\")\r\n\tconst isValid = email.length !== 0 && password.length !== 0 && name.length !== 0\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tasync function onFileChange(e){\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(`usersImages/${file.name}`)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetPhotoURL(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tsetLoading(true)\r\n\t\t\tsetErrorMessage('')\r\n\t\t\tawait signup(email, name, password, currentRoleChoice, photoURL, imageColors)\r\n\t\t} catch{\r\n\t\t\tsetErrorMessage(\"Some error happend\")\r\n\t\t}\r\n\r\n\t\tsetLoading(false)\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"In-Up-Container\">\r\n\t\t\t<ColorExtractor src = {imageLocalPath} getColors = {(colors)=>setImageColors(colors)}/>\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<TitleAndLogo title = \"Sign Up\"/>\r\n\t\t\t\t\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className = \"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" onChange = {(e)=>setName(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Create a password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div style = {{display:'flex', width:'100%', justifyContent:'center', margin:'5px 0 15px 0'}}>\r\n\t\t\t\t\t\t<RadioBtn label = \"User\" onClick = {()=>setCurrentRoleChoice(0)} currentActive = {currentRoleChoice} id = {0}/>\r\n\t\t\t\t\t\t<RadioBtn label = \"Author\" onClick = {()=>setCurrentRoleChoice(1)} currentActive = {currentRoleChoice} id = {1}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className = \"downloadFile\">\r\n\t\t\t\t\t\t<div className = \"downloadPhoto\">\r\n\t\t\t\t\t\t\t<span className = \"downloadBtnText\">\r\n\t\t\t\t\t\t\t\t<AiOutlineCloudDownload/>\r\n\t\t\t\t\t\t\t\tDownload photo\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className=\"photoLoadLine\" style = {photoURL !== ''?{width:'100%'}:{}}></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange = {onFileChange}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" type = \"submit\" disabled = {loading}>\r\n\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {LOGIN_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tAlready have the account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../styles/HomePage.css'\r\nimport { MainBanner } from '../components/HomePage/MainBanner'\r\nimport { RecentSongs } from '../components/HomePage/RecentSongs'\r\nimport { RecommendedAuthors } from '../components/HomePage/RecommendedAuthors'\r\nimport { RecommendedSongs } from '../components/HomePage/RecommendedSongs'\r\nexport const Home = () => {\r\n\r\nreturn (\r\n\t<div style={{ animation: 'zoomIn .2s forwards' }} className=\"HomePage\">\r\n\t\t<MainBanner />\r\n\t\t<RecommendedSongs/>\r\n\t\t<RecommendedAuthors/>\r\n\t\t{/* <DefaultPlaylists/> */}\r\n\t\t<RecentSongs/>\r\n\t</div>\r\n)\r\n}\r\n","import React, { useState } from 'react'\r\nimport \"../styles/LibraryPage.css\"\r\nimport { Slider } from '../components/Tools/Slider'\r\nimport { SongsPage } from '../components/LibraryPage/SongsPage'\r\nimport { PlaylistsPage } from '../components/LibraryPage/PlaylistsPage'\r\nimport { AuthorsPage } from '../components/LibraryPage/AuthorsPage'\r\n\r\nexport const LibraryPage = () => {\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst libraryPages = [<SongsPage/>, <PlaylistsPage/>, <AuthorsPage/>]\r\n\treturn (\r\n\t\t<div className=\"LibraryPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t<Slider pages = {['Songs', \"Playlists\", \"Authors\"]} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t{libraryPages[currentPage]}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport \"../styles/SearchPage.css\"\r\nimport { PlaylistItem } from '../components/AuthorPage/PlaylistItem'\r\nimport { useSong } from '../functionality/SongPlay/SongContext'\r\nimport { BackBtn } from '../components/Basic/BackBtn'\r\nimport { FiSearch, FiX } from 'react-icons/fi'\r\nimport { TitleWithMoreBtn } from '../components/Basic/TitleWithMoreBtn'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport { SearchBar } from '../components/Basic/SearchBar'\r\nimport {AuthorItemBig} from '../components/AuthorPage/AuthorItemBig'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { SongList } from '../components/Basic/SongList'\r\nimport { AuthorsList } from '../components/Basic/AuthorsList'\r\nimport { AlbumList } from '../components/Basic/AlbumList'\r\nexport const SearchPage = () => {\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [resultSongList, setResultSongList] = useState([])\r\n\tconst [resultAuthorList, setResultAuthorList] = useState([])\r\n\tconst [resultAlbumList, setResultAlbumList] = useState([])\r\n\tconst [shadowColor, setShadowColor] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetResultSongList([])\r\n\t\tsetResultAuthorList([])\r\n\t\tsetResultAlbumList([])\r\n\t}, [searchValue])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(resultSongList.length !== 0){\r\n\t\t\tsetShadowColor(resultSongList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAuthorList.length !== 0){\r\n\t\t\tsetShadowColor(resultAuthorList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAlbumList.length !== 0){\r\n\t\t\tsetShadowColor(resultAlbumList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse setShadowColor(\"\")\r\n\t}, [resultSongList, resultAuthorList, resultAlbumList])\r\n\treturn (\r\n\t\t<div className=\"SearchPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<SearchBar\r\n\t\t\t\tvalue={searchValue}\r\n\t\t\t\tsetValue = {setSearchValue}\r\n\t\t\t\tallFoundSongs = {resultSongList}\r\n\t\t\t\tsetAllFoundSongs = {setResultSongList}\r\n\t\t\t\tsetResultPlaylists = {setResultAlbumList}\r\n\t\t\t\tsetResultAuthorList = {setResultAuthorList}\r\n\t\t\t\tfocus\r\n\t\t\t/>\r\n\r\n\t\t\t<SongList listOfSongs = {resultSongList} source = {{ source: '/search', name: \"Search\", image: \"https://lh3.googleusercontent.com/proxy/PJSN5iZPJhIuQKV-efbS0KD_HoL9nu4cyDmwOfWatZdeOyLBsEtosSWHTw4aK9ZKhrTEW2LGZCGxmH9vYFYx_PT16PIrETeNqijSxA\", songsList:resultSongList }} title = {\"Songs\"} showListens displayIfEmpty = {\"\"}/>\r\n\t\t\t<AuthorsList listOfAuthors = {resultAuthorList} title = {\"Authors\"}/>\r\n\t\t\t<AlbumList listOfAlbums = {resultAlbumList} title = {\"Albums and Playlists\"} loading = {false}/>\r\n\t\t\t<div className=\"colorfullShadow\" style={{ background: shadowColor }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { ChatItem } from '../components/ChatPage/ChatItem'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { LoadingCircle } from '../components/Basic/LoadingCircle'\r\nimport '../styles/ChatPage.css'\r\nimport { ModalWindow } from '../components/Basic/ModalWindow'\r\nimport { useFetchFirebaseData } from '../hooks/fetchFirebaseData'\r\nimport {FiPlus} from 'react-icons/fi'\r\nimport { useModal } from '../functionality/ModalClass'\r\nimport {CreateChat} from '../components/ChatPage/CreateChat'\r\nexport const ChatPage = () => {\r\n\tconst [yourChats, setYourChats] = useState([])\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tuseFetchFirebaseData(setLoading, 'chats', currentUser.chats, setYourChats, (a, b)=>{if(b.messages.length && a.messages.length) return new Date(b.messages[b.messages.length - 1].sentTime).getTime() - new Date(a.messages[a.messages.length - 1].sentTime).getTime()})\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards', minHeight: \"100%\" }}>\r\n\t\t\t<div style = {{marginBottom:'10px', display:'flex', alignItems:'start', width:'100%'}}>\r\n\r\n\t\t\t\t<button className = \"standartButton\" onClick = {()=>{toggleModal();setContent(<CreateChat/>)}}>\r\n\t\t\t\t\t<FiPlus/>\r\n\t\t\t\t\tCreate chat\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{loading ?\r\n\t\t\t\t<LoadingCircle />\r\n\t\t\t\t:\r\n\t\t\t\t<div className=\"chatsWrapper\">\r\n\t\t\t\t\t{yourChats.map((chat, index) => {\r\n\t\t\t\t\t\treturn <ChatItem chatData={chat} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { AlbumPage } from '../pages/AlbumPage'\r\nimport { AuthorPage } from '../pages/AuthorPage'\r\nimport { DialoguePage } from '../pages/DialoguePage'\r\nimport { privateRoutes, publicRoutes } from '../routes'\r\nimport { HOME_ROUTE, LOGIN_ROUTE} from '../utils/consts'\r\nexport const ContentRouter = () => {\r\n\tconst user = false\r\n\t\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<Route path={'/authors/:authorId'} component={AuthorPage} exact/>\r\n\t\t\t<Route path={'/albums/:albumId'} component={AlbumPage} exact/>\r\n\t\t\t<Route path={'/chat/:chatId'} component={DialoguePage} exact/>\r\n\t\t\t{privateRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={HOME_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","function amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nexport default function correctTimeDisplay(seconds) {\r\n\treturn amountOfZeros(Math.floor(seconds / 60)) + \":\" + amountOfZeros(Math.floor(seconds % 60))\r\n}","import React from 'react'\r\nimport { FaBackward, FaForward, FaPause, FaPlay } from 'react-icons/fa'\r\nimport { TiArrowRepeat, TiArrowShuffle } from 'react-icons/ti'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport checkNumber from '../../functions/checkNumber'\r\nimport correctTimeDisplay from '../../functions/correctTimeDisplay'\r\nimport { ColorCircles } from './colorCircles'\r\n\r\nexport const Player = ({inputRef, textLimit = 18}) => {\r\n\tconst { \r\n\t\tfindLen,  \r\n\t\tcurrentTime, \r\n\t\tchangeCurrentTime, \r\n\t\tsongDuration, \r\n\t\tsetRepeatMode, \r\n\t\trepeatMode, \r\n\t\tplay, \r\n\t\tprevSong, \r\n\t\tplaySong, \r\n\t\tnextSong, \r\n\t\tsetShuffleMode, \r\n\t\tshuffleMode, \r\n\t\tdisplayAuthors,\r\n\t\tname, \r\n\t\tauthors, \r\n\t\tcover} = useSong()\r\n\treturn (\r\n\t\t<div className=\"player\">\r\n\t\t\t<div className=\"playerUpperSide\">\r\n\t\t\t\t<div className=\"songCover\">\r\n\t\t\t\t\t<img src={cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"nameAndAuthors\">\r\n\t\t\t\t\t<h2 title={name.length > textLimit ? name : null} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={name.length > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{name}</div>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h3 title={authors.map((el) => ' ' + el.displayName)} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={findLen() > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{displayAuthors()}</div>\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"controlPanel\">\r\n\t\t\t\t<input type=\"range\" min=\"0\" ref={inputRef} step=\"1\" value={currentTime} onChange={(event)=>{changeCurrentTime(event)}} />\r\n\t\t\t\t<div className=\"startAndEndTime\">\r\n\t\t\t\t\t<span>{correctTimeDisplay(currentTime)}</span>\r\n\t\t\t\t\t<span>{correctTimeDisplay(songDuration)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<button className=\"shuffleBtn\" onClick={() => setShuffleMode(checkNumber(shuffleMode + 1, 1))} style={shuffleMode ? { background: 'var(--transparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowShuffle style={shuffleMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={prevSong}><FaBackward /></button>\r\n\t\t\t\t\t<button onClick={playSong}>{play ? <FaPause /> : <FaPlay />}</button>\r\n\t\t\t\t\t<button onClick={nextSong}><FaForward /></button>\r\n\t\t\t\t\t<button className=\"repeatBtn\" onClick={() => setRepeatMode(checkNumber(repeatMode + 1, 2))} style={repeatMode ? { background: 'var(--transparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowRepeat style={repeatMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t\t<span style={repeatMode === 2 ? { opacity: 1 } : {}}></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { BiMusic, BiSearch } from \"react-icons/bi\";\r\nimport { FiHome, FiMessageCircle } from \"react-icons/fi\";\r\nimport { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, SEARCH_ROUTE } from \"../utils/consts\";\r\n\r\nexport const leftSideBar = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<FiHome/>,\r\n\t\ttitle:'Home',\r\n\t\tlink:HOME_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiMusic/>,\r\n\t\ttitle:'Library',\r\n\t\tlink:LIBRARY_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<BiSearch/>,\r\n\t\ttitle:'Search',\r\n\t\tlink:SEARCH_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<FiMessageCircle/>,\r\n\t\ttitle:'Chat',\r\n\t\tlink:CHAT_ROUTE\r\n\t},\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const MobileControlBarItem = ({element, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<Link to = {element.link} className = 'MobileControlBarItem' onClick = {()=>setCurrentPage(element.id)} style = {element.id === currentPage?{color:'var(--blue)'}:{}}>\t\r\n\t\t\t{element.icon}\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../../styles/BottomControlBar.css'\r\nimport {leftSideBar} from '../../data/leftSideBar'\r\nimport { MobileControlBarItem } from '../BottomControlBar/MobileControlBarItem'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { BiUserCircle } from 'react-icons/bi'\r\nimport normalizeString from '../../functions/normalizeString'\r\nexport const BottomControlBar = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst userElement = {\r\n\t\ticon:<BiUserCircle/>,\r\n\t\tlink:`/authors/${currentUser.uid}`,\r\n\t}\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.pathname.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(window.location.pathname.includes(currentUser.uid)) return true\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined?0:page.id \r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className = \"BottomControlBar\">\r\n\t\t\t{leftSideBar.map((el, i)=>{\r\n\t\t\t\treturn <MobileControlBarItem element = {el} key = {i} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t})}\r\n\t\t\t<MobileControlBarItem element = {userElement} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BottomControlBar } from './BottomControlBar'\r\n\r\nexport const FullBottomSide = () => {\r\n\tconst {setOpenFullScreenPlayer} = useSong()\r\n\treturn (\r\n\t\t<div className = \"FullBottomSide\">\r\n\t\t\t<span onClick = {()=>setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t<Player textLimit = {25}/>\r\n\t\t\t</span>\r\n\t\t\t<BottomControlBar/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Loading = ({currentTime, timeSpan, id}) => {\r\n\treturn (\r\n\t\t<div className = \"Loading\" id = {id}>\r\n\t\t\t<div className=\"outer\" style = {{pointerEvents:'none'}}>\r\n\t\t\t\t<div className=\"inner\" style = {currentTime/timeSpan < 1?{width:(currentTime/timeSpan)*100 + \"%\"}:{width:0 + \"%\", opacity:'0'}}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { Share } from '../components/FullScreenPlayer/Share';\r\nimport { Options } from '../components/FullScreenPlayer/Options';\r\nimport { Lyrics } from '../components/FullScreenPlayer/Lyrics';\r\nimport { Queue } from '../components/FullScreenPlayer/Queue';\r\nimport { BiDotsVerticalRounded, BiShare } from 'react-icons/bi';\r\nimport {RiPlayListFill} from 'react-icons/ri'\r\nimport {FiAlignLeft} from 'react-icons/fi'\r\nimport { TiDocumentText } from 'react-icons/ti';\r\nimport { AuthorsList } from '../components/FullScreenPlayer/AuthorsList';\r\nimport { SongInfo } from '../components/Basic/SongInfo';\r\nimport { AddToPlaylists } from '../components/FullScreenPlayer/AddToPlaylists';\r\nexport const rightSide = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<BiShare/>,\r\n\t\ttitle:'Share',\r\n\t\tcomponent:Share\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiDotsVerticalRounded/>,\r\n\t\ttitle:'More',\r\n\t\tcomponent:Options\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<TiDocumentText/>,\r\n\t\ttitle:'Lyrics',\r\n\t\tcomponent:Lyrics\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<RiPlayListFill/>,\r\n\t\ttitle:'Queue',\r\n\t\tcomponent:Queue\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\ticon:null,\r\n\t\ttitle:'Go To Authors',\r\n\t\tcomponent:AuthorsList\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\ticon:null,\r\n\t\ttitle:'Add to playlist',\r\n\t\tcomponent:AddToPlaylists\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\ticon:null,\r\n\t\ttitle:'Info',\r\n\t\tcomponent:SongInfo\r\n\t},\r\n]","import React, { useState } from 'react'\r\nimport { FaFacebookF, FaTelegramPlane, FaVk } from 'react-icons/fa'\r\nimport { FiCopy } from 'react-icons/fi'\r\nimport { AiFillInstagram } from 'react-icons/ai'\r\nimport { ImWhatsapp } from 'react-icons/im'\r\nimport { friends } from '../../data/friends'\r\nimport { HiSearch } from 'react-icons/hi'\r\nimport { BiCheckCircle } from 'react-icons/bi'\r\nimport { chat } from '../../data/chat'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { authors } from '../../data/authors'\r\nimport {FriendsListToShareWith} from '../Basic/FriendsListToShareWith'\r\nexport const Share = () => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst socialMedia = [\r\n\t\t<ImWhatsapp />,\r\n\t\t<FaFacebookF />,\r\n\t\t<FaTelegramPlane />,\r\n\t\t<FaVk />,\r\n\t\t<AiFillInstagram />\r\n\t]\r\n\treturn (\r\n\t\t<div className=\"Share\">\r\n\t\t\t<button className=\"shareCopyLink\">\r\n\t\t\t\t<FiCopy />\r\n\t\t\t\tCopy link\r\n\t\t\t</button>\r\n\t\t\t<div className=\"shareOnSocial\">\r\n\t\t\t\t{socialMedia.map((social, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"shareSocialIcon\" key={index}>\r\n\t\t\t\t\t\t\t{social}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sharePeopleShort\">\r\n\t\t\t\t<FriendsListToShareWith item = {currentSongData} whatToShare = {'song'}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {MdPlaylistAdd} from 'react-icons/md'\r\nimport { BiAlbum, BiHeart, BiInfoCircle, BiPlusCircle, BiUserCircle } from \"react-icons/bi\";\r\nimport {FiTrash2, FiPlusCircle, FiInfo} from 'react-icons/fi'\r\nimport { useAuth } from '../../functionality/AuthContext';\r\nimport { useSong } from '../../functionality/SongPlay/SongContext';\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton';\r\nexport const Options = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {currentSongData, setRightSideCurrentPage} = useSong()\r\n\treturn (\r\n\t\t<div className='Options'>\r\n\t\t\t<div className='OptionItem' >\r\n\t\t\t\t<AddOrDeleteButtonFull song = {currentSongData}/>\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(4)}>\r\n\t\t\t\t<BiUserCircle />\r\n\t\t\t\tGo to author\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(5)}>\r\n\t\t\t\t<MdPlaylistAdd />\r\n\t\t\t\tAdd to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(6)}>\r\n\t\t\t\t<FiInfo/>\r\n\t\t\t\tInfo\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Loading } from './Loading'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { Slider } from '../Tools/Slider'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nexport const Lyrics = () => {\r\n\tconst { setIsThereKaraoke, currentSongData, setCurrentSongData, isThereKaraoke, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, currentSong, lyrics, rightSideCurrentPage, openFullScreenPlayer } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [inputKaraokeTime, setInputKaraokeTime] = useState(0)\r\n\tconst [karaokeModeratorTimes, setKaraokeModeratorTimes] = useState([])\r\n\tconst [lyricsModeratorMode, setLyricsModeratorMode] = useState(0)\r\n\tconst [canUpdateLyrics, setCanUpdateLyrics] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) currentParagraphRef.current.scrollIntoView()\r\n\t}, [currentParagraph])\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(lyrics[0] && lyrics[0].startTime !== 'undefined'){\r\n\t\t\tlyrics.forEach(paragraph => {\r\n\t\t\t\tkaraokeModeratorTimes.push(paragraph.startTime)\r\n\t\t\t});\r\n\t\t\tsetCanUpdateLyrics(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet tempSongData = currentSongData\r\n\t\t// console.log(tempSongData)\r\n\t\tif (tempSongData !== undefined && inputKaraokeTime !== 0) {\r\n\t\t\ttempSongData.lyrics.forEach((paragraph, index) => {\r\n\t\t\t\tparagraph.startTime = karaokeModeratorTimes[index] || 'undefined'\r\n\t\t\t})\r\n\t\t\tsetCurrentSongData(tempSongData)\r\n\t\t\tsetIsThereKaraoke(true)\r\n\t\t}\r\n\r\n\t\tif(!currentSongData.lyrics.some(paragraph=>paragraph.startTime === 'undefined')) setCanUpdateLyrics(true)\r\n\t\telse setCanUpdateLyrics(false)\r\n\t}, [inputKaraokeTime])\r\n\tfunction updateLyrics() {\r\n\t\t//TODO: add if statement to prevent adding lyrics time spans to not everysingle paragraph block\r\n\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\tlyrics: currentSongData.lyrics\r\n\t\t})\r\n\t}\r\n\r\n\t// console.log(currentSongData)\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Lyrics\">\r\n\t\t\t{\r\n\t\t\t\tcurrentUser.isAdmin ?\r\n\t\t\t\t\t<Slider pages={['Listen mode', 'Edit Mode']} currentPage={lyricsModeratorMode} setCurrentPage={setLyricsModeratorMode} /> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tisThereKaraoke ?\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i} id = {i}  onClick={(e) => changeCurrentTime(e, el.startTime)} style={play ? currentParagraph === i ? {} : Math.abs(currentParagraph - i) < 2 ? { opacity: .5, filter: 'blur(1px)' } : { opacity: .2, filter: 'blur(2px)' } : {}} ref={currentParagraph === i ? currentParagraphRef : null} >\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t<span onClick={e => e.stopPropagation()}>{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} </span>\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>{addLyricsBlock(i, 'up')}}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>{addLyricsBlock(i, 'down')}}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tel.text === \"@loading\" ?\r\n\t\t\t\t\t\t\t\t\t\t<Loading currentTime={currentTime - lyrics[i].startTime} timeSpan={lyrics[i + 1].startTime - lyrics[i].startTime} id = {i}/>\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\tel.text === \"@end\" ? <></>\r\n\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t<p key={i} id = {i} style={currentParagraph === i ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t{} : window.innerWidth > 1000 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMath.abs(currentParagraph - i) < 2 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ transform: 'scale(.8) translateX(-58px)' } : { transform: 'scale(.75) translateX(-78px)' } :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tMath.abs(currentParagraph - i) < 2 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ transform: 'scale(.8) translateX(-11.5%)' } : { transform: 'scale(.75) translateX(-15.6%)' }}>{el.text}</p>\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} \r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'up')}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'down')}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<p>{el.text}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<h6 className={\"lyricsAuthors \" + (currentParagraph === lyrics.length - 1 ? \"active\" : \"\")}>Authors:  {displayAuthors()}</h6>\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<button onClick={canUpdateLyrics?updateLyrics:null} className=\"updateLyricsBtn\" style = {!canUpdateLyrics?{opacity:0.3}:{}}>Update Lyrics</button> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { SongItem } from './SongItem'\r\n\r\nexport const Queue = () => {\r\n\tconst { currentSongQueue, currentSongPlaylistSource, setOpenFullScreenPlayer } = useSong()\r\n\treturn (\r\n\t\t<div className=\"Queue\">\r\n\t\t\t<div className=\"queueNowIsPlaying\">\r\n\t\t\t\t<h5 style={{ marginTop: 2 }}>\r\n\t\t\t\t\tNow is playing:\r\n\t\t\t\t\t<Link onClick={() => setOpenFullScreenPlayer(false)} to={currentSongPlaylistSource.source} className=\"queueAlbumName\">\r\n\t\t\t\t\t\t<div className=\"queueImage\">\r\n\t\t\t\t\t\t\t<img src={currentSongPlaylistSource.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>{shortWord(currentSongPlaylistSource.name, 25)}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t\t{currentSongQueue.map((song, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SongItem song={song} localIndex={index} key={index} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\n\r\nexport const AuthorsList = () => {\r\n\tconst { displayAuthorsFull } = useSong()\r\n\treturn (\r\n\t\t<div className=\"rightSideAuthorsList\" >\r\n\t\t\t<div className=\"rightSideAuthorsListCentralBlock\">\r\n\t\t\t\t{displayAuthorsFull()}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../../App.css';\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { BiChevronLeft } from 'react-icons/bi'\r\nimport { rightSide } from '../../data/playerRightSide'\r\nimport { Player } from '../FullScreenPlayer/Player';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { useSong } from '../../functionality/SongPlay/SongContext';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport {useSwipeable} from 'react-swipeable'\r\nimport checkNumber from '../../functions/checkNumber';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\n\r\nexport default function FullScreenPlayer() {\r\n  const {\r\n    imgColors,\r\n    inputRef,\r\n    rightSideCurrentPage,\r\n    setRightSideCurrentPage,\r\n    openFullScreenPlayer,\r\n    setOpenFullScreenPlayer,\r\n    lyrics,\r\n    openMenu,\r\n    setOpenMenu\r\n  } = useSong()\r\n  \r\n  const lyricsRef = useRef(null)\r\n  const [transformTransition, setTransformTransition] = useState(0.05)\r\n  const [mobileMenuTransition, setMobileMenuTransition] = useState(0)\r\n  // const [swipeDown, setSwipeDown] = useState(false)\r\n  const [deltaY, setDeltaY] = useState(0)\r\n  const [deltaYMobileMenu, setDeltaYMobileMenu] = useState(0)\r\n  const mobileContentScroll = useRef()\r\n  // setup ref for your usage\r\n  const mobileMenuRef = React.useRef();\r\n  useOutsideClick(mobileMenuRef, setOpenMenu)\r\n  const handlers = useSwipeable({\r\n    // onSwiped: (eventData) => {setSwipeDown(eventData.dir === 'Down')},\r\n    onSwiping: (event) => { if (event.deltaY > 0) setDeltaY(event.deltaY); }\r\n  })\r\n\r\n  // setup ref for your usage\r\n  const bgRef = React.useRef();\r\n\r\n  const handlersForMobileMenu = useSwipeable({\r\n    onSwiping: (event) => {event.event.stopPropagation();if (openMenu && mobileContentScroll.current.scrollTop === 0 &&  event.deltaY > 0) setDeltaYMobileMenu(event.deltaY); else if (!openMenu && event.deltaY < 0) setDeltaYMobileMenu(event.deltaY) },\r\n    onSwipedLeft:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage+1, 3))},\r\n    onSwipedRight:()=> {setRightSideCurrentPage(checkNumber(rightSideCurrentPage-1, 3))}\r\n  })\r\n  \r\n\r\n  function returnToInitialMobileMenu() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setMobileMenuTransition(0)\r\n    dropDelta = setTimeout(() => {\r\n      setMobileMenuTransition(0.2)\r\n      setDeltaYMobileMenu(0)\r\n    }, 300)\r\n    \r\n  }\r\n\r\n  useEffect(() => {\r\n    if (deltaY > 150) {\r\n      setOpenFullScreenPlayer(false)\r\n    }\r\n  }, [deltaY])\r\n\r\n  useEffect(() => {\r\n    if (!openMenu && deltaYMobileMenu < -100) {\r\n      setOpenMenu(true)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else if (openMenu && deltaYMobileMenu > 150) {\r\n      setOpenMenu(false)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else {\r\n      returnToInitialMobileMenu()\r\n    }\r\n  }, [deltaYMobileMenu])\r\n\r\n  \r\n\r\n  function returnToInitial() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setTransformTransition(0.2)\r\n    dropDelta = setTimeout(() => {\r\n      setDeltaY(0)\r\n      setTransformTransition(0)\r\n    }, 100)\r\n  }\r\n\r\n  const refPassthroughBg = (el) => {\r\n    handlers.ref(el);\r\n    bgRef.current = el;\r\n  }\r\n\r\n  const refPassthroughMobileMenu = (el) => {\r\n    handlersForMobileMenu.ref(el);\r\n    mobileMenuRef.current = el;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (imgColors.length !== 0) {\r\n      document.documentElement.style.setProperty('--themeColor', imgColors[1]);\r\n      document.documentElement.style.setProperty('--themeColor2', imgColors[0]);\r\n      document.documentElement.style.setProperty('--themeColor3', imgColors[2]);\r\n      document.documentElement.style.setProperty('--themeColor4', imgColors[5]);\r\n      document.documentElement.style.setProperty('--themeColorTransparent', imgColors[0] + '6e');\r\n    }\r\n  }, [imgColors])\r\n\r\n\r\n  function rightSideContent(currentPage) {\r\n    let RightSidePage = rightSide[currentPage].component\r\n    return (<RightSidePage />)\r\n  }\r\n\r\n  function noLyrics() {\r\n    return lyrics.length === 0\r\n  }\r\n\r\n  function changeRightSidePage(el) {\r\n    if (el.id === 2 && noLyrics()) return null\r\n    setMobileMenuTransition(0.2)\r\n    setRightSideCurrentPage(el.id);\r\n    setOpenMenu(true)\r\n  }\r\n  return (\r\n    <div className=\"bg\"\r\n      style={\r\n        openFullScreenPlayer ?\r\n          {\r\n            top: 0,\r\n            opacity: 1,\r\n            visibility: 'visible',\r\n            zIndex: 10,\r\n            transform: `translateY(${deltaY}px)`,\r\n            borderRadius: `${deltaY < 20 ? deltaY : 20}px ${deltaY < 20 ? deltaY : 20}px 0 0`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          } :\r\n          {\r\n            transform: `translateY(${deltaY}px)`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          }\r\n      }\r\n      ref={refPassthroughBg}\r\n      {...handlers}\r\n      onTouchEnd={returnToInitial}\r\n    >\r\n\r\n      <div className=\"auroraWrapper\">\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n        <div className=\"auroraCircle\"></div>\r\n      </div>\r\n      \r\n      <div className=\"closeFullScreen\" onClick={() => { setOpenFullScreenPlayer(false) }}>\r\n        {window.innerWidth > 1000 ? <HiChevronDown /> : <FiMinus style={{ opacity: .6 }} />}\r\n      </div>\r\n      <div className=\"FullScreenPlayer\">\r\n\r\n        <div className=\"leftSide\" style={!openMenu ? { width: '100%' } : {}}>\r\n          <Player inputRef={inputRef} />\r\n        </div>\r\n        {window.innerWidth > 1000 ?\r\n          <div className=\"rightSideWrapper\" style={!openMenu ? { transform: 'translateX(calc(100% - 90px))', width: 0 } : {}}>\r\n            <button className=\"menuBtn\" style={openMenu ? { transform: 'rotate(180deg)' } : { opacity: 0, visibility: 'hidden' }} onClick={() => setOpenMenu(!openMenu)}><BiChevronLeft /></button>\r\n            <div className=\"rightSideControl\">\r\n              {rightSide.map((el, i) => {\r\n                return (\r\n                  <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--themeColor)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={() => changeRightSidePage(el)}>\r\n                    {el.icon}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"rightSide\" ref={lyricsRef} style={!openMenu ? { display: 'none' } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div> :\r\n          <div className=\"mobilePlayerMenu\" {...handlersForMobileMenu} ref={refPassthroughMobileMenu} style={\r\n            openMenu ?\r\n              {\r\n                top: `calc(100% - calc(70vh + 55px) + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n\r\n              } :\r\n              {\r\n                top: `calc(100% - 55px + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n              }\r\n\r\n          }\r\n          // onTouchStart = {returnToInitialMobileMenu}\r\n          >\r\n            <div className=\"mobilePlayerMenuClose\">\r\n              <FiMinus style={{ opacity: .6, width: '50px' }} onClick={() => setOpenMenu(!openMenu)} />\r\n            </div>\r\n            <div className=\"controlIconsWrapper\">\r\n              {rightSide.map((el, i) => {\r\n                if(i <= 3){\r\n                  return (\r\n                    <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--transparentWhite)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={(e) => changeRightSidePage(el)}>\r\n                      {el.title}\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n            <div className=\"mobilePlayerMenuContent\" ref = {mobileContentScroll} style = {!openMenu?{opacity:0}:{}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NavigationItem({id, title, icon, link, currentPage, setCurrentPage}) {\r\n\treturn (\r\n\t\t<Link to = {link}>\r\n\t\t\t<div className={\"NavigationItem \" + (id === currentPage?\"active\":\"\")} onClick={() => setCurrentPage(id)}>\r\n\t\t\t\t<div className=\"icon\">{icon}</div>\r\n\t\t\t\t<b>{title}</b>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FiMessageCircle, FiUser } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { createChat } from '../../functions/createChat'\r\nimport { findChatURL } from '../../functions/findChatURL'\r\nimport getUID from '../../functions/getUID'\r\nimport shareWithOneFriend from '../../functions/shareWithOneFriend'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\n\r\nexport const Person = ({index, friend}) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL(friend.uid, currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [])\r\n\tconst {currentSong} = useSong()\r\n\treturn (\r\n\t\t<div className=\"person\" key={index} id={friend.uid} >\r\n\t\t\t<div className=\"personBtns\">\r\n\t\t\t\t<Link to={`/chat/${friendChatId}`}>\r\n\t\t\t\t\t<button onClick = {()=>{if(shouldCreate) createChat([currentUser.uid, friend.uid] ,friendChatId)}}><FiMessageCircle /></button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={`/authors/${friend.uid}`}>\r\n\t\t\t\t\t<button><FiUser /></button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={(e) => shareWithOneFriend(e, currentSong)}><BiShare /></button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pesronImg\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t<img src={friend.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<IsUserOnlineCircle userUID = {friend.uid}/>\r\n\t\t\t<div className=\"personName\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t{friend.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiPlayCircle, FiPlusCircle, FiShare } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport shortWord from '../../functions/shortWord'\r\nimport { FriendsListToShareWith } from '../Basic/FriendsListToShareWith'\r\n\r\nexport const TinyPlaylist = ({playlist}) => {\r\n\tconst {toggleModal, setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"TinyPlaylist\">\r\n\t\t\t<div className=\"TinyPlaylistBtns\">\r\n\t\t\t\t<button onClick = {()=>{toggleModal();setContent(<FriendsListToShareWith item = {playlist} whatToShare = {\"playlist\"}/>)}}><FiShare/></button>\r\n\t\t\t\t<button><FiPlusCircle/></button>\r\n\t\t\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t\t\t<button><BiAlbum /></button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button><FiPlayCircle/></button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"TinyPlaylistImg\">\r\n\t\t\t\t<img src={playlist.image} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div style = {{display:'flex', flexDirection:'column'}}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{shortWord(playlist.name, 15) }\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style = {{fontSize:'0.8em', color:'grey', fontWeight:'500'}}>\r\n\t\t\t\t\t{playlist.isAlbum?\"album\":\"playlist\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const NotificationCircle = () => {\r\n\treturn (\r\n\t\t<div className = \"NotificationCircle\"></div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { leftSideBar } from '../../data/leftSideBar'\r\nimport NavigationItem from '../LeftsideBar/NavigationItem'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nimport '../../styles/LeftsideBar.css'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BiFolderPlus, BiFullscreen} from 'react-icons/bi'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport normalizeString from '../../functions/normalizeString'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\r\nimport { useModal } from '../../functionality/ModalClass'\r\nimport { FriendsListToShareWith } from './FriendsListToShareWith'\r\nimport { Person } from '../LeftsideBar/Person'\r\nimport { CreatePlaylistPage } from '../LibraryPage/CreatePlaylistPage'\r\nimport { TinyPlaylist } from '../LeftsideBar/TinyPlaylist'\r\nimport { NotificationCircle } from './NotificationCircle'\r\nexport const LeftsideBar = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {\r\n\t\tleftSideBarInputRef,\r\n\t\tsetOpenFullScreenPlayer,\r\n\t\tcurrentSongData,\r\n\t\tyourFriends,\r\n\t\tyourPlaylists\r\n\t} = useSong()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [currentFriendToPlaylistPage, setCurrentFriendToPlaylistPage] = useState(0)\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.pathname.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div className=\"LeftsideBar\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<img src={Logo} alt=\"\" />\r\n\t\t\t\t<h3>Soundbubble</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t<Link to={`/authors/${currentUser.uid}`}>\r\n\t\t\t\t\t<div className=\"person\">\r\n\t\t\t\t\t\t{currentUser.friends.some(friend=>friend.status === 'requested')?<NotificationCircle/>:null}\r\n\t\t\t\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t\t\t\t<img src={currentUser.photoURL} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"personName\">\r\n\t\t\t\t\t\t\t{currentUser.displayName}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"NavigationPanel\">\r\n\t\t\t\t{leftSideBar.map(({ id, title, icon, link }, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavigationItem key={index} id={id} title={title} icon={icon} link={link} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer friendsAndPlaylists\">\r\n\t\t\t\t<span style={{display: !currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromBottom .2s forwards' }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tyourFriends.length > 0?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t{yourFriends.map((friend, index) => {\r\n\t\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Person index={friend.uid} friend={friend}/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<h4 className=\"seeMoreBtn\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={currentSongData} whatToShare = {\"song\"}/>) }}>See more</h4>\r\n\t\t\t\t\t\t</>:\r\n\t\t\t\t\t\t<h4 style = {{position:'absolute', left:'50%', top:\"50%\", transform:'translate(-50%, -50%)', width:'100%', display:'flex', alignItems:'center', justifyContent:'center'}}>No friends added</h4>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{display: currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromTop .2s forwards' }}>\r\n\t\t\t\t\t{yourPlaylists.map((playlist, index) => {\r\n\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\treturn <TinyPlaylist playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }} style = {{margin:'5px 0'}}>\r\n\t\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\t\tCreate Playlist\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"upAndDownBtns\">\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(0)} style={!currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronUp /></button>\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(1)} style={currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronDown /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentSongData.id !== -1?\r\n\t\t\t\t\t<div className=\"littlePlayer\">\r\n\t\t\t\t\t\t<Player textLimit={15} inputRef={leftSideBarInputRef} />\r\n\t\t\t\t\t\t<div className=\"fullScreenBtn\" onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t\t\t\t<BiFullscreen />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>:null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../functionality/SongPlay/SongContext'\r\nimport { ContentRouter } from '../../routers/ContentRouter'\r\nimport { FullBottomSide } from '../Mobile/FullBottomSide'\r\nimport FullScreenPlayer from './FullScreenPlayer'\r\nimport { LeftsideBar } from './LeftsideBar'\r\nimport { ModalWindow } from './ModalWindow'\r\nimport '../../styles/FullScreenPlayer.css'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../functionality/AuthContext'\r\n\r\nexport const ContentWrapper = () => {\r\n\tconst { songRef, loadSongData, playing, songSrc } = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst fiveMinutes = 300000 // ten minutes, or whatever makes sense for your app\r\n\tconst [intervalExciter, setIntervalExciter] = useState(true)\r\n\t// \"maintain connection\"\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t\t\tsetIntervalExciter(!intervalExciter)\r\n\t\t}, fiveMinutes)\r\n\t\treturn () => clearInterval(interval);\r\n\t }, [intervalExciter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t}, [])\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<audio src={songSrc} ref={songRef} onLoadedData={loadSongData} onTimeUpdate={playing} ></audio>\r\n\t\t\t<div className=\"Wrapper\" style = {window.innerWidth < 1000?{height:window.innerHeight}:{height:\"100vh\"}}>\r\n\t\t\t\t{window.innerWidth > 1000 ? <LeftsideBar /> : <FullBottomSide />}\r\n\t\t\t\t<div className=\"Content\">\r\n\t\t\t\t\t<ContentRouter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalWindow />\r\n\t\t\t</div>\r\n\t\t\t<FullScreenPlayer />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { ContentWrapper } from '../components/Basic/ContentWrapper'\r\nimport { useAuth } from '../functionality/AuthContext'\r\nimport { publicRoutes } from '../routes'\r\nimport { LOGIN_ROUTE} from '../utils/consts'\r\nexport const AppRouter = () => {\r\n\tconst {currentUser} = useAuth()\r\n\treturn currentUser ?\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t<Route path='/' component = {ContentWrapper} />\r\n\t\t</Switch>\r\n\t):\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t{publicRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={LOGIN_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","import './App.css';\r\nimport React from 'react'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { AppRouter } from './routers/AppRouter';\r\nexport default function App() {\r\n  \r\n\r\n  return (\r\n    <HashRouter basename = \"/\">\r\n      <AppRouter/>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { AuthProvider } from './functionality/AuthContext';\r\nimport { ModalClassProvider } from './functionality/ModalClass';\r\nimport { SongProvider } from './functionality/SongPlay/SongContext';\r\nReactDOM.render(\r\n  \r\n  <React.StrictMode>\r\n    <AuthProvider>\r\n      <SongProvider>\r\n        <ModalClassProvider>\r\n          <App />\r\n        </ModalClassProvider>\r\n      </SongProvider>\r\n    </AuthProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}