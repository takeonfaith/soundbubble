(this.webpackJsonpsoundbubble=this.webpackJsonpsoundbubble||[]).push([[0],{260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(115),r=n.n(a),i=(n(83),n(12)),o=n(14),u=n(5),l=n(6),d=n.n(l),j=n(9),b=n(7),h=n.p+"static/media/Logo3.fc53f4ac.svg",f=n(1),m=function(){return Object(f.jsx)("div",{className:"LoadingData",children:Object(f.jsx)("img",{src:h,alt:""})})},p=n(22),O=n(122),g=n(31),x=function(e){var t=e.listOfChosenItems,n=e.setListOfChosenItems,s=e.itemId;return void 0!==t?Object(f.jsx)("div",{onClick:function(e){return e.preventDefault()},children:t.includes(s)?Object(f.jsx)("button",{type:"button",onClick:function(e){var c=t.filter((function(e){return e!==s}));n(c)},className:"addToListBtn",children:Object(f.jsx)(g.b,{style:{color:"var(--lightBlue)"}})}):Object(f.jsx)("button",{type:"button",onClick:function(){return n((function(e){return[].concat(Object(j.a)(e),[s])}))},className:"addToListBtn",children:Object(f.jsx)(g.d,{})})}):null},v=function(e){var t=e.data,n=e.chosenArray,s=e.setChosenArray,c=Object(O.a)(e,["data","chosenArray","setChosenArray"]);return Object(f.jsxs)("div",Object(p.a)(Object(p.a)({className:"person"},c),{},{children:[Object(f.jsx)(x,{listOfChosenItems:n,setListOfChosenItems:s,itemId:t.uid}),Object(f.jsx)("div",{className:"pesronImg",children:Object(f.jsx)("img",{src:t.photoURL,alt:""})}),Object(f.jsx)("div",{className:"personName",children:t.displayName})]}))},y=n(116),S=(n(129),n(130),n(131),n.p+"static/media/Cadillac.70f03a2c.jpg"),w=n.p+"static/media/Shape-of-you.a9a52651.jpg",A=n.p+"static/media/da-da-da.6ec71e46.jpg",N=n.p+"static/media/ayo.2964bde9.jpg",C=n.p+"static/media/movie.51e02da0.jpg",k=n.p+"static/media/coming-home.849a02e0.jpg",I=n.p+"static/media/boulevard-of-broken-dreams.026872d7.png",M=n.p+"static/media/\u0413\u0438\u043f\u043d\u043e\u0437.c34c3a56.jpg",L=n.p+"static/media/hitmyphone.ee7a3893.jpg",P=n.p+"static/media/Clout-cobain.f0f828dc.png",T=n.p+"static/media/Mood.076fb483.jpg",R=n.p+"static/media/\u0422\u044b_\u0433\u043e\u0440\u0438\u0448\u044c_\u043a\u0430\u043a_\u043e\u0433\u043e\u043d\u044c.f4a80a70.jpg",E=n.p+"static/media/\u043b\u0431\u0442\u0434.5172f440.jpg",B=n.p+"static/media/On-my-own.a68b20c0.png",D=n.p+"static/media/Buster-Keaton.7efbdcda.jpeg",U=n.p+"static/media/loyal.92e2953d.png",W=n.p+"static/media/freaky-friday.144e27db.jpg",V=n.p+"static/media/Dont-check-on-me.eab9cb77.jpg",F=n.p+"static/media/changes.0625d65a.jpg",H=n.p+"static/media/im-the-one.51c78f3d.jpg",K=n.p+"static/media/justin-bieber.a64412fc.png",Q=n.p+"static/media/Rich-love.1ee38a35.jpg",q=n.p+"static/media/No-vacancy.51f83469.jpg",G=n.p+"static/media/Main-chick.edb4134a.jpg",Y=n.p+"static/media/revolver.0f049b67.jpg",z=n.p+"static/media/Yamakasi.42ff7e12.jpeg",X=n.p+"static/media/roxanne.2420c14f.png",J=n.p+"static/media/I-can-fucking-tell.e8584039.png",Z=n.p+"static/media/Leck.71d82d26.jpg",_=n.p+"static/media/tasm2Ost.a62e9888.jpg",$=n.p+"static/media/Earth.5a524f61.png",ee=n.p+"static/media/\u041d\u043e\u0432\u0430\u044f-\u0432\u043e\u043b\u043d\u0430.44af3a15.jpg",te=n.p+"static/media/Can-we-kiss-forever.163e90ed.jpg",ne=n.p+"static/media/Drinking-problem.2a6a8f72.jpeg",se=n.p+"static/media/Drunk-in-love.1e3f9eb5.jpg",ce=n.p+"static/media/Da da da.6fe02252.mp3",ae=n.p+"static/media/Shape of You.5b915f48.mp3",re=n.p+"static/media/Cadillac.704f0c05.mp3",ie=n.p+"static/media/Ayo.ed690ad5.mp3",oe=n.p+"static/media/Movie.2b583995.mp3",ue=n.p+"static/media/Coming Home.c063172e.mp3",le=n.p+"static/media/Boulevard of broken dreams.30184a4c.mp3",de=n.p+"static/media/\u0413\u0438\u043f\u043d\u043e\u0437.a2a6b5b8.mp3",je=n.p+"static/media/Hit My Phone.468aae34.mp3",be=n.p+"static/media/CLOUT COBAIN  CLOUT CO13A1N.5b1f1720.mp3",he=n.p+"static/media/Mood.85484109.mp3",fe=n.p+"static/media/\u0422\u042b \u0413\u041e\u0420\u0418\u0428\u042c \u041a\u0410\u041a \u041e\u0413\u041e\u041d\u042c.e5c27654.mp3",me=n.p+"static/media/\u043b\u0431\u0442\u0434.ca049aa1.mp3",pe=n.p+"static/media/On My Own.7d96c332.mp3",Oe=n.p+"static/media/Angel.3bda6e1f.mp3",ge=n.p+"static/media/Loyal.c5aaabae.mp3",xe=n.p+"static/media/Freaky Friday.0036b7a4.mp3",ve=n.p+"static/media/Don't check on me.10b27dbf.mp3",ye=n.p+"static/media/Intentions.d7f98e4b.mp3",Se=n.p+"static/media/I'm the one.9fef9dce.mp3",we=n.p+"static/media/Yummy.dac00ec9.mp3",Ae=n.p+"static/media/Hold On.264abaa7.mp3",Ne=n.p+"static/media/Rich Love.cd0ab1c2.mp3",Ce=n.p+"static/media/No Vacancy.7298c78e.mp3",ke=n.p+"static/media/Main Chick.1938e956.mp3",Ie=n.p+"static/media/Best Love Song.ba132a5c.mp3",Me=n.p+"static/media/Tantra.a9e921b2.mp3",Le=n.p+"static/media/Drunk In Love.261db7ba.mp3",Pe=n.p+"static/media/Roxanne.e09cd702.mp3",Te=n.p+"static/media/Drinking Problem.242a7c1a.mp3",Re=n.p+"static/media/I Can Fvcking Tell.831c76d1.mp3",Ee=n.p+"static/media/Can we kiss forever.a3ee0569.mp3",Be=n.p+"static/media/Leck.60200232.mp3";n.p,n.p,n.p,n.p;console.log("AIzaSyBuDoETyUrO2RCDAlFMsW2uV-QmtCT8t6Y");var De=y.a.initializeApp({apiKey:"AIzaSyBuDoETyUrO2RCDAlFMsW2uV-QmtCT8t6Y",authDomain:"soundbubble-27737.firebaseapp.com",projectId:"soundbubble-27737",storageBucket:"soundbubble-27737.appspot.com",messagingSenderId:"527274299416",appId:"1:527274299416:web:64b1ac2d05f4262df0736d",measurementId:"G-9TP9PEEV11"}),Ue=De.auth(),We=De.storage(),Ve=De.firestore();function Fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e>t?n:e<n?t:e}var He=n(121),Ke=c.a.createContext(),Qe=function(){return Object(s.useContext)(Ke)},qe=function(e){var t=e.children,n=Object(s.useState)({}),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(!0),o=Object(u.a)(i,2),l=o[0],j=o[1];Object(s.useEffect)((function(){return Ue.onAuthStateChanged(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Ve.collection("users").doc(t.uid).get().then((function(e){var n=Object(p.a)(Object(p.a)({},t),e.data());r(n),j(!1)}));case 3:e.sent,e.next=8;break;case 6:r(t),j(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var h={currentUser:a,setCurrentUser:r,login:function(e,t,n,s){return s(!0),Ue.signInWithEmailAndPassword(e,t).then().catch((function(e){n(e.message),s(!1)}))},signup:function(e,t,n,s,c,a,r,i){return i(!0),Ue.createUserWithEmailAndPassword(e,n).then((function(e){Ve.collection("users").doc(e.user.uid).set({uid:e.user.uid,displayName:t,photoURL:c||"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg",isAuthor:1===parseInt(s),isVerified:1===parseInt(s),numberOfListenersPerMonth:0,ownSongs:[],ownPlaylists:[],addedSongs:[],addedPlaylists:[],addedAuthors:[],lastSongPlayed:"",chats:[],friends:[],subscribers:0,regDate:He.a.firestore.FieldValue.serverTimestamp(),imageColors:a}),i(!1)})).catch((function(e){r(e.message)}))},logout:function(){return Ue.signOut()},loading:l,setLoading:j};return Object(f.jsx)(Ke.Provider,{value:h,children:t})},Ge=Object(s.createContext)(null),Ye=function(){return Object(s.useContext)(Ge)},ze=function(e){var t=e.children,n=Qe(),c=n.currentUser,a=n.loading,r=n.setLoading,o=Object(s.useState)([]),l=Object(u.a)(o,2),h=l[0],p=l[1],O=Object(s.useState)([]),g=Object(u.a)(O,2),x=g[0],y=g[1],S=Object(s.useState)([]),w=Object(u.a)(S,2),A=w[0],N=w[1],C=Object(s.useState)([]),k=Object(u.a)(C,2),I=k[0],M=k[1],L=Object(s.useState)(),P=Object(u.a)(L,2),T=P[0],R=P[1],E=Object(s.useState)(""),B=Object(u.a)(E,2),D=B[0],U=B[1],W=Object(s.useState)(0),V=Object(u.a)(W,2),F=V[0],H=V[1],K=Object(s.useState)({}),Q=Object(u.a)(K,2),q=Q[0],G=Q[1],Y=Object(s.useState)({}),z=Object(u.a)(Y,2),X=z[0],J=z[1],Z=Object(s.useState)([]),_=Object(u.a)(Z,2),$=_[0],ee=_[1],te=Object(s.useState)(!1),ne=Object(u.a)(te,2),se=ne[0],ce=ne[1],ae=Object(s.useState)(0),re=Object(u.a)(ae,2),ie=re[0],oe=re[1],ue=Object(s.useState)(0),le=Object(u.a)(ue,2),de=le[0],je=le[1],be=Object(s.useState)(1),he=Object(u.a)(be,2),fe=he[0],me=he[1],pe=Object(s.useState)(0),Oe=Object(u.a)(pe,2),ge=Oe[0],xe=Oe[1],ve=Object(s.useState)(0),ye=Object(u.a)(ve,2),Se=ye[0],we=ye[1],Ae=Object(s.useState)(!0),Ne=Object(u.a)(Ae,2),Ce=Ne[0],ke=Ne[1],Ie=Object(s.useState)(!1),Me=Object(u.a)(Ie,2),Le=Me[0],Pe=Me[1],Te=Object(s.useRef)(null),Re=Object(s.useRef)(null),Ee=Object(s.useRef)(null),Be=Object(s.useRef)(null),De=Object(s.useState)(0),Ue=Object(u.a)(De,2),We=Ue[0],He=Ue[1],Ke=Object(s.useState)(!1),qe=Object(u.a)(Ke,2),Ye=qe[0],ze=qe[1];function Xe(){return(void 0===X.lyrics||0!==X.lyrics.length)&&(void 0===X.lyrics||(console.log(X.lyrics.length),"undefined"!==X.lyrics[0].startTime))}function Je(){return(Je=Object(b.a)(d.a.mark((function e(){var t,n,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c),void 0!==c.uid&&(t={id:-1,name:"",songSrc:"",authors:[],cover:"",listens:0,releaseDate:"",lyrics:[],imageColors:[]},n=c.lastSongPlayed||c.addedSongs[0]||t.id,s=c.lastQueue||{source:"/library",name:"Your Library",image:c.photoURL,songsList:h}||[],U(n),G(s),-1!==n?(a=Ve.collection("songs").doc(n),a.get().then((function(e){if(e.exists){var t=e.data();J(t),ee(t.imageColors||[]),r(!1)}})).catch((function(e){console.log("Error getting document:",e),r(!1)}))):(J(t),ee([]),r(!1)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){return(Ze=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:-1!==D&&(t=Ve.collection("songs").doc(D),t.get().then((function(e){if(e.exists){var t=e.data();ee(t.imageColors||[]),J(t)}})).catch((function(e){console.log("Error getting document:",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){p([]),c.addedSongs&&c.addedSongs.map((function(e,t){Ve.collection("songs").doc(e).get().then((function(e){e.exists?p((function(t){return[e.data()].concat(Object(j.a)(t))})):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}))}Object(s.useEffect)((function(){c&&(r(!0),_e(),function(){Je.apply(this,arguments)}(),y([]),c.ownPlaylists&&c.ownPlaylists.map((function(e,t){Ve.collection("playlists").doc(e).get().then((function(e){e.exists?y((function(t){return[e.data()].concat(Object(j.a)(t))})):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))})),c.addedPlaylists&&c.addedPlaylists.map((function(e,t){Ve.collection("playlists").doc(e).get().then((function(e){e.exists?y((function(t){return[].concat(Object(j.a)(t),[e.data()])})):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))})),M([]),void 0!==c.friends&&(console.log(c.friends),c.friends.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.uid).get();case 2:n=e.sent.data(),console.log(n),"added"===t.status&&M((function(e){return[].concat(Object(j.a)(e),[n])}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),R([]),c.lastQueue&&(c.lastQueue.songsList.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(t).get();case 2:n=e.sent.data(),R((function(e){return[n].concat(Object(j.a)(e))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H(c.lastQueue.songsList.findIndex((function(e){return e===D})))),N([]),c.addedAuthors&&c.addedAuthors.map((function(e,t){Ve.collection("users").doc(e).get().then((function(e){e.exists?N((function(t){return[e.data()].concat(Object(j.a)(t))})):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))})))}),[c]),Object(s.useEffect)((function(){c&&D&&function(){Ze.apply(this,arguments)}()}),[D]),Object(s.useEffect)((function(){ke(Xe())}),[X.lyrics]),Object(s.useEffect)((function(){if(!a)if(ge){var e=function(e){for(var t=[],n=new Array(e.length),s=0;s<e.length;){var c=Math.floor(Math.random()*e.length);t.includes(c)||(t.push(c),n[c]=e[s],s++)}return n}(T);R(e),H(e.findIndex((function(e){return e.id===D})))}else R(q.songsList),H(q.songsList.findIndex((function(e){return e.id===D})))}),[ge]);var $e=Object(s.useRef)();function et(){for(var e=0,t=X.lyrics.length-1,n=parseFloat(parseFloat(Te.current.currentTime).toFixed(1));e<=t;){var s=Math.floor((e+t)/2),c=parseFloat(parseFloat(X.lyrics[s].startTime).toFixed(1)),a=s!==X.lyrics.length-1?parseFloat(parseFloat(X.lyrics[s+1].startTime).toFixed(1)):t;if("undefined"===X.lyrics[s].startTime)return;if(n>=c&&n<=a){we(s);break}c<n?e=s+1:t=s-1}}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(b.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),n=Fe(F+1,T.length-1),e.next=4,Ve.collection("songs").doc(T[n].id).get();case 4:return e.next=6,e.sent.data().id;case 6:s=e.sent,we(0),U(s),H(Fe(n,T.length-1)),Ve.collection("users").doc(c.uid).update({lastSongPlayed:s});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(b.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.stopPropagation(),!(ie>5)){e.next=6;break}return Te.current.currentTime=0,oe(0),we(0),e.abrupt("return");case 6:return n=Fe(F-1,T.length-1),e.next=9,Ve.collection("songs").doc(T[n].id).get();case 9:return e.next=11,e.sent.data().id;case 11:s=e.sent,we(0),U(s),H(Fe(n,T.length-1)),Ve.collection("users").doc(c.uid).update({lastSongPlayed:s});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){clearTimeout($e.current),se&&($e.current=setTimeout((function(){console.log("count added");var e=X.listens;if(e++,Ve.collection("songs").doc(X.id).update({listens:e}),"albums"===q.source.substr(1,6)){console.log("I Updated album listen count");var t=q.source.substr(8,q.source.length-8);Ve.collection("playlists").doc(t).get().then((function(e){var n=e.data().listens;n++,Ve.collection("playlists").doc(t).update({listens:n})}))}}),1e3*de*.5))}),[se,X.id]),Object(s.useEffect)((function(){we(0)}),[X.id]),Object(s.useEffect)((function(){2===We&&et()}),[We]),Object(s.useEffect)((function(){document.title=X.name||"Soundbubble"}),[X.name]),Object(f.jsx)(Ge.Provider,{value:{yourSongs:h,setYourSongs:p,yourPlaylists:x,yourFriends:I,currentSongQueue:T,currentSongPlaylistSource:q,setCurrentSongPlaylistSource:G,setCurrentSongQueue:R,setCurrentSongInQueue:H,play:se,setPlay:ce,songSrc:X.songSrc,currentTime:ie,setCurrentTime:oe,songDuration:de,songRef:Te,name:X.name,authors:X.authors,lyrics:X.lyrics,cover:X.cover,imgColors:$,setImgColors:ee,currentSong:D,setCurrentSong:U,repeatMode:fe,setRepeatMode:me,shuffleMode:ge,setShuffleMode:xe,inputRef:Ee,leftSideBarInputRef:Be,isThereKaraoke:Ce,rightSideCurrentPage:We,currentParagraph:Se,currentParagraphRef:Re,nextSong:tt,prevSong:st,playSong:function(e){e&&e.stopPropagation(),se?Te.current.pause():Te.current.play(),ce(!se)},playing:function(e){if(e.target.currentTime===de){if(0===fe)return Te.current.pause(),ce(!1),st();if(1===fe)return 1===T.length?(st(),Te.current.play()):tt();st(),Te.current.play()}oe(e.target.currentTime),Ce&&2===We&&Le&&Ye&&function(){if(Se!==X.lyrics.length-1&&parseFloat(X.lyrics[Se+1].startTime)<=Te.current.currentTime)we(Se+1)}(),document.documentElement.style.setProperty("--inputRange",e.target.currentTime/de*100+"%")},defineCurrentParagraph:et,setRightSideCurrentPage:He,changeCurrentTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("div"===e.target.localName||"p"===e.target.localName)return oe(t),Te.current.currentTime=t,document.documentElement.style.setProperty("--inputRange",t/de*100+"%"),Ce&&2===We&&Le&&we(parseInt(e.target.id)),Te.current.play(),void ce(!0);oe(e.target.value),Te.current.currentTime=e.target.value,document.documentElement.style.setProperty("--inputRange",e.target.value/de*100+"%"),Ce&&2===We&&Le&&et()},displayAuthors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.authors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" & ";return e.map((function(n,s){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"/authors/".concat(n.uid),onClick:function(e){e.stopPropagation(),Pe(!1)},children:n.displayName},n.uid),s===e.length-1?"":t]})}))},displayAuthorsFull:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.authors;return e.map((function(e,t){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(i.b,{to:"/authors/".concat(e.uid),onClick:function(e){e.stopPropagation(),Pe(!1)},children:Object(f.jsx)(v,{data:e})},e.uid)})}))},openFullScreenPlayer:Le,setOpenFullScreenPlayer:Pe,loadSongData:function(e){oe(e.target.currentTime),je(e.target.duration),Ee.current.max=e.target.duration,window.innerWidth>1e3&&(Be.current.max=e.target.duration),document.documentElement.style.setProperty("--inputRange","0%"),se?e.target.play():e.target.pause()},findLen:function(){var e="";return X.authors.forEach((function(t){e+=t.displayName})),e.length},fetchYourSongs:_e,setOpenMenu:ze,openMenu:Ye,currentSongData:X,setCurrentSongData:J,setIsThereKaraoke:ke,checkKaraoke:Xe,setYourPlaylists:y,yourAuthors:A,setYourAuthors:N},children:a?Object(f.jsx)(m,{}):t})},Xe=n(8),Je=n(33);function Ze(e){return e%10===e?"0"+e:e}function _e(e){var t=new Date(1970,0,1);return t.setSeconds(e),t}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=isNaN(e)?new Date(e):e.seconds?_e(e.seconds+10800):_e(e/1e3+10800);return 0===t?n[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear():1===t?n[s.getMonth()]+" "+s.getDate():2===t?Ze(s.getHours())+":"+Ze(s.getMinutes()):3===t?n[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear()+" at "+Ze(s.getHours())+":"+Ze(s.getMinutes()):void 0}var et=c.a.createContext(),tt=function(){return Object(s.useContext)(et)},nt=function(e){var t=e.children,n=Object(s.useState)(window.innerWidth),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(window.innerHeight),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(s.useState)(window.innerWidth<1e3),b=Object(u.a)(j,2),h=b[0],m=b[1];function p(){r(window.innerWidth),d(window.innerHeight),m(window.innerWidth<1e3)}Object(s.useEffect)((function(){return window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[]);var O={screenWidth:a,screenHeight:l,isMobile:h};return Object(f.jsx)(et.Provider,{value:O,children:t})},st=function(e){var t=e.text,n=e.direction,s=void 0===n?"top":n,c="top"===s?{bottom:"110%",left:"50%",transform:"translateX(-50%)"}:"bottom"===s?{top:"120%",left:"50%",transform:"translateX(-50%)"}:"left"===s?{top:"50%",left:"-100%",transform:"translateY(-50%)"}:{top:"50%",right:"-100%",transform:"translateY(-50%)"};return tt().isMobile?null:Object(f.jsx)("div",{className:"Hint",style:c,children:Object(f.jsx)("h5",{children:t})})},ct=function(e){var t=e.color,n=void 0===t?"":t,s=Object(o.g)();return Object(f.jsx)("div",{className:"BackBtn",children:Object(f.jsxs)("button",{onClick:function(){return s.goBack()},style:n.length?{color:n}:{},children:[Object(f.jsx)(st,{text:"go back",direction:"bottom"}),Object(f.jsx)(Xe.a,{})]})})},at=n.p+"static/media/Denzel-Curry.84494049.jpg",rt=n.p+"static/media/Morgenshtern.2047a5bb.jpg",it=n.p+"static/media/Tyomcha.1a7e66ed.jpg",ot=n.p+"static/media/yvng-swag.e9572d73.jpg",ut=n.p+"static/media/chris-brown.256f093e.jpg",lt=n.p+"static/media/tyga.38622b96.jpg",dt=n.p+"static/media/diddy.5dd4ad63.jpg",jt=n.p+"static/media/greenday.656475fd.jpg",bt=n.p+"static/media/johny-koch.5c8fed82.jpg",ht=n.p+"static/media/andro.38ce0477.jpg",ft=n.p+"static/media/qontrast.452f5fe9.jpg",mt=n.p+"static/media/jaden.c4c50d52.jpg",pt=n.p+"static/media/kid-cudi.ff281840.png",Ot=n.p+"static/media/dirty-money.2644bf3e.jpg",gt=n.p+"static/media/OneRepublic.d5d9b523.jpg",xt=n.p+"static/media/t-pain.da79c258.jpg",vt=n.p+"static/media/Kid-ink.4a8065f2.jpg",yt=n.p+"static/media/Chance-the-rapper.672005ab.jpg",St=n.p+"static/media/Bob.6bb6be52.jpg",wt=n.p+"static/media/Lil-dicky.2fc4ceab.png",At=n.p+"static/media/Arizona-zervas.78d1344a.jpg",Nt=n.p+"static/media/Andy-panda.6f59b7ec.jpg",Ct=n.p+"static/media/Adriana-proenza.2fc46e8e.jpg",kt=[{id:0,name:"MORGENSHTERN",image:rt,isVerified:!0,numberOfListenersPerMonth:123,subscribers:10,songs:[0],isAuthor:!0},{id:1,name:"\u042d\u043b\u0434\u0436\u0435\u0439",image:S,isVerified:!0,numberOfListenersPerMonth:100,subscribers:10,songs:[0],isAuthor:!0},{id:2,name:"Ed Sheeran",image:"https://cdns-images.dzcdn.net/images/artist/f4daf253b92a1a9646844c5162e2a968/264x264.jpg",isVerified:!0,numberOfListenersPerMonth:93,subscribers:10,songs:[1],isAuthor:!0},{id:3,name:"Nate Good",image:"https://is1-ssl.mzstatic.com/image/thumb/Features114/v4/2f/5d/0f/2f5d0f3e-349f-77e8-3878-7efe934f5183/pr_source.png/800x800bb.jpeg",isVerified:!0,numberOfListenersPerMonth:54,subscribers:10,songs:[4,10],isAuthor:!0},{id:4,name:"Bluelake",image:"data:image/jpeg;base64,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",isVerified:!0,numberOfListenersPerMonth:14,subscribers:10,songs:[4,10],isAuthor:!0},{id:5,name:"Johny Koch",image:bt,isVerified:!0,numberOfListenersPerMonth:68,subscribers:10,songs:[4,10],isAuthor:!0},{id:6,name:"Greenday",image:jt,isVerified:!0,numberOfListenersPerMonth:34,subscribers:10,songs:[4,10],isAuthor:!0},{id:7,name:"Andro",image:ht,isVerified:!0,numberOfListenersPerMonth:72,subscribers:10,songs:[4,10],isAuthor:!0},{id:8,name:"QONTRAST",image:ft,isVerified:!0,numberOfListenersPerMonth:71,subscribers:10,songs:[4,10],isAuthor:!0},{id:9,name:"Hiro",image:"https://is2-ssl.mzstatic.com/image/thumb/Features114/v4/8f/24/99/8f249900-47f1-4942-4749-713973f58dde/pr_source.png/190x190cc-60.jpg",isVerified:!0,numberOfListenersPerMonth:25,subscribers:10,songs:[4,10],isAuthor:!0},{id:10,name:"Yvng Swag",image:ot,isVerified:!0,numberOfListenersPerMonth:51,subscribers:10,songs:[4,10],isAuthor:!0},{id:11,name:"Slava Marlow",image:"https://upload.wikimedia.org/wikipedia/commons/c/cb/Slava_Marlow.jpg",isVerified:!0,numberOfListenersPerMonth:34,subscribers:10,songs:[4,10],isAuthor:!0},{id:12,name:"\u043a\u0438\u0441-\u043a\u0438\u0441",image:"https://i1.sndcdn.com/artworks-vkNIueBuHJ2fSa1D-fRw8mA-t500x500.jpg",isVerified:!0,numberOfListenersPerMonth:44,subscribers:10,songs:[4,10],isAuthor:!0},{id:13,name:"Jaden",image:mt,isVerified:!0,numberOfListenersPerMonth:74,subscribers:10,songs:[4,10],isAuthor:!0},{id:14,name:"Kid Cudi",image:pt,isVerified:!0,numberOfListenersPerMonth:61,subscribers:10,songs:[4,10],isAuthor:!0},{id:15,name:"Miyagi",image:D,isVerified:!0,numberOfListenersPerMonth:102,subscribers:10,songs:[4,10],isAuthor:!0},{id:16,name:"Chris Brown",image:ut,isVerified:!0,numberOfListenersPerMonth:41,subscribers:10,songs:[4,10],isAuthor:!0},{id:17,name:"Tyga",image:lt,isVerified:!0,numberOfListenersPerMonth:80,subscribers:10,songs:[4,10],isAuthor:!0},{id:18,name:"Tanir",image:"https://i.scdn.co/image/92455c398cf7be1eda78df4f1de572ade87aa95e",isVerified:!0,numberOfListenersPerMonth:89,subscribers:10,songs:[4,10],isAuthor:!0},{id:19,name:"Tyomcha",image:it,isVerified:!0,numberOfListenersPerMonth:92,subscribers:10,songs:[4,10],isAuthor:!0},{id:20,name:"Diddy",image:dt,isVerified:!0,numberOfListenersPerMonth:105,subscribers:10,songs:[4,10],isAuthor:!0},{id:21,name:"Dirty Money",image:Ot,isVerified:!0,numberOfListenersPerMonth:10,subscribers:10,songs:[4,10],isAuthor:!0},{id:22,name:"Denzel Curry",image:at,isVerified:!0,numberOfListenersPerMonth:170,subscribers:10,songs:[4,10],isAuthor:!0},{id:23,name:"Lil Dicky",image:wt,isVerified:!0,numberOfListenersPerMonth:134,subscribers:10,songs:[4,10],isAuthor:!0},{id:24,name:"Justin Bieber",image:K,isVerified:!0,numberOfListenersPerMonth:251,subscribers:50,songs:[4,10],isAuthor:!0},{id:25,name:"Lil Wayne",image:"https://static01.nyt.com/images/2020/11/19/arts/17lilwayne/17lilwayne-mediumSquareAt3X.jpg",isVerified:!0,numberOfListenersPerMonth:10,subscribers:50,songs:[4,10],isAuthor:!0},{id:26,name:"OneRepublic",image:gt,isVerified:!0,numberOfListenersPerMonth:40,subscribers:100,songs:[22],isAuthor:!0},{id:27,name:"Seeb",image:"https://pbs.twimg.com/profile_images/1354787716123262976/FbiITgXt_400x400.jpg",isVerified:!0,numberOfListenersPerMonth:40,subscribers:100,songs:[22],isAuthor:!0},{id:28,name:"T-Pain",image:xt,isVerified:!0,numberOfListenersPerMonth:40,subscribers:100,songs:[22],isAuthor:!0},{id:29,name:"Andy Panda",image:Nt,isVerified:!0,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!0},{id:30,name:"Kostya Doloz",image:"https://sun9-66.userapi.com/impf/c636628/v636628089/46fc5/jZmb1Eadwqs.jpg?size=960x1280&quality=96&sign=ee424378e70207bd5f8ab2aa5a669b81&type=album",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:31,name:"Lil Magnum",image:"https://sun9-59.userapi.com/impg/ABnwxJFpZUNHG9-dbMnKEH-cT8YGWdpZ5DvSbA/Vr_Dkiu--VQ.jpg?size=1620x2160&quality=96&sign=7685b9ae04fed10f41f56729c93e6d89&type=album",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:32,name:"Dj Khaled",image:"https://cdn.smehost.net/2020sonymusiccouk-ukprod/wp-content/uploads/2017/05/c16367f4d6cf286d282eaffd0d3b9928-1040x1040.jpg",isVerified:!0,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!0},{id:33,name:"Quavo",image:n.p+"static/media/quavo.931877b3.jpg",isVerified:!0,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!0},{id:34,name:"Chance the Rapper",image:yt,isVerified:!0,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!0},{id:35,name:"Kid Ink",image:vt,isVerified:!0,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!0},{id:36,name:"B.O.B",image:St,isVerified:!0,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!0},{id:37,name:"27CLUB",image:"https://is1-ssl.mzstatic.com/image/thumb/Music113/v4/0a/55/67/0a5567bf-63ad-9a26-5029-8742b18f8d4e/pr_source.png/800x800bb.jpeg",isVerified:!0,numberOfListenersPerMonth:23,subscribers:12,songs:[46],isAuthor:!0},{id:38,name:"Arizona Zervas",image:At,isVerified:!0,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:39,name:"SAINt JHN",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/SAINt_JHN_2018.jpg/1200px-SAINt_JHN_2018.jpg",isVerified:!1,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:40,name:"Kina",image:"https://cdns-images.dzcdn.net/images/artist/ba417fffce8682b5094d732ad3d49765/264x264.jpg",isVerified:!1,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:41,name:"Adriana Proenza",image:Ct,isVerified:!1,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:42,name:"Fetty Wap",image:n.p+"static/media/Fetty-wap.6389d241.png",isVerified:!1,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:43,name:"Imanbek",image:"https://cdn1.img.sputniknews-uz.com/img/07e5/03/0f/17749204_227:0:768:541_1920x0_80_0_0_f4e2bfe387d8690c6cb3fc128dcaed57.jpg",isVerified:!1,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:44,name:"KDDK",image:"https://www.bongminesentertainment.com/wp-content/uploads/2021/01/KDDK-press-photo.jpg",isVerified:!1,numberOfListenersPerMonth:103,subscribers:12,songs:[47],isAuthor:!0},{id:45,name:"Brian O'Connor",image:"https://n1s1.hsmedia.ru/42/0f/52/420f52159635528d6c9113041a35a7f3/300x300_21_70fe4fecaff57e56a94b2397a6ddf682@620x620_0xc0a839a2_10034582461461587506.jpeg",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:46,name:"Aurora Lane",image:"https://citaty.info/files/characters/181456.jpg",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:47,name:"Leonardo",image:"https://i.quotev.com/img/q/u/19/5/18/7pk32vqtql.jpg",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:48,name:"Aubrey Miller",image:"https://thumbs.dfs.ivi.ru/storage28/contents/8/b/8a3578d0280ffbb0de11e7fc6cb6f6.jpg",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:49,name:"Peter Parker",image:"https://stuki-druki.com/aforizms/Andrew-Garfield-01.jpg",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:50,name:"Tayler Durden",image:"https://i.guim.co.uk/img/media/44eddd0655bf11d1a7b029f15439f9f7b9efb201/181_28_2208_1324/master/2208.jpg?width=1200&height=1200&quality=85&auto=format&fit=crop&s=431814d186eb7fc54568cb7442a58f27",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:51,name:"Dave Hodgman",image:"https://i.pinimg.com/originals/fb/ab/f0/fbabf08ce7d0f8ed467a737d88ef2433.jpg",isVerified:!1,numberOfListenersPerMonth:40,subscribers:42,songs:[26],isAuthor:!1},{id:52,name:"XUITCASECITY",image:"https://images.squarespace-cdn.com/content/v1/56f1aeae7da24fd2594ac9e1/1542717650261-VIDWSX14VA6NGAQL32Z1/ke17ZwdGBToddI8pDm48kK60W-ob1oA2Fm-j4E_9NQB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0kD6Ec8Uq9YczfrzwR7e2Mh5VMMOxnTbph8FXiclivDQnof69TlCeE0rAhj6HUpXkw/Xuitcasecity+by+Icon+PR",isVerified:!0,numberOfListenersPerMonth:13,subscribers:12,songs:[26],isAuthor:!0},{id:53,name:"Hanz Zimmer",image:"https://i1.sndcdn.com/artworks-000068635202-eb0j3j-t500x500.jpg",isVerified:!0,numberOfListenersPerMonth:13,subscribers:12,songs:[26],isAuthor:!0}],It=function(e){var t=e.imagesList,n=e.borderColor,s=void 0===n?"#fff":n;return Object(f.jsx)("div",{className:"SmallImages",style:{marginRight:-7*(t.length-1)},children:t.map((function(e,t){return Object(f.jsx)("div",{className:"smallImgContainer",style:{border:"3px solid ".concat(s),transform:"translateX(".concat(-15*t,"px)")},children:Object(f.jsx)("img",{src:e,alt:""})},t)}))})};function Mt(e){return e<1e3?e:e<1e6?parseFloat(e/1e3).toFixed(1)+"K":e<1e9?parseFloat(e/1e6).toFixed(1)+"M":void 0}var Lt=n(25),Pt=c.a.createContext(),Tt=function(){return Object(s.useContext)(Pt)},Rt=function(e){var t=e.children,n=Object(s.useState)(!1),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(Object(f.jsx)("h1",{children:"Test"})),o=Object(u.a)(i,2),l=o[0],d=o[1];var j={openModal:a,setOpenModal:r,toggleModal:function(){r(!a)},setContent:d,content:l};return Object(f.jsx)(Pt.Provider,{value:j,children:t})},Et=function(e,t){Object(s.useEffect)((function(){function n(n){e.current&&!e.current.contains(n.target)&&t(!1)}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e])};function Bt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Dt=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,s,c,a,r,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:Bt(),s=i.length>2&&void 0!==i[2]?i[2]:"",c=i.length>3&&void 0!==i[3]?i[3]:"",a=i.length>4&&void 0!==i[4]?i[4]:[],r=i.length>5&&void 0!==i[5]?i[5]:[],Ve.collection("chats").doc(n).set({chatImage:c,chatName:s,id:n,messages:[],participants:t,wallpaper:"undefined",admins:t.length>2?a:[],typing:[],imageColors:r}),t.map(function(){var e=Object(b.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t).get();case 2:(s=e.sent.data().chats).push(n),Ve.collection("users").doc(t).update({chats:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(b.a)(d.a.mark((function e(t,n,s,c){var a,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,r=0,!n.chats){e.next=9;break}return e.next=5,Ve.collection("chats").where("participants","array-contains",n.uid).get();case 5:return e.sent.docs.forEach((function(e){var n=0;return t.every((function(t){return!!e.data().participants.includes(t)&&(n++,!0)})),n+1!==e.data().participants.length||n!==t.length||(a=!0,s(!1),c(e.data().id),r=e.data().id,!1)})),a||(i=Bt(),a=!0,s(!0),c(i),r=i),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n,s,c){return e.apply(this,arguments)}}(),Wt=function(e){var t=e.data,n=e.color,c=Qe().currentUser,a=Object(s.useState)(!1),r=Object(u.a)(a,2),o=r[0],l=r[1],d=Object(s.useState)(0),j=Object(u.a)(d,2),b=j[0],h=j[1];return Object(s.useEffect)((function(){Ut([t.uid],c,l,h)}),[t.uid]),Object(f.jsx)(i.b,{to:"/chat/".concat(b),style:{display:"block",width:"fit-content",textDecoration:"none"},children:Object(f.jsxs)("button",{onClick:function(){o&&Dt([c.uid,t.uid],b)},style:{background:n},className:"ChatWithFriendButton",children:[Object(f.jsx)(Xe.p,{})," Messages"]})})},Vt=function(e){var t=e.top,n=void 0===t?"20%":t;return Object(f.jsx)("div",{className:"LoadingCircle",style:{top:n},children:Object(f.jsx)("img",{src:"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg",alt:""})})},Ft=n(13),Ht=function(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],i=arguments.length>7?arguments[7]:void 0;if(0!==s.length||0!==c.length||0!==a.length||0!==r.length||i){var o=t.messages;o.push({id:t.messages.length,sender:n,message:s,sentTime:(new Date).toString(),inResponseToMessage:i||null,attachedSongs:c,attachedAlbums:a,attachedAuthors:r,seenBy:[n]}),Ve.collection("chats").doc(e).update({messages:o})}};var Kt=function(e){var t,n=e.value,c=e.setValue,a=e.setAllFoundSongs,r=e.setResultPlaylists,i=e.setResultAuthorList,o=e.focus,l=void 0!==o&&o,h=e.defaultSearchMode,m=void 0===h?void 0:h,p=e.inputText,O=void 0===p?"Search for songs or for people":p,g=e.defaultSongsListValue,x=Object(s.useState)(!1),v=Object(u.a)(x,2),y=v[0],S=v[1],w=Object(s.useState)(""),A=Object(u.a)(w,2),N=A[0],C=A[1],k=Object(s.useState)(!1),I=Object(u.a)(k,2),M=I[0],L=I[1],P=Object(s.useState)(0),T=Object(u.a)(P,2),R=T[0],E=T[1],B=Object(s.useRef)(null);function D(){return U.apply(this,arguments)}function U(){return(U=Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s=Ve.collection("songs").where("name","==",n),e.next=4,s.get();case 4:e.sent.docs.forEach((function(e){g&&g.length?g.map((function(e){return e.id})).includes(e.id)&&t.push(e.data()):t.push(e.data())})),0!==t.length&&0===R&&void 0===m&&t.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(t.id).get();case 2:e.sent.data().authors.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<3)){e.next=5;break}return e.next=3,Ve.collection("users").doc(t.uid).get();case 3:s=e.sent.data(),i((function(e){return[].concat(Object(j.a)(e),[s])}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a(t),S(!1),0!==t.length&&L(!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return V.apply(this,arguments)}function V(){return(V=Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s=Ve.collection("users").where("displayName","==",n),e.next=4,s.get();case 4:e.sent.docs.forEach((function(e){t.push(e.data())})),void 0===m&&0!==t.length&&0===R&&t.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.uid).get();case 2:return n=e.sent.data().ownSongs,e.next=5,Ve.collection("users").doc(t.uid).get();case 5:s=e.sent.data().ownPlaylists,n.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<3)){e.next=5;break}return e.next=3,Ve.collection("songs").doc(t).get();case 3:s=e.sent.data(),a((function(e){return[].concat(Object(j.a)(e),[s])}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),s.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<3)){e.next=5;break}return e.next=3,Ve.collection("playlists").doc(t).get();case 3:s=e.sent.data(),r((function(e){return[].concat(Object(j.a)(e),[s])}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(t),S(!1),0!==t.length&&L(!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return H.apply(this,arguments)}function H(){return(H=Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s=Ve.collection("playlists").where("name","==",n).where("isPrivate","==",!1),e.next=4,s.get();case 4:e.sent.docs.forEach((function(e){t.push(e.data())})),0!==t.length&&0===R&&t.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("playlists").doc(t.id).get();case 2:e.sent.data().authors.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<3)){e.next=5;break}return e.next=3,Ve.collection("users").doc(t.uid).get();case 3:s=e.sent.data(),i((function(e){return[].concat(Object(j.a)(e),[s])}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(t),S(!1),0!==t.length&&L(!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){if(S(!0),L(!1),""!==n)if(void 0===m)0!==R&&1!==R||(D(),i([]),r([])),0!==R&&2!==R||(W(),a([]),r([])),0!==R&&3!==R||(F(),i([]),a([]));else switch(m){case"songs":D();break;case"playlists":F();break;case"authors":W();break;default:D()}else void 0!==g&&a(g),S(!1);C("Not found")}return Object(s.useEffect)((function(){l&&B.current.focus()}),[]),Object(s.useEffect)((function(){K()}),[R]),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"searchBar",children:[Object(f.jsxs)("div",{className:"searchBarElement",children:[Object(f.jsx)(Xe.x,{}),Object(f.jsx)("span",{onClick:function(){return n.length?c(""):null},children:n.length?Object(f.jsx)(Xe.G,{}):null})]}),Object(f.jsx)("input",{type:"text",placeholder:O,value:n,onChange:function(e){return c(e.target.value)},onKeyUp:function(){return e=K,clearTimeout(t),void(t=setTimeout(e,1e3));var e},onKeyDown:function(){clearTimeout(t)},ref:B}),Object(f.jsxs)("div",{className:"searchFilters",style:void 0!==m?{display:"none"}:{},children:[Object(f.jsx)("button",{onClick:function(){return E(0)},style:0===R?{background:"var(--lightBlue)"}:{},children:"All"}),Object(f.jsx)("button",{onClick:function(){return E(1)},style:1===R?{background:"var(--lightBlue)"}:{},children:"Songs"}),Object(f.jsx)("button",{onClick:function(){return E(2)},style:2===R?{background:"var(--lightBlue)"}:{},children:"Authors"}),Object(f.jsx)("button",{onClick:function(){return E(3)},style:3===R?{background:"var(--lightBlue)"}:{},children:"Playlists"})]})]}),Object(f.jsx)("div",{className:"authorsResult",children:y?Object(f.jsx)("div",{style:{position:"relative",width:"100%",height:"50px",marginTop:"40px"},children:Object(f.jsx)(Vt,{})}):M||0===n.length?null:Object(f.jsx)("h2",{children:N})})]})},Qt=function(e){var t=e.item,n=e.whatToShare,c=void 0===n?"song":n,a=Ye().yourFriends,r=Object(s.useState)([]),i=Object(u.a)(r,2),o=i[0],l=i[1],j=Qe().currentUser,h=Object(s.useState)(""),m=Object(u.a)(h,2),p=m[0],O=m[1],x=Object(s.useState)(!1),y=Object(u.a)(x,2),S=y[0],w=y[1],A=Tt().toggleModal,N=Object(s.useState)(""),C=Object(u.a)(N,2),k=C[0],I=C[1],M=Object(s.useState)([]),L=Object(u.a)(M,2),P=L[0],T=L[1];return Object(s.useEffect)((function(){S&&setTimeout((function(){A(),w(!1)}),1e3)}),[S]),Object(f.jsxs)("div",{className:"FriendsListToShareWith",children:[S?Object(f.jsxs)("div",{className:"successMessageSent",children:[Object(f.jsx)(g.c,{}),"Song has sent!"]}):null,Object(f.jsx)(Kt,{value:k,setValue:I,setResultAuthorList:T,defaultSearchMode:"authors",inputText:"Search for friends"}),Object(f.jsx)("div",{children:P.length>0?P.map((function(e,t){return Object(f.jsx)(v,{data:e,showChoose:!0,chosenArray:o,setChosenArray:l},t)})):a.map((function(e,t){return Object(f.jsx)(v,{data:e,showChoose:!0,chosenArray:o,setChosenArray:l},t)}))}),Object(f.jsxs)("div",{children:[Object(f.jsx)("form",{children:Object(f.jsx)("input",{type:"text",placeholder:"Your message",style:{margin:0},onChange:function(e){return O(e.target.value)}})}),Object(f.jsxs)("button",{className:"shareBtn",style:o.length?{maxWidth:"none",background:"var(--purpleAndBlueGrad)"}:{opacity:.5,maxWidth:"none",background:"var(--purpleAndBlueGrad)"},onClick:function(){o.length>0&&(!function(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";e.map(function(){var e=Object(b.a)(d.a.mark((function e(a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=Ut([a],t,(function(){return null}),(function(){return null}))).then(function(){var e=Object(b.a)(d.a.mark((function e(i){var o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("chats").doc(i).get();case 2:if(void 0===(o=e.sent.data())){e.next=17;break}e.t0=s,e.next="song"===e.t0?7:"playlist"===e.t0?9:"author"===e.t0?11:13;break;case 7:return Ht(r,o,t.uid,c,[n]),e.abrupt("break",15);case 9:return Ht(r,o,t.uid,c,[],[n]),e.abrupt("break",15);case 11:return Ht(r,o,t.uid,c,[],[],[n]),e.abrupt("break",15);case 13:return Ht(r,o,t.uid,c,[n]),e.abrupt("break",15);case 15:e.next=19;break;case 17:u=Bt(),Dt([t.uid,a],u).then(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("chats").doc(u).get();case 2:o=e.sent.data(),e.t0=s,e.next="song"===e.t0?6:"playlist"===e.t0?8:"author"===e.t0?10:12;break;case 6:return Ht(u,o,t.uid,c,[n]),e.abrupt("break",14);case 8:return Ht(u,o,t.uid,c,[],[n]),e.abrupt("break",14);case 10:return Ht(u,o,t.uid,c,[],[],[n]),e.abrupt("break",14);case 12:return Ht(u,o,t.uid,c,[n]),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)}))));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(o,j,"author"===c?t.uid:t.id,c,p),w(!0))},children:["Share with ",o.length," ",o.length>1?"friends":"friend"]})]})]})},qt=n(34),Gt=n(19),Yt=function(e){var t=e.currentActive,n=e.id,s=e.label,c=e.onClick;return Object(f.jsxs)("div",{className:"RadioBtn",id:n,onClick:c,children:[Object(f.jsx)("span",{className:"radioLabel",style:t===n?{color:"var(--blue)",opacity:1,fontWeight:"bold"}:{},children:s}),Object(f.jsx)("span",{className:"radioCircle",style:t===n?{background:"var(--blue)"}:{}})]})},zt=function(e){var t=e.play;return Object(f.jsxs)("div",{className:"ColorCircles",style:t?{}:{opacity:0,transform:"scale(.95)"},children:[Object(f.jsx)("span",{className:"colorCircle"}),Object(f.jsx)("span",{className:"colorCircle"}),Object(f.jsx)("span",{className:"colorCircle"})]})},Xt=n(21),Jt=n(27),Zt={30:[31,45,46,47,48,49,50,51]},_t={1234561231:{id:"1234561231",participants:[30,31],image:"",messages:[{id:0,sender:30,message:"0",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[23,12,22],attachedAlbums:[],attachedAuthors:[3]},{id:1,sender:30,message:"1",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[0,1,5],attachedAlbums:[],attachedAuthors:[]},{id:2,sender:30,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:1,attachedSongs:[],attachedAlbums:[4],attachedAuthors:[]},{id:3,sender:30,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:0,attachedSongs:[],attachedAlbums:[],attachedAuthors:[6]},{id:4,sender:30,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:0,attachedSongs:[],attachedAlbums:[],attachedAuthors:[6]},{id:5,sender:31,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:4,attachedSongs:[],attachedAlbums:[],attachedAuthors:[6]},{id:6,sender:31,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:1,attachedSongs:[],attachedAlbums:[],attachedAuthors:[6]},{id:7,sender:31,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:2,attachedSongs:[],attachedAlbums:[2],attachedAuthors:[]}]},5147654342:{id:"5147654342",participants:[30,34],image:"",messages:[{id:0,sender:30,message:"0",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[],attachedAlbums:[],attachedAuthors:[]},{id:1,sender:30,message:"1",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[0],attachedAlbums:[],attachedAuthors:[]},{id:2,sender:30,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[],attachedAlbums:[4],attachedAuthors:[]},{id:2,sender:34,message:"3",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:1,attachedSongs:[],attachedAlbums:[],attachedAuthors:[5]}]},1456526216:{id:"1456526216",participants:[30,45],image:"",messages:[{id:0,sender:45,message:"0",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[],attachedAlbums:[],attachedAuthors:[]},{id:1,sender:45,message:"1",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[0],attachedAlbums:[],attachedAuthors:[]},{id:2,sender:45,message:"2",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[],attachedAlbums:[4],attachedAuthors:[]},{id:3,sender:30,message:"2",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[],attachedAlbums:[3],attachedAuthors:[]}]},1431626216:{id:"1431626216",participants:[30,48],image:"",messages:[{id:0,sender:48,message:"0",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[0],attachedAlbums:[],attachedAuthors:[]},{id:1,sender:30,message:"4",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[20],attachedAlbums:[],attachedAuthors:[]}]},1435324567:{id:"1435324567",participants:[30,49],image:"",messages:[{id:0,sender:48,message:"0",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[0],attachedAlbums:[],attachedAuthors:[]},{id:1,sender:30,message:"4",sentTime:"May 2, 2021 11:50:12",inResponseToMessage:null,attachedSongs:[20],attachedAlbums:[],attachedAuthors:[]}]},1435324517:{id:"1435324517",participants:[30,50],image:"",messages:[]}};function $t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n=0;n<e;n++){var s=Math.floor(10*Math.random());t+=s}return t}function en(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=$t();_t[c]={id:c,participants:[30,parseInt(e)],image:"",messages:[{id:0,sender:30,message:"",sentTime:new Date,inResponseToMessage:null,attachedSongs:[t],attachedAlbums:null!==n?[n]:[],attachedAuthors:null!==s?[s]:[]}]}}function tn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.log("id:",e.target.id,"songId:",t);var c=!1;Object.keys(_t).forEach((function(a){_t[a].participants.includes(parseInt(e.target.id))&&_t[a].participants.includes(30)&&(c=!0,_t[a].messages.push({id:_t[a].messages.length,sender:30,message:"",sentTime:new Date,inResponseToMessage:null,attachedSongs:[t],attachedAlbums:null!==n?[n]:[],attachedAuthors:null!==s?[s]:[]}))})),c||en(e.target.id,t,n,s)}var nn=function(e){var t=e.song,n=e.listOfSongs,c=e.setListOfSongs,a=e.showListens,r=void 0!==a&&a,i=e.listens,o=void 0===i?0:i,l=e.isNewSong,d=void 0!==l&&l,b=Ye(),h=(b.setCurrentSong,b.currentSong),m=b.displayAuthors,p=b.play,O=(b.songRef,b.setPlay,b.setYourSongs,b.yourPlaylists),g=(b.currentSongQueue,b.setCurrentSongInQueue,b.fetchYourSongs),x=Object(s.useState)(!1),v=Object(u.a)(x,2),y=v[0],S=v[1],w=Object(s.useState)(0),A=Object(u.a)(w,2),N=A[0],C=A[1],k=Object(s.useRef)(null),I=Qe().currentUser;function M(e){if(e.stopPropagation(),I.addedSongs.includes(t.id)){var n=I.addedSongs.filter((function(e){return e!==t.id}));return Ve.collection("users").doc(I.uid).update({addedSongs:n}),g(),void S(!1)}var s=I.addedSongs;s.push(t.id),Ve.collection("users").doc(I.uid).update({addedSongs:s}),g()}function L(e){e.stopPropagation(),O[e.target.id].songs.includes(t.id)?O[e.target.id].songs=O[e.target.id].songs.filter((function(e){return e!==t.id})):O[e.target.id].songs.push(t.id)}return Et(k,S),Object(f.jsxs)("div",{className:"SongItem "+(n.includes(t.id)?"inList":""),onClick:function(){if(!n.includes(t.id))return c((function(e){return[].concat(Object(j.a)(e),[t.id])}));var e=n.filter((function(e){return e!==t.id}));c(e)},ref:y?k:null,style:y?{background:"var(--playlistsColor)"}:{},children:[Object(f.jsxs)("div",{className:"songItemImageAndName",children:[Object(f.jsxs)("div",{className:"songItemImage",children:[Object(f.jsx)("div",{className:"songItemPlayOrPause",children:t.id===h&&p?null:Object(f.jsx)(Xt.c,{})}),Object(f.jsxs)("div",{className:"playingAnimation",style:t.id===h&&p?{opacity:1,visibility:"visible"}:{},children:[Object(f.jsx)(Xt.b,{}),Object(f.jsx)(zt,{play:p})]}),Object(f.jsx)("img",{src:t.cover,alt:""})]}),Object(f.jsxs)("div",{className:"songItemNameAndAuthor",children:[Object(f.jsxs)("div",{className:"songItemName",style:{display:"flex",alignItems:"center"},children:[t.name,Object(f.jsx)("span",{style:{marginLeft:"10px",fontWeight:"500"},children:r?Object(f.jsxs)("span",{style:{display:"flex",alignItems:"center",opacity:.7,fontSize:".8em"},className:d?"newSongMarker":"",children:[Mt(o)," ",Object(f.jsx)(Lt.c,{})]}):d?Object(f.jsx)("span",{style:{display:"flex",alignItems:"center",fontSize:".7em"},className:"newSongMarker",children:"New"}):null})]}),Object(f.jsx)("div",{className:"songItemAuthor",children:m(t.authors)})]})]}),Object(f.jsxs)("div",{className:"songItemMoreBtn",onClick:function(e){e.stopPropagation(),S(!y),C(e.target.getBoundingClientRect().top)},children:[Object(f.jsx)("button",{onClick:M,children:I.addedSongs.includes(t.id)?Object(f.jsx)(Xe.b,{}):Object(f.jsx)(Xe.w,{})}),Object(f.jsx)("button",{children:Object(f.jsx)(Xe.s,{})})]}),y?Object(f.jsxs)("div",{className:"songItemMenuWindow",style:N>window.innerHeight/2+100?{top:"auto",bottom:"110%"}:{top:"110%",bottom:"auto"},onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)("div",{className:"songItemMenuWindowItem",onClick:M,children:I.addedSongs.includes(t.id)?Object(f.jsxs)("span",{children:[Object(f.jsx)(Xe.B,{}),"Delete"]}):Object(f.jsxs)("span",{children:[Object(f.jsx)(Xe.w,{}),"Add"]})}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)("div",{className:"songItemMenuWindow inner",children:O.map((function(e,n){if(!e.isAlbum&&e.authors.includes(30))return Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:L,id:n,children:[O[n].songs.includes(t.id)?Object(f.jsx)(Xe.b,{}):Object(f.jsx)(Xe.w,{}),e.name]},n)}))}),Object(f.jsx)(Jt.c,{}),"Add to playlist"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)("div",{className:"songItemMenuWindow inner",children:Zt[30].map((function(e,n){var s=kt[e];if(n<3)return Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:function(e){return tn(e,t.id)},id:e,children:[Object(f.jsx)("div",{className:"songItemMenuWindowItemImgWrapper",children:Object(f.jsx)("img",{src:s.image,alt:""})}),s.name]},n)}))}),Object(f.jsx)(Xe.z,{}),"Share"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)(Xe.n,{}),"Info"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)(Xe.i,{}),"Flag"]})]}):null]})},sn=n(30);function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.substr(0,t)+(e.length>t?"...":"")}var an=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" & ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=e.map((function(e){return e.displayName})).join(t);return cn(s,n)},rn=function(e,t,n){e.stopPropagation();var s=t.authors.map((function(e){return e.uid})),c=[];s.forEach((function(e){n.addedAuthors.includes(e)||c.push(e)}));var a=n.addedSongs;a.push(t.id),Ve.collection("users").doc(n.uid).update({addedSongs:a,addedAuthors:[].concat(c,Object(j.a)(n.addedAuthors))}),c.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t).get();case 2:n=e.sent.data().subscribers,n++,Ve.collection("users").doc(t).update({subscribers:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function on(e,t){return e.filter((function(e){return this.indexOf(e)<0}),t)}var un=function(e,t,n,s){e.stopPropagation();var c=t.authors.map((function(e){return e.uid})),a=[],r=n.addedSongs.filter((function(e){return e!==t.id}));c.forEach((function(e){s.forEach((function(t){r.includes(t.id)&&t.authors.find((function(t){return t.uid===e}))&&a.push(e)}))}));var i=on(c,a),o=on(n.addedAuthors,i);Ve.collection("users").doc(n.uid).update({addedSongs:r,addedAuthors:o}),i.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t).get();case 2:n=e.sent.data().subscribers,n--,Ve.collection("users").doc(t).update({subscribers:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function ln(e){var t=e.song,n=Qe().currentUser,s=Ye().yourSongs;return n.addedSongs.includes(t.id)?Object(f.jsxs)("span",{onClick:function(e){return un(e,t,n,s)},children:[Object(f.jsx)(Xe.B,{}),"Delete"]}):Object(f.jsxs)("span",{onClick:function(e){return rn(e,t,n)},children:[Object(f.jsx)(Xe.w,{}),"Add"]})}var dn=function(e){var t=e.person;return Object(f.jsx)(i.b,{to:"/authors/".concat(t.uid),children:Object(f.jsxs)("div",{className:"PersonTinyVerticalItem",children:[Object(f.jsx)("div",{className:"personTinyImage",children:Object(f.jsx)("img",{src:t.photoURL,alt:""})}),Object(f.jsx)("div",{className:"personTinyName",children:t.displayName})]})})},jn=function(e){var t=e.data,n=e.title,c=Object(s.useState)([]),a=Object(u.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(0),l=Object(u.a)(o,2),h=l[0],m=l[1],p=Object(s.useRef)(null),O=Object(s.useState)(!1),g=Object(u.a)(O,2),x=g[0],v=g[1];return Object(s.useEffect)((function(){r.length>0&&(p.current.scrollWidth>p.current.offsetWidth&&v(!0))}),[r]),Object(s.useEffect)((function(){i([]),i([]),t.friends.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("added"!==t.status){e.next=5;break}return e.next=3,Ve.collection("users").doc(t.uid).get();case 3:n=e.sent.data(),i((function(e){return[].concat(Object(j.a)(e),[n])}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t.uid]),r.length>0?Object(f.jsxs)("div",{className:"PersonTinyList",children:[n&&Object(f.jsx)("h2",{children:n}),Object(f.jsxs)("div",{style:{position:"relative"},children:[Object(f.jsx)("div",{className:"personTinyListWrapper",ref:p,onScroll:function(e){return m(e.target.scrollLeft)},children:r.map((function(e,t){return Object(f.jsx)(dn,{person:e},e.uid)}))}),Object(f.jsxs)("div",{className:"authorsShiftButtons",children:[Object(f.jsx)("button",{onClick:function(){var e=p.current.scrollLeft;p.current.scrollLeft=e-200,m(e-200)},style:h<=0?{visibility:"hidden",opacity:"0"}:{},children:Object(f.jsx)(Xe.d,{})}),Object(f.jsx)("button",{onClick:function(){var e=p.current.scrollLeft;p.current.scrollLeft=e+200,m(e+200)},style:x&&p.current&&p.current.scrollWidth-p.current.offsetWidth!==h?{}:{visibility:"hidden",opacity:"0"},children:Object(f.jsx)(Xe.e,{})})]})]})]}):null},bn=function(e){var t=e.song,n=Ye().currentSongData,c=Tt(),a=(c.toggleModal,c.setContent),r=Qe().currentUser,i=Object(s.useState)(t||n),o=Object(u.a)(i,2),l=o[0],h=o[1],m=Ye().displayAuthors,p=Object(s.useState)([]),O=Object(u.a)(p,2),g=O[0],x=O[1],v=Object(s.useState)(!0),y=Object(u.a)(v,2),S=(y[0],y[1]);function w(){return(w=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),x([]),e.next=4,Ve.collection("users").where("addedSongs","array-contains",l.id).get();case 4:e.sent.forEach((function(e){r.friends.find((function(t){return t.uid===e.data().uid}))&&x((function(t){return[].concat(Object(j.a)(t),[e.data()])})),console.log(e.data()),S(!1)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){void 0!==t&&h(t)}),[t&&t.id]),Object(s.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[l.id]),Object(f.jsxs)("div",{className:"SongInfo",children:[Object(f.jsx)("div",{className:"songImage",children:Object(f.jsx)("img",{src:l.cover,alt:""})}),Object(f.jsxs)("div",{className:"songInfoContent",children:[Object(f.jsx)("h3",{style:{color:l.imageColors[0]},children:l.name}),Object(f.jsx)("span",{children:m(l.authors,", ")}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",opacity:"0.6",fontSize:".9em",position:"relative"},className:"listensAndDate",children:[Object(f.jsxs)("p",{className:"infoListens",style:{marginRight:"15px",position:"relative"},children:[l.listens," ",Object(f.jsx)(Lt.c,{})]}),Object(f.jsx)("span",{children:$e(l.releaseDate)})]}),Object(f.jsx)("h4",{style:{margin:"10px 0"},children:g.length>0?"Friends that listen that song":"None of your friends listens this"}),Object(f.jsx)("div",{style:{display:"flex",alignItems:"center"},children:g.map((function(e,t){return Object(f.jsx)(dn,{person:e},e.uid)}))}),g.length<=0?Object(f.jsx)("button",{className:"shareBtn",style:{minHeight:"35px",background:l.imageColors[0]},onClick:function(){a(Object(f.jsx)(Qt,{item:l,whatToShare:"song"}))},children:"Share"}):null]})]})},hn=function(e){var t=e.song,n=Ye(),c=n.yourPlaylists,a=n.currentSongData,r=Qe().currentUser,i=Object(s.useState)(t||a),o=Object(u.a)(i,2),l=o[0];o[1];return Object(f.jsx)("div",{className:"AddToPlaylists",children:Object(f.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:c.map((function(e,t){if(r.ownPlaylists.includes(e.id))return Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:function(t){return function(e,t,n,s){if(s[e.target.id].songs.includes(n.id)){var c=s[e.target.id].songs.filter((function(e){return e!==n.id}));return s[e.target.id].songs=c,void Ve.collection("playlists").doc(t).update({songs:c})}var a=s[e.target.id].songs;a.unshift(n.id),s[e.target.id].songs=a,Ve.collection("playlists").doc(t).update({songs:a})}(t,e.id,l,c)},id:t,children:[e.songs.includes(l.id)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(st,{text:"Remove ".concat(a.name," from playlist")}),Object(f.jsx)(Xe.b,{})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(st,{text:"Add ".concat(a.name," to playlist")}),Object(f.jsx)(Xe.w,{})]}),e.name]},t)}))})})},fn=function(e){var t=e.song,n=e.localIndex,c=e.showListens,a=void 0!==c&&c,r=e.isNewSong,i=void 0!==r&&r,o=e.listOfChosenSongs,l=e.setListOfSongs,d=Ye(),j=d.yourSongs,b=d.setCurrentSong,h=d.currentSong,m=d.displayAuthors,p=d.play,O=d.songRef,g=d.setPlay,v=d.setCurrentSongInQueue,y=tt().isMobile,S=Object(s.useState)(!1),w=Object(u.a)(S,2),A=w[0],N=w[1],C=Object(s.useState)(0),k=Object(u.a)(C,2),I=k[0],M=k[1],L=Object(s.useRef)(null),P=Qe().currentUser,T=Tt(),R=T.toggleModal,E=T.setContent;return Et(L,N),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{listOfChosenItems:o,setListOfChosenItems:l,itemId:t.id}),Object(f.jsxs)("div",{className:"SongItem "+(t.id===h&&p?"playingNow":""),onClick:function(){if(b(t.id),Ve.collection("users").doc(P.uid).update({lastSongPlayed:t.id}),v(n),t.id===h&&p)return O.current.pause(),void g(!1);O.current.play(),g(!0)},ref:A?L:null,style:A?{background:"var(--playlistsColor)"}:{},children:[Object(f.jsxs)("div",{className:"songItemImageAndName",children:[Object(f.jsxs)("div",{className:"songItemImage",children:[Object(f.jsx)("div",{className:"songItemPlayOrPause",children:t.id===h&&p?null:Object(f.jsx)(Xt.c,{})}),Object(f.jsxs)("div",{className:"playingAnimation",style:t.id===h&&p?{opacity:1,visibility:"visible"}:{},children:[Object(f.jsx)(Xt.b,{}),Object(f.jsx)(zt,{play:p})]}),Object(f.jsx)("img",{src:t.cover,alt:""})]}),Object(f.jsxs)("div",{className:"songItemNameAndAuthor",children:[Object(f.jsxs)("div",{className:"songItemName",style:{display:"flex",alignItems:"center"},children:[cn(t.name,window.innerWidth>1e3?30:17),Object(f.jsx)("span",{style:{marginLeft:"10px",fontWeight:"500"},children:a?Object(f.jsxs)("span",{style:{display:"flex",alignItems:"center",opacity:.7,fontSize:".8em"},className:i?"newSongMarker":"",children:[Mt(t.listens)," ",Object(f.jsx)(Lt.c,{})]}):i?Object(f.jsx)("span",{style:{display:"flex",alignItems:"center",fontSize:".7em"},className:"newSongMarker",children:"New"}):null})]}),y?Object(f.jsx)("div",{className:"songItemAuthor",children:an(t.authors," & ",30)}):Object(f.jsx)("div",{className:"songItemAuthor",children:m(t.authors)})]})]}),Object(f.jsxs)("div",{className:"songItemMoreBtn",onClick:function(e){e.stopPropagation(),N(!A),M(e.target.getBoundingClientRect().top)},children:[P.addedSongs.includes(t.id)?Object(f.jsxs)("button",{onClick:function(e){return un(e,t,P,j)},style:{position:"relative"},children:[Object(f.jsx)(st,{text:"delete song"}),Object(f.jsx)(Xe.F,{})]}):Object(f.jsxs)("button",{onClick:function(e){return rn(e,t,P)},style:{position:"relative"},children:[Object(f.jsx)(st,{text:"add song"}),Object(f.jsx)(Xe.w,{})]}),Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"more"}),Object(f.jsx)(Xe.s,{})]})]}),A?Object(f.jsxs)("div",{className:"songItemMenuWindow",style:I>window.innerHeight/2+100?{top:"auto",bottom:"110%"}:{top:"110%",bottom:"auto"},onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)("div",{className:"songItemMenuWindowItem",children:Object(f.jsx)(ln,{song:t})}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)("div",{className:"songItemMenuWindow inner",children:Object(f.jsx)(hn,{song:t})}),Object(f.jsx)(Jt.c,{}),"Add to playlist ",Object(f.jsx)(Jt.a,{})]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:function(){R(),E(Object(f.jsx)(Qt,{item:t,whatToShare:"song"}))},children:[Object(f.jsx)(Xe.z,{}),"Share"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:function(){R(),E(Object(f.jsx)(bn,{song:t}))},children:[Object(f.jsx)(Xe.n,{}),"Info"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)(Xe.i,{}),"Flag"]})]}):null]})]})},mn=function(e){var t=e.func,n=e.lenOfList,s=e.maxLen,c=void 0===s?5:s,a=e.boolVal;return Object(f.jsx)("div",{onClick:n>c?t:null,className:"MoreBtn",style:n<=c?{display:"none"}:{},children:Object(f.jsx)("button",{style:a?{background:"var(--pink)",color:"#ff8db2"}:{},children:a?"Close":"More"})})},pn=function(e){var t=e.title,n=e.func,s=e.boolVal,c=e.lenOfList,a=e.maxLen,r=void 0===a?5:a,i=e.marginBottom,o=void 0===i?0:i;return 0!==c?Object(f.jsxs)("div",{className:"topTitle",style:{margin:"10px 0"},children:[Object(f.jsx)("h2",{style:{margin:o},children:t}),Object(f.jsx)(mn,{func:n,boolVal:s,lenOfList:c,maxLen:r})]}):null},On=function(e){var t=e.listOfSongs,n=e.source,c=e.title,a=void 0===c?"":c,r=e.showListens,i=void 0!==r&&r,o=e.isNewSong,l=void 0!==o&&o,d=e.showCount,j=void 0!==d&&d,b=e.listOfChosenSongs,h=e.setListOfSongs,m=e.showSearch,p=void 0!==m&&m,O=e.displayIfEmpty,g=Ye(),x=g.setCurrentSongQueue,v=g.setCurrentSongPlaylistSource,y=Qe().currentUser,S=Object(s.useState)(!1),w=Object(u.a)(S,2),A=w[0],N=w[1],C=Object(s.useState)(""),k=Object(u.a)(C,2),I=k[0],M=k[1],L=Object(s.useState)(t),P=Object(u.a)(L,2),T=P[0],R=P[1];return Object(s.useEffect)((function(){R(t),t.length>1&&an(t[1].authors)}),[t]),Object(f.jsxs)("div",{className:"SongList",onClick:function(){if("no"!==n&&0!==t.length){x(t),v(n);var e=t.map((function(e){return e.id}));Ve.collection("users").doc(y.uid).update({lastQueue:{image:n.image,name:n.name,songsList:e,source:n.source}})}},children:[0!==a.length?Object(f.jsx)(pn,{title:a,func:function(){return N(!A)},boolVal:A,lenOfList:t.length}):null,p?Object(f.jsx)(Kt,{value:I,setValue:M,allFoundSongs:T,setAllFoundSongs:R,defaultSearchMode:"songs",defaultSongsListValue:t,inputText:"Search for songs"}):null,T.map((function(e,t){return 0===a.length||A||t<5?Object(f.jsxs)("span",{className:"topSongItem",children:[j?Object(f.jsx)("h3",{style:{opacity:"0.7"},children:t+1}):null,Object(f.jsx)(fn,{song:e,localIndex:t,showListens:i,isNewSong:l,listOfChosenSongs:b,setListOfSongs:h},e.id)]}):void 0})),0===t.length?O:null]})},gn=function(e){var t,n,c=e.playlist,a=Qe().currentUser,r=Object(s.useState)(c.name),i=Object(u.a)(r,2),o=i[0],l=i[1],h=Object(s.useState)(c.image),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)(""),x=Object(u.a)(g,2),y=x[0],S=x[1],w=Object(s.useState)([]),A=Object(u.a)(w,2),N=A[0],C=A[1],k=Object(s.useState)(c.authors),I=Object(u.a)(k,2),M=I[0],L=I[1],P=Object(s.useState)(c.creationDate),T=Object(u.a)(P,2),R=T[0],E=T[1],B=Object(s.useState)(""),D=Object(u.a)(B,2),U=D[0],W=D[1],V=Object(s.useState)([]),F=Object(u.a)(V,2),H=F[0],K=F[1],Q=Object(s.useState)(c.songs),q=Object(u.a)(Q,2),G=q[0],Y=q[1],z=Object(s.useState)(c.isAlbum?1:0),X=Object(u.a)(z,2),J=X[0],Z=X[1],_=Object(s.useState)(c.isPrivate?1:0),$=Object(u.a)(_,2),ee=$[0],te=$[1],ne=Object(s.useState)(!1),se=Object(u.a)(ne,2),ce=se[0],ae=se[1],re=Object(s.useState)(!1),ie=Object(u.a)(re,2),oe=ie[0],ue=ie[1],le=Object(s.useState)(""),de=Object(u.a)(le,2),je=de[0],be=de[1],he=Object(s.useState)(c.imageColors),fe=Object(u.a)(he,2),me=fe[0],pe=fe[1];function Oe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(b.a)(d.a.mark((function e(t){var n,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),C([]),n=a.friends.map((function(e){if("added"===e.status)return e.uid})),s=a.isAdmin?Ve.collection("users").where("displayName","==",y):Ve.collection("users").where("uid","in",n).where("displayName","==",y),e.next=6,s.get();case 6:void 0!==(c=e.sent)&&(c.docs.forEach((function(e){C([].concat(Object(j.a)(N),[e.data()]))})),ae(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),K([]),n=Ve.collection("songs").where("name","==",U),e.next=5,n.get();case 5:e.sent.docs.forEach((function(e){K([].concat(Object(j.a)(N),[e.data()]))})),ue(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){var t=M.filter((function(t){return t.uid!==e.uid}));return L(t)}function Se(){return(Se=Object(b.a)(d.a.mark((function e(t,n,s){var c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files[0],be(URL.createObjectURL(c)),a=We.ref(),r=a.child(n+c.name),e.next=6,r.put(c);case 6:return e.t0=s,e.next=9,r.getDownloadURL();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Bt(),M.length>c.authors.length?M.filter((function(e){return!c.authors.find((function(t){return t.uid===e.uid}))})).forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.uid).get();case 2:n=e.sent,s=n.data(),(a=s.ownPlaylists).push(c.id),console.log(a),Ve.collection("users").doc(t.uid).update({ownPlaylists:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):M.length<c.authors.length&&c.authors.filter((function(e){return!M.find((function(t){return t.uid===e.uid}))})).forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,s,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.uid).get();case 2:n=e.sent,s=n.data(),a=s.ownPlaylists,r=a.filter((function(e){return e!==c.id})),console.log(r),Ve.collection("users").doc(t.uid).update({ownPlaylists:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ve.collection("playlists").doc(c.id).update({id:c.id,name:o,songs:G,authors:M,image:p,listens:c.listens,creationDate:R,subscribers:c.subscribers,isAlbum:1===J,imageColors:me,isPrivate:1==ee}).then((function(){C([]),S(""),L([]),O(""),l(""),E(""),W(""),Y([]),te(0)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){clearTimeout(n),n=setTimeout(e,1e3)}return Object(s.useEffect)((function(){0===U.length&&c.songs.map(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Ve.collection("songs").doc(t).get();case 3:n=e.sent.data(),ue(!1),console.log(n),K((function(e){return[].concat(Object(j.a)(e),[n])}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[U]),Object(f.jsxs)("div",{className:"AddSong",children:[Object(f.jsx)(sn.a,{src:je,getColors:function(e){return pe(e)}}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Playlist name"}),Object(f.jsx)("input",{type:"text",placeholder:"Enter playlist name",value:o,onChange:function(e){return l(e.target.value)},required:!0})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Playlist authors"}),Object(f.jsx)("input",{type:"text",placeholder:"Enter author name",value:y,onChange:function(e){return S(e.target.value)},style:{marginBottom:"5px"},onKeyUp:function(){return Ae(Oe)},onKeyDown:function(){return clearTimeout(n)}}),Object(f.jsx)("div",{className:"chosenAuthorsList",children:M.map((function(e){return Object(f.jsxs)("div",{className:"chosenAuthorItem",children:[Object(f.jsx)("span",{children:e.displayName}),Object(f.jsx)(Xe.G,{onClick:function(){return e.uid===a.uid?null:ye(e)}})]})}))}),Object(f.jsx)("div",{className:"authorsResult",children:ce?Object(f.jsx)("div",{style:{position:"relative",width:"100%",height:"50px"},children:Object(f.jsx)(Vt,{})}):N.map((function(e,t){return Object(f.jsx)(v,{data:e,onClick:function(){return function(e){if(!M.some((function(t){return t.uid===e.uid})))return L((function(t){return[].concat(Object(j.a)(t),[{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL}])}));ye(e)}(e)},style:M.includes(e.uid)?{background:"var(--green)"}:{}},t)}))})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Search for songs"}),Object(f.jsx)("input",(t={type:"text",placeholder:"Search for songs",value:U,onChange:function(e){return W(e.target.value)},onKeyDown:xe,onKeyUp:function(){return Ae(xe)}},Object(qt.a)(t,"onKeyDown",(function(){return clearTimeout(n)})),Object(qt.a)(t,"style",{marginBottom:"5px"}),t)),Object(f.jsx)("div",{className:"chosenAuthorsList",children:G.map((function(e){return Object(f.jsxs)("div",{className:"chosenAuthorItem",children:[Object(f.jsx)("span",{children:e}),Object(f.jsx)(Xe.G,{onClick:function(){return function(e){var t=G.filter((function(t){return t!==e}));return Y(t)}(e)}})]})}))}),Object(f.jsx)("div",{className:"authorsResult",children:oe?Object(f.jsx)("div",{style:{position:"relative",width:"100%",height:"50px"},children:Object(f.jsx)(Vt,{})}):Object(f.jsx)(On,{listOfSongs:H,source:"no",listOfChosenSongs:G,setListOfSongs:Y})})]}),a.isAdmin||a.isAuthor?Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",margin:"15px 0"},children:[Object(f.jsx)(Yt,{label:"Playlist",onClick:function(){return Z(0)},currentActive:J,id:0}),Object(f.jsx)(Yt,{label:"Album",onClick:function(){return Z(1)},currentActive:J,id:1})]}):null,Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",margin:"15px 0"},children:[Object(f.jsx)(Yt,{label:"Not Private",onClick:function(){return te(0)},currentActive:ee,id:0}),Object(f.jsx)(Yt,{label:"Private",onClick:function(){return te(1)},currentActive:ee,id:1})]}),a.isAdmin||a.isAuthor?Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Release Date"}),Object(f.jsx)("input",{type:"date",name:"",id:"",value:R,onChange:function(e){return E(e.target.value)}})]}):null,Object(f.jsxs)("label",{className:"downloadFile",children:[Object(f.jsxs)("div",{className:"downloadPhoto",children:[Object(f.jsxs)("span",{className:"downloadBtnText",children:[Object(f.jsx)(Gt.d,{}),"Download playlist cover"]}),Object(f.jsx)("span",{className:"photoLoadLine",style:""!==p?{width:"100%"}:{}})]}),Object(f.jsx)("input",{type:"file",name:"",id:"",onChange:function(e){return function(e,t,n){return Se.apply(this,arguments)}(e,"songsImages/",O)}})]}),Object(f.jsx)("button",{type:"button",className:"addSongBtn",onClick:function(e){return we.apply(this,arguments)},children:"Update playlist"})]})]})},xn=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(n.uid).get();case 2:(s=e.sent.data().addedAuthors).push(t.uid),Ve.collection("users").doc(n.uid).update({addedAuthors:s}),c=t.subscribers,c++,Ve.collection("users").doc(t.uid).update({subscribers:c});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function vn(e,t){var n=e.friends,s=t.friends;n.push({status:"requested",uid:t.uid}),s.push({status:"awaiting",uid:e.uid}),Ve.collection("users").doc(e.uid).update({friends:n}),Ve.collection("users").doc(t.uid).update({friends:s})}n(119);var yn=function(e){var t=e.userUID,n=Object(s.useState)(""),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1];return Object(s.useEffect)((function(){var e=Ve.collection("users").doc(t).onSnapshot((function(e){if(void 0!==t){var n=(new Date).getTime()-3e5,s=e.data().online>n;d(s),void 0===e.data().online?r("offline"):s||r("last seen "+$e(e.data().online,3))}}));return function(){e()}}),[Ve,t]),l?Object(f.jsx)("span",{children:"Online"}):Object(f.jsx)("span",{children:a})},Sn=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(n.uid).get();case 2:(s=e.sent.data().addedPlaylists).push(t.id),Ve.collection("users").doc(n.uid).update({addedPlaylists:s}),Ve.collection("playlists").doc(t.id).update({subscribers:++t.subscribers});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wn=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n.addedPlaylists.filter((function(e){return e!==t.id})),Ve.collection("users").doc(n.uid).update({addedPlaylists:s}),Ve.collection("playlists").doc(t.id).update({subscribers:--t.subscribers});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),An=(n(260),function(){Tt().setContent;return Object(f.jsx)("div",{className:"GeneralSettings",children:"Settings"})}),Nn=function(){var e=Tt().setContent,t=[{id:0,title:"General",icon:Object(f.jsx)(Xe.o,{}),to:Object(f.jsx)(An,{}),color:"var(--red)"},{id:1,title:"General",icon:Object(f.jsx)(Xe.o,{}),to:Object(f.jsx)("h2",{children:"Test"}),color:"var(--lightBlue)"},{id:2,title:"General",icon:Object(f.jsx)(Xe.o,{}),to:Object(f.jsx)("h2",{children:"Test"}),color:"var(--green)"}];return Object(f.jsx)("div",{className:"SettingsList",children:t.map((function(t){return Object(f.jsxs)("button",{className:"SettingItem",style:{color:t.color},onClick:function(){return e(t.to)},children:[Object(f.jsxs)("div",{className:"settingItemIconAndTitle",children:[t.icon,Object(f.jsx)("h3",{children:t.title})]}),Object(f.jsx)(g.a,{})]},t.id)}))})},Cn=function(e){var t,n,c=e.data,a=e.headerColors,r=Ye(),i=r.displayAuthors,o=(r.setYourPlaylists,Object(s.useState)([])),l=Object(u.a)(o,2),h=l[0],m=l[1],p=Object(s.useState)([]),O=Object(u.a)(p,2),x=O[0],v=O[1],y=Qe(),S=y.currentUser,w=y.logout,A=Object(s.useState)(!1),N=Object(u.a)(A,2),C=N[0],k=N[1],I=Tt(),M=I.toggleModal,L=I.setContent,P=S.friends.find((function(e){return e.uid===c.uid&&"added"===e.status})),T=Object(s.useRef)(null);function R(){return(R=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c.authors||h.length){e.next=7;break}return t=c.authors.map((function(e){return e.uid})),n=Ve.collection("users").where("uid","in",t),e.next=5,n.get();case 5:e.sent.docs.forEach((function(e){console.log(e.data()),m((function(t){return[].concat(Object(j.a)(t),[e.data()])})),v((function(t){return[].concat(Object(j.a)(t),[e.data().photoURL])}))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){}return Et(T,k),Object(s.useEffect)((function(){!function(){R.apply(this,arguments)}()}),[c]),Object(f.jsxs)("div",{className:"Header",style:a.length?{background:"linear-gradient(45deg, ".concat(a[2],", ").concat(a[0],")")}:{background:"var(--yellowAndPinkGrad)"},children:[Object(f.jsxs)("div",{className:"headerBtns",style:{background:a[2]},children:[Object(f.jsx)(ct,{}),Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{className:"headerBackBtn",children:c.authors?S.ownPlaylists.includes(c.id)?Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"delete playlist",direction:"bottom"}),Object(f.jsx)(Xe.A,{})]}):S.addedPlaylists.includes(c.id)?Object(f.jsxs)("button",{onClick:function(){return wn(c,S)},children:[Object(f.jsx)(st,{text:"remove playlist from library",direction:"bottom"}),Object(f.jsx)(Lt.a,{})]}):Object(f.jsxs)("button",{onClick:function(){return Sn(c,S)},children:[Object(f.jsx)(st,{text:"add playlist",direction:"bottom"}),Object(f.jsx)(Xe.w,{})]}):S.addedAuthors.includes(c.uid)?Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"remove author from library",direction:"bottom"}),Object(f.jsx)(Lt.a,{})]}):S.uid===c.uid?Object(f.jsxs)("button",{onClick:function(){M(),L(Object(f.jsx)(Nn,{}))},children:[Object(f.jsx)(st,{text:"settings",direction:"bottom"}),Object(f.jsx)(Xe.y,{})]}):!c.isAuthor&&S.friends.find((function(e){return e.uid===c.uid&&"added"===e.status}))?Object(f.jsx)("button",{onClick:E,children:Object(f.jsx)(Xe.D,{})}):!c.isAuthor&&S.friends.find((function(e){return e.uid===c.uid&&"awaiting"===e.status}))?Object(f.jsx)("button",{onClick:vn,children:Object(f.jsx)(Ft.i,{style:{animation:"loading 1s infinite linear"}})}):c.isAuthor?Object(f.jsx)("button",{onClick:function(){return xn(c,S)},children:Object(f.jsx)(Xe.w,{})}):Object(f.jsx)("button",{onClick:function(){return vn(c,S)},children:Object(f.jsx)(Xe.E,{})})}),Object(f.jsxs)("div",{className:"headerMoreBtn",ref:T,children:[Object(f.jsxs)("button",{onClick:function(){return k(!C)},children:[Object(f.jsx)(st,{text:"more",direction:"bottom"}),Object(f.jsx)(Xe.s,{})]}),C?Object(f.jsxs)("div",{className:"songItemMenuWindow",style:{top:"110%",bottom:"auto"},onClick:function(e){return e.stopPropagation()},children:[Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:function(){M(),L(Object(f.jsx)(Qt,{item:c,whatToShare:void 0!==c.authors?"playlist":"author"}))},children:[Object(f.jsx)(Xe.z,{}),"Share"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",onClick:function(){M(),L(Object(f.jsx)("h2",{children:"test"}))},children:[Object(f.jsx)(Xe.n,{}),"Info"]}),Object(f.jsxs)("div",{className:"songItemMenuWindowItem",children:[Object(f.jsx)(Xe.i,{}),"Flag"]})]}):null]})]}),S.uid===c.uid?Object(f.jsxs)("button",{onClick:w,children:[Object(f.jsx)(st,{text:"quit",direction:"bottom"}),Object(f.jsx)(g.e,{})]}):null]}),Object(f.jsx)("div",{className:"headerAuthorsImage",style:void 0===c.authors?{animation:"floatingBorderRadius 10s infinite ease-in-out"}:{},children:Object(f.jsx)("img",{src:c.photoURL||c.image,alt:""})}),Object(f.jsxs)("div",{className:"headerAuthorInfo",children:[Object(f.jsxs)("div",{className:"headerAuthorsName",children:[void 0!==c.authors?c.isAlbum?Object(f.jsx)("h5",{children:"Album"}):Object(f.jsx)("h5",{children:"Playlist"}):c.isAuthor?Object(f.jsx)("h5",{children:"Author"}):Object(f.jsxs)("h5",{children:["User ",void 0===c.authors&&P?Object(f.jsx)(yn,{userUID:c.uid}):null]}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"2px 0 10px 0"},children:[Object(f.jsx)("h1",{children:c.displayName||c.name}),c.isVerified?Object(f.jsx)(Je.b,{style:{color:a[0]}}):null,c.isPrivate?Object(f.jsx)(Lt.b,{}):null,c.authors&&c.authors.find((function(e){return e.uid===S.uid}))||c.authors&&S.isAdmin?Object(f.jsx)("button",{onClick:function(){M(),L(Object(f.jsx)(gn,{playlist:c}))},className:"customizeAlbumBtn",children:Object(f.jsx)(Xe.h,{})}):null]})]}),void 0!==c.authors?Object(f.jsxs)("div",{className:"headerAuthorsImagesAndNames",children:[Object(f.jsx)(It,{imagesList:x,borderColor:a[2]}),Object(f.jsx)("div",{className:"headerAuthors",children:i(h,", ")})]}):null,Object(f.jsxs)("div",{className:"headerListenersAndSubs",children:[Object(f.jsxs)("div",{className:"headerListenersAndSubsItem",title:(null!==(t=c.listens)&&void 0!==t?t:c.numberOfListenersPerMonth)+" listeners per month",children:[Object(f.jsx)("span",{children:Mt(null!==(n=c.listens)&&void 0!==n?n:c.numberOfListenersPerMonth)}),Object(f.jsx)(Xe.k,{})]}),Object(f.jsxs)("div",{className:"headerListenersAndSubsItem",title:c.subscribers+" subscribers",children:[Object(f.jsx)("span",{children:Mt(c.subscribers)}),Object(f.jsx)(Xe.E,{})]}),void 0!==c.creationDate?Object(f.jsx)("div",{className:"headerListenersAndSubsItem",children:Object(f.jsx)("span",{children:$e(c.creationDate)})}):null]}),P?Object(f.jsx)(Wt,{data:c,color:a[3]}):null]})]})},kn=function(){var e=Object(o.h)("/albums/:albumId"),t=Object(s.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)([]),i=Object(u.a)(r,2),l=i[0],h=i[1],m=e.params.albumId,p=Object(s.useState)([]),O=Object(u.a)(p,2),g=O[0],x=O[1],v=Object(s.useState)(!0),y=Object(u.a)(v,2),S=y[0],w=y[1];function A(){return(A=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ve.collection("playlists").doc(m).get().then((function(e){e.exists?(x(e.data()),h(e.data().imageColors)):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){A.apply(this,arguments)}()}),[m]),Object(s.useEffect)((function(){a([]),0!==g.length&&(g.songs.map(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(t).get();case 2:n=e.sent.data(),a((function(e){return[].concat(Object(j.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w(!1))}),[g]),Object(f.jsx)("div",{className:"AlbumPage",style:{animation:"zoomIn .2s forwards"},children:S?Object(f.jsx)(Vt,{top:"50%"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Cn,{data:g,headerColors:l,setHeaderColors:h}),Object(f.jsx)(On,{listOfSongs:c,source:{source:"/albums/".concat(g.id),name:g.name,image:g.image,songsList:c},showSearch:!0,defaultSearchMode:"songs"})]})})},In=function(){var e,t,n=Qe().currentUser,c=Object(s.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(""),l=Object(u.a)(o,2),h=l[0],m=l[1],p=Object(s.useState)(""),O=Object(u.a)(p,2),g=O[0],x=O[1],y=Object(s.useState)([]),S=Object(u.a)(y,2),w=S[0],A=S[1],N=Object(s.useState)(n.isAdmin?[]:[{uid:n.uid,photoURL:n.photoURL,displayName:n.displayName}]),C=Object(u.a)(N,2),k=C[0],I=C[1],M=Object(s.useState)(n.isAdmin?"":(new Date).toString()),L=Object(u.a)(M,2),P=L[0],T=L[1],R=Object(s.useState)(""),E=Object(u.a)(R,2),B=E[0],D=E[1],U=Object(s.useState)([]),W=Object(u.a)(U,2),V=W[0],F=W[1],H=Object(s.useState)([]),K=Object(u.a)(H,2),Q=K[0],q=K[1],G=Object(s.useState)(0),Y=Object(u.a)(G,2),z=Y[0],X=Y[1],J=Object(s.useState)(0),Z=Object(u.a)(J,2),_=Z[0],$=Z[1],ee=Object(s.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],se=te[1],ce=Object(s.useState)(!1),ae=Object(u.a)(ce,2),re=ae[0],ie=ae[1],oe=Object(s.useState)(""),ue=Object(u.a)(oe,2),le=ue[0],de=ue[1],je=Object(s.useState)([]),be=Object(u.a)(je,2),he=be[0],fe=be[1];function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(b.a)(d.a.mark((function e(t){var s,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),A([]),s=n.friends.map((function(e){if("added"===e.status)return e.uid})),c=n.isAdmin?Ve.collection("users").where("displayName","==",g):Ve.collection("users").where("uid","in",s).where("displayName","==",g),e.next=6,c.get();case 6:void 0!==(a=e.sent)&&(a.docs.forEach((function(e){A([].concat(Object(j.a)(w),[e.data()]))})),se(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),F([]),n=Ve.collection("songs").where("name","==",B),e.next=5,n.get();case 5:e.sent.docs.forEach((function(e){F([].concat(Object(j.a)(w),[e.data()]))})),ie(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){var t=k.filter((function(t){return t.uid!==e.uid}));return I(t)}function ve(){return(ve=Object(b.a)(d.a.mark((function e(t,n,s){var c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files[0],de(URL.createObjectURL(c)),a=We.ref(),r=a.child(n+c.name),e.next=6,r.put(c);case 6:return e.t0=s,e.next=9,r.getDownloadURL();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Bt(),Ve.collection("playlists").doc(n).set({id:n,name:r,songs:Q,authors:k,image:h,listens:0,creationDate:P,subscribers:0,isAlbum:z,imageColors:he,isPrivate:!0===_}).then((function(){A([]),x(""),I([]),m(""),i(""),T(""),D(""),q([]),$(0)})).catch((function(e){console.log(e)})),k.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var s,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.uid).get();case 2:s=e.sent,c=s.data(),(a=c.ownPlaylists).push(n),Ve.collection("users").doc(t.uid).update({ownPlaylists:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){clearTimeout(t),t=setTimeout(e,1e3)}return Object(f.jsxs)("div",{className:"AddSong",children:[Object(f.jsx)(sn.a,{src:le,getColors:function(e){return fe(e)}}),Object(f.jsxs)("form",{onSubmit:function(e){return ye.apply(this,arguments)},children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Playlist name"}),Object(f.jsx)("input",{type:"text",placeholder:"Enter playlist name",value:r,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Playlist authors"}),Object(f.jsx)("input",{type:"text",placeholder:"Enter author name",value:g,onChange:function(e){return x(e.target.value)},style:{marginBottom:"5px"},onKeyUp:function(){return Se(me)},onKeyDown:function(){return clearTimeout(t)}}),Object(f.jsx)("div",{className:"chosenAuthorsList",children:k.map((function(e){return Object(f.jsxs)("div",{className:"chosenAuthorItem",children:[Object(f.jsx)("span",{children:e.displayName}),Object(f.jsx)(Xe.G,{onClick:function(){return e.uid===n.uid?null:xe(e)}})]})}))}),Object(f.jsx)("div",{className:"authorsResult",children:ne?Object(f.jsx)("div",{style:{position:"relative",width:"100%",height:"50px"},children:Object(f.jsx)(Vt,{})}):w.map((function(e,t){return Object(f.jsx)(v,{data:e,onClick:function(){return function(e){if(!k.some((function(t){return t.uid===e.uid})))return I((function(t){return[].concat(Object(j.a)(t),[{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL}])}));xe(e)}(e)},style:k.includes(e.uid)?{background:"var(--green)"}:{}},t)}))})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Search for songs"}),Object(f.jsx)("input",(e={type:"text",placeholder:"Search for songs",value:B,onChange:function(e){return D(e.target.value)},onKeyDown:Oe,onKeyUp:function(){return Se(Oe)}},Object(qt.a)(e,"onKeyDown",(function(){return clearTimeout(t)})),Object(qt.a)(e,"style",{marginBottom:"5px"}),e)),Object(f.jsx)("div",{className:"chosenAuthorsList",children:Q.map((function(e){return Object(f.jsxs)("div",{className:"chosenAuthorItem",children:[Object(f.jsx)("span",{children:e}),Object(f.jsx)(Xe.G,{onClick:function(){return function(e){var t=Q.filter((function(t){return t!==e}));return q(t)}(e)}})]})}))}),Object(f.jsx)("div",{className:"authorsResult",children:re?Object(f.jsx)("div",{style:{position:"relative",width:"100%",height:"50px"},children:Object(f.jsx)(Vt,{})}):V.map((function(e,t){return Object(f.jsx)(nn,{song:e,listOfSongs:Q,setListOfSongs:q})}))})]}),n.isAdmin||n.isAuthor?Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",margin:"15px 0"},children:[Object(f.jsx)(Yt,{label:"Playlist",onClick:function(){return X(0)},currentActive:z,id:0}),Object(f.jsx)(Yt,{label:"Album",onClick:function(){return X(1)},currentActive:z,id:1})]}):null,Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",margin:"15px 0"},children:[Object(f.jsx)(Yt,{label:"Not Private",onClick:function(){return $(0)},currentActive:_,id:0}),Object(f.jsx)(Yt,{label:"Private",onClick:function(){return $(1)},currentActive:_,id:1})]}),n.isAdmin||n.isAuthor?Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Release Date"}),Object(f.jsx)("input",{type:"date",name:"",id:"",value:P,onChange:function(e){return T(e.target.value)}})]}):null,Object(f.jsxs)("label",{className:"downloadFile",children:[Object(f.jsxs)("div",{className:"downloadPhoto",children:[Object(f.jsxs)("span",{className:"downloadBtnText",children:[Object(f.jsx)(Gt.d,{}),"Download playlist cover"]}),Object(f.jsx)("span",{className:"photoLoadLine",style:""!==h?{width:"100%"}:{}})]}),Object(f.jsx)("input",{type:"file",name:"",id:"",onChange:function(e){return function(e,t,n){return ve.apply(this,arguments)}(e,"songsImages/",m)}})]}),Object(f.jsx)("button",{type:"submit",className:"addSongBtn",children:"Add playlist"})]})]})},Mn=function(e){var t=e.setErrorMessage,n=e.setImageLocalPath,s=e.downloadedPhoto,c=e.setDownloadedPhoto,a=e.place,r=e.btnText,i=void 0===r?"Download song cover":r;function o(){return(o=Object(b.a)(d.a.mark((function e(s,c,a){var r,i,o,u,l,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(""),r=s.target.files[0],i=!1,"songsImages/"===c||"chatCovers/"===c?(console.log("image"),(o=[".jpg",".png",".jpeg"]).find((function(e){return r.name.substr(r.name.length-e.length,e.length)===e}))?i=!0:t("Format of your file is not valid. Download file with one of these: ".concat(o.map((function(e){return" "+e}))))):"songs/"===c&&(console.log("song"),(u=[".mp3",".mp4a",".flac",".wav",".wma"]).find((function(e){return r.name.substr(r.name.length-e.length,e.length)===e}))?i=!0:t("Format of your file is not valid. Download file with one of these: ".concat(u.map((function(e){return e}))))),!i){e.next=16;break}return console.log(r),n(URL.createObjectURL(r)),l=We.ref(),j=l.child(c+r.name),e.next=11,j.put(r);case 11:return e.t0=a,e.next=14,j.getDownloadURL();case 14:e.t1=e.sent,(0,e.t0)(e.t1);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("label",{className:"downloadFile",children:[Object(f.jsxs)("div",{className:"downloadPhoto",children:[Object(f.jsxs)("span",{className:"downloadBtnText",children:[Object(f.jsx)(Gt.d,{}),i]}),Object(f.jsx)("span",{className:"photoLoadLine",style:""!==s?{width:"100%"}:{}})]}),Object(f.jsx)("input",{type:"file",name:"",id:"",onChange:function(e){return function(e,t,n){return o.apply(this,arguments)}(e,a,c)}})]})},Ln=function(e){var t=e.errorMessage;return t&&Object(f.jsx)("div",{className:"Alert",children:t})},Pn=function(){var e,t=Qe().currentUser,n=Object(s.useState)(""),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(""),o=Object(u.a)(i,2),l=o[0],h=o[1],m=Object(s.useState)(""),p=Object(u.a)(m,2),O=p[0],g=p[1],x=Object(s.useState)(""),y=Object(u.a)(x,2),S=y[0],w=y[1],A=Object(s.useState)([]),N=Object(u.a)(A,2),C=N[0],k=N[1],I=Object(s.useState)(t.isAdmin?[]:[{uid:t.uid,photoURL:t.photoURL,displayName:t.displayName}]),M=Object(u.a)(I,2),L=M[0],P=M[1],T=Object(s.useState)(""),R=Object(u.a)(T,2),E=R[0],B=R[1],D=Object(s.useState)([]),U=Object(u.a)(D,2),W=U[0],V=U[1],F=Object(s.useState)(""),H=Object(u.a)(F,2),K=H[0],Q=H[1],q=Object(s.useState)([]),G=Object(u.a)(q,2),Y=G[0],z=G[1],X=Object(s.useState)(!1),J=Object(u.a)(X,2),Z=J[0],_=J[1],$=Object(s.useState)([]),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],se=Object(s.useState)(""),ce=Object(u.a)(se,2),ae=ce[0],re=ce[1],ie=Object(s.useState)(!1),oe=Object(u.a)(ie,2),ue=oe[0],le=oe[1];function de(e){return je.apply(this,arguments)}function je(){return(je=Object(b.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),k([]),n=Ve.collection("users").where("displayName","==",S),e.next=5,n.get();case 5:void 0!==(s=e.sent)&&(s.docs.forEach((function(e){k([].concat(Object(j.a)(C),[e.data()]))})),_(!1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){var t=L.filter((function(t){return t.uid!==e.uid}));return P(t)}function he(){return(he=Object(b.a)(d.a.mark((function e(t,n,s){var c,a,r,i,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(""),c=t.target.files[0],a=!1,"songsImages/"===n?(console.log("image"),(r=[".jpg",".png",".jpeg"]).find((function(e){return c.name.substr(c.name.length-e.length,e.length)===e}))?a=!0:re("Format of your file is not valid. Download file with one of these: ".concat(r.map((function(e){return" "+e}))))):"songs/"===n&&(console.log("song"),(i=[".mp3",".mp4a",".flac",".wav",".wma"]).find((function(e){return c.name.substr(c.name.length-e.length,e.length)===e}))?a=!0:re("Format of your file is not valid. Download file with one of these: ".concat(i.map((function(e){return e}))))),!a){e.next=16;break}return console.log(c),Q(URL.createObjectURL(c)),o=We.ref(),u=o.child(n+c.name),e.next=11,u.put(c);case 11:return e.t0=s,e.next=14,u.getDownloadURL();case 14:e.t1=e.sent,(0,e.t0)(e.t1);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Bt(),console.log(te),re(""),0===a.length?re("Song has to have some name"):0===L.length?re("Song has to have at least 1 author"):0===l.length?re("You didn't load song cover"):0===O.length?re("You didn't load song file"):0===E.length?re("You have to set release date for a song"):(Ve.collection("songs").doc(n).set({id:n,name:a,songSrc:O,authors:L,cover:l,listens:0,releaseDate:E,lyrics:te,imageColors:Y}).then((function(){k([]),w(""),P([]),V([]),h(""),r(""),g(""),B(""),le(!0),z([])})).catch((function(e){re(e)})),L.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var s,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.uid).get();case 2:s=e.sent,c=s.data(),(a=c.ownSongs).push(n),Ve.collection("users").doc(t.uid).update({ownSongs:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){ue&&setTimeout((function(){le(!1)}),2e3)}),[ue]),Object(s.useEffect)((function(){console.log(Y)}),[Y]),Object(f.jsxs)("div",{className:"AddSong",children:[Object(f.jsx)(sn.a,{src:K,getColors:function(e){return z(e)}}),Object(f.jsxs)("form",{onSubmit:function(e){return fe.apply(this,arguments)},children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Song name"}),Object(f.jsx)("input",{type:"text",placeholder:"Enter song name",value:a,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Song authors"}),Object(f.jsx)("input",{type:"text",placeholder:"Enter author name",value:S,onChange:function(e){return w(e.target.value)},style:{marginBottom:"5px"},onKeyUp:function(){return t=de,clearTimeout(e),void(e=setTimeout(t,1e3));var t},onKeyDown:function(){return clearTimeout(e)}}),Object(f.jsx)("div",{className:"chosenAuthorsList",children:L.map((function(e){return Object(f.jsxs)("div",{className:"chosenAuthorItem",children:[Object(f.jsx)("span",{children:e.displayName}),Object(f.jsx)(Xe.G,{onClick:function(){(t.isAdmin||e.uid!==t.uid)&&be(e)}})]})}))}),Object(f.jsx)("div",{className:"authorsResult",children:Z?Object(f.jsx)("div",{style:{position:"relative",width:"100%",height:"50px"},children:Object(f.jsx)(Vt,{})}):C.map((function(e,t){return Object(f.jsx)(v,{data:e,onClick:function(){return function(e){if(!L.some((function(t){return t.uid===e.uid})))return P((function(t){return[].concat(Object(j.a)(t),[{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL}])}));be(e)}(e)},style:L.includes(e.uid)?{background:"var(--green)"}:{}},t)}))})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("h3",{children:"Release Date"}),Object(f.jsx)("input",{type:"date",name:"",id:"",value:E,onChange:function(e){return B(e.target.value)}})]}),Object(f.jsx)(Ln,{errorMessage:ae}),Object(f.jsx)("div",{style:{width:"100%",display:"flex"},children:Y.map((function(e,t){return Object(f.jsx)("input",{type:"color",value:e,style:{width:"100%",height:"60px",padding:"0",borderRadius:"0px"},onChange:function(e){!function(e,t){Y[t]=e.target.value,z(Object(j.a)(Y))}(e,t)}})}))}),Object(f.jsx)(Mn,{setErrorMessage:re,setImageLocalPath:Q,downloadedPhoto:l,setDownloadedPhoto:h,place:"songsImages/"}),Object(f.jsxs)("label",{className:"downloadFile",children:[Object(f.jsxs)("div",{className:"downloadPhoto",children:[Object(f.jsxs)("span",{className:"downloadBtnText",children:[Object(f.jsx)(Gt.d,{}),"Download song file"]}),Object(f.jsx)("span",{className:"photoLoadLine",style:""!==O?{width:"100%"}:{}})]}),Object(f.jsx)("input",{type:"file",name:"",id:"",onChange:function(e){return function(e,t,n){return he.apply(this,arguments)}(e,"songs/",g)}})]}),Object(f.jsx)("label",{children:Object(f.jsx)("textarea",{name:"",id:"",placeholder:"Add song lyrics",onKeyDown:function(e){for(var t=[],n=0,s=0;s<W.length;s++)"\n"!==W[s]&&void 0!==W[s+1]||(t.push({startTime:"undefined",text:W.substr(n,s-n)}),n=s+1);ne(t)},onChange:function(e){return V(e.target.value)}})}),Object(f.jsx)("button",{type:"submit",className:"addSongBtn",children:ue?"Song Successfully added. Congrats!":"Add song"})]})]})},Tn=function(e){var t=e.pages,n=e.currentPage,s=e.setCurrentPage;return Object(f.jsx)("div",{className:"Slider",children:t.map((function(e,t){return Object(f.jsx)("div",{className:"sliderItem "+(t===n?"current":""),onClick:function(){return s(t)},children:e},t)}))})},Rn=function(e){var t=e.data,n=Qe().currentUser,c=Object(s.useState)(!1),a=Object(u.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(0),l=Object(u.a)(o,2),d=l[0],j=l[1],b=[Object(f.jsx)(Pn,{}),Object(f.jsx)(In,{})];return(n.isAdmin||t.isAuthor)&&t.uid===n.uid?Object(f.jsxs)("div",{className:"AddSong",children:[Object(f.jsx)("button",{onClick:function(){return i(!r)},style:r?{background:"var(--red)"}:{},className:"openAddSongWindowBtn",children:Object(f.jsx)(Xe.v,{style:r?{transform:"rotate(45deg)"}:{}})}),Object(f.jsxs)("div",{className:"addSongWindow",style:r?{display:"flex"}:{},children:[Object(f.jsx)(Tn,{pages:["Song","Playlists"],currentPage:d,setCurrentPage:j}),b[d]]})]}):null},En=function(e){var t=e.person,n=e.addFriend,s=e.rejectFriend;return Object(f.jsxs)("div",{className:"FriendRequestItem",children:[Object(f.jsx)(i.b,{to:"/authors/".concat(t.uid),children:Object(f.jsxs)("div",{className:"friendRequestImageAndName",children:[Object(f.jsx)("div",{className:"requestImage",children:Object(f.jsx)("img",{src:t.photoURL,alt:""})}),Object(f.jsx)("h3",{children:t.displayName})]})}),Object(f.jsxs)("div",{className:"requestButtons",children:[Object(f.jsxs)("button",{style:{color:"var(--green)"},onClick:function(){return n(t.uid)},children:[Object(f.jsx)(Xe.b,{}),Object(f.jsx)("span",{children:"Add"})]}),Object(f.jsxs)("button",{style:{color:"var( --lightRed)"},onClick:function(){return s(t.uid)},children:[Object(f.jsx)(Xe.F,{}),Object(f.jsx)("span",{children:"Reject"})]})]})]})},Bn=function(){var e=Qe().currentUser,t=Object(s.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1];function r(t){var n=e.friends,s=c.find((function(e){return e.uid===t})).friends;n.find((function(e){return e.uid===t})).status="added",s.find((function(t){return t.uid===e.uid})).status="added",Ve.collection("users").doc(e.uid).update({friends:n}),Ve.collection("users").doc(t).update({friends:s}),e.friends=n}function i(t){var n=e.friends,s=c.find((function(e){return e.uid===t})).friends;n.find((function(e){return e.uid===t})).status="rejected",s.find((function(t){return t.uid===e.uid})).status="rejected",Ve.collection("users").doc(e.uid).update({friends:n}),Ve.collection("users").doc(t).update({friends:s})}return Object(s.useEffect)((function(){e.friends.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("requested"!==t.status){e.next=5;break}return e.next=3,Ve.collection("users").doc(t.uid).get();case 3:n=e.sent.data(),a((function(e){return[].concat(Object(j.a)(e),[n])}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(f.jsx)("div",{children:c.map((function(e,t){return Object(f.jsx)(En,{person:e,addFriend:r,rejectFriend:i},t)}))})},Dn=function(){var e=Object(b.a)(d.a.mark((function e(t,n,s,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n([]),a=[],void 0!==t.ownPlaylists&&0!==t.ownPlaylists.length&&t.ownPlaylists.forEach(function(){var e=Object(b.a)(d.a.mark((function e(r,i){var o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("playlists").doc(r).get();case 2:(o=e.sent.data())&&(!o.isPrivate||t.uid===s&&o.isPrivate)&&a.push(o),i===t.ownPlaylists.length-1&&(a.sort((function(e,t){return new Date(t.creationDate).getTime()-new Date(e.creationDate).getTime()})),c(!1),n(a));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t,n,s,c){return e.apply(this,arguments)}}();function Un(e){return e.replace(/\s/g,"-").toLowerCase()}var Wn=function(e){var t=e.playlist,n=e.listOfChosenAlbums,c=e.setListOfChosenAlbums,a=new Date(t.creationDate),r=Qe().currentUser,o=tt().isMobile,l=Ye(),h=l.setCurrentSongQueue,m=l.setCurrentSongPlaylistSource,p=l.playSong,O=l.setCurrentSongInQueue,g=l.setCurrentSong,v=l.currentSongPlaylistSource,y=l.songRef,S=l.setPlay,w=l.play,A=Object(s.useState)([]),N=Object(u.a)(A,2),C=N[0],k=N[1];return Object(s.useEffect)((function(){if(C.length){var e={source:"/albums/".concat(t.id),name:t.name,image:t.image,songsList:C},n=C.map((function(e){return e.id}));h(C),O(0),g(C[0].id),y.current.play(),S(!0),m(e),Ve.collection("users").doc(r.uid).update({lastSongPlayed:C[0].id,lastQueue:{image:e.image,name:e.name,songsList:n,source:e.source}})}}),[C.length]),Object(f.jsxs)(i.b,{to:"/albums/".concat(t.id),style:{textDecoration:"none"},className:"playlistWrapper",children:[Object(f.jsx)(x,{listOfChosenItems:n,setListOfChosenItems:c,itemId:t.id}),Object(f.jsxs)("div",{className:"playlistItem",children:[t.image?Object(f.jsx)("div",{className:"playlistImageWrapper",children:Object(f.jsx)("img",{src:t.image,alt:""})}):Object(f.jsxs)("h1",{children:[t.name.split(" ")[0][0],t.name.split(" ")[1][0]]}),Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),v.name!==t.name?(k([]),0!==t.length&&t.songs.map(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(t).get();case 2:n=e.sent.data(),k((function(e){return[].concat(Object(j.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):p()},children:v.name===t.name&&w?Object(f.jsx)(Xt.b,{}):Object(f.jsx)(Xt.c,{})})]}),Object(f.jsxs)("h4",{style:{display:"flex",alignItems:"center",margin:"5px 0"},children:[cn(t.name,o?10:15),Object(f.jsx)("span",{style:{fontSize:".6em",opacity:.6,fontWeight:"500",marginLeft:"7px"},children:t.isAlbum?1===t.songs.length?"single":"album":"playlist"})]}),Object(f.jsx)("h5",{style:{margin:"5px 0"},children:a.getFullYear()})]})},Vn=function(e){var t=e.listOfAlbums,n=e.title,c=void 0===n?"":n,a=e.loading,r=void 0===a||a,i=e.listOfChosenAlbums,o=e.setListOfChosenAlbums,l=Object(s.useState)(0),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(s.useRef)(null),m=Object(s.useState)(!1),p=Object(u.a)(m,2),O=p[0],g=p[1];return Object(s.useEffect)((function(){t.length>0&&!r&&(h.current.scrollWidth>h.current.offsetWidth&&g(!0))}),[t]),t.length>0?r?Object(f.jsx)(Vt,{}):Object(f.jsxs)("div",{className:"AuthorsList",children:[0!==c.length?Object(f.jsx)("h2",{children:c}):null,Object(f.jsx)("div",{className:"authorsWrapper",ref:h,onScroll:function(e){return b(e.target.scrollLeft)},children:t.map((function(e,t){return Object(f.jsx)(Wn,{playlist:e,listOfChosenAlbums:i,setListOfChosenAlbums:o},t)}))}),Object(f.jsxs)("div",{className:"authorsShiftButtons",children:[Object(f.jsx)("button",{onClick:function(){var e=h.current.scrollLeft;h.current.scrollLeft=e-220,b(e-220)},style:j<=0?{visibility:"hidden",opacity:"0"}:{},children:Object(f.jsx)(Xe.d,{})}),Object(f.jsx)("button",{onClick:function(){var e=h.current.scrollLeft;h.current.scrollLeft=e+220,b(e+220)},style:O&&h.current&&h.current.scrollWidth-h.current.offsetWidth!==j?{}:{visibility:"hidden",opacity:"0"},children:Object(f.jsx)(Xe.e,{})})]})]}):null},Fn=function(e){var t=e.authorsData,n=Qe().currentUser,c=Object(s.useState)([]),a=Object(u.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(!0),l=Object(u.a)(o,2),d=l[0],j=l[1];return Object(s.useEffect)((function(){Dn(t,i,n.uid,j)}),[t.ownPlaylists]),Object(f.jsx)(Vn,{listOfAlbums:r,title:"Albums",loading:d})};function Hn(e,t,n){var s=[];e.forEach((function(e){var t=e.authors;0!==t.length&&s.push(t)})),s=s.flat();for(var c=new Set(s.map((function(e){return e.uid})).filter((function(e){return e!==t.uid}))),a=Array.from(c),r=[],i=0;i<a.length;i++)for(var o=0;o<s.length;o++)if(a[i]===s[o].uid){r.push(s[o]);break}return n(r),r}function Kn(e,t){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(b.a)(d.a.mark((function e(t,n){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||void 0===t.ownSongs||0===t.ownSongs.length){e.next=8;break}return s=[],c=Ve.collection("songs").where("id","in",t.ownSongs),e.next=5,c.get();case 5:return e.sent.docs.forEach((function(e){s.push(e.data())})),e.abrupt("return",Hn(s,t,n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qn=function(e){var t=e.data,n=e.listOfChosenAuthors,s=e.setListOfChosenAuthors;return Object(f.jsxs)(i.b,{to:"/authors/".concat(t.uid),className:"AuthorItemBig",children:[Object(f.jsx)(x,{listOfChosenItems:n,setListOfChosenItems:s,itemId:t.uid}),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"AuthorItemBigImage",children:Object(f.jsx)("img",{src:t.photoURL,alt:""})}),Object(f.jsx)("h3",{children:t.displayName})]})]})},Gn=function(e){var t=e.listOfAuthors,n=e.title,c=void 0===n?"":n,a=e.listOfChosenAuthors,r=e.setListOfChosenAuthors,i=Object(s.useState)(0),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(s.useRef)(null),b=Object(s.useState)(!1),h=Object(u.a)(b,2),m=h[0],p=h[1];return Object(s.useEffect)((function(){t.length>0&&(j.current.scrollWidth>j.current.offsetWidth&&p(!0))}),[t]),t.length>0?Object(f.jsxs)("div",{className:"AuthorsList",children:[0!==c.length?Object(f.jsx)("h2",{children:c}):null,Object(f.jsx)("div",{className:"authorsWrapper",ref:j,onScroll:function(e){return d(e.target.scrollLeft)},children:t.map((function(e){return Object(f.jsx)(qn,{data:e,listOfChosenAuthors:a,setListOfChosenAuthors:r},e.uid)}))}),Object(f.jsxs)("div",{className:"authorsShiftButtons",children:[Object(f.jsx)("button",{onClick:function(){var e=j.current.scrollLeft;j.current.scrollLeft=e-200,d(e-200)},style:l<=0?{visibility:"hidden",opacity:"0"}:{},children:Object(f.jsx)(Xe.d,{})}),Object(f.jsx)("button",{onClick:function(){var e=j.current.scrollLeft;j.current.scrollLeft=e+200,d(e+200)},style:m&&null!==j.current&&j.current.scrollWidth-j.current.offsetWidth!==l?{}:{visibility:"hidden",opacity:"0"},children:Object(f.jsx)(Xe.e,{})})]})]}):null},Yn=function(e){var t=e.data,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1];return Object(s.useEffect)((function(){Kn(t,r)}),[t]),Object(f.jsx)(Gn,{listOfAuthors:a,title:"Similar Authors"})};function zn(e){var t=new Date(e.releaseDate);return(new Date).getTime()-t.getTime()<18144e5}var Xn=function(e){e.authorId;var t=e.authorsData,n=(e.headerColors,Object(s.useState)([])),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)([]),o=Object(u.a)(i,2),l=o[0],h=o[1];function m(){return(m=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r([]),n=[],t.isAuthor?void 0!==t.ownSongs&&0!==t.ownSongs.length&&t.ownSongs.forEach(function(){var e=Object(b.a)(d.a.mark((function e(s,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(s).get();case 2:a=e.sent.data(),n.push(a),zn(a)&&!l.includes(a)&&h((function(e){return[].concat(Object(j.a)(e),[a])})),c===t.ownSongs.length-1&&(n.sort((function(e,t){return t.listens-e.listens})),r(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()):t.addedSongs.forEach(function(){var e=Object(b.a)(d.a.mark((function e(s,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(s).get();case 2:a=e.sent.data(),n.unshift(a),c===t.addedSongs.length-1&&r(n);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){m.apply(this,arguments)}(),h([])}),[t.ownSongs]),t.isAuthor?Object(f.jsxs)("div",{className:"TopSongs",children:[Object(f.jsx)(On,{listOfSongs:l,source:{source:"/authors/".concat(t.uid),name:t.displayName,image:t.photoURL,songsList:l},isNewSong:!0}),Object(f.jsx)(On,{listOfSongs:a,source:{source:"/authors/".concat(t.uid),name:t.displayName,image:t.photoURL,songsList:a},title:"Popular Songs",showListens:!0,showCount:!0})]}):Object(f.jsx)(On,{listOfSongs:a,source:{source:"/authors/".concat(t.uid),name:t.displayName+"'s Library",image:t.photoURL,songsList:a},title:t.displayName+"'s Library",showListens:!0,showCount:!0})},Jn=(n(261),function(){var e=Object(o.h)("/authors/:authorId"),t=Qe().currentUser,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1],i=e.params.authorId,l=Object(s.useState)([]),j=Object(u.a)(l,2),h=j[0],m=j[1],p=Object(s.useState)(!0),O=Object(u.a)(p,2),g=O[0],x=O[1];function v(){return(v=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ve.collection("users").doc(i).get().then((function(e){e.exists?(m(e.data()),r(e.data().imageColors),x(!1)):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){v.apply(this,arguments)}()}),[i]),Object(f.jsx)("div",{className:"AuthorPage",style:{animation:"zoomIn .2s forwards"},children:g?Object(f.jsx)(Vt,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Cn,{data:h,headerColors:a,setHeaderColors:r}),t.uid===h.uid?Object(f.jsx)(Bn,{}):null,Object(f.jsx)(Rn,{data:h}),Object(f.jsx)(Xn,{author:i,authorsData:h,headerColors:a}),h.friends&&!h.isAuthor?Object(f.jsx)(jn,{data:h,title:"Friends"}):null,Object(f.jsx)(Fn,{authorsData:h,headerColors:a}),h.isAuthor?Object(f.jsx)(Yn,{data:h}):null]})})}),Zn=function(e){var t=e.chatId,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(!0),o=Object(u.a)(i,2),l=o[0],h=o[1],m=Object(s.useState)(0),p=Object(u.a)(m,2),O=p[0],g=p[1],x=[Object(f.jsx)(On,{listOfSongs:a,source:{source:"/chat/".concat(t),name:"Chat with ".concat(t),image:"",songsList:a}}),Object(f.jsx)(Gn,{listOfAuthors:a}),Object(f.jsx)(Vn,{listOfAlbums:a,loading:l})];function v(e,t){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(d.a.mark((function e(n,s){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("chats").doc(t).get();case 2:e.sent.data().messages.forEach((function(e){e[n].length>0&&e[n].forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ve.collection(s).doc(t).get().then((function(e){r((function(t){return[].concat(Object(j.a)(t),[e.data()])}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){switch(O){case 0:v("attachedSongs","songs").then((function(){return h(!1)}));break;case 1:v("attachedAuthors","users").then((function(){return h(!1)}));break;case 2:v("attachedAlbums","playlists").then((function(){return h(!1)}))}}),[O]),Object(s.useEffect)((function(){r([])}),[t]),console.log(a),Object(f.jsxs)("div",{className:"AttachmentList",children:[Object(f.jsx)(Tn,{pages:["Songs","Authors","Playlists"],currentPage:O,setCurrentPage:function(e){g(e),h(!0),r([])}}),l?Object(f.jsx)(Vt,{}):a.length>0?x[O]:Object(f.jsx)("h2",{children:"Nothing here"})]})},_n=function(e,t,n,c,a,r,i,o){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];function l(){return j.apply(this,arguments)}function j(){return(j=Object(b.a)(d.a.mark((function s(){var u;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(u=[],void 0!==n){s.next=15;break}if(void 0===r){s.next=9;break}return s.next=5,Ve.collection(t).where(r,i,o).get();case 5:s.sent.docs.forEach((function(e){u.push(e.data())})),s.next=13;break;case 9:return s.next=11,Ve.collection(t).get();case 11:s.sent.docs.forEach((function(e){u.push(e.data())}));case 13:s.next=18;break;case 15:return s.next=17,n.forEach(function(){var e=Object(b.a)(d.a.mark((function e(s,r){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection(t).doc(s).get();case 2:i=e.sent.data(),u.push(i),r===n.length-1&&(void 0!==a?(u.sort(a),c(u)):c(u));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 17:e(!1);case 18:return s.abrupt("return",u);case 19:case"end":return s.stop()}}),s)})))).apply(this,arguments)}Object(s.useEffect)((function(){e(!0),c([]),l().then((function(t){void 0===n&&(c(t),e(!1))}))}),u)},$n=n(61),es=function(e){var t=e.data,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(!0),o=Object(u.a)(i,2),l=o[0],h=o[1],m=Object(s.useState)(t.chatName),p=Object(u.a)(m,2),O=p[0],g=p[1],x=Object(s.useState)(t.chatImage),y=Object(u.a)(x,2),S=y[0],w=y[1],A=Object(s.useState)(""),N=Object(u.a)(A,2),C=N[0],k=N[1],I=Object(s.useState)(t.imageColors||[]),M=Object(u.a)(I,2),L=M[0],P=M[1],T=Tt().setContent,R=Object(s.useState)(0),E=Object(u.a)(R,2),B=E[0],D=E[1],U=Object(s.useState)(!1),W=Object(u.a)(U,2),V=W[0],F=W[1];function H(){return(H=Object(b.a)(d.a.mark((function e(t,n,s){var c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files[0],k(URL.createObjectURL(c)),a=We.ref(),r=a.child(n+c.name),e.next=6,r.put(c);case 6:return e.t0=s,e.next=9,r.getDownloadURL();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e,t,n,c){function a(){t.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t).get();case 2:s=e.sent.data(),n((function(e){return[].concat(Object(j.a)(e),[s])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(!1)}Object(s.useEffect)((function(){return e(!0),a(),function(){return a()}}),c)}(h,t.participants,r,[t.id]),Object(s.useEffect)((function(){O.trim()!==t.chatName.trim()||S!==t.chatImage?F(!0):F(!1)}),[O,S]),Object(s.useEffect)((function(){g(t.chatName)}),[t.id]),Object(f.jsxs)("div",{className:"ChatInfo",children:[Object(f.jsx)(sn.a,{src:C,getColors:function(e){return P(e)}}),Object(f.jsxs)("div",{className:"chatInfoImageAndName",children:[Object(f.jsxs)("div",{className:"chatInfoImage",children:[Object(f.jsxs)("label",{className:"changePhoto",children:[Object(f.jsx)(Jt.b,{}),"Change photo",Object(f.jsx)("input",{type:"file",style:{display:"none"},onChange:function(e){return function(e,t,n){return H.apply(this,arguments)}(e,"chatCovers/",w)}})]}),Object(f.jsx)("img",{src:S,alt:""})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",className:"standartInput",value:O,onChange:function(e){return g(e.target.value)}}),Object(f.jsxs)("div",{className:"chatInfoButtons",children:[Object(f.jsxs)("button",{className:"chatInfoButton",children:[Object(f.jsx)(Xe.y,{}),"Settings"]}),Object(f.jsxs)("button",{className:"chatInfoButton",onClick:function(){return T(Object(f.jsx)(Zn,{chatId:t.id}))},children:[Object(f.jsx)(Je.a,{}),cn("Attachments",7)]}),Object(f.jsxs)("button",{className:"chatInfoButton",children:[Object(f.jsx)($n.b,{}),"Sound"]})]})]}),V?Object(f.jsx)("button",{className:"standartButton",onClick:function(){Ve.collection("chats").doc(t.id).update({chatName:O,chatImage:S,imageColors:L})},children:"Update Chat"}):null]}),Object(f.jsx)("h4",{children:"Chat participants"}),Object(f.jsx)(Tn,{pages:["All participants","Administrators"],currentPage:B,setCurrentPage:D}),l?Object(f.jsx)(Vt,{}):a.map((function(e){return 1!==B||t.admins.includes(e.uid)?Object(f.jsx)(v,{data:e},e.uid):void 0}))]})},ts=function(e){var t=e.chatId,n=e.image,s=e.currentWallpaper;return Object(f.jsx)("div",{className:"WallpaperItem "+(n===s?"active":""),onClick:function(){Ve.collection("chats").doc(t).update({wallpaper:n})},style:"undefined"===n?{background:"var(--playlistsColor)"}:{},children:"undefined"!==n?Object(f.jsx)("img",{src:n,alt:""}):null})},ns=function(e){var t=e.chatId,n=e.currentWallpaper,c=Object(s.useState)([]),a=Object(u.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(!0),l=Object(u.a)(o,2),d=l[0],j=l[1];return _n(j,"chatWallpapers",void 0,i),console.log(r),d?Object(f.jsx)(Vt,{}):Object(f.jsxs)("div",{className:"Wallpapers",children:[Object(f.jsx)("h2",{children:"Wallpapers"}),Object(f.jsxs)("div",{className:"wallpapreWrapper",children:[Object(f.jsx)(ts,{chatId:t,image:"undefined"}),r.map((function(e,s){return Object(f.jsx)(ts,{chatId:t,image:e.image,currentWallpaper:n},e.id)}))]})]})},ss=function(e){var t=e.chatId,n=e.currentWallpaper,c=e.data,a=Object(s.useState)(),r=Object(u.a)(a,2),i=r[0],o=r[1],l=Tt(),d=l.toggleModal,j=l.setContent,b=Object(s.useRef)(null);return Et(b,o),Object(f.jsxs)("div",{className:"ChatMoreBtn",ref:b,children:[Object(f.jsx)("button",{onClick:function(){return o(!i)},children:Object(f.jsx)(Xe.r,{})}),Object(f.jsxs)("div",{className:"chatHeaderMenuWindow",style:i?{}:{display:"none"},children:[c.participants.length>2?Object(f.jsxs)("div",{className:"chatHeaderMenuWindowItem",onClick:function(){d(),j(Object(f.jsx)(es,{data:c}))},children:[Object(f.jsx)(Xe.n,{}),Object(f.jsx)("span",{children:"Info"})]}):null,Object(f.jsxs)("div",{className:"chatHeaderMenuWindowItem",children:[Object(f.jsx)(Xe.x,{}),Object(f.jsx)("span",{children:"Search messages"})]}),Object(f.jsxs)("div",{className:"chatHeaderMenuWindowItem",onClick:function(){d(),j(Object(f.jsx)(Zn,{chatId:t}))},children:[Object(f.jsx)(Xe.j,{}),Object(f.jsx)("span",{children:"Attachments"})]}),Object(f.jsxs)("div",{className:"chatHeaderMenuWindowItem",onClick:function(){d(),j(Object(f.jsx)(ns,{chatId:t,currentWallpaper:n}))},children:[Object(f.jsx)(Xe.m,{}),Object(f.jsx)("span",{children:"Change wallpaper"})]}),Object(f.jsxs)("div",{className:"chatHeaderMenuWindowItem",children:[Object(f.jsx)(Xe.A,{}),Object(f.jsx)("span",{children:"Delete chat"})]})]})]})},cs=function(e){var t=e.data,n=Qe().currentUser,c=Tt(),a=c.toggleModal,r=c.setContent,o=Object(s.useState)({}),l=Object(u.a)(o,2),j=l[0],h=l[1],m=Object(s.useState)(""===t.chatName?[]:t.imageColors),p=Object(u.a)(m,2),O=p[0],g=p[1];function x(){return(x=Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.participants.find((function(e){return e!==n.uid})),e.next=3,Ve.collection("users").doc(s).get();case 3:c=e.sent.data(),h(c),g(c.imageColors);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){""===t.chatName&&function(){x.apply(this,arguments)}()}),[t.id]),Object(f.jsxs)("div",{className:"ChatHeader",style:O.length?{background:"linear-gradient(45deg, ".concat(O[0],", ").concat(O[1],")")}:{background:"linear-gradient(45deg, grey, lightgrey)"},children:[Object(f.jsx)(ct,{}),2===t.participants.length?Object(f.jsxs)(i.b,{className:"chatHeaderImageAndName",to:"/authors/".concat(j.uid),children:[Object(f.jsx)("div",{className:"chatHeaderImage",children:Object(f.jsx)("img",{src:j.photoURL||t.chatImage,alt:""})}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(f.jsx)("h4",{children:j.displayName||t.chatName}),Object(f.jsx)(yn,{userUID:j.uid})]})]}):Object(f.jsxs)("div",{className:"chatHeaderImageAndName",onClick:function(){a(),r(Object(f.jsx)(es,{data:t}))},children:[Object(f.jsx)("div",{className:"chatHeaderImage",children:Object(f.jsx)("img",{src:j.photoURL||t.chatImage,alt:""})}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(f.jsx)("h4",{children:j.displayName||t.chatName}),Object(f.jsx)(yn,{userUID:j.uid})]})]}),Object(f.jsx)(ss,{chatId:t.id,data:t,currentWallpaper:t.wallpaper})]})},as=n(80),rs=n(47);function is(e){return e.attachedSongs.length?"Audio":e.attachedAlbums.length?"Album":e.attachedAuthors.length?"Author":e.inResponseToMessage&&e.inResponseToMessage.length?"Forwarded message":""}function os(e){var t=Object(s.useState)(!1),n=Object(u.a)(t,2),c=n[0],a=n[1],r=new IntersectionObserver((function(e){var t=Object(u.a)(e,1)[0];return a(t.isIntersecting)}));return Object(s.useEffect)((function(){return r.observe(e.current),function(){r.disconnect()}}),[]),c}var us=function(){return Object(f.jsx)("div",{className:"SongItem SongItemLoading",children:Object(f.jsxs)("div",{className:"songItemImageAndName",children:[Object(f.jsx)("div",{className:"songItemImage"}),Object(f.jsxs)("div",{className:"songItemNameAndAuthor",children:[Object(f.jsx)("div",{className:"songItemName"}),Object(f.jsx)("div",{className:"songItemAuthor"})]})]})})},ls=function(e){var t=e.listOfSeen;return Object(f.jsx)("div",{className:"SeenByCircle",style:void 0!==t?t.length<=1?{opacity:"1",visibility:"visible"}:{}:null})},ds=function(e){var t=e.messageData,n=e.chatId,c=e.scrollToMessageRef,a=e.setScrollToMessageId,r=e.scrollToMessageId,i=e.showPhoto,o=void 0===i||i,l=e.otherMessages,h=e.inResponseToMessageArr,m=e.setInResponseToMessageArr,p=Qe().currentUser,O=tt().isMobile,g=t.message,x=t.attachedAlbums,v=t.attachedSongs,y=t.attachedAuthors,S=t.sender,w=t.inResponseToMessage,A=t.id,N=t.sentTime,C=Object(s.useState)({}),k=Object(u.a)(C,2),I=k[0],M=k[1],L=$e(N,2),P=Object(s.useState)([]),T=Object(u.a)(P,2),R=T[0],E=T[1],B=Object(s.useState)([]),D=Object(u.a)(B,2),U=D[0],W=D[1],V=Object(s.useState)([]),F=Object(u.a)(V,2),H=F[0],K=F[1],Q=Object(s.useState)([]),q=Object(u.a)(Q,2),G=q[0],Y=q[1],z=Object(s.useState)([]),X=Object(u.a)(z,2),J=X[0],Z=X[1],_=Object(s.useRef)(),$=os(_),ee=Object(s.useState)(0),te=Object(u.a)(ee,2),ne=te[0],se=te[1],ce=Object(s.useState)(0),ae=Object(u.a)(ce,2),re=ae[0],ie=ae[1],oe=Object(rs.useSwipeable)({onSwiping:function(e){e.deltaX<0&&se(e.deltaX)}});function ue(){return(ue=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t.sender).get();case 2:n=e.sent.data(),M(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,n){return e.forEach(function(){var e=Object(b.a)(d.a.mark((function e(s){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection(t).doc(s).get();case 2:c=e.sent.data(),n((function(e){return[].concat(Object(j.a)(e),[c])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function de(){h.includes(A)||m((function(e){return[].concat(Object(j.a)(e),[A])}))}function je(){var e;clearTimeout(e),ie(.2),e=setTimeout((function(){se(0),ie(0)}),100)}Object(s.useEffect)((function(){if(void 0!==t.seenBy&&p.uid!==t.sender&&$&&!t.seenBy.includes(p.uid)){var e=l;e[t.id].seenBy.push(p.uid),Ve.collection("chats").doc(n).update({messages:e})}}),[$]),Object(s.useEffect)((function(){!function(){ue.apply(this,arguments)}(),le(v,"songs",E),le(y,"users",W),le(x,"playlists",K),null!==w&&w.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y((function(e){return[].concat(Object(j.a)(e),[l[t]])})),e.next=3,Ve.collection("users").doc(l[t].sender).get();case 3:n=e.sent.data().displayName,Z((function(e){return[n].concat(Object(j.a)(e))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(s.useEffect)((function(){ne<-160&&(je(),de())}),[ne]);as.a,Gt.a,Gt.c;return Object(f.jsxs)("div",{className:"MessageItem "+(S===p.uid?"your":""),ref:A===r?c:function(e){oe.ref(e),_.current=e},style:$?o?{paddingBottom:"15px",transform:"translateX(".concat(ne,"px)"),transition:re}:{transform:"translateX(".concat(ne,"px)"),transition:re}:{opacity:"0",visibility:"hidden"},onTouchEnd:je,children:[Object(f.jsx)("div",{className:"messageItemImage",children:o?Object(f.jsx)("img",{src:I.photoURL,alt:""}):null}),Object(f.jsxs)("div",{className:"messageItemBody",style:A===r?{animation:"showResponseMessage .5s forwards"}:o?{borderRadius:"var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px"}:{},children:[Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[Object(f.jsx)("h5",{className:"messageUserName",children:I.displayName}),Object(f.jsx)("div",{style:{fontSize:".7em",opacity:".8",marginLeft:"10px"},children:L})]}),null!==w?G.map((function(e,t){return Object(f.jsxs)("div",{className:"responseItem",onClick:function(){return a(e.id)},children:[Object(f.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("h5",{style:e.sender===p.uid?{color:"var(--lightPurple)"}:{},children:J[t]}),Object(f.jsx)("div",{style:{fontSize:".7em",opacity:".8",marginLeft:"10px"},children:$e(e.sentTime,2)})]}),Object(f.jsxs)("p",{children:[e.message,Object(f.jsx)("span",{style:{marginLeft:"5px",color:"var(--reallyLightBlue)"},children:is(e)})]})]})})):null,Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:g}),R.map((function(e,t){return $?Object(f.jsx)(fn,{song:e,localIndex:t},t):Object(f.jsx)(us,{})})),H.map((function(e,t){return Object(f.jsx)(Wn,{playlist:e},t)})),U.map((function(e,t){return Object(f.jsx)(qn,{data:e},t)}))]})]}),Object(f.jsx)(ls,{listOfSeen:t.seenBy}),Object(f.jsx)("button",{className:"respondToMessageBtn",onClick:de,style:O?{opacity:-ne/80}:{},children:Object(f.jsx)(Ft.l,{})})]})},js=function(e){var t=e.message,n=e.index,c=e.messageList,a=e.chatId,r=e.inResponseToMessage,i=e.setInResponseToMessage,o=e.scrollToMessageRef,l=e.scrollToMessageId,d=e.setScrollToMessageId,b=e.setDateRefsArray,h=Object(s.useState)(!1),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)(!1),x=Object(u.a)(g,2),v=x[0],y=x[1],S=Object(s.useRef)(null);return Object(s.useEffect)((function(){(n===c.length-1||c[n+1].sender!==c[n].sender||$e(c[n+1].sentTime)!==$e(c[n].sentTime))&&O(!0),(0===n||$e(c[n].sentTime)!==$e(c[n-1].sentTime))&&y(!0)}),[]),Object(s.useEffect)((function(){null!==S.current&&b((function(e){return[].concat(Object(j.a)(e),[S])}))}),[v]),Object(f.jsxs)(f.Fragment,{children:[v?Object(f.jsx)("div",{ref:S,style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 0"},children:$e(t.sentTime)}):null,Object(f.jsx)(ds,{messageData:t,chatId:a,scrollToMessageRef:o,scrollToMessageId:l,setScrollToMessageId:d,showPhoto:p,otherMessages:c,inResponseToMessageArr:r,setInResponseToMessageArr:i},t.id)]})},bs=function(e){var t=e.chatId,n=e.messageList,c=e.inResponseToMessage,a=e.setInResponseToMessage,r=e.messagesWindowRef,i=e.setDateRefsArray,o=Object(s.useRef)(null),l=Object(s.useState)(-1),d=Object(u.a)(l,2),j=d[0],b=d[1];return Object(s.useEffect)((function(){-1!==j&&(r.current.scrollTo(0,o.current.offsetTop-65<0?0:o.current.offsetTop-65),setTimeout((function(){b(-1)}),500))}),[j]),n.length?Object(f.jsx)(f.Fragment,{children:n.map((function(e,s){return Object(f.jsx)(js,{message:e,index:s,messageList:n,chatId:t,inResponseToMessage:c,setInResponseToMessage:a,scrollToMessageRef:o,scrollToMessageId:j,setScrollToMessageId:b,setDateRefsArray:i},e.id)}))}):null},hs=function(e){var t=e.attachedItems,n=e.setAttachedItems,s=e.icon;return Object(f.jsx)("div",{className:"AttachedItemsInChatInput",children:t.map((function(e,c){return Object(f.jsxs)("div",{className:"attachedSongItem",children:[s,Object(f.jsx)("span",{children:e}),Object(f.jsx)("button",{className:"removeMessageFromResponse",onClick:function(){return function(e,t,n){t(e.filter((function(e){return e!==n})))}(t,n,e)},children:Object(f.jsx)(Xe.F,{})})]},e)}))})},fs=function(e){var t=e.chatId,n=e.chatData,c=e.messageText,a=e.setMessageText,r=e.inResponseToMessage,i=e.setInResponseToMessage,o=e.otherMessages,l=Qe().currentUser,h=Object(s.useState)(!1),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Ye(),x=g.yourSongs,v=g.yourAuthors,y=g.yourPlaylists,S=Object(s.useState)(""),w=Object(u.a)(S,2),A=w[0],N=w[1],C=Object(s.useState)(x),k=Object(u.a)(C,2),I=k[0],M=k[1],L=Object(s.useState)([]),P=Object(u.a)(L,2),T=(P[0],P[1],Object(s.useState)([])),R=Object(u.a)(T,2),E=R[0],B=R[1],D=Object(s.useState)([]),U=Object(u.a)(D,2),W=U[0],V=U[1],F=Object(s.useState)([]),H=Object(u.a)(F,2),K=H[0],Q=H[1],q=Object(s.useState)(y),G=Object(u.a)(q,2),Y=G[0],z=G[1],X=Object(s.useState)(v),J=Object(u.a)(X,2),Z=J[0],_=J[1],$=Object(s.useState)([]),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],se=Object(s.useState)([]),ce=Object(u.a)(se,2),ae=ce[0],re=ce[1],ie=Object(s.useRef)(null);function oe(){Ht(t,n,l.uid,c,E,W,K,r),a(""),B([]),Q([]),V([]),i([]),O(!1)}return Et(ie,O),Object(s.useEffect)((function(){0===A.length&&M(x)}),[A]),Object(s.useEffect)((function(){if(0===c.length)Ve.collection("chats").doc(t).update({typing:n.typing.filter((function(e){return e!==l.uid}))});else if(!n.typing.includes(l.uid)){var e=n.typing;e.push(l.uid),Ve.collection("chats").doc(t).update({typing:e})}}),[c]),Object(s.useEffect)((function(){ne([]),r.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(o[t].sender).get();case 2:n=e.sent.data().displayName,ne((function(e){return[].concat(Object(j.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[r.length]),Object(s.useEffect)((function(){re([]),E.forEach(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(t).get();case 2:n=e.sent.data().name,re((function(e){return[].concat(Object(j.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[E.length]),Object(f.jsxs)("div",{className:"chatInput",style:p?{borderRadius:"0 0 var(--standartBorderRadius) var(--standartBorderRadius)",transition:".2s"}:{},ref:ie,children:[Object(f.jsx)("div",{className:"attachWindow",style:p?{height:"400px",opacity:"1"}:{},children:p?Object(f.jsxs)("div",{style:p?{maxHeight:"100%",overflowY:"auto"}:{display:"none"},children:[Object(f.jsx)(Kt,{value:A,setValue:N,setAllFoundSongs:M,setResultPlaylists:z,setResultAuthorList:_}),Object(f.jsx)(On,{listOfSongs:I,source:"no",listOfChosenSongs:E,setListOfSongs:B}),Object(f.jsx)(Gn,{listOfAuthors:Z,listOfChosenAuthors:K,setListOfChosenAuthors:Q}),Object(f.jsx)(Vn,{listOfAlbums:Y,loading:!1,listOfChosenAlbums:W,setListOfChosenAlbums:V})]}):null}),Object(f.jsxs)("div",{className:"inResponseArea",style:r.length||ae.length||K.length||W.length?{}:{height:"0",padding:"0",opacity:"0",top:"0",visibility:"hidden"},children:[Object(f.jsx)("div",{className:"responseMessages",children:r.map((function(e,t){return Object(f.jsxs)("div",{className:"responseItem",children:[Object(f.jsx)("h5",{style:o[e].sender===l.uid?{color:"var(--lightPurple)"}:{},children:te[t]}),Object(f.jsxs)("p",{children:[cn(o[e].message,35),Object(f.jsx)("span",{style:{marginLeft:"5px",color:"var(--reallyLightBlue)"},children:is(o[e])})]}),Object(f.jsx)("button",{onClick:function(){return t=e,void i(r.filter((function(e){return e!==t})));var t},className:"removeMessageFromResponse",children:Object(f.jsx)(Xe.F,{})})]},e)}))}),Object(f.jsx)(hs,{attachedItems:E,setAttachedItems:B,icon:Object(f.jsx)(Lt.c,{})}),Object(f.jsx)(hs,{attachedItems:K,setAttachedItems:Q,icon:Object(f.jsx)(Xe.C,{})}),Object(f.jsx)(hs,{attachedItems:W,setAttachedItems:V,icon:Object(f.jsx)(Ft.a,{})})]}),Object(f.jsxs)("div",{className:"attachAndEmojis",children:[Object(f.jsx)("div",{className:"attachBtn",children:Object(f.jsx)("button",{onClick:function(){O(!p)},children:Object(f.jsx)(Je.a,{})})}),Object(f.jsx)("input",{type:"text",style:{background:"var(--lightGrey)",border:"none",outline:"none",minHeight:"100%"},value:c,onChange:function(e){a(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&oe()}})]}),Object(f.jsx)("button",{className:"sendBtn",onClick:function(){oe()},children:Object(f.jsx)(Jt.d,{})})]})},ms=function(e){var t=e.date;return Object(f.jsx)("div",{className:"DateOnTop",children:$e(t)})},ps=function(e){var t=e.typingPeople,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Qe().currentUser;return Object(s.useEffect)((function(){r([]),t.map(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("users").doc(t).get();case 2:(n=e.sent.data()).uid!==i.uid&&r((function(e){return[].concat(Object(j.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),a.length>0?Object(f.jsxs)("div",{className:"typingWrapper",children:[Object(f.jsx)(It,{imagesList:a.map((function(e){return e.photoURL})),borderColor:"var(--navItemColor)"}),Object(f.jsxs)("div",{className:"TypingAnimation",children:[Object(f.jsx)("span",{className:"typingCircle"}),Object(f.jsx)("span",{className:"typingCircle"}),Object(f.jsx)("span",{className:"typingCircle"})]})]}):null},Os=function(){var e=Object(o.h)("/chat/:chatId"),t=Qe().currentUser,n=e.params.chatId,c=Object(s.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],l=Object(s.useState)([]),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(s.useRef)(null),m=Object(s.useRef)(null),p=Object(s.useState)(!0),O=Object(u.a)(p,2),g=O[0],x=O[1],v=Object(s.useState)([]),y=Object(u.a)(v,2),S=y[0],w=y[1],A=Object(s.useState)([]),N=Object(u.a)(A,2),C=N[0],k=N[1],I=Object(s.useState)(""),M=Object(u.a)(I,2),L=M[0],P=M[1],T=Object(s.useState)([]),R=Object(u.a)(T,2),E=R[0],B=R[1],D=Object(o.g)();return Object(s.useEffect)((function(){var e=Ve.collection("chats").doc(n).onSnapshot((function(e){b(e.data()),w(e.data().messages),P(e.data().messages.length?e.data().messages[0].sentTime:(new Date).toString()),x(!1)}));return function(){e()}}),[Ve,n]),Object(s.useEffect)((function(){void 0!==j.participants&&(j.participants.includes(t.uid)||D.push("/chat"))}),[j]),Object(s.useEffect)((function(){null!==m.current&&S.length>0&&function(){var e=m.current.scrollHeight-m.current.clientHeight;m.current.scrollTo(0,e)}()}),[S]),Object(f.jsxs)("div",{className:"DialoguePage",children:[g?Object(f.jsx)(Vt,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(cs,{data:j}),Object(f.jsx)(ms,{date:L}),Object(f.jsxs)("div",{className:"chatMessagesWindow",ref:m,onScroll:function(e){E.forEach((function(t){null!==t.current&&t.current.offsetTop-70<=e.target.scrollTop&&P(t.current.innerHTML)}))},children:[Object(f.jsx)(bs,{chatId:n,messageList:S,inResponseToMessage:C,setInResponseToMessage:k,messagesWindowRef:m,setDateRefsArray:B}),Object(f.jsx)("span",{className:"scrollToBottomElement",ref:h}),Object(f.jsx)(ps,{typingPeople:j.typing})]}),Object(f.jsx)(fs,{chatId:n,chatData:j,messageText:r,setMessageText:i,inResponseToMessage:C,setInResponseToMessage:k,otherMessages:S})]}),"undefined"!==j.wallpaper?Object(f.jsx)("img",{src:j.wallpaper,className:"chatWallpaper",alt:""}):null]})},gs="/login",xs="/signup",vs="/home",ys="/library",Ss="/search",ws="/chat",As=function(e){var t=e.loading;return Object(f.jsx)("div",{className:"FullScreenLoading",style:t?{}:{opacity:"0",visibility:"hidden"},children:Object(f.jsx)("img",{src:"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg",alt:""})})},Ns=function(){return Object(f.jsxs)("div",{className:"BlurredBg",children:[Object(f.jsx)("div",{className:"circle circle1"}),Object(f.jsx)("div",{className:"circle circle2"}),Object(f.jsx)("div",{className:"circle circle3"}),Object(f.jsx)("div",{className:"circle circle4"}),Object(f.jsx)("div",{className:"circle circle5"})]})},Cs=function(e){var t=e.title;return Object(f.jsxs)("div",{className:"titleAndLogo",children:[Object(f.jsx)("div",{className:"title",children:Object(f.jsx)("h1",{children:t})}),Object(f.jsx)("div",{className:"logo",children:Object(f.jsx)("img",{src:h,alt:""})})]})},ks=(n(262),n(263),function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(0),r=Object(u.a)(a,2),i=r[0],o=r[1],l=Object(s.useState)(!0),h=Object(u.a)(l,2),m=h[0],p=h[1],O=Object(s.useState)({}),g=Object(u.a)(O,2),x=g[0],v=g[1],y=Object(s.useState)({}),S=Object(u.a)(y,2),w=S[0],A=S[1],N=Object(s.useState)({}),C=Object(u.a)(N,2),k=C[0],I=C[1];function M(e,t,n){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(d.a.mark((function e(t,n,s){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection(n).orderBy(s,"desc").get();case 2:return e.next=4,e.sent.docs[0].data();case 4:a=e.sent,t(a),c((function(e){return[].concat(Object(j.a)(e),[a.imageColors[0]])})),"playlists"===n&&p(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){M(v,"users","subscribers"),M(A,"songs","listens"),M(I,"playlists","listens")}),[]),Object(f.jsx)("div",{className:"MainBanner",style:{background:n[i],boxShadow:"0 0 50px ".concat(n[i]+"ab")},children:m?Object(f.jsx)(Vt,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"slider",children:[Object(f.jsxs)("div",{className:"sliderItem "+(0===i?"current":""),style:{transform:"translateX(-".concat(100*i,"%)")},children:[Object(f.jsx)("h3",{children:"Most popular artist on platform"}),Object(f.jsx)(qn,{data:x})]}),Object(f.jsxs)("div",{className:"sliderItem "+(1===i?"current":""),style:{transform:"translateX(-".concat(100*i,"%)")},children:[Object(f.jsx)("h3",{children:"Most popular song on platform"}),Object(f.jsx)(fn,{song:w,localIndex:0,showListens:!0})]}),Object(f.jsxs)("div",{className:"sliderItem "+(2===i?"current":""),style:{transform:"translateX(-".concat(100*i,"%)")},children:[Object(f.jsx)("h3",{children:"Most popular album on platform"}),Object(f.jsx)(Wn,{playlist:k})]})]}),Object(f.jsxs)("div",{className:"sliderBtns",children:[Object(f.jsx)("button",{onClick:function(){return o(Fe(i-1,2,0))},children:Object(f.jsx)(Ft.c,{})}),Object(f.jsx)("button",{onClick:function(){return o(Fe(i+1,2,0))},children:Object(f.jsx)(Ft.d,{})})]})]})})}),Is=function(){var e=Ye().yourAuthors,t=Object(s.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(s.useEffect)((function(){void 0!==e&&0!==e.length&&0===c.length&&function(){var t=[];e.forEach((function(e,n){e.ownSongs.forEach(function(){var e=Object(b.a)(d.a.mark((function e(n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(n).get();case 2:zn(s=e.sent.data())&&!t.includes(s.id)&&(a((function(e){return[].concat(Object(j.a)(e),[s])})),t.push(s.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}()}),[]),Object(f.jsx)("div",{children:Object(f.jsx)(On,{listOfSongs:c,source:{source:"/home",name:"New Songs",image:"",songsList:c},title:"New Songs",isNewSong:!0})})},Ms=function(){var e=Ye().yourAuthors,t=Object(s.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)([]),i=Object(u.a)(r,2),o=i[0],l=i[1],d=Qe().currentUser;return Object(s.useEffect)((function(){void 0!==e&&e.forEach((function(e){Kn(e,a)}))}),[]),Object(s.useEffect)((function(){c.forEach((function(e){var t=o.map((function(e){return e.uid}));d.addedAuthors.includes(e.uid)||t.includes(e.uid)||l((function(t){return[].concat(Object(j.a)(t),[e])}))}))}),[c]),Object(f.jsx)("div",{className:"RecommendedAuthors",children:Object(f.jsx)(Gn,{listOfAuthors:o,title:"Recommended Authors"})})},Ls=function(e){var t=e.message,n=e.image,s=e.button;return Object(f.jsx)("div",{className:"importantMessage",children:Object(f.jsxs)("div",{children:[n?Object(f.jsx)("img",{src:n,alt:""}):null,Object(f.jsx)("h3",{children:t}),s||null]})})},Ps=function(){var e=Ye().yourAuthors,t=Qe().currentUser,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1];return Object(s.useEffect)((function(){!function(){var n=[];e.forEach((function(e,s){e.ownSongs.forEach(function(){var e=Object(b.a)(d.a.mark((function e(s){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(s).get();case 2:c=e.sent.data(),t.addedSongs.includes(s)||n.includes(c.id)||(r((function(e){return[].concat(Object(j.a)(e),[c])})),n.push(c.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}()}),[]),Object(f.jsx)("div",{className:"RecommendedSongs",children:Object(f.jsx)(On,{listOfSongs:a,source:{source:"/home",name:"Recommended Songs",image:"",songsList:a},title:"Recommended Songs",displayIfEmpty:Object(f.jsx)(Ls,{message:"No songs recommended. Add favorite authors so we could know what to recommend",image:"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png"})})})},Ts=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(!0),r=Object(u.a)(a,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){o(!0),Ve.collection("songs").orderBy("listens","desc").limit(15).get().then((function(e){e.docs.forEach((function(e){c((function(t){return[].concat(Object(j.a)(t),[e.data()])}))})),o(!1)}))}),[]),i?Object(f.jsx)(Vt,{}):Object(f.jsx)(On,{listOfSongs:n,source:{source:"/home",name:"Top 15 Songs",image:"https://media.istockphoto.com/vectors/fire-icon-illustration-for-design-stock-vector-vector-id931601050?k=6&m=931601050&s=170667a&w=0&h=fhRQfwwsW6aXK9OSDM-yj842SFFl2Q9ll6ch-xCK5es=",songsList:n},title:"Top 15 Songs",showListens:!0,showCount:!0})},Rs=(n(264),n(265),n.p+"static/media/wave2.f62cb572.svg"),Es=function(e){var t=e.playlist,n=(new Date(t.creationDate),Ye()),c=n.setCurrentSongQueue,a=n.setCurrentSongPlaylistSource,r=n.playSong,o=n.setCurrentSongInQueue,l=n.setCurrentSong,h=n.currentSongPlaylistSource,m=n.songRef,p=n.setPlay,O=n.play,g=Object(s.useState)([]),x=Object(u.a)(g,2),v=x[0],y=x[1];return Object(s.useEffect)((function(){v.length&&(c(v),o(0),l(v[0].id),m.current.play(),p(!0),a({source:"/albums/".concat(t.id),name:t.name,image:t.image,songsList:v}))}),[v.length]),Object(f.jsx)(i.b,{to:"/albums/".concat(t.id),className:"playlistWrapper",children:Object(f.jsxs)("div",{className:"library playlistItem",children:[t.image?Object(f.jsx)("div",{className:"playlistImageWrapper",children:Object(f.jsx)("img",{src:t.image,alt:""})}):Object(f.jsxs)("h1",{children:[t.name.split(" ")[0][0],t.name.split(" ")[1][0]]}),Object(f.jsx)("h2",{style:{background:t.imageColors[2]},children:cn(t.name,10)}),Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),h.name!==t.name?0!==t.length&&t.songs.map(function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.collection("songs").doc(t).get();case 2:n=e.sent.data(),y((function(e){return[].concat(Object(j.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):r()},children:h.name===t.name&&O?Object(f.jsx)(Xt.b,{}):Object(f.jsx)(Xt.c,{})})]})})},Bs=function(){var e=Ye(),t=e.yourSongs,n=e.yourPlaylists,s=Qe().currentUser;return Object(f.jsxs)("div",{className:"SongsPage",children:[Object(f.jsxs)("div",{className:"playLists",children:[Object(f.jsx)("div",{className:"playlistContent",children:n.map((function(e,t){return Object(f.jsx)(Es,{playlist:e},t)}))}),Object(f.jsx)("div",{className:"playlistsBackground",children:Object(f.jsx)("img",{src:Rs,alt:"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh"})})]}),Object(f.jsx)("div",{className:"yourSongsList",children:Object(f.jsx)(On,{listOfSongs:t,source:{source:"/library",name:"Your Library",image:s.photoURL,songsList:t},showSearch:!0,displayIfEmpty:Object(f.jsx)(i.b,{to:"/search",children:Object(f.jsx)("button",{className:"standartButton",children:"Search for songs"})})})})]})},Ds=function(){return Object(f.jsx)("div",{className:"CreatePlaylistPage",children:Object(f.jsx)(In,{})})},Us=function(){var e=Ye().yourPlaylists,t=Tt(),n=t.toggleModal,s=t.setContent;return Object(f.jsxs)("div",{className:"PlaylistsPage",children:[Object(f.jsxs)("button",{className:"createPlaylistBtn",onClick:function(){n(),s(Object(f.jsx)(Ds,{}))},children:[Object(f.jsx)(Ft.g,{}),"Create Playlist"]}),Object(f.jsx)("div",{className:"playlistsContainer",children:e&&e.map((function(e,t){return Object(f.jsx)(Wn,{playlist:e},e.id)}))})]})},Ws=function(){var e=Ye().yourAuthors;return Object(f.jsx)("div",{className:"AuthorsPage",children:Object(f.jsx)("div",{className:"authorsContainer",children:e.map((function(e){return Object(f.jsx)(qn,{data:e},e.uid)}))})})};var Vs=function(e){var t=e.userUID,n=Object(s.useState)(!1),c=Object(u.a)(n,2),a=c[0],r=c[1];return Object(s.useEffect)((function(){var e=Ve.collection("users").doc(t).onSnapshot((function(e){if(void 0!==t){var n=(new Date).getTime()-3e5,s=e.data().online>n;r(s)}}));return function(){e()}}),[Ve,t]),a?Object(f.jsx)("div",{className:"onlineCircle"}):null},Fs=function(e){var t=e.amountOfUnseen;return 0!==t?Object(f.jsx)("div",{className:"AmountOfUnseenMessages",children:t}):null},Hs=n(120),Ks=function(e){var t=e.messages,n=Qe().currentUser,c=Object(s.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(!1),l=Object(u.a)(o,2),j=l[0],h=l[1],m=Object(s.useState)(""),p=Object(u.a)(m,2),O=p[0],g=p[1],x=[null,Object(f.jsx)(Xe.t,{}),Object(f.jsx)(Ft.a,{}),Object(f.jsx)(Xe.C,{})],v=Object(s.useState)(0),y=Object(u.a)(v,2),S=y[0],w=y[1];function A(){return(A=Object(b.a)(d.a.mark((function e(){var n,s,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=22;break}if(n=t[t.length-1],g((function(e){return e+n.message})),h(0!==n.message.length),!n.attachedSongs.length){e.next=10;break}return e.next=7,Ve.collection("songs").doc(n.attachedSongs[0]).get();case 7:s=e.sent.data().name,w(1),i((function(e){return e+s}));case 10:if(!n.attachedAlbums.length){e.next=16;break}return e.next=13,Ve.collection("playlists").doc(n.attachedAlbums[0]).get();case 13:c=e.sent.data().name,w(2),i((function(e){return e+c}));case 16:if(!n.attachedAuthors.length){e.next=22;break}return e.next=19,Ve.collection("users").doc(n.attachedAuthors[0]).get();case 19:a=e.sent.data().displayName,w(3),i((function(e){return e+a}));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){A.apply(this,arguments)}()}),[]),Object(f.jsxs)("div",{className:"messageShowOutside",children:[t[t.length-1].sender===n.uid?Object(f.jsx)("span",{style:{marginRight:"5px"},children:"You:"}):null,cn(O,30),j&&r.length?Object(f.jsx)(Hs.a,{}):null,x[S],r,Object(f.jsx)(ls,{listOfSeen:t[t.length-1].seenBy})]})},Qs=function(e){var t=e.chatData,n=Qe().currentUser,c=t.chatName,a=t.chatImage,r=t.participants,o=t.messages,l=Object(s.useState)({}),j=Object(u.a)(l,2),h=j[0],m=j[1],p=Object(s.useState)(0),O=Object(u.a)(p,2),g=O[0],x=O[1];function v(){return(v=Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.find((function(e){return e!==n.uid})),e.next=3,Ve.collection("users").doc(t).get();case 3:s=e.sent.data(),m(s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){x(function(e,t){return e.reduce((function(e,n){return n.sender===t.uid||void 0===n.seenBy||n.seenBy.includes(t.uid)?e:(console.log("i'm here"),++e)}),0)}(o,n))}),[]),Object(s.useEffect)((function(){""===c&&function(){v.apply(this,arguments)}()}),[]),t?Object(f.jsx)(i.b,{to:"/chat/".concat(t.id),children:Object(f.jsxs)("div",{className:"ChatItem "+(g>0?"unseen":""),children:[Object(f.jsx)("div",{className:"chatItemImage",children:Object(f.jsx)("img",{src:a||h.photoURL,alt:""})}),Object(f.jsx)(Vs,{userUID:h.uid}),Object(f.jsxs)("div",{style:{width:"100%"},children:[Object(f.jsxs)("h4",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(f.jsx)("span",{children:c||h.displayName}),Object(f.jsxs)("div",{children:[o.length?Object(f.jsx)("span",{style:{opacity:".6",fontWeight:"500",fontSize:".8em"},children:$e(o[o.length-1].sentTime,t&&Date.now()-new Date(o[o.length-1].sentTime).getTime()>86e6?0:2)}):null,Object(f.jsx)(Fs,{amountOfUnseen:g})]})]}),o.length?Object(f.jsx)("p",{style:o[o.length-1].sender!==n.uid?{color:"#fff"}:{},children:Object(f.jsx)(Ks,{messages:o})}):null]})]})}):null},qs=(n(266),function(e){var t=Object.assign({},e),n=Tt(),c=n.openModal,a=n.setOpenModal,r=n.content,i=Object(s.useRef)(null);return Et(i,a),Object(f.jsx)("div",{className:"modal_darkBg",style:c?{}:{opacity:0,visibility:"hidden",transform:"scale(.95)"},children:Object(f.jsx)("div",Object(p.a)(Object(p.a)({className:"ModalWindow"},t),{},{ref:i,children:r}))})}),Gs=function(){var e=Qe().currentUser,t=Ye().yourFriends,n=Object(s.useState)(""),c=Object(u.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(t),l=Object(u.a)(i,2),d=l[0],b=l[1],h=Object(s.useState)([]),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)(""),x=Object(u.a)(g,2),y=x[0],S=x[1],w=Object(s.useState)(""),A=Object(u.a)(w,2),N=A[0],C=A[1],k=Object(s.useState)(""),I=Object(u.a)(k,2),M=I[0],L=I[1],P=Bt(),T=Object(o.g)(),R=Object(s.useState)(!1),E=Object(u.a)(R,2),B=E[0],D=E[1],U=Object(s.useState)(0),W=Object(u.a)(U,2),V=W[0],F=W[1];return Object(s.useEffect)((function(){p.length>=1&&Ut(p,e,D,F)}),[p]),Object(f.jsxs)("div",{className:"CreateChat",children:[Object(f.jsx)(Kt,{value:a,setValue:r,setResultAuthorList:b,focus:!0,inputText:"Search for friends",defaultSearchMode:"authors"}),d.map((function(e){return Object(f.jsx)(v,{data:e,chosenArray:p,setChosenArray:O})})),p.length>1&&B?Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",style:{marginBottom:"10px"},className:"standartInput",placeholder:"Enter chat name",value:N,onChange:function(e){return C(e.target.value)}}),Object(f.jsx)(Mn,{setErrorMessage:L,setImageLocalPath:function(){return null},downloadedPhoto:y,setDownloadedPhoto:S,place:"chatCovers/",btnText:"Download chat image"})]}):null,Object(f.jsx)(Ln,{errorMessage:M}),p.length>=1?Object(f.jsx)("button",{className:"addSongBtn",onClick:function(){B?(Dt([e.uid].concat(Object(j.a)(p)),P,N,y,[e.uid]),T.push("/chat/".concat(P))):T.push("/chat/".concat(V))},children:B?"Create Chat":"Go to chat"}):null]})},Ys=function(e){var t=e.boolValue,n=e.setBoolValue;return Object(f.jsx)("div",{className:"SwitchToggle",onClick:function(){return n(!t)},children:Object(f.jsx)("div",{className:"switchInnerCircle",style:t?{transform:"translateX(100%)",background:"var(--green)"}:{}})})},zs=[{path:gs,Component:function(){var e=Qe().login,t=Object(s.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(""),o=Object(u.a)(r,2),l=o[0],j=o[1],h=Object(s.useState)(""),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)(!1),x=Object(u.a)(g,2),v=x[0],y=x[1],S=0!==c.length&&0!==l.length;function w(){return(w=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),S){t.next=3;break}return t.abrupt("return",O("One of your fields is totaly empty"));case 3:return t.next=5,e(c,l,O,y);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"In-Up-Container",children:[Object(f.jsxs)("div",{className:"CentralPlate",children:[Object(f.jsx)(As,{loading:v}),Object(f.jsx)(Cs,{title:"Log In"}),Object(f.jsx)(Ln,{errorMessage:p}),Object(f.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(f.jsx)("input",{type:"email",placeholder:"Enter your Email",className:"emailInput",onChange:function(e){return a(e.target.value)}}),Object(f.jsx)("input",{type:"password",name:"",id:"",placeholder:"Enter your password",onChange:function(e){return j(e.target.value)}}),Object(f.jsxs)("div",{className:"inAndUpBtns",children:[Object(f.jsx)("button",{className:"upBtn",disabled:v,children:"Log In"}),Object(f.jsx)(i.b,{to:xs,children:Object(f.jsx)("button",{className:"inBtn",children:"Create new account"})})]})]})]}),Object(f.jsx)(Ns,{})]})}},{path:xs,Component:function(){var e=Object(s.useState)(1),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),r=Object(u.a)(a,2),o=r[0],l=r[1],j=Object(s.useState)(""),h=Object(u.a)(j,2),m=h[0],p=h[1],O=Object(s.useState)(""),g=Object(u.a)(O,2),x=g[0],v=g[1],y=Object(s.useState)(""),S=Object(u.a)(y,2),w=S[0],A=S[1],N=Object(s.useState)(!1),C=Object(u.a)(N,2),k=C[0],I=C[1],M=Qe().signup,L=Object(s.useState)(""),P=Object(u.a)(L,2),T=P[0],R=P[1],E=0!==o.length&&0!==m.length&&0!==x.length,B=Object(s.useState)(""),D=Object(u.a)(B,2),U=D[0],W=D[1],V=Object(s.useState)([]),F=Object(u.a)(V,2),H=F[0],K=F[1];function Q(){return(Q=Object(b.a)(d.a.mark((function e(t){var n,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],W(URL.createObjectURL(n)),s=We.ref(),c=s.child("usersImages/".concat(n.name)),e.next=6,c.put(n);case 6:return e.t0=R,e.next=9,c.getDownloadURL();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E){e.next=3;break}return e.abrupt("return",A("One of your fields is totaly empty"));case 3:return e.next=5,M(o,x,m,n,T,H,A,I);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"In-Up-Container",children:[Object(f.jsx)(sn.a,{src:U,getColors:function(e){return K(e)}}),Object(f.jsxs)("div",{className:"CentralPlate",children:[Object(f.jsx)(As,{loading:k}),Object(f.jsx)(Cs,{title:"Sign Up"}),w&&Object(f.jsx)("div",{className:"Alert",children:w}),Object(f.jsxs)("form",{onSubmit:function(e){return q.apply(this,arguments)},children:[Object(f.jsx)("input",{type:"email",placeholder:"Enter your Email",className:"emailInput",onChange:function(e){return l(e.target.value)}}),Object(f.jsx)("input",{type:"text",placeholder:"Enter your name",onChange:function(e){return v(e.target.value)}}),Object(f.jsx)("input",{type:"password",name:"",id:"",placeholder:"Create a password",onChange:function(e){return p(e.target.value)}}),Object(f.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center",margin:"5px 0 15px 0"},children:[Object(f.jsx)(Yt,{label:"User",onClick:function(){return c(0)},currentActive:n,id:0}),Object(f.jsx)(Yt,{label:"Author",onClick:function(){return c(1)},currentActive:n,id:1})]}),Object(f.jsxs)("label",{className:"downloadFile",children:[Object(f.jsxs)("div",{className:"downloadPhoto",children:[""===T?Object(f.jsxs)("span",{className:"downloadBtnText",children:[Object(f.jsx)(Gt.d,{}),"Download photo"]}):Object(f.jsx)("span",{className:"downloadBtnText",children:"Done"}),Object(f.jsx)("span",{className:"photoLoadLine",style:""!==T?{width:"100%"}:{}})]}),Object(f.jsx)("input",{type:"file",name:"",id:"",onChange:function(e){return Q.apply(this,arguments)}})]}),Object(f.jsxs)("div",{className:"inAndUpBtns",children:[Object(f.jsx)("button",{className:"upBtn",type:"submit",disabled:k,children:"Sign Up"}),Object(f.jsx)(i.b,{to:gs,children:Object(f.jsx)("button",{className:"inBtn",children:"Already have the account"})})]})]})]}),Object(f.jsx)(Ns,{})]})}}],Xs=[{path:vs,Component:function(){return Object(f.jsxs)("div",{style:{animation:"zoomIn .2s forwards"},className:"HomePage",children:[Object(f.jsx)(ks,{}),Object(f.jsx)(Is,{}),Object(f.jsx)(Ps,{}),Object(f.jsx)(Ms,{}),Object(f.jsx)(Ts,{})]})}},{path:ys,Component:function(){var e=Object(s.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1],a=[Object(f.jsx)(Bs,{}),Object(f.jsx)(Us,{}),Object(f.jsx)(Ws,{})];return Object(f.jsxs)("div",{className:"LibraryPage",style:{animation:"zoomIn .2s forwards"},children:[Object(f.jsx)(Tn,{pages:["Songs","Playlists","Authors"],currentPage:n,setCurrentPage:c}),a[n]]})}},{path:Ss,Component:function(){var e=Object(s.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),r=Object(u.a)(a,2),i=r[0],o=r[1],l=Object(s.useState)([]),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(s.useState)([]),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)(""),x=Object(u.a)(g,2),v=x[0],y=x[1];return Object(s.useEffect)((function(){o([]),b([]),O([])}),[n]),Object(s.useEffect)((function(){0!==i.length?y(i[0].imageColors[0]+"a6"):0!==j.length?y(j[0].imageColors[0]+"a6"):0!==p.length?y(p[0].imageColors[0]+"a6"):y("")}),[i,j,p]),Object(f.jsxs)("div",{className:"SearchPage",style:{animation:"zoomIn .2s forwards"},children:[Object(f.jsx)(Kt,{value:n,setValue:c,allFoundSongs:i,setAllFoundSongs:o,setResultPlaylists:O,setResultAuthorList:b,focus:!0}),Object(f.jsx)(On,{listOfSongs:i,source:{source:"/search",name:"Search",image:"https://lh3.googleusercontent.com/proxy/PJSN5iZPJhIuQKV-efbS0KD_HoL9nu4cyDmwOfWatZdeOyLBsEtosSWHTw4aK9ZKhrTEW2LGZCGxmH9vYFYx_PT16PIrETeNqijSxA",songsList:i},title:"Songs",showListens:!0,displayIfEmpty:""}),Object(f.jsx)(Gn,{listOfAuthors:j,title:"Authors"}),Object(f.jsx)(Vn,{listOfAlbums:p,title:"Albums and Playlists",loading:!1}),Object(f.jsx)("div",{className:"colorfullShadow",style:{background:v}})]})}},{path:ws,Component:function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Tt(),r=a.toggleModal,i=a.setContent,o=Qe().currentUser,l=Object(s.useState)(!0),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(s.useState)(!1),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)(""),x=Object(u.a)(g,2);x[0],x[1];return _n(b,"chats",o.chats,c,(function(e,t){if(t.messages.length&&e.messages.length)return new Date(t.messages[t.messages.length-1].sentTime).getTime()-new Date(e.messages[e.messages.length-1].sentTime).getTime()})),Object(f.jsxs)("div",{style:{animation:"zoomIn .2s forwards",minHeight:"100%"},children:[Object(f.jsxs)("div",{style:{marginBottom:"10px",display:"flex",alignItems:"start",width:"100%"},children:[Object(f.jsxs)("button",{className:"standartButton",onClick:function(){r(),i(Object(f.jsx)(Gs,{}))},children:[Object(f.jsx)(Xe.v,{}),"Create chat"]}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("span",{style:{margin:"0px 10px"},children:"No sound"}),Object(f.jsx)(Ys,{boolValue:p,setBoolValue:O})]})]}),j?Object(f.jsx)(Vt,{}):Object(f.jsx)("div",{className:"chatsWrapper",children:n.map((function(e,t){return Object(f.jsx)(Qs,{chatData:e},t)}))})]})}}],Js=function(){return Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/authors/:authorId",component:Jn,exact:!0}),Object(f.jsx)(o.b,{path:"/albums/:albumId",component:kn,exact:!0}),Object(f.jsx)(o.b,{path:"/chat/:chatId",component:Os,exact:!0}),Xs.map((function(e,t){var n=e.path,s=e.Component;return Object(f.jsx)(o.b,{path:n,component:s,exact:!0},t)})),Object(f.jsx)(o.a,{to:vs})]})},Zs=n(32),_s=n(48);function $s(e){return e%10===e?"0"+e:e}function ec(e){return $s(Math.floor(e/60))+":"+$s(Math.floor(e%60))}var tc=function(e){var t=e.inputRef,n=e.textLimit,s=void 0===n?18:n,c=e.linkToAuthors,a=void 0===c||c,r=Ye(),i=r.findLen,o=r.currentTime,u=r.changeCurrentTime,l=r.songDuration,d=r.setRepeatMode,j=r.repeatMode,b=r.play,h=r.prevSong,m=r.playSong,p=r.nextSong,O=r.setShuffleMode,g=r.shuffleMode,x=r.displayAuthors,v=r.name,y=r.authors,S=r.cover;return Object(f.jsxs)("div",{className:"player",children:[Object(f.jsxs)("div",{className:"playerUpperSide",children:[Object(f.jsx)("div",{className:"songCover",children:Object(f.jsx)("img",{src:S,alt:""})}),Object(f.jsxs)("div",{className:"nameAndAuthors",children:[Object(f.jsx)("h2",{title:v.length>s?v:null,style:{overflow:"hidden"},children:Object(f.jsx)("div",{style:v.length>s?{animation:"outSideText 17s infinite",whiteSpace:"nowrap"}:{},children:v})}),Object(f.jsx)("h3",{title:y.map((function(e){return" "+e.displayName})),style:{overflow:"hidden"},children:a?Object(f.jsx)("div",{style:i()>s?{animation:"outSideText 17s infinite",whiteSpace:"nowrap"}:{},children:x()}):Object(f.jsx)("div",{children:an(y," & ",33)})})]})]}),Object(f.jsxs)("div",{className:"controlPanel",children:[Object(f.jsx)("input",{type:"range",min:"0",ref:t,step:"1",value:o,onChange:function(e){u(e)}}),Object(f.jsxs)("div",{className:"startAndEndTime",children:[Object(f.jsx)("span",{children:ec(o)}),Object(f.jsx)("span",{children:ec(l)})]}),Object(f.jsxs)("div",{className:"btns",children:[Object(f.jsx)("button",{className:"shuffleBtn",onClick:function(){return O(Fe(g+1,1))},style:g?{background:"var(--transparentWhite)"}:{},children:Object(f.jsx)(_s.b,{style:g?{color:"var(--themeColor)"}:{}})}),Object(f.jsx)("button",{onClick:h,children:Object(f.jsx)(Zs.a,{})}),Object(f.jsx)("button",{onClick:m,children:b?Object(f.jsx)(Zs.d,{}):Object(f.jsx)(Zs.e,{})}),Object(f.jsx)("button",{onClick:p,children:Object(f.jsx)(Zs.c,{})}),Object(f.jsxs)("button",{className:"repeatBtn",onClick:function(){return d(Fe(j+1,2))},style:j?{background:"var(--transparentWhite)"}:{},children:[Object(f.jsx)(_s.a,{style:j?{color:"var(--themeColor)"}:{}}),Object(f.jsx)("span",{style:2===j?{opacity:1}:{}})]}),Object(f.jsx)(zt,{play:b})]})]})]})},nc=(n(267),[{id:0,icon:Object(f.jsx)(Xe.l,{}),title:"Home",link:vs},{id:1,icon:Object(f.jsx)(Ft.j,{}),title:"Library",link:ys},{id:2,icon:Object(f.jsx)(Ft.k,{}),title:"Search",link:Ss},{id:3,icon:Object(f.jsx)(Xe.p,{}),title:"Chat",link:ws}]),sc=function(e){var t=e.element,n=e.currentPage,s=e.setCurrentPage;return Object(f.jsx)(i.b,{to:t.link,className:"MobileControlBarItem",onClick:function(){return s(t.id)},style:t.id===n?{color:"var(--blue)"}:{},children:t.icon})},cc=function(){var e=Qe().currentUser,t={icon:Object(f.jsx)(Ft.n,{}),link:"/authors/".concat(e.uid)},n=Object(s.useState)((function(){var e=nc.find((function(e,t){return console.log(window.location.hash),!!window.location.hash.includes(Un(e.title))}));return void 0===e?0:e.id})),c=Object(u.a)(n,2),a=c[0],r=c[1];return Object(f.jsxs)("div",{className:"BottomControlBar",children:[nc.map((function(e,t){return Object(f.jsx)(sc,{element:e,currentPage:a,setCurrentPage:r},t)})),Object(f.jsx)(sc,{element:t,currentPage:a,setCurrentPage:r})]})},ac=function(){var e=Ye().setOpenFullScreenPlayer;return Object(f.jsxs)("div",{className:"FullBottomSide",children:[Object(f.jsx)("span",{onClick:function(){return e(!0)},children:Object(f.jsx)(tc,{textLimit:25,linkToAuthors:!1})}),Object(f.jsx)(cc,{})]})},rc=function(e){var t=e.currentTime,n=e.timeSpan,s=e.id;return Object(f.jsx)("div",{className:"Loading",id:s,children:Object(f.jsx)("div",{className:"outer",style:{pointerEvents:"none"},children:Object(f.jsx)("div",{className:"inner",style:t/n<1?{width:t/n*100+"%"}:{width:"0%",opacity:"0"}})})})},ic=function(e){var t=e.el,n=e.index,c=e.lyricsModeratorMode,a=e.karaokeModeratorTimes,r=e.setKaraokeModeratorTimes,i=e.setInputKaraokeTime,o=e.inputKaraokeTime,u=Ye(),l=u.currentSongData,d=u.currentParagraph,j=(u.displayAuthors,u.changeCurrentTime),b=u.play,h=u.currentTime,m=u.currentParagraphRef,p=u.lyrics,O=Object(s.useRef)(),g=os(d===n?m:O),x=d===n?{}:window.innerWidth>1e3?Math.abs(d-n)<2?{transform:"scale(.8) translateX(-58px)"}:{transform:"scale(.75) translateX(-78px)"}:Math.abs(d-n)<2?{transform:"scale(.8) translateX(-11.5%)"}:{transform:"scale(.75) translateX(-15.6%)"};function v(e,t){var n=a;if("down"===t)return n.splice(e+1,0,void 0),r(n),l.lyrics.splice(e+1,0,{startTime:"undefined",text:"@loading"});n.splice(e,0,void 0),r(n),l.lyrics.splice(e,0,{startTime:"undefined",text:"@loading"})}return Object(f.jsxs)("div",{className:"lyricsBlock",id:n,onClick:function(e){return j(e,t.startTime)},style:b&&d!==n&&g?Math.abs(d-n)<2?{opacity:.5,filter:"blur(1px)"}:{opacity:.2,filter:"blur(2px)"}:{},ref:d===n?m:O,children:[1===c?Object(f.jsxs)("div",{className:"lyricsBlockInput",children:[Object(f.jsxs)("span",{onClick:function(e){return e.stopPropagation()},children:[void 0!==a[n]&&0!==a[n].length?Object(f.jsx)(Ft.b,{style:{background:"var(--themeColor3)",color:"var(--themeColor)"}}):Object(f.jsx)(Xe.G,{})," "]}),Object(f.jsx)("input",{type:"number",value:a[n]||o,onChange:function(e){return function(e,t){var n=a,s=e.target.value;n[t]=s,i(e.target.value),r(n)}(e,n)},onClick:function(e){return e.stopPropagation()}}),Object(f.jsxs)("div",{className:"addLyricsElementBtns",onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)("button",{onClick:function(){v(n,"up")},children:Object(f.jsx)(Ft.m,{})}),Object(f.jsx)("button",{onClick:function(){v(n,"down")},children:Object(f.jsx)(Ft.f,{})})]})]}):null,"@loading"===t.text?Object(f.jsx)(rc,{currentTime:h-p[n].startTime,timeSpan:p[n+1].startTime-p[n].startTime,id:n}):"@end"===t.text?Object(f.jsx)(f.Fragment,{}):Object(f.jsx)("p",{id:n,style:x,children:t.text},n)]},n)},oc=[{id:0,icon:Object(f.jsx)(Ft.l,{}),title:"Share",component:function(){var e=Ye().currentSongData,t=[Object(f.jsx)(Je.c,{}),Object(f.jsx)(Zs.b,{}),Object(f.jsx)(Zs.f,{}),Object(f.jsx)(Zs.g,{}),Object(f.jsx)(Gt.b,{})];return Object(f.jsxs)("div",{className:"Share",children:[Object(f.jsxs)("button",{className:"shareCopyLink",children:[Object(f.jsx)(Xe.g,{}),"Copy link"]}),Object(f.jsx)("div",{className:"shareOnSocial",children:t.map((function(e,t){return Object(f.jsx)("div",{className:"shareSocialIcon",children:e},t)}))}),Object(f.jsx)("div",{className:"sharePeopleShort",children:Object(f.jsx)(Qt,{item:e,whatToShare:"song"})})]})}},{id:1,icon:Object(f.jsx)(Ft.e,{}),title:"More",component:function(){Qe().currentUser;var e=Ye(),t=e.currentSongData,n=e.setRightSideCurrentPage;return Object(f.jsxs)("div",{className:"Options",children:[Object(f.jsx)("div",{className:"OptionItem",children:Object(f.jsx)(ln,{song:t})}),Object(f.jsxs)("div",{className:"OptionItem",onClick:function(){return n(4)},children:[Object(f.jsx)(Ft.n,{}),"Go to author"]}),Object(f.jsxs)("div",{className:"OptionItem",onClick:function(){return n(5)},children:[Object(f.jsx)(Jt.c,{}),"Add to playlist"]}),Object(f.jsxs)("div",{className:"OptionItem",onClick:function(){return n(6)},children:[Object(f.jsx)(Xe.n,{}),"Info"]})]})}},{id:2,icon:Object(f.jsx)(_s.c,{}),title:"Lyrics",component:function(){var e=Ye(),t=e.setIsThereKaraoke,n=e.currentSongData,c=e.setCurrentSongData,a=e.isThereKaraoke,r=e.currentParagraph,i=e.displayAuthors,o=(e.changeCurrentTime,e.play,e.currentTime,e.currentParagraphRef),l=(e.currentSong,e.lyrics),d=e.rightSideCurrentPage,j=e.openFullScreenPlayer,b=Qe().currentUser,h=Object(s.useState)(0),m=Object(u.a)(h,2),p=m[0],O=m[1],g=Object(s.useState)([]),x=Object(u.a)(g,2),v=x[0],y=x[1],S=Object(s.useState)(0),w=Object(u.a)(S,2),A=w[0],N=w[1],C=Object(s.useState)(!1),k=Object(u.a)(C,2),I=k[0],M=k[1];function L(e,t){var n=v,s=e.target.value;n[t]=s,O(e.target.value),y(n)}function P(e,t){var s=v;if("down"===t)return s.splice(e+1,0,void 0),y(s),n.lyrics.splice(e+1,0,{startTime:"undefined",text:"@loading"});s.splice(e,0,void 0),y(s),n.lyrics.splice(e,0,{startTime:"undefined",text:"@loading"})}return Object(s.useEffect)((function(){a&&2===d&&j&&o.current.scrollIntoView()}),[r]),Object(s.useEffect)((function(){l[0]&&"undefined"!==l[0].startTime&&(l.forEach((function(e){v.push(e.startTime)})),M(!0))}),[]),Object(s.useEffect)((function(){var e=n;void 0!==e&&0!==p&&(e.lyrics.forEach((function(e,t){e.startTime=v[t]||"undefined"})),c(e),t(!0)),n.lyrics.some((function(e){return"undefined"===e.startTime}))?M(!1):M(!0)}),[p]),Object(f.jsxs)("div",{className:"Lyrics",children:[b.isAdmin?Object(f.jsx)(Tn,{pages:["Listen mode","Edit Mode"],currentPage:A,setCurrentPage:N}):null,a?l.map((function(e,t){return Object(f.jsx)(ic,{el:e,index:t,lyricsModeratorMode:A,karaokeModeratorTimes:v,setKaraokeModeratorTimes:y,setInputKaraokeTime:O,inputKaraokeTime:L})})):l.map((function(e,t){return Object(f.jsxs)("div",{className:"lyricsBlock",children:[1===A?Object(f.jsxs)("div",{className:"lyricsBlockInput",children:[void 0!==v[t]&&0!==v[t].length?Object(f.jsx)(Ft.b,{style:{background:"var(--themeColor3)",color:"var(--themeColor)"}}):Object(f.jsx)(Xe.G,{}),Object(f.jsx)("input",{type:"number",value:v[t]||p,onChange:function(e){return L(e,t)},onClick:function(e){return e.stopPropagation()}}),Object(f.jsxs)("div",{className:"addLyricsElementBtns",children:[Object(f.jsx)("button",{onClick:function(){return P(t,"up")},children:Object(f.jsx)(Ft.m,{})}),Object(f.jsx)("button",{onClick:function(){return P(t,"down")},children:Object(f.jsx)(Ft.f,{})})]})]}):null,Object(f.jsx)("p",{children:e.text})]},t)})),Object(f.jsxs)("h6",{className:"lyricsAuthors "+(r===l.length-1?"active":""),children:["Authors:  ",i()]}),1===A?Object(f.jsx)("button",{onClick:I?function(){Ve.collection("songs").doc(n.id).update({lyrics:n.lyrics})}:null,className:"updateLyricsBtn",style:I?{}:{opacity:.3},children:"Update Lyrics"}):null]})}},{id:3,icon:Object(f.jsx)($n.a,{}),title:"Queue",component:function(){var e=Ye(),t=e.currentSongQueue,n=e.currentSongPlaylistSource,s=e.setOpenFullScreenPlayer;return Object(f.jsxs)("div",{className:"Queue",children:[Object(f.jsx)("div",{className:"queueNowIsPlaying",children:Object(f.jsxs)("h5",{style:{marginTop:2},children:["Now is playing:",Object(f.jsxs)(i.b,{onClick:function(){return s(!1)},to:n.source,className:"queueAlbumName",children:[Object(f.jsx)("div",{className:"queueImage",children:Object(f.jsx)("img",{src:n.image,alt:""})}),Object(f.jsx)("span",{children:cn(n.name,25)})]})]})}),t.map((function(e,t){return Object(f.jsx)(fn,{song:e,localIndex:t},t)}))]})}},{id:4,icon:null,title:"Go To Authors",component:function(){var e=Ye().displayAuthorsFull;return Object(f.jsx)("div",{className:"rightSideAuthorsList",children:Object(f.jsx)("div",{className:"rightSideAuthorsListCentralBlock",children:e()})})}},{id:5,icon:null,title:"Add to playlist",component:hn},{id:6,icon:null,title:"Info",component:bn}];function uc(){var e=Ye(),t=e.imgColors,n=e.inputRef,a=e.rightSideCurrentPage,r=e.setRightSideCurrentPage,i=e.openFullScreenPlayer,o=e.setOpenFullScreenPlayer,l=e.lyrics,d=e.openMenu,j=e.setOpenMenu,b=tt().isMobile,h=Object(s.useRef)(null),m=Object(s.useState)(.05),O=Object(u.a)(m,2),g=O[0],x=O[1],v=Object(s.useState)(0),y=Object(u.a)(v,2),S=y[0],w=y[1],A=Object(s.useState)(0),N=Object(u.a)(A,2),C=N[0],k=N[1],I=Object(s.useState)(0),M=Object(u.a)(I,2),L=M[0],P=M[1],T=Object(s.useRef)(),R=c.a.useRef();Et(R,j);var E=Object(rs.useSwipeable)({onSwiping:function(e){e.deltaY>0&&k(e.deltaY)}}),B=c.a.useRef(),D=Object(rs.useSwipeable)({onSwiping:function(e){e.event.stopPropagation(),(d&&0===T.current.scrollTop&&e.deltaY>0||!d&&e.deltaY<0)&&P(e.deltaY)},onSwipedLeft:function(){r(Fe(a+1,3))},onSwipedRight:function(){r(Fe(a-1,3))}});Object(s.useEffect)((function(){C>150&&o(!1)}),[C]),Object(s.useEffect)((function(){!d&&L<-100?(j(!0),P(0),w(.2)):d&&L>150?(j(!1),P(0),w(.2)):function(){var e;clearTimeout(e),w(0),e=setTimeout((function(){w(.2),P(0)}),300)}()}),[L]);function U(e){var t=oc[e].component;return Object(f.jsx)(t,{})}function W(){return 0===l.length}function V(e){if(2===e.id&&W())return null;w(.2),r(e.id),j(!0)}return Object(s.useEffect)((function(){0!==t.length&&(document.documentElement.style.setProperty("--themeColor",t[1]),document.documentElement.style.setProperty("--themeColor2",t[0]),document.documentElement.style.setProperty("--themeColor3",t[2]),document.documentElement.style.setProperty("--themeColor4",t[5]),document.documentElement.style.setProperty("--themeColorTransparent",t[0]+"6e"))}),[t]),Object(f.jsxs)("div",Object(p.a)(Object(p.a)({className:"bg",style:i?{top:0,opacity:1,visibility:"visible",zIndex:10,transform:"translateY(".concat(C,"px)"),borderRadius:"".concat(C<20?C:20,"px ").concat(C<20?C:20,"px 0 0"),transition:".4s opacity, ".concat(g,"s transform, .4s top, .4s visibility")}:{transform:"translateY(".concat(C,"px)"),transition:".4s opacity, ".concat(g,"s transform, .4s top, .4s visibility")},ref:function(e){E.ref(e),B.current=e}},E),{},{onTouchEnd:function(){var e;clearTimeout(e),x(.2),e=setTimeout((function(){k(0),x(0)}),100)},children:[Object(f.jsxs)("div",{className:"auroraWrapper",children:[Object(f.jsx)("div",{className:"auroraCircle"}),Object(f.jsx)("div",{className:"auroraCircle"}),Object(f.jsx)("div",{className:"auroraCircle"})]}),Object(f.jsx)("div",{className:"closeFullScreen",onClick:function(){o(!1)},children:window.innerWidth>1e3?Object(f.jsx)(Xt.a,{}):Object(f.jsx)(Xe.q,{style:{opacity:.6}})}),Object(f.jsxs)("div",{className:"FullScreenPlayer",children:[Object(f.jsx)("div",{className:"leftSide",style:d?b?{opacity:.6,visibility:"visible",transform:"translateY(20px)",borderRadius:"10px",transition:".4s"}:null:{width:"100%"},children:Object(f.jsx)(tc,{inputRef:n})}),window.innerWidth>1e3?Object(f.jsxs)("div",{className:"rightSideWrapper",style:d?{}:{transform:"translateX(calc(100% - 90px))",width:0},children:[Object(f.jsx)("button",{className:"menuBtn",style:d?{transform:"rotate(180deg)"}:{opacity:0,visibility:"hidden"},onClick:function(){return j(!d)},children:Object(f.jsx)(Ft.c,{})}),Object(f.jsx)("div",{className:"rightSideControl",children:oc.map((function(e,t){return Object(f.jsx)("div",{className:"controlIcon",style:e.id===a&&d?{background:"var(--themeColor)"}:2===e.id&&W()?{opacity:.4}:{},onClick:function(){return V(e)},children:e.icon},e.id)}))}),Object(f.jsx)("div",{className:"rightSide",ref:h,style:d?{}:{display:"none"},children:U(a)})]}):Object(f.jsxs)("div",Object(p.a)(Object(p.a)({className:"mobilePlayerMenu"},D),{},{ref:function(e){D.ref(e),R.current=e},style:d?{top:"calc(100% - calc(70vh + 55px) + ".concat(L,"px)"),transition:"".concat(S,"s")}:{top:"calc(100% - 55px + ".concat(L,"px)"),transition:"".concat(S,"s")},children:[Object(f.jsx)("div",{className:"mobilePlayerMenuClose",children:Object(f.jsx)(Xe.q,{style:{opacity:.6,width:"50px"},onClick:function(){return j(!d)}})}),Object(f.jsx)("div",{className:"controlIconsWrapper",children:oc.map((function(e,t){if(t<=3)return Object(f.jsx)("div",{className:"controlIcon",style:e.id===a&&d?{background:"var(--transparentWhite)"}:2===e.id&&W()?{opacity:.4}:{},onClick:function(t){return V(e)},children:e.title},e.id)}))}),Object(f.jsx)("div",{className:"mobilePlayerMenuContent",ref:T,style:d?{}:{opacity:0},children:U(a)})]}))]})]}))}function lc(e){var t=e.id,n=e.title,s=e.icon,c=e.link,a=e.currentPage,r=e.setCurrentPage;return Object(f.jsx)(i.b,{to:c,children:Object(f.jsxs)("div",{className:"NavigationItem "+(t===a?"active":""),onClick:function(){return r(t)},children:[Object(f.jsx)("div",{className:"icon",children:s}),Object(f.jsx)("b",{children:n})]})})}n(268);var dc=function(e){var t=e.index,n=e.friend,c=Qe().currentUser,a=Object(s.useState)(0),r=Object(u.a)(a,2),o=r[0],l=r[1],d=Object(s.useState)(!1),j=Object(u.a)(d,2),b=j[0],h=j[1];Object(s.useEffect)((function(){Ut([n.uid],c,h,l)}),[]);var m=Ye().currentSong;return Object(f.jsxs)("div",{className:"person",id:n.uid,children:[Object(f.jsxs)("div",{className:"personBtns",children:[Object(f.jsx)(i.b,{to:"/chat/".concat(o),children:Object(f.jsxs)("button",{onClick:function(){b&&Dt([c.uid,n.uid],o)},children:[Object(f.jsx)(st,{text:"chat"}),Object(f.jsx)(Xe.p,{})]})}),Object(f.jsx)(i.b,{to:"/authors/".concat(n.uid),children:Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"profile"}),Object(f.jsx)(Xe.C,{})]})}),Object(f.jsxs)("button",{onClick:function(e){return tn(e,m)},children:[Object(f.jsx)(st,{text:"share"}),Object(f.jsx)(Ft.l,{})]})]}),Object(f.jsx)("div",{className:"pesronImg",style:{pointerEvents:"none"},children:Object(f.jsx)("img",{src:n.photoURL,alt:""})}),Object(f.jsx)(Vs,{userUID:n.uid}),Object(f.jsx)("div",{className:"personName",style:{pointerEvents:"none"},children:n.displayName})]},t)},jc=function(e){var t=e.playlist,n=Tt();n.toggleModal,n.setContent;return Object(f.jsxs)("div",{className:"TinyPlaylist",children:[Object(f.jsxs)("div",{className:"TinyPlaylistBtns",children:[Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"add song"}),Object(f.jsx)(Xe.w,{})]}),Object(f.jsx)(i.b,{to:"/albums/".concat(t.id),children:Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"album"}),Object(f.jsx)(Ft.a,{})]})}),Object(f.jsxs)("button",{children:[Object(f.jsx)(st,{text:"play"}),Object(f.jsx)(Xe.u,{})]})]}),Object(f.jsx)("div",{className:"TinyPlaylistImg",children:Object(f.jsx)("img",{src:t.image,alt:""})}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(f.jsx)("span",{children:cn(t.name,13)}),Object(f.jsx)("span",{style:{fontSize:"0.8em",color:"grey",fontWeight:"500"},children:t.isAlbum?"album":"playlist"})]})]})},bc=function(){return Object(f.jsx)("div",{className:"NotificationCircle"})},hc=function(){var e=Qe().currentUser,t=Ye(),n=t.leftSideBarInputRef,c=t.setOpenFullScreenPlayer,a=t.currentSongData,r=t.yourFriends,o=t.yourPlaylists,l=Tt(),d=l.toggleModal,j=l.setContent,b=Object(s.useState)(0),m=Object(u.a)(b,2),p=m[0],O=m[1],g=Object(s.useState)((function(){var e=nc.find((function(e,t){return console.log(window.location.hash),!!window.location.hash.includes(Un(e.title))}));return void 0===e?0:e.id})),x=Object(u.a)(g,2),v=x[0],y=x[1];return Object(f.jsxs)("div",{className:"LeftsideBar",children:[Object(f.jsxs)("div",{className:"logo",children:[Object(f.jsx)("img",{src:h,alt:""}),Object(f.jsx)("h3",{children:"Soundbubble"})]}),Object(f.jsx)("div",{className:"leftSideBarContainer",children:Object(f.jsx)(i.b,{to:"/authors/".concat(e.uid),children:Object(f.jsxs)("div",{className:"person",children:[e.friends.some((function(e){return"requested"===e.status}))?Object(f.jsx)(bc,{}):null,Object(f.jsx)("div",{className:"pesronImg",children:Object(f.jsx)("img",{src:e.photoURL,alt:""})}),Object(f.jsx)("div",{className:"personName",children:e.displayName})]})})}),Object(f.jsx)("div",{className:"NavigationPanel",children:nc.map((function(e,t){var n=e.id,s=e.title,c=e.icon,a=e.link;return Object(f.jsx)(lc,{id:n,title:s,icon:c,link:a,currentPage:v,setCurrentPage:y},t)}))}),Object(f.jsxs)("div",{className:"leftSideBarContainer friendsAndPlaylists",children:[Object(f.jsx)("span",{style:{display:p?"none":"block",animation:"scrollFromBottom .2s forwards"},children:r.length>0?Object(f.jsxs)(f.Fragment,{children:[r.map((function(e,t){return t<=2?Object(f.jsx)(dc,{index:e.uid,friend:e}):null})),Object(f.jsx)("h4",{className:"seeMoreBtn",onClick:function(){d(),j(Object(f.jsx)(Qt,{item:a,whatToShare:"song"}))},children:"See more"})]}):Object(f.jsx)("h4",{style:{alignSelf:"center",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"No friends added"})}),Object(f.jsxs)("span",{style:{display:p?"block":"none",animation:"scrollFromTop .2s forwards"},children:[o.map((function(e,t){if(t<=2)return Object(f.jsx)(jc,{playlist:e},e.id)})),Object(f.jsxs)("button",{className:"createPlaylistBtn",onClick:function(){d(),j(Object(f.jsx)(Ds,{}))},style:{margin:"5px 0"},children:[Object(f.jsx)(Ft.g,{}),"Create Playlist"]})]}),Object(f.jsxs)("div",{className:"upAndDownBtns",children:[Object(f.jsx)("button",{onClick:function(){return O(0)},style:p?{}:{opacity:"0.3"},children:Object(f.jsx)(Xe.f,{})}),Object(f.jsx)("button",{onClick:function(){return O(1)},style:p?{opacity:"0.3"}:{},children:Object(f.jsx)(Xe.c,{})})]})]}),Object(f.jsx)("div",{className:"leftSideBarContainer",children:0===Object.keys(a).length&&a.constructor===Object||-1===a.id?null:Object(f.jsxs)("div",{className:"littlePlayer",children:[Object(f.jsx)(tc,{textLimit:15,inputRef:n}),Object(f.jsx)("div",{className:"fullScreenBtn",onClick:function(){return c(!0)},children:Object(f.jsx)(Ft.h,{})})]})})]})},fc=(n(269),function(){var e=Ye(),t=e.songRef,n=e.loadSongData,c=e.playing,a=e.songSrc,r=e.openFullScreenPlayer,i=tt(),o=i.isMobile,l=i.screenHeight,d=Qe().currentUser,j=Object(s.useState)(!0),b=Object(u.a)(j,2),h=b[0],m=b[1];return Object(s.useEffect)((function(){var e=setInterval((function(){Ve.collection("users").doc(d.uid).update({online:(new Date).getTime()}),m(!h)}),3e5);return function(){return clearInterval(e)}}),[h]),Object(s.useEffect)((function(){Ve.collection("users").doc(d.uid).update({online:(new Date).getTime()})}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("audio",{src:a,ref:t,onLoadedData:n,onTimeUpdate:c}),Object(f.jsxs)("div",{className:"Wrapper "+(r?"turnedOff":""),style:o?{height:l}:{height:"100vh"},children:[o?"chat"===window.location.hash.substr(2,4)&&window.location.hash.length>6?null:Object(f.jsx)(ac,{}):Object(f.jsx)(hc,{}),Object(f.jsx)("div",{className:"Content",children:Object(f.jsx)(Js,{})}),Object(f.jsx)(qs,{})]}),Object(f.jsx)(uc,{})]})}),mc=function(){return Qe().currentUser?Object(f.jsx)(o.d,{children:Object(f.jsx)(o.b,{path:"/",component:fc})}):Object(f.jsxs)(o.d,{children:[zs.map((function(e,t){var n=e.path,s=e.Component;return Object(f.jsx)(o.b,{path:n,component:s,exact:!0},t)})),Object(f.jsx)(o.a,{to:gs})]})};function pc(){return Object(f.jsx)(i.a,{basename:"/",children:Object(f.jsx)(mc,{})})}r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(nt,{children:Object(f.jsx)(qe,{children:Object(f.jsx)(ze,{children:Object(f.jsx)(Rt,{children:Object(f.jsx)(pc,{})})})})})}),document.getElementById("root"))},83:function(e,t,n){}},[[270,1,2]]]);
//# sourceMappingURL=main.2ba60692.chunk.js.map