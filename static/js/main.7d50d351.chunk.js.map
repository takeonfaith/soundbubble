{"version":3,"sources":["images/Logo3.svg","components/Loading/LoadingData.jsx","components/Tools/AddToListCircle.jsx","components/Basic/PersonTiny.jsx","firebase.js","functions/other/checkNumber.js","functions/other/shuffleSongs.js","hooks/useConditionFunc.js","functions/other/normalizeString.js","functions/find/findVariantsOfName.js","contexts/AuthContext.jsx","contexts/ModalContext.jsx","functions/fetch/fetchItemsList.js","functions/add/addSongToHistory.js","contexts/SongContext.jsx","functions/check/checkKaraoke.js","utils/consts.js","components/MessagePlates/ErrorPlate.jsx","components/Loading/FullScreenLoading.jsx","components/SignIn-Up/BlurredBg.jsx","components/SignIn-Up/TitleAndLogo.jsx","components/SignIn-Up/RadioBtn.jsx","components/AuthorPage/AuthorItemBig.jsx","functions/other/shortWord.js","contexts/ScreenContext.jsx","hooks/usePlaylistSongs.js","components/Playlist/DeletedPlaylist.jsx","components/AuthorPage/PlaylistItem.jsx","components/FullScreenPlayer/colorCircles.jsx","functions/other/rightFormatForBigNumber.js","hooks/useOutsideClick.js","functions/other/filterArrayWithArray.js","functions/other/deleteSongFromLibrary.js","functions/add/addSongToLibrary.js","functions/display/displayAuthorsStr.js","components/Basic/Hint.jsx","components/FullScreenPlayer/AddOrDeleteSongButton.jsx","hooks/useAddOrDeleteSong.js","components/Playlist/AddToPlaylistItem.jsx","components/FullScreenPlayer/AddToPlaylists.jsx","functions/other/getUID.js","functions/create/createChat.js","functions/find/findChatURL.js","functions/other/sendMessage.js","functions/other/shareWithManyFriends.js","components/Loading/LoadingCircle.jsx","components/Basic/SearchBar.jsx","hooks/useFindSomething.js","components/Lists/FriendsListToShareWith.jsx","functions/display/displayDate.js","components/AuthorPage/PersonTinyVerticalItem.jsx","components/Buttons/SeeMoreRoundButton.jsx","components/Lists/TinyPersonsList.jsx","components/Info/SongInfo.jsx","functions/other/transformLyricsToArrayOfObject.js","components/AdminAndAuthor/EditSong.jsx","components/Windows/SongItemMoreWindow.jsx","components/FullScreenPlayer/AuthorsList.jsx","components/Windows/SongItemMobileMoreWindow.jsx","components/FullScreenPlayer/SongItem.jsx","components/HomePage/MainBanner.jsx","functions/find/findIfSongIsNew.js","components/Buttons/MoreBtn.jsx","components/Tools/TitleWithMoreBtn.jsx","components/Lists/SongList.jsx","components/HomePage/RecentSongs.jsx","functions/find/findSimilarArtists.js","components/Lists/AuthorsList.jsx","components/HomePage/RecommendedAuthors.jsx","components/MessagePlates/ImportantMessage.jsx","components/HomePage/RecommendedSongs.jsx","components/HomePage/Top15Songs.jsx","components/Lists/AlbumList.jsx","components/Tools/Slider.jsx","images/wave2.svg","components/LibraryPage/LibraryPlaylistItem.jsx","functions/find/findVisiblePlaylists.js","components/LibraryPage/SongsPage.jsx","components/Buttons/DownloadPhotoButton.jsx","components/AddWindow/AddPlaylist.jsx","components/LibraryPage/CreatePlaylistPage.jsx","components/LibraryPage/PlaylistsPage.jsx","components/LibraryPage/AuthorsPage.jsx","components/Basic/IsUserOnlineCircle.jsx","components/ChatPage/AmountOfUnseenMessages.jsx","components/ChatPage/SeenByCircle.jsx","components/ChatPage/LastSentMessage.js","components/ChatPage/ChatItem.js","functions/find/findAmountOfUnseenMessages.js","components/ChatPage/CreateChat.jsx","components/Buttons/BackBtn.jsx","components/ChatPage/AttachmentList.jsx","components/ChatPage/ChatInfo.jsx","components/ChatPage/WallpaperItem.jsx","components/ChatPage/Wallpapers.jsx","hooks/fetchFirebaseData.js","components/ChatPage/ChatMoreBtn.js","components/Basic/LastSeen.jsx","components/ChatPage/ChatHeader.js","functions/find/findWhatToWriteInResponseItem.js","components/ChatPage/AttachedItemsInChatInput.jsx","components/AuthorPage/ChatInput.jsx","components/ChatPage/DateOnTop.jsx","hooks/useOnScreen.js","components/Loading/SongItemLoading.jsx","components/ChatPage/MessageItem.js","components/ChatPage/MessageField.jsx","components/ChatPage/DisplayChatMessages.jsx","components/AuthorPage/SmallImages.jsx","components/ChatPage/TypingAnimation.jsx","components/ChatPage/ChatMessagesWindow.jsx","components/AuthorPage/ChatWithFriendButton.jsx","components/AlbumPage/CustomizeAlbum.jsx","components/AuthorPage/CustomizeAuthor.jsx","functions/add/addAuthorToLibrary.js","functions/add/addFriend.js","functions/add/addPlaylistToLibrary.js","functions/other/removePlaylistFromLibrary.js","components/Settings/GeneralSettings.jsx","components/Settings/SettingsList.jsx","components/Info/AlbumInfo.jsx","components/Info/AuthorInfo.jsx","components/Windows/AuthorMoreWindow.jsx","hooks/useAlbumAuthors.js","components/AuthorPage/Header.jsx","functions/delete/deletePlaylist.js","functions/other/quitPlaylist.js","functions/delete/deleteFriend.js","components/AddWindow/AddSong.jsx","components/AdminAndAuthor/AddWindow.jsx","components/AuthorPage/FriendRequestItem.jsx","components/AuthorPage/FriendRequest.jsx","components/AuthorPage/PersonTinyList.jsx","functions/find/findAuthorsAlbums.js","components/AuthorPage/Playlists.jsx","components/AuthorPage/SimilarArtists.jsx","components/AuthorPage/TopSongs.jsx","routes.js","pages/LogInPage.jsx","pages/SignUpPage.jsx","pages/Home.jsx","pages/LibraryPage.jsx","pages/SearchPage.jsx","pages/ChatPage.jsx","pages/PageNotFound.jsx","pages/DialoguePage.jsx","hooks/useRealTimeMessages.js","pages/AlbumPage.jsx","pages/AuthorPage.jsx","pages/HistoryPage.jsx","routers/ContentRouter.js","functions/other/correctTimeDisplay.js","functions/find/findLenOfAuthors.js","components/FullScreenPlayer/Player.jsx","data/leftSideBar.js","components/BottomControlBar/MobileControlBarItem.js","components/Mobile/BottomControlBar.jsx","components/Mobile/FullBottomSide.jsx","components/FullScreenPlayer/Loading.jsx","components/FullScreenPlayer/LyricsParagraph.jsx","data/playerRightSide.js","components/FullScreenPlayer/Share.jsx","components/FullScreenPlayer/Options.jsx","components/FullScreenPlayer/Lyrics.jsx","components/FullScreenPlayer/Queue.jsx","components/Basic/FullScreenPlayer.jsx","components/LeftsideBar/NavigationItem.jsx","components/LeftsideBar/Person.jsx","components/LeftsideBar/TinyPlaylist.jsx","components/Basic/NotificationCircle.jsx","components/Basic/LeftsideBar.jsx","components/Windows/ModalWindow.jsx","components/Windows/ConfirmWindow.jsx","hooks/useMediaMetadata.js","components/Basic/ContentWrapper.jsx","hooks/useUpdateListenCount.js","routers/AppRouter.js","App.js","index.js"],"names":["LoadingData","className","loading","src","Logo","alt","AddToListCircle","listOfChosenItems","setListOfChosenItems","itemId","undefined","onClick","e","preventDefault","style","width","includes","type","filteredList","filter","el","color","prev","PersonTiny","data","chosenArray","setChosenArray","restProps","uid","photoURL","displayName","app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","storage","firestore","checkNumber","number","max","min","shuffleSongs","songsArray","randomIndexesArray","newSongsNumbersArray","Array","length","counter","randNum","Math","floor","random","push","useConditionFunc","currentUser","fetchFunc","changeCondition","dep","useEffect","JSON","stringify","normalizeString","str","replace","toLowerCase","findVariantsOfName","name","variantsOfName","personName","i","substr","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","setCurrentUser","userId","setUserId","setLoading","searchValue","setSearchValue","collection","doc","onSnapshot","user","onAuthStateChanged","a","value","login","email","password","setError","signInWithEmailAndPassword","then","catch","err","message","signup","role","imageColors","createUserWithEmailAndPassword","result","set","isAuthor","parseInt","isVerified","numberOfListenersPerMonth","ownSongs","ownPlaylists","addedSongs","addedPlaylists","addedAuthors","lastSongPlayed","chats","friends","subscribers","regDate","FieldValue","serverTimestamp","place","history","logout","signOut","Provider","ModalContext","useModal","ModalClassProvider","openModal","setOpenModal","content","setContent","isOpenConfirm","setIsOpenConfirm","confirmText","rejectText","onConfirmL","onReject","confirmContent","setConfirmContent","closeConfirm","toggleModal","openConfirm","question","onConfirm","fetchItemsList","list","setList","resManipulation","res","lastFunc","lengthRestrict","assignMode","tempArray","map","get","Promise","all","finalResult","temp","forEach","item","find","addSongToHistory","songId","songsList","unshift","update","SongContext","useSong","SongProvider","yourSongs","setYourSongs","yourPlaylists","setYourPlaylists","yourAuthors","setYourAuthors","yourFriends","setYourFriends","currentSongQueue","setCurrentSongQueue","currentSong","setCurrentSong","currentSongInQueue","setCurrentSongInQueue","currentSongPlaylistSource","setCurrentSongPlaylistSource","inputRange","setInputRange","id","currentSongData","setCurrentSongData","imgColors","setImgColors","play","setPlay","currentTime","setCurrentTime","songDuration","setSongDuration","repeatMode","setRepeatMode","shuffleMode","setShuffleMode","currentParagraph","setCurrentParagraph","isThereKaraoke","setIsThereKaraoke","openFullScreenPlayer","setOpenFullScreenPlayer","songRef","useRef","currentParagraphRef","inputRef","leftSideBarInputRef","rightSideCurrentPage","setRightSideCurrentPage","openMenu","setOpenMenu","fetchQueue","lastQueue","findIndex","fetchYourSongs","slice","reverse","fetchCurrentSongInitial","tempSongObject","songSrc","authors","cover","listens","releaseDate","lyrics","curSong","curQueue","source","image","docRef","exists","songData","error","console","log","defineCurrentParagraph","first","last","roundedTime","parseFloat","current","toFixed","midPoint","blockStartTime","startTime","nextBlockStartTime","correctSongNumber","currentSongId","playlistId","String","concat","friend","status","obj","shuffledSongsArray","song","document","title","nextSong","prevSong","playSong","pause","playing","event","target","defineCurrentParagraphLight","changeCurrentTime","localName","displayAuthors","authorsList","separatingSign","to","stopPropagation","displayAuthorsFull","loadSongData","duration","window","innerWidth","LOGIN_ROUTE","SIGNUP_ROUTE","HOME_ROUTE","LIBRARY_ROUTE","SEARCH_ROUTE","CHAT_ROUTE","HISTORY_ROUTE","ErrorPlate","errorMessage","FullScreenLoading","opacity","visibility","BlurredBg","TitleAndLogo","RadioBtn","currentActive","label","fontWeight","background","AuthorItemBig","listOfChosenAuthors","setListOfChosenAuthors","shortWord","word","len","ScreenContext","useScreen","ScreenProvider","screenWidth","setScreenWidth","innerHeight","screenHeight","setScreenHeight","isMobile","setIsMobile","handleResize","addEventListener","removeEventListener","usePlaylistSongs","playlist","playlistSongs","setPlaylistSongs","listSongsIds","songs","albumSong","DeletedPlaylist","textDecoration","display","justifyContent","alignItems","height","margin","PlaylistItem","listOfChosenAlbums","setListOfChosenAlbums","playlistDate","Date","creationDate","playSongsInPlaylist","backgroundImage","position","left","top","transform","fontSize","marginLeft","isAlbum","getFullYear","ColorCircles","rightFormanForBigNumber","useOutsideClick","ref","setFunc","handleClickOutside","contains","filterArrayWithArray","whatToFilter","withWhatToFilter","this","indexOf","deleteSongFromLibrary","songAuthorsUIDS","author","finalAuthorsUIDS","newList","songNum","authorId","songObj","filtered","finalFilteredAuthors","addSongToLibrary","displayAuthorsStr","authorslist","separator","lenLimit","authorsString","join","Hint","text","direction","AddOrDeleteButtonFull","useAddOrDeleteSong","isAdded","setIsAdded","response","newSongsList","sortedPlaylists","AddToPlaylistItem","addFunc","AddToPlaylists","setSongData","flexDirection","key","getUID","c","piece","toString","createChat","participants","chatUID","chatName","chatImage","admins","messages","wallpaper","typing","personId","chatInfo","findChatURL","allParticipants","setShouldCreate","setFriendChatId","foundChat","chatId","where","docs","chat","count","every","sendMessage","chatData","sender","messageText","attachedSongs","attachedAlbums","attachedAuthors","inResponseToMessage","trim","tempMessages","sentTime","seenBy","shareWithFriends","shareList","whatToShare","sortedFriends","resolve","LoadingCircle","SearchBar","setValue","setAllFoundSongs","setResultPlaylists","setResultAuthorList","focus","defaultSearchMode","inputText","defaultSongsListValue","defaultAuthorsListValue","defaultPlaylistsListValue","searchMode","setSearchMode","setMessage","foundAnything","setFoundAnything","findItem","defaultList","foundItemTempArray","normalizedSearch","itemData","realData","isPrivate","authorsIdsArray","sort","b","songsIdsArray","albumsIdsArray","findSomething","useFindSomething","marginTop","placeholder","onChange","onKeyDown","FriendsListToShareWith","chosenFriends","setChosenFriends","setMessageText","shared","setShared","foundPeople","setFoundPeople","setTimeout","overflowY","maxHeight","index","maxWidth","amountOfZeros","toDateTime","secs","t","setSeconds","displayDate","stringDate","displayMode","Months","newDate","isNaN","seconds","getMonth","getDate","getHours","getMinutes","PersonTinyVerticalItem","person","SeeMoreRoundButton","TinyPersonsList","listOfPeople","marginBottom","SongInfo","friendsThatHaveThisSong","setFriendsThatHaveThisSong","findFriendsThatHaveThisSong","marginRight","minHeight","transformLyricsToArrayOfObjects","arrayOfParagraphs","startSubstr","EditSong","songName","setSongName","songAuthors","setSongAuthors","songCover","setSongCover","setImageColors","setLyrics","foundAuthors","setFoundAuthors","setErrorMessage","removeAuthorFromList","people","borderRadius","padding","manuallyChangeColor","isAdmin","some","addAuthor","authorRef","authorData","authorSongs","filteredSongs","SongItemMoreWindow","openMoreWindow","moreWindowPosRelativeToViewport","bottom","AuthorsList","listOfAuthors","SongItemMobileMoreWindow","SongItem","localIndex","showListens","isNewSong","listOfChosenSongs","setListOfSongs","setOpenMoreWindow","setMoreWindowPosRelativeToViewport","currentItemRef","getBoundingClientRect","MainBanner","bannerColors","setBannerColors","currentSliderPage","setcurrentSliderPage","topAuthor","setTopAuthor","topSong","setTopSong","topAlbum","setTopAlbum","findTop","criterion","orderBy","limit","findIfSongIsNew","songReleaseDate","getTime","MoreBtn","func","lenOfList","maxLen","boolVal","TitleWithMoreBtn","SongList","listOfSongs","showCount","showSearch","displayIfEmpty","showhistory","showMoreSongs","setShowMoreSongs","displaySongs","setDisplaySongs","allFoundSongs","RecentSongs","recentSongs","setRecentSongs","tempSongsIds","findRecentSongs","findSimilarArtistsNames","authorsSongsArr","authorsData","setSimilarAuthors","peopleArray","newAuthors","flat","uniqueAuthorsSet","Set","uniqueAuthorsIdsArray","from","uniqueAuthorsDataArray","j","findSimilarArtists","authorsSongsArray","scrollLeft","setScrollLeft","wrapperRef","shouldRenderRightArrow","setShouldRenderRightArrow","scrollWidth","offsetWidth","onScroll","RecommendedAuthors","recommendationAuthors","setRecommendationAuthors","uniqueAuthors","setUniqueAuthors","uniqueAuthorsUIDSArray","ImportantMessage","button","RecommendedSongs","recommendedSongs","setRecommendedSongs","fetchRecommendedSongs","Top15Songs","topSongs","setTopSongs","AlbumList","listOfAlbums","Slider","pages","currentPage","setCurrentPage","pageName","LibraryPlaylistItem","findVisiblePlaylists","SongsPage","playlistsVisible","setPlaylistsVisible","p","wave","DownloadPhotoButton","setImageLocalPath","downloadedPhoto","setDownloadedPhoto","btnText","file","files","isValid","validExtensions","ext","ex","URL","createObjectURL","storageRef","fileRef","child","put","getDownloadURL","onFileChange","AddPlaylist","playlistName","setPlaylistName","playlistCover","setPlaylistCover","authorsInputValue","setAuthorsInputValue","allAuthors","setAllAuthors","chosenAuthors","setChosenAuthors","setReleaseDate","songsSearch","setSongsSearch","allSongs","setAllSongs","chosenSongs","setChosenSongs","playlistStatus","setPlaylistStatus","isPlaylistPrivate","setIsPlaylistPrivate","imageLocalPath","loadingPlaylist","setLoadingPlaylist","authorPlaylists","getColors","colors","onSubmit","required","removeSongFromList","CreatePlaylistPage","PlaylistsPage","playlistsDisplay","setPlaylistsDisplay","AuthorsPage","setDisplayAuthors","IsUserOnlineCircle","userUID","isOnline","setIsOnline","unsubscribe","fiveMinutesAgo","online","AmountOfUnseenMessages","amountOfUnseen","SeenByCircle","listOfSeen","LastSentMessage","lastAttachedItem","setLastAttachedItem","shouldPutDot","setShouldPutDot","lastMessage","setLastMessage","messageIcons","lastIcon","setLastIcon","authorName","findWhatToWriteUnderName","ChatItem","otherPerson","setOtherPerson","setAmountOfUnseen","otherPersonId","reduce","accum","findAmountOfUnseenMessages","fetchOtherPerson","now","CreateChat","foundFriends","setFoundFriends","chatCover","setChatCover","setChatName","useHistory","shouldCreate","friendChatId","allowedToCreate","setAllowedToCreate","BackBtn","goBack","AttachmentList","attachmentList","setAttachmentList","sliderCurrentPage","setSliderCurrentPage","attachmentContent","fetchAttachedData","attachedType","firebaseCollection","page","ChatInfo","setParticipants","chatNameValue","setChatNameValue","newChatPhoto","setNewChatPhoto","newImageLocalPath","setNewImageLocalPath","newImageColors","setNewImageColors","participantsPage","setParticipantsPage","showUpdateBtn","setShowUpdateBtn","WallpaperItem","currentWallpaper","Wallpapers","wallpaperList","setWallpaperList","setState","sortCondition","whereCondFP","whereCondSP","whereCondTP","deps","fetchData","useFetchFirebaseData","ChatMoreBtn","chatMoreBtnRef","LastSeen","lastSeen","setLastSeen","ChatHeader","headerColors","setHeaderColors","findWhatToWriteInResponseToItem","referedMessage","AttachedItemsInChatInput","attachedItems","setAttachedItems","icon","setItems","removeItemFromAttached","ChatInput","setInResponseToMessage","otherMessages","openAttachWindow","setOpenAttachWindow","setAttachedSongs","setAttachedAlbums","setAttachedAuthors","resultPlaylists","resultAuthorList","inResponseNames","setInResponseNames","attachedSongsNames","setAttachedSongsNames","attachWindowRef","sendMessageFull","transition","messageId","border","outline","DateOnTop","date","useOnScreen","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","disconnect","SongItemLoading","MessageItem","messageData","scrollToMessageRef","setScrollToMessageId","scrollToMessageId","showPhoto","inResponseToMessageArr","setInResponseToMessageArr","userThatSentMessage","setUserThatSentMessage","messageSentTime","attachedSongsData","setAttachedSongsData","attachedAuthorsData","setAttachedAuthorsData","attachedPlaylistsData","setAttachedPlaylistsData","inResponseToMessagesData","setInResponseToMessagesData","messageRef","isVisible","swipeDeltaX","setSwipeDeltaX","transformTransition","setTransformTransition","handlers","useSwipeable","onSwiping","deltaX","addMessageToResponseList","returnToInitial","dropDelta","clearTimeout","fetchSentMessageUser","paddingBottom","onTouchEnd","animation","album","MessageField","messageList","setDateRefsArray","setShowPhoto","showDate","setShowDate","dateRef","DisplayChatMessages","messagesWindowRef","scrollTo","offsetTop","SmallImages","imagesList","borderColor","TypingAnimation","typingPeople","typingPeopleData","setTypingPeopleData","personData","ChatMessagesWindow","findTopDate","scroll","scrollHeight","clientHeight","scrollToBottom","ChatWithFriendButton","CustomizeAlbum","loadingAuthors","loadingSongs","setLoadingSongs","filteredPlaylists","CustomizeAuthor","authorCover","setAuthorCover","addAuthorToLibrary","addFriend","friendData","updatedDataForFriend","updatedDataForCurrentUser","addPlaylistToLibrary","playlistData","removePlaylistFromLibrary","GeneralSettings","SettingsList","settingsList","settingItem","AlbumInfo","friendsThatHaveThisAlbum","setFriendsThatHaveThisAlbum","findFriendsThatHaveThisAlbum","AuthorInfo","setFriendsThatHaveThisAuthor","findFriendsThatHaveThisAuthor","AuthorMoreWindow","useAlbumAuthors","albumAuthors","setAlbumAuthors","authorsImages","setAuthorsImages","ids","authrorsData","tempArrayAuthors","tempArrayImages","fetchAuthorsData","Header","isFriend","moreWindowRef","personFilteredPlaylists","pId","delete","quitPlaylist","filteredUserFriends","filteredOtherUserFriends","deleteFriend","backgroundColor","AddSong","setSongSrc","showSuccessMessage","setShowSuccessMessage","loadingSong","setLoadingSong","AddWindow","openAddSongWindow","setOpenAddSongWindow","setCurrentSliderPage","sliderPages","FriendRequestItem","rejectFriend","FriendRequest","friendRequests","setFriendRequests","friendsList","otherUserFriendList","arrOfReqs","friendObj","fetchFriendRequests","PersonTinyList","setListOfPeople","personObj","findAuthorsAlbums","setAuthorsPlaylists","currentUserUID","Playlists","authorsPlaylists","SimilarArtists","similarArtists","setSimilarArtists","TopSongs","popularSongs","setPopularSongs","newSongs","setNewSongs","prevSongs","findAuthorsSongs","publicRoutes","path","Component","setEmail","setPassword","disabled","currentRoleChoice","setCurrentRoleChoice","setName","setPhotoURL","privateRoutes","libraryPages","resultSongList","setResultSongList","resultAlbumList","setResultAlbumList","shadowColor","setShadowColor","yourChats","setYourChats","match","useRouteMatch","params","dateRefsArray","setChatData","setMessageList","currentDateOnTop","setCurrentDateOnTop","snapshot","scrollTop","innerHTML","useRealTimeMessages","albumId","albumData","setAlbumData","fetchAlbumsData","fetchSongsInAlbum","setAuthorsData","historySongsIds","setHistorySongsIds","historySongs","setHistorySongs","ContentRouter","component","exact","correctTimeDisplay","findLenOfAuthors","Player","textLimit","linkToAuthors","overflow","whiteSpace","step","leftSideBar","link","MobileControlBarItem","element","BottomControlBar","userElement","location","hash","FullBottomSide","Loading","timeSpan","pointerEvents","LyricsParagraph","lyricsModeratorMode","karaokeModeratorTimes","setKaraokeModeratorTimes","setInputKaraokeTime","inputKaraokeTime","paragraphRef","paragraphStyle","abs","addLyricsBlock","indexOfRelativeElement","tempTimes","splice","convertedToNumber","inputKaraoke","rightSide","socialMedia","social","setLyricsModeratorMode","canUpdateLyrics","setCanUpdateLyrics","scrollIntoView","paragraph","tempSongData","FullScreenPlayer","lyricsRef","mobileMenuTransition","setMobileMenuTransition","deltaY","setDeltaY","deltaYMobileMenu","setDeltaYMobileMenu","mobileContentScroll","mobileMenuRef","bgRef","handlersForMobileMenu","onSwipedLeft","onSwipedRight","returnToInitialMobileMenu","rightSideContent","RightSidePage","noLyrics","changeRightSidePage","documentElement","setProperty","zIndex","NavigationItem","Person","sendAnimation","setSendAnimation","loadingSendSong","setLoadingSendSong","shareWithManyFriends","TinyPlaylist","backgroundPosition","backgroundSize","NotificationCircle","LeftsideBar","currentFriendToPlaylistPage","setCurrentFriendToPlaylistPage","alignSelf","ModalWindow","modalRef","ConfirmWindow","confirmRef","closeComfirm","useMediaMetadata","updatePositionState","navigator","mediaSession","setPositionState","playbackRate","pauseSong","metadata","MediaMetadata","artist","artwork","sizes","setActionHandler","ContentWrapper","intervalExciter","setIntervalExciter","updateListenCount","listenCountTimeOut","sourceId","listedData","authorNumberOfListenersPerMonth","useUpdateListenCount","interval","setInterval","clearInterval","onLoadedData","onTimeUpdate","onEnded","AppRouter","App","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7d50d351.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo3.fc53f4ac.svg\";","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const LoadingData = () => {\r\n\treturn (\r\n\t\t<div className = \"LoadingData\">\r\n\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {IoIosCheckmarkCircle, IoIosRadioButtonOff} from 'react-icons/io'\r\n\r\nexport const AddToListCircle = ({listOfChosenItems, setListOfChosenItems, itemId}) => {\r\n\treturn listOfChosenItems !== undefined ? (\r\n\t\t<div onClick = {e=>e.preventDefault()} style = {{width:'35px'}}>\r\n\t\t\t{\r\n\t\t\t\tlistOfChosenItems.includes(itemId) ?\r\n\t\t\t\t\t<button type=\"button\" onClick={(e) => { let filteredList = listOfChosenItems.filter(el => el !== itemId); setListOfChosenItems(filteredList) }} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosCheckmarkCircle style={{ color: 'var(--lightBlue)' }} />\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button type=\"button\" onClick={() => setListOfChosenItems(prev => [...prev, itemId])} className=\"addToListBtn\">\r\n\t\t\t\t\t\t<IoIosRadioButtonOff />\r\n\t\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React from 'react'\r\nimport { AddToListCircle } from '../Tools/AddToListCircle'\r\nexport const PersonTiny = ({data, chosenArray, setChosenArray, ...restProps}) => {\r\n\treturn (\r\n\t\t<div className=\"person\" {...restProps}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {chosenArray} setListOfChosenItems = {setChosenArray} itemId = {data.uid}/>\r\n\t\t\t<div className=\"pesronImg\">\r\n\t\t\t\t<img loading = \"lazy\" src={data.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"personName\">\r\n\t\t\t\t{data.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/storage'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport 'firebase/analytics'\r\nimport seedDatabase from './seedDatabase';\r\n\r\nconst app = firebase.initializeApp({\r\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n\tappId:process.env.REACT_APP_FIREBASE_APP_ID,\r\n\tmeasurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n});\r\nfirebase.analytics();\r\nexport const auth = app.auth()\r\nexport const storage = app.storage()\r\nexport const firestore = app.firestore()\r\n// seedDatabase(firestore)\r\nexport default app","export default function checkNumber(number, max, min = 0){\r\n\tif(number > max) return min\r\n\tif(number < min) return max\r\n\r\n\treturn number\r\n}","export default function shuffleSongs(songsArray){\r\n\tconst randomIndexesArray = []\r\n\tconst newSongsNumbersArray = new Array(songsArray.length)\r\n\tlet counter = 0\r\n\twhile(counter < songsArray.length){\r\n\t\tconst randNum = Math.floor(Math.random()*(songsArray.length))\r\n\t\tif(!randomIndexesArray.includes(randNum)){\r\n\t\t\trandomIndexesArray.push(randNum)\r\n\t\t\tnewSongsNumbersArray[randNum] = songsArray[counter]\r\n\t\t\tcounter++\r\n\t\t}\r\n\t}\r\n\treturn newSongsNumbersArray\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useConditionFunc = (currentUser, fetchFunc, changeCondition, dep) => {\r\n\tuseEffect(() => {\r\n\t\tif(currentUser.uid){\r\n\t\t\tif (changeCondition) {\r\n\t\t\t\tfetchFunc()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [JSON.stringify(dep)])\r\n}\r\n","export default function normalizeString(str){\r\n\treturn str.replace(/\\s/g, '').replace(/[,'._/]/g, '').replace(/-/g, '').toLowerCase()\r\n}","import normalizeString from \"../other/normalizeString\"\r\n\r\nexport const findVariantsOfName = (name) => {\r\n\tlet variantsOfName = []\r\n\tlet personName = normalizeString(name)\r\n\tfor (let i = 1; i < personName.length + 1; i++) {\r\n\t\tvariantsOfName.push(personName.substr(0, i))\r\n\t}\r\n\treturn variantsOfName\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { auth, firestore } from '../firebase'\r\nimport firebase from 'firebase'\r\nimport { LoadingData } from '../components/Loading/LoadingData'\r\nimport { findVariantsOfName } from '../functions/find/findVariantsOfName'\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport const useAuth = () => {\r\n\treturn useContext(AuthContext)\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [currentUser, setCurrentUser] = useState({})\r\n\tconst [userId, setUserId] = useState(null)\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tfunction login(email, password, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.signInWithEmailAndPassword(email, password).then().catch(err => {\r\n\t\t\tsetError(err.message)\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tfunction logout() {\r\n\t\treturn auth.signOut()\r\n\t}\r\n\r\n\tfunction signup(email, name, password, role, photoURL, imageColors, setError, setLoading) {\r\n\t\tsetLoading(true)\r\n\t\treturn auth.createUserWithEmailAndPassword(email, password)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tfirestore.collection('users')\r\n\t\t\t\t\t.doc(result.user.uid)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\t\tdisplayName: name,\r\n\t\t\t\t\t\tphotoURL: photoURL || \"https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/music-icon-mohammed-jabir-ap.jpg\",\r\n\t\t\t\t\t\tisAuthor: parseInt(role) === 1,\r\n\t\t\t\t\t\tisVerified: parseInt(role) === 1,\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: 0,\r\n\t\t\t\t\t\townSongs: [],\r\n\t\t\t\t\t\townPlaylists: [],\r\n\t\t\t\t\t\taddedSongs: [],\r\n\t\t\t\t\t\taddedPlaylists: [],\r\n\t\t\t\t\t\taddedAuthors: [],\r\n\t\t\t\t\t\tlastSongPlayed: \"\",\r\n\t\t\t\t\t\tchats: [],\r\n\t\t\t\t\t\tfriends: [],\r\n\t\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\t\tregDate: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t\t})\r\n\t\t\t\tfirestore.collection('search').doc(result.user.uid).set({\r\n\t\t\t\t\tplace: 'users',\r\n\t\t\t\t\tuid: result.user.uid,\r\n\t\t\t\t\tvariantsOfName: findVariantsOfName(name)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tfirestore.collection('history').doc(result.user.uid).set({\r\n\t\t\t\t\thistory:[]\r\n\t\t\t\t})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(userId !== null){\r\n\t\t\tconst unsubscribe = firestore.collection('users').doc(userId).onSnapshot(user => {\r\n\t\t\t\tif (user.data()) {\r\n\t\t\t\t\tif(currentUser.uid === undefined){\r\n\t\t\t\t\t\tsetCurrentUser(user.data())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn unsubscribe\r\n\t\t}\r\n\t}, [firestore, userId])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = auth.onAuthStateChanged(async user => {\r\n\t\t\tif (user) {\r\n\t\t\t\tsetUserId(user.uid)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetUserId(null)\r\n\t\t\t\tsetCurrentUser({})\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn unsubscribe\r\n\t}, [])\r\n\r\n\r\n\tconst value = {\r\n\t\tcurrentUser,\r\n\t\tsetCurrentUser,\r\n\t\tlogin,\r\n\t\tsignup,\r\n\t\tlogout,\r\n\t\tloading,\r\n\t\tsetLoading,\r\n\t\tsearchValue, \r\n\t\tsetSearchValue\r\n\t}\r\n\treturn (\r\n\t\t<AuthContext.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n","import React, { useContext, useState } from 'react'\r\n\r\nconst ModalContext = React.createContext()\r\n\r\nexport const useModal = () =>{\r\n\treturn useContext(ModalContext)\r\n}\r\n\r\nexport const ModalClassProvider = ({children}) => {\r\n\tconst [openModal, setOpenModal] = useState(false)\r\n\tconst [content, setContent] = useState(<h1>Test</h1>)\r\n\tconst [isOpenConfirm, setIsOpenConfirm] = useState(false)\r\n\tconst [confirmContent, setConfirmContent] = useState({confirmText:\"Confirm Action\", rejectText:\"Cancel\", onConfirmL:()=>{return null}, onReject:()=>{return null}})\r\n\tfunction toggleModal(){\r\n\t\tsetOpenModal(!openModal)\r\n\t}\r\n\t\r\n\t//{question:question, confirmText:..., rejectText:..., onConfirm..., onReject:...}\r\n\tfunction openConfirm(question, confirmText, rejectText = \"Cancel\", onConfirm, onReject = closeConfirm){\r\n\t\tsetIsOpenConfirm(true)\r\n\t\tsetConfirmContent({question:question, confirmText:confirmText, rejectText:rejectText, onConfirm:onConfirm, onReject:onReject})\r\n\t}\r\n\r\n\tfunction closeConfirm(){\r\n\t\tsetIsOpenConfirm(false)\r\n\t}\r\n\r\n\tconst value = {\r\n\t\topenModal,\r\n\t\tsetOpenModal,\r\n\t\ttoggleModal, \r\n\t\tsetContent, \r\n\t\tcontent,\r\n\t\tisOpenConfirm,\r\n\t\tsetIsOpenConfirm,\r\n\t\topenConfirm,\r\n\t\tcloseConfirm,\r\n\t\tconfirmContent\r\n\t}\r\n\treturn (\r\n\t\t<ModalContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ModalContext.Provider>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const fetchItemsList = (list, collection, setList, resManipulation = (res) => res, lastFunc = () => null, lengthRestrict, assignMode = 0) => {\r\n\tif (list?.length) {\r\n\t\tconst tempArray = list.map(async (itemId, i) => {\r\n\t\t\treturn (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t})\r\n\t\tPromise.all(tempArray).then(res => {\r\n\t\t\tlet finalResult = resManipulation(res)\r\n\t\t\tif(finalResult?.length > lengthRestrict) finalResult.length = lengthRestrict\r\n\t\t\tif(assignMode === 0) setList(finalResult)\r\n\t\t\telse setList(prev=>{\r\n\t\t\t\tlet temp = []\r\n\t\t\t\tfinalResult.forEach(item=>{\r\n\t\t\t\t\tif(item){\r\n\t\t\t\t\t\tif(!prev.find(el=>el['id'] === item['id'])){\r\n\t\t\t\t\t\t\ttemp.push(item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn [...prev, ...temp]\r\n\t\t\t})\r\n\t\t\tlastFunc()\r\n\t\t})\r\n\t}\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const addSongToHistory = (songId, currentUser) => {\r\n\tfirestore.collection('history').doc(currentUser.uid).get().then(res=>{\r\n\t\tconst songsList = res.data().history\r\n\t\tif(songsList[0] !== songId) songsList.unshift(songId)\r\n\t\tif(songsList.length > 30) songsList.length = 30\r\n\r\n\t\tfirestore.collection('history').doc(currentUser.uid).update({\r\n\t\t\thistory:songsList\r\n\t\t})\r\n\t})\r\n}","import React, { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { LoadingData } from '../components/Loading/LoadingData'\r\nimport { PersonTiny } from '../components/Basic/PersonTiny'\r\nimport { firestore } from '../firebase'\r\nimport checkNumber from '../functions/other/checkNumber'\r\nimport shuffleSongs from '../functions/other/shuffleSongs'\r\nimport { useConditionFunc } from '../hooks/useConditionFunc'\r\nimport { useAuth } from './AuthContext'\r\nimport { useModal } from './ModalContext'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\nimport { checkKaraoke } from '../functions/check/checkKaraoke'\r\nimport { addSongToHistory } from '../functions/add/addSongToHistory'\r\nconst SongContext = createContext(null)\r\n\r\nexport const useSong = () => {\r\n\treturn useContext(SongContext)\r\n}\r\n\r\nexport const SongProvider = ({ children }) => {\r\n\tconst { currentUser, loading, setLoading } = useAuth()\r\n\tconst { setOpenModal } = useModal()\r\n\tconst [yourSongs, setYourSongs] = useState([])\r\n\tconst [yourPlaylists, setYourPlaylists] = useState([])\r\n\tconst [yourAuthors, setYourAuthors] = useState([])\r\n\tconst [yourFriends, setYourFriends] = useState([])\r\n\tconst [currentSongQueue, setCurrentSongQueue] = useState([])\r\n\tconst [currentSong, setCurrentSong] = useState(-1)\r\n\tconst [currentSongInQueue, setCurrentSongInQueue] = useState(0)\r\n\tconst [currentSongPlaylistSource, setCurrentSongPlaylistSource] = useState({})\r\n\tconst [inputRange, setInputRange] = useState(0)\r\n\tconst [currentSongData, setCurrentSongData] = useState({ id: -1 })\r\n\r\n\tconst [imgColors, setImgColors] = useState([])\r\n\tconst [play, setPlay] = useState(false)\r\n\tconst [currentTime, setCurrentTime] = useState(0)\r\n\tconst [songDuration, setSongDuration] = useState(0)\r\n\tconst [repeatMode, setRepeatMode] = useState(1)\r\n\tconst [shuffleMode, setShuffleMode] = useState(0)\r\n\tconst [currentParagraph, setCurrentParagraph] = useState(0)\r\n\tconst [isThereKaraoke, setIsThereKaraoke] = useState(false)\r\n\tconst [openFullScreenPlayer, setOpenFullScreenPlayer] = useState(false)\r\n\tconst songRef = useRef(null)\r\n\tconst currentParagraphRef = useRef(null)\r\n\tconst inputRef = useRef(null)\r\n\tconst leftSideBarInputRef = useRef(null)\r\n\tconst [rightSideCurrentPage, setRightSideCurrentPage] = useState(0)\r\n\tconst [openMenu, setOpenMenu] = useState(false)\r\n\r\n\tfunction fetchYourFriends() { fetchItemsList(currentUser.friends.filter(friend => friend.status === 'added').map(obj => obj.uid), 'users', setYourFriends) }\r\n\r\n\tfunction fetchQueue() { fetchItemsList(currentUser?.lastQueue?.songsList, 'songs', setCurrentSongQueue, (res) => res, () => setCurrentSongInQueue(currentUser.lastQueue.songsList.findIndex(songId => songId === currentUser.lastSongPlayed))) }\r\n\r\n\tfunction fetchYourSongs() { fetchItemsList(currentUser.addedSongs.slice(0).reverse(), 'songs', setYourSongs, (res) => res, fetchQueue) }\r\n\r\n\tfunction fetchYourAuthors() { fetchItemsList(currentUser.addedAuthors, 'users', setYourAuthors) }\r\n\r\n\tasync function fetchCurrentSongInitial() {\r\n\t\tif (currentUser.uid !== undefined) {\r\n\t\t\tconst tempSongObject = {\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsongSrc: \"\",\r\n\t\t\t\tauthors: [],\r\n\t\t\t\tcover: \"\",\r\n\t\t\t\tlistens: 0,\r\n\t\t\t\treleaseDate: \"\",\r\n\t\t\t\tlyrics: [],\r\n\t\t\t\timageColors: []\r\n\t\t\t}\r\n\t\t\tconst curSong = currentUser.lastSongPlayed || currentUser.addedSongs[0] || tempSongObject.id\r\n\t\t\tconst curQueue = currentUser.lastQueue || { source: '/library', name: 'Your Library', image: currentUser.photoURL, songsList: yourSongs } || []\r\n\t\t\tsetCurrentSong(curSong)\r\n\t\t\tsetCurrentSongPlaylistSource(curQueue)\r\n\r\n\t\t\tif (curSong !== -1) {\r\n\t\t\t\tconst docRef = firestore.collection('songs').doc(curSong)\r\n\t\t\t\tconst docData = docRef.get()\r\n\t\t\t\t\t.then(doc => {\r\n\t\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongData(tempSongObject)\r\n\t\t\t\tsetImgColors([])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function fetchCurrentSong() {\r\n\t\tif (currentSong !== -1) {\r\n\t\t\tfirestore.collection('songs').doc(currentSong).get().then(doc => {\r\n\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\tconst songData = doc.data()\r\n\t\t\t\t\tsetImgColors(songData.imageColors || [])\r\n\t\t\t\t\tsetCurrentSongData(songData)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\telse fetchCurrentSongInitial()\r\n\t}\r\n\r\n\tfunction fetchYourPlaylists() {\r\n\t\tconst tempArray = []\r\n\t\tif (currentUser.ownPlaylists) {\r\n\t\t\tcurrentUser.ownPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.push(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.ownPlaylists.length - 1) setYourPlaylists(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (currentUser.addedPlaylists) {\r\n\t\t\tcurrentUser.addedPlaylists.map((playlistId, i) => {\r\n\t\t\t\tconst response = firestore.collection(\"playlists\").doc(playlistId)\r\n\t\t\t\tresponse.get().then((doc) => {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\ttempArray.push(doc.data())\r\n\t\t\t\t\t\tif (i === currentUser.addedPlaylists.length - 1) setYourPlaylists(tempArray)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No such document!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseConditionFunc(currentUser, fetchYourSongs, currentUser.addedSongs && (currentUser.addedSongs.length !== yourSongs.length), [currentUser.addedSongs])\r\n\tuseConditionFunc(currentUser, fetchYourPlaylists, currentUser.ownPlaylists && String(currentUser.ownPlaylists.concat(currentUser.addedPlaylists)) !== String(yourPlaylists), [currentUser.ownPlaylists])\r\n\tuseConditionFunc(currentUser, fetchYourFriends, currentUser.friends && String(currentUser.friends.filter(obj => obj.status === 'added')) !== String(yourFriends), [currentUser.friends])\r\n\tuseConditionFunc(currentUser, fetchYourAuthors, currentUser.addedAuthors && (currentUser.addedAuthors.length !== yourAuthors.length), [currentUser.addedAuthors])\r\n\tuseConditionFunc(currentUser, fetchCurrentSong, currentUser && (currentSongData.id === -1 || (currentSong || currentUser.lastSongPlayed)), [currentSong, currentUser.lastSongPlayed])\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (currentUser.uid === undefined) {\r\n\t\t\tsetCurrentSongData({ id: -1 })\r\n\t\t\tsetCurrentSong(-1)\r\n\t\t\tsetCurrentSongQueue([])\r\n\t\t\tsetYourAuthors([])\r\n\t\t\tsetYourSongs([])\r\n\t\t\tsetYourFriends([])\r\n\t\t\tsetYourPlaylists([])\r\n\t\t}\r\n\t}, [currentUser.uid])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsThereKaraoke(checkKaraoke(currentSongData.lyrics))\r\n\t}, [currentSongData.lyrics])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!loading) {\r\n\t\t\tif (shuffleMode) {\r\n\t\t\t\tlet shuffledSongsArray = shuffleSongs(currentSongQueue)\r\n\t\t\t\tsetCurrentSongQueue(shuffledSongsArray)\r\n\t\t\t\tsetCurrentSongInQueue(shuffledSongsArray.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetCurrentSongQueue(currentSongPlaylistSource.songsList)\r\n\t\t\t\tsetCurrentSongInQueue(currentSongPlaylistSource.songsList.findIndex(song => song.id === currentSong))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [shuffleMode])\r\n\r\n\tfunction playSong() {\r\n\t\tif (play) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsongRef.current.play()\r\n\t\t}\r\n\r\n\t\tsetPlay(!play)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentParagraph(0)\r\n\t}, [currentSongData.id])\r\n\r\n\tfunction loadSongData(e) {\r\n\t\tsetCurrentTime(e.target.currentTime)\r\n\t\tsetSongDuration(e.target.duration)\r\n\t\tinputRef.current.max = e.target.duration\r\n\t\tif (window.innerWidth > 1000) leftSideBarInputRef.current.max = e.target.duration\r\n\t\tsetInputRange(0)\r\n\t\tif (play) { e.target.play() }\r\n\t\telse e.target.pause()\r\n\t}\r\n\r\n\tfunction defineCurrentParagraph() {\r\n\t\t//Binary Search\r\n\t\tlet first = 0, last = currentSongData.lyrics.length - 1\r\n\t\tlet roundedTime = parseFloat(parseFloat(songRef.current.currentTime).toFixed(1))\r\n\t\twhile (first <= last) {\r\n\t\t\tlet midPoint = Math.floor((first + last) / 2)\r\n\t\t\tlet blockStartTime = parseFloat(parseFloat(currentSongData.lyrics[midPoint].startTime).toFixed(1))\r\n\t\t\tlet nextBlockStartTime = midPoint !== currentSongData.lyrics.length - 1 ? parseFloat(parseFloat(currentSongData.lyrics[midPoint + 1].startTime).toFixed(1)) : last\r\n\t\t\tif (currentSongData.lyrics[midPoint].startTime !== 'undefined') {\r\n\t\t\t\tif (roundedTime >= blockStartTime && roundedTime <= nextBlockStartTime) {\r\n\t\t\t\t\tsetCurrentParagraph(midPoint)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\telse if (blockStartTime < roundedTime) first = midPoint + 1\r\n\t\t\t\telse last = midPoint - 1\r\n\r\n\t\t\t}\r\n\t\t\telse return\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (rightSideCurrentPage === 2) defineCurrentParagraph()\r\n\t}, [rightSideCurrentPage])\r\n\r\n\tfunction defineCurrentParagraphLight() {\r\n\t\tif (currentParagraph !== (currentSongData.lyrics.length - 1) && parseFloat(currentSongData.lyrics[currentParagraph + 1].startTime) <= songRef.current.currentTime) {\r\n\t\t\treturn setCurrentParagraph(currentParagraph + 1)\r\n\t\t}\r\n\t}\r\n\tfunction playing(event) {\r\n\t\tsetCurrentTime(event.target.currentTime)\r\n\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer && openMenu) defineCurrentParagraphLight()\r\n\t\tsetInputRange((event.target.currentTime / songDuration) * 100)\r\n\t}\r\n\r\n\tasync function nextSong() {\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue + 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\taddSongToHistory(currentSongId, currentUser)\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tasync function prevSong() {\r\n\t\tif (currentTime > 5) {\r\n\t\t\tsongRef.current.currentTime = 0\r\n\t\t\tsetCurrentTime(0)\r\n\t\t\tsetCurrentParagraph(0)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet correctSongNumber = checkNumber(currentSongInQueue - 1, currentSongQueue.length - 1)\r\n\t\tlet currentSongId = await (await firestore.collection('songs').doc(currentSongQueue[correctSongNumber].id).get()).data().id\r\n\t\taddSongToHistory(currentSongId, currentUser)\r\n\t\tsetCurrentParagraph(0)\r\n\t\tsetCurrentSong(currentSongId)\r\n\t\tsetCurrentSongInQueue(checkNumber(correctSongNumber, currentSongQueue.length - 1))\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: currentSongId\r\n\t\t})\r\n\t}\r\n\r\n\tfunction changeCurrentTime(event, startTime = 0) {\r\n\t\tif (event.target.localName === 'div' || event.target.localName === \"p\") {\r\n\t\t\tif (startTime !== undefined) {\r\n\t\t\t\tsetCurrentTime(startTime)\r\n\t\t\t\tsongRef.current.currentTime = startTime\r\n\t\t\t\tsetInputRange((startTime / songDuration) * 100)\r\n\t\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) setCurrentParagraph(parseInt(event.target.id))\r\n\t\t\t\tsongRef.current.play()\r\n\t\t\t\tsetPlay(true)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetCurrentTime(event.target.value)\r\n\t\t\tsongRef.current.currentTime = event.target.value\r\n\t\t\tsetInputRange((event.target.value / songDuration) * 100)\r\n\t\t\tif (isThereKaraoke && rightSideCurrentPage === 2 && openFullScreenPlayer) defineCurrentParagraph()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction displayAuthors(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false) }}>{el.displayName}</Link>{(i === authorsList.length - 1 ? \"\" : separatingSign)}\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tfunction displayAuthorsFull(authorsList = currentSongData.authors, separatingSign = \" & \") {\r\n\t\treturn (\r\n\t\t\tauthorsList.map((el, i) => {\r\n\t\t\t\treturn <>\r\n\t\t\t\t\t<Link to={`/authors/${el.uid}`} key={el.uid} onClick={(e) => { e.stopPropagation(); setOpenFullScreenPlayer(false); setOpenModal(false) }}>\r\n\t\t\t\t\t\t<PersonTiny data={el} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</>\r\n\t\t\t})\r\n\t\t)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = currentSongData.name || 'Soundbubble'\r\n\t}, [currentSongData.name])\r\n\treturn (\r\n\t\t<SongContext.Provider value={\r\n\t\t\t{\r\n\t\t\t\tyourSongs,\r\n\t\t\t\tsetYourSongs,\r\n\t\t\t\tyourPlaylists,\r\n\t\t\t\tyourFriends,\r\n\t\t\t\tcurrentSongQueue,\r\n\t\t\t\tcurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongPlaylistSource,\r\n\t\t\t\tsetCurrentSongQueue,\r\n\t\t\t\tsetCurrentSongInQueue,\r\n\t\t\t\tplay,\r\n\t\t\t\tsetPlay,\r\n\t\t\t\tsongSrc: currentSongData.songSrc,\r\n\t\t\t\tcurrentTime,\r\n\t\t\t\tsetCurrentTime,\r\n\t\t\t\tsongDuration,\r\n\t\t\t\tsongRef,\r\n\t\t\t\tname: currentSongData.name,\r\n\t\t\t\tauthors: currentSongData.authors,\r\n\t\t\t\tlyrics: currentSongData.lyrics,\r\n\t\t\t\tcover: currentSongData.cover,\r\n\t\t\t\timgColors,\r\n\t\t\t\tsetImgColors,\r\n\t\t\t\tcurrentSong,\r\n\t\t\t\tsetCurrentSong,\r\n\t\t\t\trepeatMode,\r\n\t\t\t\tsetRepeatMode,\r\n\t\t\t\tshuffleMode,\r\n\t\t\t\tsetShuffleMode,\r\n\t\t\t\tinputRef,\r\n\t\t\t\tleftSideBarInputRef,\r\n\t\t\t\tisThereKaraoke,\r\n\t\t\t\trightSideCurrentPage,\r\n\t\t\t\tcurrentParagraph,\r\n\t\t\t\tcurrentParagraphRef,\r\n\t\t\t\tnextSong,\r\n\t\t\t\tprevSong,\r\n\t\t\t\tplaySong,\r\n\t\t\t\tplaying,\r\n\t\t\t\tdefineCurrentParagraph,\r\n\t\t\t\tsetRightSideCurrentPage,\r\n\t\t\t\tchangeCurrentTime,\r\n\t\t\t\tdisplayAuthors,\r\n\t\t\t\tdisplayAuthorsFull,\r\n\t\t\t\topenFullScreenPlayer,\r\n\t\t\t\tsetOpenFullScreenPlayer,\r\n\t\t\t\tloadSongData,\r\n\t\t\t\tfetchYourSongs,\r\n\t\t\t\tsetOpenMenu,\r\n\t\t\t\topenMenu,\r\n\t\t\t\tcurrentSongData,\r\n\t\t\t\tsetCurrentSongData,\r\n\t\t\t\tsetIsThereKaraoke,\r\n\t\t\t\tsetYourPlaylists,\r\n\t\t\t\tyourAuthors,\r\n\t\t\t\tsetYourAuthors,\r\n\t\t\t\tinputRange\r\n\t\t\t}\r\n\t\t}>\r\n\t\t\t{!loading ?\r\n\t\t\t\tchildren :\r\n\t\t\t\t<LoadingData />\r\n\t\t\t}\r\n\t\t</SongContext.Provider>\r\n\t)\r\n}\r\n","export function checkKaraoke(lyrics) {\r\n\tif (lyrics !== undefined && lyrics.length === 0) return false\r\n\r\n\tif (lyrics !== undefined) {\r\n\t\tif (lyrics[0].startTime === 'undefined') return false\r\n\t}\r\n\r\n\treturn true\r\n}\r\n","export const LOGIN_ROUTE = '/login'\r\nexport const SIGNUP_ROUTE = '/signup'\r\nexport const HOME_ROUTE = '/home'\r\nexport const LIBRARY_ROUTE = '/library'\r\nexport const SEARCH_ROUTE = '/search'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const NOTFOUND_ROUTE = '/not-found'\r\nexport const HISTORY_ROUTE = '/history'\r\n\r\nexport const TEMPLATE_CHAT = '/chat/:chatId'\r\nexport const TEMPLATE_ALBUM = '/albums/:albumId'\r\nexport const TEMPLATE_AUTHOR = '/authors/:authorId'","import React from 'react'\r\n\r\nexport const ErrorPlate = ({errorMessage}) => {\r\n\treturn errorMessage && (\r\n\t\t<div className=\"Alert\">\r\n\t\t\t{errorMessage}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const FullScreenLoading = ({loading}) => {\r\n\treturn (\r\n\t\t<div className = \"FullScreenLoading\" style = {loading?{}:{opacity:'0', visibility:'hidden'}}>\r\n\t\t\t<img loading = \"lazy\" src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const BlurredBg = () => {\r\n\treturn (\r\n\t\t<div className = \"BlurredBg\">\r\n\t\t\t<div className=\"circle circle1\"></div>\r\n\t\t\t<div className=\"circle circle2\"></div>\r\n\t\t\t<div className=\"circle circle3\"></div>\r\n\t\t\t<div className=\"circle circle4\"></div>\r\n\t\t\t<div className=\"circle circle5\"></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nexport const TitleAndLogo = ({title}) => {\r\n\treturn (\r\n\t\t<div className=\"titleAndLogo\">\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<h1>{title}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const RadioBtn = ({currentActive, id, label, onClick}) => {\r\n\treturn (\r\n\t\t<div className = \"RadioBtn\" id = {id} onClick = {onClick}>\r\n\t\t\t<span className = \"radioLabel\" style = {currentActive === id?{color:'var(--blue)', opacity:1, fontWeight:'bold'}:{}}>\r\n\t\t\t\t{label}\r\n\t\t\t</span>\r\n\t\t\t<span className = \"radioCircle\" style = {currentActive === id?{background:'var(--blue)'}:{}}></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport { AddToListCircle } from '../Tools/AddToListCircle'\r\n\r\nexport const AuthorItemBig = ({data, listOfChosenAuthors, setListOfChosenAuthors}) => {\r\n\treturn (\r\n\t\t<Link to = {`/authors/${data.uid}`} className = \"AuthorItemBig\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAuthors} setListOfChosenItems = {setListOfChosenAuthors} itemId = {data.uid}/>\r\n\t\t\t<div >\r\n\t\t\t\t<div className = \"AuthorItemBigImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={data.photoURL} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3>{data.displayName}</h3>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","export default function shortWord(word, len = 50){\r\n\treturn word.substr(0, len) + (word.length > len?\"...\":\"\")\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\n\r\nconst ScreenContext = React.createContext()\r\n\r\nexport const useScreen = () =>{\r\n\treturn useContext(ScreenContext)\r\n}\r\n\r\nexport const ScreenProvider = ({children}) => {\r\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth)\r\n\tconst [screenHeight, setScreenHeight] = useState(window.innerHeight)\r\n\tconst [isMobile, setIsMobile] = useState(window.innerWidth < 1000)\r\n\tfunction handleResize() {\r\n\t\tsetScreenWidth(window.innerWidth)\r\n\t\tsetScreenHeight(window.innerHeight)\r\n\t\tsetIsMobile(window.innerWidth < 1000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('resize', handleResize)\r\n\t\treturn ()=>{\r\n\t\t\twindow.removeEventListener('resize', handleResize)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst value = {\r\n\t\tscreenWidth,\r\n\t\tscreenHeight,\r\n\t\tisMobile\r\n\t}\r\n\treturn (\r\n\t\t<ScreenContext.Provider value = {value}>\r\n\t\t\t{children}\r\n\t\t</ScreenContext.Provider>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const usePlaylistSongs = (playlist, playlistSongs, setPlaylistSongs) => {\r\n\tconst {currentSongPlaylistSource, playSong, setCurrentSongQueue, setCurrentSong, setPlay, songRef, setCurrentSongInQueue, setCurrentSongPlaylistSource} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tsetPlaylistSongs([])\r\n\t\tif (playlist.length !== 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tlet albumSong = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetPlaylistSongs(prev => [...prev, albumSong])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playChosenPlaylist(e) {\r\n\t\te.preventDefault()\r\n\t\tif (currentSongPlaylistSource.name === playlist.name) {\r\n\t\t\tplaySong()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfetchSongsInAlbum()\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (playlistSongs.length) {\r\n\t\t\tconst source = { source: `/albums/${playlist.id}`, name: playlist.name, image: playlist.image, songsList: playlistSongs }\r\n\t\t\tconst listSongsIds = playlistSongs.map(song => song.id)\r\n\t\t\tsetCurrentSongQueue(playlistSongs)\r\n\t\t\tsetCurrentSongInQueue(0)\r\n\t\t\tsetCurrentSong(playlistSongs[0].id)\r\n\t\t\tsongRef.current.play()\r\n\t\t\tsetPlay(true)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastSongPlayed: playlistSongs[0].id,\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [playlistSongs.length])\r\n\r\n\treturn playChosenPlaylist\r\n}\r\n","import React from 'react'\r\nimport Logo from '../../images/Logo3.svg'\r\nexport const DeletedPlaylist = () => {\r\n\treturn (\r\n\t\t<div style={{ textDecoration: 'none' }} className=\"playlistWrapper\">\r\n\t\t\t<div className=\"playlistItem\" style={{ background: `var(--playlistsColor)`, display:'flex', justifyContent:'center', alignItems:'center' }}>\r\n\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" style = {{width:'70px', height:'70px', filter:'grayscale(80%)'}}/>\r\n\t\t\t</div>\r\n\t\t\t<h4 style={{ display: 'flex', alignItems: 'center', margin: '5px 0' }}>\r\n\t\t\t\tPlaylist was deleted\r\n\t\t\t</h4>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport {HiPause, HiPlay} from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddToListCircle } from '../Tools/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { DeletedPlaylist } from '../Playlist/DeletedPlaylist'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nexport const PlaylistItem = ({playlist = null, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst playlistDate = new Date(playlist?.creationDate)\r\n\tconst {isMobile} = useScreen()\r\n\tconst {currentSongPlaylistSource, play} = useSong()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\treturn playlist !== null?(\r\n\t\t<Link to={`/albums/${playlist.id}`} style = {{textDecoration:'none'}} className = \"playlistWrapper\">\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenAlbums} setListOfChosenItems = {setListOfChosenAlbums} itemId = {playlist.id}/>\r\n\t\t\t<div className=\"playlistItem\" style = {playlist.image?{backgroundImage:`url(${playlist.image})`}:{background:'var(--yellowAndPinkGrad)'}}>\r\n\t\t\t\t{!playlist.image?<BiAlbum style = {{position:'absolute', left:'50%', top:'50%', transform:'translate(-50%, -50%)', width:'60px', height:'60px'}}/>:null}\r\n\t\t\t\t{!isMobile?<button onClick = {playSongsInPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play?<HiPause/>:<HiPlay/>}\r\n\t\t\t\t</button>:null}\r\n\t\t\t</div>\r\n\t\t\t<h4 style = {{display:'flex', alignItems:'center', margin:'5px 0'}}>\r\n\t\t\t\t{shortWord(playlist.name, isMobile?10:15)} \r\n\t\t\t\t<span style = {{fontSize:\".6em\", opacity:.6, fontWeight:'500', marginLeft:'7px'}}>\r\n\t\t\t\t\t{playlist.isAlbum?playlist.songs.length === 1?\"single\":'album':'playlist'}\r\n\t\t\t\t</span>\r\n\t\t\t</h4>\r\n\t\t\t<h5 style = {{margin:'5px 0'}}>{playlistDate.getFullYear()}</h5>\r\n\t\t</Link>\r\n\t):<DeletedPlaylist/>\r\n}\r\n","import React from 'react'\r\n\r\nexport const ColorCircles = ({play}) => {\r\n\treturn (\r\n\t\t<div className = 'ColorCircles' style = {!play?{opacity:0, transform:\"scale(.95)\"}:{}}>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t\t<span className = \"colorCircle\"></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function rightFormanForBigNumber(number){\r\n\tif(number < 1000) return number\r\n\r\n\tif(number < 1000000) return parseFloat(number/1000).toFixed(1) + 'K'\r\n\r\n\tif(number < 1000000000) return parseFloat(number / 1000000).toFixed(1) + 'M'\r\n}","import React, { useEffect } from 'react'\r\n\r\nexport const useOutsideClick = (ref, setFunc) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tsetFunc(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n}\r\n","export default function filterArrayWithArray(whatToFilter, withWhatToFilter){\r\n\treturn whatToFilter.filter(\r\n\t\tfunction (e) {\r\n\t\t\treturn this.indexOf(e) < 0;\r\n\t\t},\r\n\t\twithWhatToFilter\r\n\t);\r\n}","import { firestore } from \"../../firebase\"\r\nimport filterArrayWithArray from \"./filterArrayWithArray\"\r\n\r\nexport const deleteSongFromLibrary = (e, song, currentUser, yourSongs) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = [] // массив авторов, песни которых еще остались после удаления выбранной песни\r\n\tlet newList = currentUser.addedSongs.filter(songNum => songNum !== song.id)\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tyourSongs.forEach(songObj => {\r\n\t\t\tif (newList.includes(songObj.id) && songObj.authors.find(a => a.uid === authorId)) {\r\n\t\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst filtered = filterArrayWithArray(songAuthorsUIDS, finalAuthorsUIDS) // массив людей, которых нужно убрать из библиотеки\r\n\tconst finalFilteredAuthors = filterArrayWithArray(currentUser.addedAuthors, filtered) // массив людей, оставшихся в библиотеке\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: finalFilteredAuthors\r\n\t})\r\n\r\n\tfiltered.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers--\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n\t\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const addSongToLibrary = (e, song, currentUser, setCurrentUser) => {\r\n\te.stopPropagation()\r\n\tconst songAuthorsUIDS = song.authors.map(author => author.uid)\r\n\tconst finalAuthorsUIDS = []\r\n\tsongAuthorsUIDS.forEach(authorId => {\r\n\t\tif (!currentUser.addedAuthors.includes(authorId)) {\r\n\t\t\tfinalAuthorsUIDS.push(authorId)\r\n\t\t}\r\n\t})\r\n\tlet newList = currentUser.addedSongs\r\n\tnewList.push(song.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedSongs: newList,\r\n\t\taddedAuthors: [...finalAuthorsUIDS, ...currentUser.addedAuthors]\r\n\t})\r\n\r\n\tfinalAuthorsUIDS.forEach(async authorId=>{\r\n\t\tlet subscribers = (await firestore.collection('users').doc(authorId).get()).data().subscribers\r\n\t\tsubscribers++\r\n\t\tfirestore.collection('users').doc(authorId).update({\r\n\t\t\tsubscribers: subscribers\r\n\t\t})\r\n\t})\r\n}","import shortWord from \"../other/shortWord\"\r\n\r\nexport const displayAuthorsStr = (authorslist, separator = ' & ', lenLimit = 100) =>{\r\n\tconst authorsString = authorslist?.map(author=>author.displayName).join(separator)\r\n\treturn authorsString?shortWord(authorsString, lenLimit):\"\"\r\n}","import React from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\n\r\nexport const Hint = ({text, direction = \"top\", ...restProps}) => {\r\n\tconst {isMobile} = useScreen()\r\n\treturn !isMobile?(\r\n\t\t<div className = {\"Hint \" + direction} {...restProps}>\r\n\t\t\t<h5>{text}</h5>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { useAuth } from \"../../contexts/AuthContext\"\r\nimport { addSongToLibrary } from \"../../functions/add/addSongToLibrary\"\r\nimport { deleteSongFromLibrary } from \"../../functions/other/deleteSongFromLibrary\"\r\nimport {FiPlusCircle, FiX} from 'react-icons/fi'\r\nimport { useSong } from \"../../contexts/SongContext\"\r\nimport { useModal } from \"../../contexts/ModalContext\"\r\nexport default function AddOrDeleteButtonFull({song}) {\r\n\tconst {currentUser} = useAuth()\r\n\tconst {yourSongs} = useSong()\r\n\tconst {openConfirm, setOpenModal} = useModal()\r\n\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\treturn <span onClick={(e) => addSongToLibrary(e, song, currentUser)}>\r\n\t\t\t<FiPlusCircle />\r\n\t\t\tAdd\r\n\t\t</span>\r\n\t}\r\n\telse {\r\n\t\treturn <span onClick = {(e)=>{e.stopPropagation();setOpenModal(false);openConfirm(\"You sure you want to delete this song from library?\", \"Yes, delete it\", \"No, just kidding\", (e) => deleteSongFromLibrary(e, song, currentUser, yourSongs))}}>\r\n\t\t\t<FiX />\r\n\t\t\tDelete\r\n\t\t</span>\r\n\t}\r\n}","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useAddOrDeleteSong = (playlistId, songId) => {\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [isAdded, setIsAdded] = useState(false)\r\n\tconst { currentUser } = useAuth()\r\n\tconst { currentSong } = useSong()\r\n\tconst songData = songId || currentSong\r\n\t\tuseEffect(() => {\r\n\t\t\tconst response = firestore.collection('playlists').doc(playlistId).onSnapshot(res => {\r\n\t\t\t\tif(res.exists) setPlaylistSongs(res.data().songs)\r\n\t\t\t})\r\n\t\t\treturn () => response()\r\n\t\t}, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsAdded(playlistSongs.includes(songData))\r\n\t}, [playlistSongs, songData])\r\n\r\n\tfunction addOrDelete() {\r\n\t\tif (playlistSongs.length > 0 && playlistId !== undefined) {\r\n\t\t\tif (playlistSongs.includes(songData)) {\r\n\t\t\t\tconst newSongsList = playlistSongs.filter(songNum => songNum !== songData)\r\n\t\t\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\t\t\tsongs: newSongsList\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst newSongsList = playlistSongs\r\n\t\t\tnewSongsList.unshift(songData)\r\n\t\t\tfirestore.collection('playlists').doc(playlistId).update({\r\n\t\t\t\tsongs: newSongsList\r\n\t\t\t})\r\n\r\n\t\t\tconst sortedPlaylists = [playlistId, ...currentUser.ownPlaylists.filter(id => id !== playlistId)]\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\townPlaylists: sortedPlaylists\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn [addOrDelete, isAdded]\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiPlusCircle } from 'react-icons/fi'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const AddToPlaylistItem = ({playlist, song}) => {\r\n\tconst [addFunc, isAdded] = useAddOrDeleteSong(playlist.id, song.id)\r\n\treturn (\r\n\t\t<div className=\"songItemMenuWindowItem\" onClick={addFunc}>\r\n\t\t\t{!isAdded ? <>\r\n\t\t\t\t<Hint text={`Add \"${song.name}\" to playlist`} />\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</> :\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Hint text={`Remove ${song.name} from playlist`} />\r\n\t\t\t\t\t<FiCheck />\r\n\t\t\t\t</>}\r\n\t\t\t{playlist.name}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { AddToPlaylistItem } from '../Playlist/AddToPlaylistItem'\r\nexport const AddToPlaylists = ({ song }) => {\r\n\tconst { yourPlaylists, currentSongData } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\t\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tuseEffect(() => {\r\n\t\tif (song?.id) {\r\n\t\t\tsetSongData(song)\r\n\t\t}\r\n\t}, [song?.id])\r\n\treturn (\r\n\t\t<div className=\"AddToPlaylists\">\r\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t{yourPlaylists.length ? yourPlaylists.map((playlist, key) => {\r\n\t\t\t\t\tif (currentUser.ownPlaylists.includes(playlist.id)) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<AddToPlaylistItem playlist = {playlist} song = {songData}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}) : <div className = \"songItemMenuWindowItem\">No playlists created</div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function getUID() {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\tconst piece = (Math.random() * 16) | 0;\r\n\t\tconst elem = c === 'x' ? piece : (piece & 0x3) | 0x8;\r\n\t\treturn elem.toString(16);\r\n\t});\r\n}\r\n","import { firestore } from \"../../firebase\"\r\nimport getUID from \"../other/getUID\"\r\n\r\nexport const createChat = async ( participants, chatUID = getUID(), chatName = \"\", chatImage = \"\", admins = [], imageColors = []) => {\r\n\tfirestore.collection('chats').doc(chatUID).set({\r\n\t\tchatImage:chatImage,\r\n\t\tchatName:chatName,\r\n\t\tid:chatUID,\r\n\t\tmessages:[],\r\n\t\tparticipants:participants,\r\n\t\twallpaper:'undefined',\r\n\t\tadmins:participants.length > 2? admins:[],\r\n\t\ttyping:[],\r\n\t\timageColors:imageColors\r\n\t})\r\n\r\n\tparticipants.map(async personId=>{\r\n\t\tlet chatInfo = (await firestore.collection('users').doc(personId).get()).data().chats\r\n\t\tchatInfo.push(chatUID)\r\n\t\tfirestore.collection('users').doc(personId).update({\r\n\t\t\tchats:chatInfo\r\n\t\t})\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\nimport getUID from \"../other/getUID\"\r\n\r\nexport const findChatURL = async (allParticipants, currentUser, setShouldCreate, setFriendChatId) => {\r\n\tlet foundChat = false\r\n\tlet chatId = 0\r\n\tif (currentUser.chats) {\r\n\t\t// Принцип работы таков: он ищет все чаты, в которых есть юзер. Затем он проходит по ним. Затем он проходит по выбранным друзьям\r\n\t\t// Если он находит, что друг есть в списке участников чата, добавляет к count 1, если нет, сразу выходит из цикла учатсников\r\n\t\t// После завершения цикла он проверяет, если количество совпадений + 1 (потому что в массив друзей не входит сам пользователь) равно\r\n\t\t// длине конкретного чата и если количество совпадений равно длине поступившего изначально массива участников, тогда нужный чат найден\r\n\t\tconst chatsWhereUserIn = await firestore.collection('chats').where('participants', 'array-contains', currentUser.uid).get()\r\n\t\tchatsWhereUserIn.docs.forEach(chat=>{\r\n\t\t\tlet count = 0\r\n\t\t\tallParticipants.every(personId=>{\r\n\t\t\t\tif(chat.data().participants.includes(personId)){\r\n\t\t\t\t\tcount++\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\telse return false\r\n\t\t\t})\t\t\t\r\n\t\t\tif(count + 1 === chat.data().participants.length && count === allParticipants.length){\r\n\t\t\t\tfoundChat = true\r\n\t\t\t\tsetShouldCreate(false)\r\n\t\t\t\tsetFriendChatId(chat.data().id)\r\n\t\t\t\tchatId = chat.data().id\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\telse return true\r\n\t\t})\r\n\r\n\t\tif (!foundChat) {\r\n\t\t\tconst random = getUID()\r\n\t\t\tfoundChat = true\r\n\t\t\tsetShouldCreate(true)\r\n\t\t\tsetFriendChatId(random)\r\n\t\t\tchatId = random\r\n\t\t}\r\n\t\treturn chatId\r\n\t}\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const sendMessage = (chatId, chatData, sender, messageText, attachedSongs = [], attachedAlbums = [], attachedAuthors = [], inResponseToMessage) => {\r\n\tif (messageText.trim().length !== 0 || attachedSongs.length !== 0 || attachedAlbums.length !== 0 || attachedAuthors.length !== 0) {\r\n\t\tconst tempMessages = chatData?.messages || []\r\n\r\n\t\ttempMessages.push({\r\n\t\t\tid: tempMessages.length,\r\n\t\t\tsender: sender,\r\n\t\t\tmessage: messageText,\r\n\t\t\tsentTime: new Date().toString(),\r\n\t\t\tinResponseToMessage: inResponseToMessage || null,\r\n\t\t\tattachedSongs: attachedSongs,\r\n\t\t\tattachedAlbums: attachedAlbums,\r\n\t\t\tattachedAuthors: attachedAuthors,\r\n\t\t\tseenBy: [sender]\r\n\t\t})\r\n\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\tmessages: tempMessages\r\n\t\t})\r\n\t}\r\n}","import { firestore } from \"../../firebase\";\r\nimport { createChat } from \"../create/createChat\";\r\nimport { findChatURL } from \"../find/findChatURL\";\r\nimport getUID from \"./getUID\";\r\nimport { sendMessage } from \"./sendMessage\";\r\n\r\nexport default function shareWithFriends(shareList, currentUser, itemId, whatToShare, messageText = \"\", setShouldCreate = () => null, setFriendChatId = () => null) {\r\n\t//Сделать через функцию sendMessage\r\n\tshareList.map(async userId => {\r\n\t\t//Сортировка по последнему отправлению\r\n\t\tconst sortedFriends = [{ uid: userId, status: 'added' }, ...currentUser.friends.filter(obj => obj.uid !== userId)]\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends: sortedFriends\r\n\t\t})\r\n\t\tPromise.resolve(findChatURL([userId], currentUser, ()=>null, setFriendChatId)).then(async chatId => {\r\n\t\t\tlet chatData = (await firestore.collection('chats').doc(chatId).get()).data()\r\n\t\t\tif (chatData !== undefined) {\r\n\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcreateChat([currentUser.uid, userId], chatId).then(async () => {\r\n\t\t\t\t\tchatData = (await firestore.collection('chats').doc(chatId).get()).data()\r\n\t\t\t\t\tsetShouldCreate(false)\r\n\t\t\t\t\tswitch (whatToShare) {\r\n\t\t\t\t\t\tcase \"song\":\r\n\t\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlist\":\r\n\t\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"author\":\r\n\t\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [], [], [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, [itemId])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\r\n}","import React from 'react'\r\n\r\nexport const LoadingCircle = ({top = '20%'}) => {\r\n\treturn (\r\n\t\t<div className = \"LoadingCircle\" style = {{top:top}}>\r\n\t\t\t<img loading = \"lazy\" src=\"https://icon-library.com/images/spinner-icon-gif/spinner-icon-gif-28.jpg\" alt=\"\"/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiSearch, FiXCircle } from 'react-icons/fi'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { useFindSomething } from '../../hooks/useFindSomething'\r\nexport const SearchBar = ({ value, setValue, setAllFoundSongs, setResultPlaylists, setResultAuthorList, focus = false, defaultSearchMode = undefined, inputText = \"Search for songs or for people\", defaultSongsListValue, defaultAuthorsListValue, defaultPlaylistsListValue }) => {\r\n\r\n\tconst [searchMode, setSearchMode] = useState(0)\r\n\tconst inputRef = useRef(null)\r\n\tconst [findSomething, message, loading, foundAnything] = useFindSomething(\r\n\t\tvalue,\r\n\t\tsetAllFoundSongs,\r\n\t\tsetResultAuthorList,\r\n\t\tsetResultPlaylists,\r\n\t\tdefaultSearchMode,\r\n\t\tsearchMode,\r\n\t\tdefaultSongsListValue,\r\n\t\tdefaultAuthorsListValue,\r\n\t\tdefaultPlaylistsListValue\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (focus) inputRef.current.focus()\r\n\t}, [])\r\n\r\n\r\n\treturn (\r\n\t\t<div style={{ marginTop: '10px', width: '100%' }} className = \"searchBarWrapper\">\r\n\t\t\t<div className=\"searchBar\">\r\n\t\t\t\t<div className=\"searchBarElement\">\r\n\t\t\t\t\t<FiSearch />\r\n\t\t\t\t\t<span onClick={() => value.length ? setValue(\"\") : null}>{value.length ? <FiXCircle /> : null}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={inputText}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={(e) => setValue(e.target.value)}\r\n\t\t\t\t\tonKeyDown={e => { if (e.key === 'Enter') findSomething() }}\r\n\t\t\t\t\tref={inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"searchFilters\" style={defaultSearchMode !== undefined ? { display: 'none' } : {}}>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(0)} style={searchMode === 0 ? { background: 'var(--lightBlue)' } : {}}>All</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(1)} style={searchMode === 1 ? { background: 'var(--lightBlue)' } : {}}>Songs</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(2)} style={searchMode === 2 ? { background: 'var(--lightBlue)' } : {}}>Authors</button>\r\n\t\t\t\t\t<button onClick={() => setSearchMode(3)} style={searchMode === 3 ? { background: 'var(--lightBlue)' } : {}}>Playlists</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t{loading ?\r\n\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px', marginTop: '40px' }}>\r\n\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t!foundAnything && value.length !== 0 ? <h2>Not found</h2> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase';\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList';\r\nimport normalizeString from '../functions/other/normalizeString';\r\n\r\nexport const useFindSomething = (value, setAllFoundSongs, setResultAuthorList, setResultPlaylists, defaultSearchMode, searchMode, defaultSongsListValue, defaultAuthorsListValue, defaultPlaylistsListValue) => {\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [foundAnything, setFoundAnything] = useState(false)\r\n\tasync function findItem(place, defaultList = [], setList) {\r\n\t\tconst foundItemTempArray = []\r\n\t\tlet normalizedSearch = normalizeString(value);\r\n\t\tconst itemsList = await firestore.collection('search').where('variantsOfName', \"array-contains\", normalizedSearch).get();\r\n\t\titemsList.docs.forEach(async item => {\r\n\t\t\tconst itemData = item.data()\r\n\t\t\tif (itemData.place === place) {\r\n\t\t\t\tconst realData = (await firestore.collection(itemData.place).doc(itemData.uid).get()).data()\r\n\t\t\t\tif (defaultList !== undefined && defaultList.length) {\r\n\t\t\t\t\tif (defaultList.map(song => song.id || song.uid).includes(itemData.uid)) foundItemTempArray.push(realData)\r\n\t\t\t\t}\r\n\t\t\t\telse if (!realData.isPrivate) foundItemTempArray.push(realData)\r\n\t\t\t\tif (defaultSearchMode === undefined && searchMode === 0 && foundItemTempArray.length !== 0) {\r\n\t\t\t\t\tsetList(foundItemTempArray)\r\n\t\t\t\t\tswitch (itemData.place) {\r\n\t\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\t\tfor (let i = 0; i < foundItemTempArray.length; i++) {\r\n\t\t\t\t\t\t\t\tconst authorsIdsArray = realData.authors\r\n\t\t\t\t\t\t\t\tfetchItemsList(authorsIdsArray.map(author => author.uid), 'users', setResultAuthorList, (res) => res.sort((a, b) => b.subscribers - a.subscribers), undefined, undefined, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"users\":\r\n\t\t\t\t\t\t\tfor (let i = 0; i < foundItemTempArray.length; i++) {\r\n\t\t\t\t\t\t\t\tconst songsIdsArray = realData.ownSongs\r\n\t\t\t\t\t\t\t\tconst albumsIdsArray = realData.ownPlaylists\r\n\t\t\t\t\t\t\t\tfetchItemsList(songsIdsArray, 'songs', setAllFoundSongs, (res) => res.sort((a, b) => b.listens - a.listens), () => null, 3, 1)\r\n\t\t\t\t\t\t\t\tfetchItemsList(albumsIdsArray, 'playlists', setResultPlaylists, (res) => res.sort((a, b) => b.listens - a.listens), () => null, 3, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\t\tfor (let i = 0; i < foundItemTempArray.length; i++) {\r\n\t\t\t\t\t\t\t\tconst authorsIdsArray = realData.authors\r\n\t\t\t\t\t\t\t\tfetchItemsList(authorsIdsArray.map(author => author.uid), 'users', setResultAuthorList, (res) => res.sort((a, b) => b.subscribers - a.subscribers), undefined, undefined, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsetMessage('Wrong search mode')\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (foundItemTempArray.length !== 0) {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\tsetFoundAnything(true)\r\n\t\t\t\t\tsetList(foundItemTempArray)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t\tif (foundItemTempArray.length === 0) { setList([]); setFoundAnything(false) }\r\n\t}\r\n\tfunction findSomething() {\r\n\t\tif (value.length !== 0) {\r\n\t\t\tsetLoading(true)\r\n\t\t\tsetFoundAnything(false)\r\n\t\t\tif (defaultSearchMode === undefined) {\r\n\t\t\t\tif (searchMode === 0 || searchMode === 1) {\r\n\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 2) {\r\n\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t\tsetResultPlaylists([])\r\n\t\t\t\t}\r\n\t\t\t\tif (searchMode === 0 || searchMode === 3) {\r\n\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\tsetResultAuthorList([])\r\n\t\t\t\t\tsetAllFoundSongs([])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tswitch (defaultSearchMode) {\r\n\t\t\t\t\tcase \"songs\":\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"playlists\":\r\n\t\t\t\t\t\tfindItem('playlists', defaultPlaylistsListValue, setResultPlaylists)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"authors\":\r\n\t\t\t\t\t\tfindItem('users', defaultAuthorsListValue, setResultAuthorList)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tfindItem('songs', defaultSongsListValue, setAllFoundSongs)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (value.length === 0) {\r\n\t\t\tif (defaultSongsListValue !== undefined) setAllFoundSongs(defaultSongsListValue)\r\n\t\t\tif (defaultAuthorsListValue !== undefined) setResultAuthorList(defaultAuthorsListValue)\r\n\t\t\tif (defaultPlaylistsListValue !== undefined) setResultPlaylists(defaultPlaylistsListValue)\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}, [value])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSomething()\r\n\t}, [searchMode])\r\n\r\n\treturn [findSomething, message, loading, foundAnything]\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { IoIosCheckmarkCircleOutline } from 'react-icons/io'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shareWithFriends from '../../functions/other/shareWithManyFriends'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const FriendsListToShareWith = ({ item, whatToShare = 'song' }) => {\r\n\tconst { yourFriends } = useSong()\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [shared, setShared] = useState(false)\r\n\tconst { toggleModal } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [foundPeople, setFoundPeople] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (shared) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleModal()\r\n\t\t\t\tsetShared(false)\r\n\t\t\t}, 1000)\r\n\t\t}\r\n\t}, [shared])\r\n\r\n\r\n\treturn yourFriends.length?(\r\n\t\t<div className='FriendsListToShareWith'>\r\n\t\t\t{shared ?\r\n\t\t\t\t<div className=\"successMessageSent\">\r\n\t\t\t\t\t<IoIosCheckmarkCircleOutline />\r\n\t\t\t\t\tMessage has sent!\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<div style = {{overflowY:'auto', maxHeight:'300px'}}>\t\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundPeople} defaultAuthorsListValue = {yourFriends} defaultSearchMode={\"authors\"} inputText = {\"Search for friends\"}/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{foundPeople.length > 0 ?\r\n\t\t\t\t\t\tfoundPeople.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}):\r\n\t\t\t\t\t\tyourFriends.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} chosenArray={chosenFriends} setChosenArray = {setChosenFriends} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Your message\" style={{ margin: 0 }} onChange={e => setMessageText(e.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"shareBtn\"\r\n\t\t\t\t\tstyle={!chosenFriends.length ?\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t} :\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaxWidth: 'none',\r\n\t\t\t\t\t\t\tbackground: 'var(--purpleAndBlueGrad)'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (chosenFriends.length > 0) {\r\n\t\t\t\t\t\t\tshareWithFriends(chosenFriends, currentUser, (whatToShare === 'author' ? item.uid : item.id), whatToShare, messageText);\r\n\t\t\t\t\t\t\tsetShared(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}>\r\n\t\t\t\t\tShare with {chosenFriends.length} {chosenFriends.length > 1 ? \"friends\" : \"friend\"}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t): <h3 style = {{margin:0}}>No friends added</h3>\r\n}\r\n","\r\nfunction amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nfunction toDateTime(secs) {\r\n\tvar t = new Date(1970, 0, 1); // Epoch\r\n\tt.setSeconds(secs);\r\n\treturn t;\r\n}\r\n\r\nexport default function displayDate(stringDate, displayMode = 0){\r\n\tconst Months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\r\n\tlet newDate = !isNaN(stringDate)?stringDate.seconds?toDateTime(stringDate.seconds + 10800):toDateTime((stringDate/1000) + 10800):new Date(stringDate)\r\n\tif(displayMode === 0){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() \r\n\t}\r\n\r\n\tif(displayMode === 1){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate()\r\n\t}\r\n\r\n\tif(displayMode === 2){\r\n\t\treturn amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n\r\n\tif(displayMode === 3){\r\n\t\treturn Months[newDate.getMonth()] + \" \" + newDate.getDate() + \", \" + newDate.getFullYear() + \" at \" + amountOfZeros(newDate.getHours()) + \":\" + amountOfZeros(newDate.getMinutes())\r\n\t}\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const PersonTinyVerticalItem = ({person}) => {\r\n\tconst {setOpenModal} = useModal()\r\n\treturn (\r\n\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t<div className = \"PersonTinyVerticalItem\" onClick = {()=>setOpenModal(false)}>\r\n\t\t\t\t<div className=\"personTinyImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={person.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"personTinyName\">\r\n\t\t\t\t\t{person.displayName}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiArrowRight } from 'react-icons/fi'\r\n\r\nexport const SeeMoreRoundButton = ({text = \"See more\", ...restProps}) => {\r\n\treturn (\r\n\t\t<div className = \"SeeMoreRoundButton\" {...restProps}>\r\n\t\t\t<button>\r\n\t\t\t\t<FiArrowRight/>\r\n\t\t\t</button>\r\n\t\t\t<span>{text}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\n\r\nexport const TinyPersonsList = ({listOfPeople, title}) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{title?<h2 style = {{marginTop:'0', marginBottom:'7px'}}>{title}</h2>:null}\r\n\t\t\t{listOfPeople.map(person=>{\r\n\t\t\t\treturn <PersonTiny data = {person}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const SongInfo = ({ song }) => {\r\n\tconst { currentSongData } = useSong()\r\n\tconst { setContent } = useModal()\r\n\tconst [songData, setSongData] = useState(song || currentSongData)\r\n\tconst { displayAuthors, yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisSong] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisSong() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisSong([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (friend.addedSongs.includes(songData.id)) setFriendsThatHaveThisSong(prev => [...prev, friend])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (song !== undefined) setSongData(song)\r\n\t}, [song && song.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisSong()\r\n\t}, [songData.id])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${songData.cover})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<h3 style={{ color: songData.imageColors[0] }}>{songData.name}</h3>\r\n\t\t\t\t<span>{displayAuthors(songData.authors, ', ')}</span>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', opacity: '0.6', fontSize: '.9em', position: \"relative\", marginTop:'5px' }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '15px', marginBottom: '0', position: 'relative' }}>{songData.listens} <CgMusicNote /></p>\r\n\t\t\t\t\t<span>{displayDate(songData.releaseDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisSong.length > 0 ? 'Friends that listen that song' : 'None of your friends listens this'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex'}}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 0 ? friendsThatHaveThisSong.map((person, index) => {\r\n\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t}) : <button className=\"shareBtn\" style={{ minHeight: '35px', background: songData.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={songData} whatToShare={'song'} />) }}>Share</button>}\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisSong} title={`Friends listen ${song.name}`} />)} /> : null}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function transformLyricsToArrayOfObjects(lyrics) {\r\n\tconst arrayOfParagraphs = []\r\n\tlet startSubstr = 0\r\n\tfor (let i = 0; i < lyrics.length; i++) {\r\n\t\tif (lyrics[i] === '\\n' || lyrics[i + 1] === undefined) {\r\n\t\t\tarrayOfParagraphs.push({\r\n\t\t\t\tstartTime: 'undefined',\r\n\t\t\t\ttext: lyrics.substr(startSubstr, i - startSubstr)\r\n\t\t\t})\r\n\t\t\tstartSubstr = i + 1\r\n\t\t}\r\n\t}\r\n\treturn arrayOfParagraphs\r\n}","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { firestore } from '../../firebase'\r\nimport { transformLyricsToArrayOfObjects } from '../../functions/other/transformLyricsToArrayOfObject'\r\nexport const EditSong = ({ song }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(song.name)\r\n\tconst [songAuthors, setSongAuthors] = useState(song.authors)\r\n\tconst [songCover, setSongCover] = useState(song.cover)\r\n\tconst [imageColors, setImageColors] = useState(song.imageColors)\r\n\tconst [lyrics, setLyrics] = useState(song.lyrics.map(obj => obj.text).join('\\n'))\r\n\tconst [foundAuthors, setFoundAuthors] = useState([])\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetSongName(song.name)\r\n\t\tsetSongAuthors(song.authors)\r\n\t\tsetSongCover(song.cover)\r\n\t\tsetImageColors(song.imageColors)\r\n\t\tsetLyrics(song.lyrics.map(obj => obj.text).join('\\n'))\r\n\t}, [song.id])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\tfunction updateSong() {\r\n\t\tif (songName.length === 0) {\r\n\t\t\tsetErrorMessage(\"Name shouldn't be empty\")\r\n\t\t}\r\n\t\telse if (songAuthors.length === 0) {\r\n\t\t\tsetErrorMessage(\"Song has to have at least 1 author\")\r\n\t\t}\r\n\t\telse if (songCover.length === 0) {\r\n\t\t\tsetErrorMessage(\"Song has to have cover\")\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (songAuthors.length > song.authors.length) {\r\n\t\t\t\tconst newAuthors = songAuthors.filter(author => { return !song.authors.find(a => a.uid === author.uid) })\r\n\t\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\t\tauthorSongs.push(song.id)\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse if(songAuthors.length < song.authors.length){\r\n\t\t\t\tconst newAuthors = song.authors.filter(author => { return !songAuthors.find(a => a.uid === author.uid) })\r\n\t\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\t\tconst filteredSongs = authorSongs.filter(songId => songId !== song.id)\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\townSongs: filteredSongs\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfirestore.collection('songs').doc(song.id).update(\r\n\t\t\t\t{\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tauthors: songAuthors,\r\n\t\t\t\t\timage: songCover,\r\n\t\t\t\t\timageColors:imageColors,\r\n\t\t\t\t\tlyrics:transformLyricsToArrayOfObjects(lyrics)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = songAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setSongAuthors(filtered)\r\n\t}\r\n\tfunction addAuthor(data) {\r\n\t\tif (!songAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setSongAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"SongInfo\" style={{ flexDirection: 'column', marginBottom: '10px' }}>\r\n\t\t\t\t<h3>Song cover</h3>\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={songCover} alt=\"\" className=\"songImage\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ background: `linear-gradient(-135deg, ${imageColors[0]}, ${imageColors[5]}`, width: '100%', borderRadius: 'var(--standartBorderRadius2)', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n\t\t\t\t\t\t<h4 style={{ color: imageColors[1] }}>{songName}</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t<input type=\"text\" className=\"standartInput\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Authors</h3>\r\n\t\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundAuthors} defaultSearchMode={\"authors\"} />\r\n\t\t\t\t<div className=\"songAuthorsList\">\r\n\t\t\t\t\t{songAuthors.map((author) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t{foundAuthors.map((data, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={songAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Lyrics</h3>\r\n\t\t\t\t<textarea type=\"text\" className=\"standartInput\" style={{ height: '200px', fontWeight:'500' }} value={lyrics} onChange={(e) => setLyrics(e.target.value)} />\r\n\t\t\t</div>\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t<button className=\"addSongBtn\" onClick={updateSong}>Update Song</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { BiEditAlt } from 'react-icons/bi';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { SongInfo } from '../Info/SongInfo'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { EditSong } from '../AdminAndAuthor/EditSong';\r\nexport const SongItemMoreWindow = ({ openMoreWindow, song, moreWindowPosRelativeToViewport }) => {\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\treturn openMoreWindow ? (\r\n\t\t(\r\n\t\t\t<div className=\"songItemMenuWindow\" style={moreWindowPosRelativeToViewport > (window.innerHeight / 2) + 100 ? { top: 'auto', bottom: '110%' } : { top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()}>\r\n\t\t\t\t{currentUser.isAdmin || song.authors.find(el=>el.uid === currentUser.uid) ? <div className=\"songItemMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<EditSong song = {song}/>)}}><BiEditAlt />Edit</div> : null}\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\">\r\n\t\t\t\t\t<div className=\"songItemMenuWindow inner\">\r\n\t\t\t\t\t\t<AddToPlaylists song={song} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<MdPlaylistAdd />Add to playlist <MdKeyboardArrowRight />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t) : null\r\n\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\n\r\nexport const AuthorsList = ({listOfAuthors}) => {\r\n\tconst { displayAuthorsFull } = useSong()\r\n\treturn (\r\n\t\t<div className=\"rightSideAuthorsList\" >\r\n\t\t\t<div className=\"rightSideAuthorsListCentralBlock\">\r\n\t\t\t\t{displayAuthorsFull(listOfAuthors)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiShare, FiInfo, FiFlag, FiUsers } from 'react-icons/fi';\r\nimport { MdPlaylistAdd, MdKeyboardArrowRight } from 'react-icons/md';\r\nimport { BiEditAlt } from 'react-icons/bi';\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport AddOrDeleteButtonFull from '../FullScreenPlayer/AddOrDeleteSongButton'\r\nimport { AddToPlaylists } from '../FullScreenPlayer/AddToPlaylists'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { SongInfo } from '../Info/SongInfo'\r\nimport { AuthorsList } from '../FullScreenPlayer/AuthorsList'\r\nimport { EditSong } from '../AdminAndAuthor/EditSong';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nexport const SongItemMobileMoreWindow = ({ song }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst {currentUser} = useAuth()\r\n\treturn (\r\n\t\t<div className=\"SongItemMobileMoreWindow\">\r\n\t\t\t<div className=\"simpleSongElement\" style = {{background:song.imageColors[0]}}>\r\n\t\t\t\t<div className=\"simpleSongElementImage\" >\r\n\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<span>{song.name}</span>\r\n\t\t\t</div>\r\n\t\t\t{currentUser.isAdmin ? <div className=\"songItemMenuWindowItem\" onClick = {()=>{setContent(<EditSong song = {song}/>)}}><BiEditAlt />Edit</div> : null}\r\n\t\t\t<div className=\"songItemMenuWindowItem\"><AddOrDeleteButtonFull song={song} /></div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick = {()=>setContent(<AddToPlaylists song={song} />)}>\r\n\t\t\t\t<MdPlaylistAdd />Add to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<FriendsListToShareWith item={song} whatToShare={\"song\"} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<SongInfo song={song} />) }}><FiInfo />Info</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(<AuthorsList listOfAuthors={song.authors} title={\"Authors\"} />) }}><FiUsers />Authors</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { ColorCircles } from './colorCircles'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { FiX, FiMoreVertical, FiPlusCircle } from 'react-icons/fi'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { deleteSongFromLibrary } from '../../functions/other/deleteSongFromLibrary'\r\nimport { addSongToLibrary } from '../../functions/add/addSongToLibrary'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { AddToListCircle } from '../Tools/AddToListCircle'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { SongItemMoreWindow } from '../Windows/SongItemMoreWindow'\r\nimport { SongItemMobileMoreWindow } from '../Windows/SongItemMobileMoreWindow'\r\nimport { addSongToHistory } from '../../functions/add/addSongToHistory'\r\nexport const SongItem = ({ song, localIndex, showListens = false, isNewSong = false, listOfChosenSongs, setListOfSongs, position }) => {\r\n\tconst { yourSongs, setCurrentSong, currentSong, displayAuthors, play, songRef, setPlay, setCurrentSongInQueue } = useSong()\r\n\tconst {isMobile} = useScreen()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst [moreWindowPosRelativeToViewport, setMoreWindowPosRelativeToViewport] = useState(0)\r\n\tconst currentItemRef = useRef(null)\r\n\tconst { currentUser, setCurrentUser } = useAuth()\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tuseOutsideClick(currentItemRef, setOpenMoreWindow)\r\n\r\n\tfunction chooseSongItem() {\r\n\t\tsetCurrentSong(song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastSongPlayed: song.id\r\n\t\t})\r\n\t\t\r\n\t\tsetCurrentSongInQueue(localIndex)\r\n\t\tif (song.id === currentSong && play) {\r\n\t\t\tsongRef.current.pause();\r\n\t\t\tsetPlay(false)\r\n\t\t\t// clearTimeout(listenCountTimeOut)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsongRef.current.play();\r\n\t\tsetPlay(true)\r\n\r\n\t\taddSongToHistory(song.id, currentUser)\r\n\t}\r\n\r\n\tfunction openSongItemMoreWindow(e) {\r\n\t\te.stopPropagation()\r\n\t\tsetOpenMoreWindow(!openMoreWindow)\r\n\t\tsetMoreWindowPosRelativeToViewport(position || e.target.getBoundingClientRect().top)\r\n\t}\r\n\r\n\r\n\tfunction showAdditionalInfoIfShould() {\r\n\t\treturn showListens ?\r\n\t\t\t<span style={{ display: 'flex', alignItems: 'center', opacity: .7, fontSize: '.8em' }} className={isNewSong ? \"newSongMarker\" : \"\"}>\r\n\t\t\t\t{rightFormanForBigNumber(song.listens)} <CgMusicNote />\r\n\t\t\t</span> :\r\n\t\t\tisNewSong ?\r\n\t\t\t\t<span style={{ display: 'flex', alignItems: 'center', fontSize: '.7em' }} className={\"newSongMarker\"}>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span> :\r\n\t\t\t\tnull\r\n\t}\r\n\r\n\tfunction addOrDeleteButton() {\r\n\t\tif (!currentUser.addedSongs.includes(song.id)) {\r\n\t\t\treturn <button onClick={(e) => addSongToLibrary(e, song, currentUser, setCurrentUser)} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"add song\"}/>\r\n\t\t\t\t<FiPlusCircle />\r\n\t\t\t</button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn <button onClick = {(e)=>{e.stopPropagation();openConfirm(`You sure you want to delete \"${song.name}\" from library?`, \"Yes, delete it\", \"No, just kidding\", (e) => {deleteSongFromLibrary(e, song, currentUser, yourSongs);closeConfirm()})}} style = {{position:\"relative\"}}>\r\n\t\t\t\t<Hint text = {\"delete song\"}/>\r\n\t\t\t\t<FiX />\r\n\t\t\t</button>\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div style = {{display:'flex', alignItems:'center', width:'100%'}}>\r\n\t\t\t<AddToListCircle listOfChosenItems = {listOfChosenSongs} setListOfChosenItems = {setListOfSongs} itemId = {song.id}/>\r\n\t\t\t<div className={'SongItem ' + (song.id === currentSong && play ? \"playingNow\" : \"\")} onClick={chooseSongItem} ref={openMoreWindow ? currentItemRef : null} style={openMoreWindow ? { background: 'var(--playlistsColor)' } : {}}>\r\n\t\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t\t<div className=\"songItemImage\">\r\n\t\t\t\t\t\t<div className=\"songItemPlayOrPause\">\r\n\t\t\t\t\t\t\t{song.id === currentSong && play ? null : <HiPlay />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"playingAnimation\" style={song.id === currentSong && play ? { opacity: 1, visibility: 'visible' } : {}}>\r\n\t\t\t\t\t\t\t<HiPause />\r\n\t\t\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={song.cover} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t\t<div className=\"songItemName\" style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t{shortWord(song.name, window.innerWidth > 1000?30:17) }\r\n\t\t\t\t\t\t\t<span style={{ marginLeft: '10px', fontWeight: '500' }}>\r\n\t\t\t\t\t\t\t\t{showAdditionalInfoIfShould()}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{!isMobile?<div className=\"songItemAuthor\">{displayAuthors(song.authors)}</div>:<div className=\"songItemAuthor\">{displayAuthorsStr(song.authors, ' & ', 30)}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"songItemMoreBtn\" >\r\n\t\t\t\t\t{addOrDeleteButton()}\r\n\t\t\t\t\t<button onClick={isMobile?(e)=>{e.stopPropagation();toggleModal();setContent(<SongItemMobileMoreWindow song = {song}/>)}:openSongItemMoreWindow}>\r\n\t\t\t\t\t\t<Hint text = {\"more\"}/>\r\n\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<SongItemMoreWindow openMoreWindow = {openMoreWindow} song = {song} moreWindowPosRelativeToViewport = {moreWindowPosRelativeToViewport}/>\r\n\t\t\t</div >\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi'\r\nimport { firestore } from '../../firebase'\r\nimport checkNumber from '../../functions/other/checkNumber'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport {LoadingCircle} from '../Loading/LoadingCircle'\r\nimport { BlurredBg } from '../SignIn-Up/BlurredBg'\r\nexport const MainBanner = () => {\r\n\tconst [bannerColors, setBannerColors] = useState([])\r\n\tconst [currentSliderPage, setcurrentSliderPage] = useState(0)\r\n\tconst [loading, setLoading] = useState(true)\r\n\t\r\n\tconst [topAuthor, setTopAuthor] = useState({})\r\n\tconst [topSong, setTopSong] = useState({})\r\n\tconst [topAlbum, setTopAlbum] = useState({})\r\n\t\r\n\tasync function findTop(setFunc, list, criterion) {\r\n\t\tconst response = (await firestore.collection(list).orderBy(criterion, 'desc').limit(1).get()).docs[0].data()\r\n\t\tsetFunc(response)\r\n\t\tsetBannerColors(prev=>[...prev, response.imageColors[0]])\r\n\t\tif(list === 'playlists') setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindTop(setTopAuthor, 'users', 'subscribers')\r\n\t\tfindTop(setTopSong, 'songs', 'listens')\r\n\t\tfindTop(setTopAlbum, 'playlists', 'listens')\r\n\t\t\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = \"MainBanner\" style = {{background:bannerColors[currentSliderPage]}}>\r\n\t\t\t{loading? <LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 0?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular artist on platform</h3>\r\n\t\t\t\t\t\t\t<AuthorItemBig data = {topAuthor}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 1?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular song on platform</h3>\r\n\t\t\t\t\t\t\t<SongItem song = {topSong} localIndex = {0} showListens/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={\"sliderItem \" + (currentSliderPage === 2?\"current\":\"\")} style = {{transform:`translateX(-${currentSliderPage*100}%)`}}>\r\n\t\t\t\t\t\t\t<h3>Most popular album on platform</h3>\r\n\t\t\t\t\t\t\t<PlaylistItem playlist = {topAlbum}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"sliderBtns\">\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage-1, 2, 0))}><BiChevronLeft/></button>\r\n\t\t\t\t\t\t<button onClick = {()=>setcurrentSliderPage(checkNumber(currentSliderPage+1, 2, 0))}><BiChevronRight/></button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <BlurredBg circleColor = \"#fff\"/> */}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default function findIfSongIsNew(song){\r\n\tconst songReleaseDate = new Date(song.releaseDate)\r\n\t//1 814 400 000 - 3 weeks\r\n\tif((new Date().getTime() - songReleaseDate.getTime()) < 1814400000) return true\r\n\r\n\treturn false\r\n}","import React from 'react'\r\n\r\nexport const MoreBtn = ({func, lenOfList, maxLen = 5, boolVal}) => {\r\n\treturn (\r\n\t\t<div onClick = {lenOfList > maxLen?func:null} className = \"MoreBtn\" style = {lenOfList <= maxLen?{display:'none'}:{}}>\r\n\t\t\t<button style = {boolVal?{background:'var(--pink)', color:'#ff8db2'}:{}}>\r\n\t\t\t\t{boolVal?\"Close\":\"More\"}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { MoreBtn } from '../Buttons/MoreBtn'\r\n\r\nexport const TitleWithMoreBtn = ({title, func, boolVal, lenOfList, maxLen = 5, marginBottom = 0}) => {\r\n\treturn lenOfList !== 0?(\r\n\t\t<div className=\"topTitle\" style = {{margin:'10px 0'}}>\r\n\t\t\t<h2 style = {{margin:marginBottom}}>{title}</h2>\r\n\t\t\t<MoreBtn func={func} boolVal={boolVal} lenOfList={lenOfList} maxLen = {maxLen}/>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { FaPlay, } from 'react-icons/fa'\r\nimport { TiArrowShuffle , TiMediaPlay} from 'react-icons/ti'\r\nimport { FaHistory} from 'react-icons/fa'\r\nimport { BsPlayFill} from 'react-icons/bs'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { TitleWithMoreBtn } from '../Tools/TitleWithMoreBtn'\r\nimport shuffleSongs from '../../functions/other/shuffleSongs'\r\nimport { Link } from 'react-router-dom'\r\nimport { HISTORY_ROUTE } from '../../utils/consts'\r\n\r\nexport const SongList = ({ listOfSongs, source, title = \"\", showListens = false, isNewSong = false, showCount = false, listOfChosenSongs, setListOfSongs, showSearch = false, displayIfEmpty, showhistory = false }) => {\r\n\tconst { setCurrentSongQueue, setCurrentSongPlaylistSource, playSong, setCurrentSong } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [showMoreSongs, setShowMoreSongs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displaySongs, setDisplaySongs] = useState(listOfSongs)\r\n\tuseEffect(() => {\r\n\t\tsetDisplaySongs(listOfSongs)\r\n\t}, [listOfSongs])\r\n\t\r\n\tfunction setQueueInSongList() {\r\n\t\tif(source !== 'no' && listOfSongs.length !== 0){\r\n\t\t\tsetCurrentSongQueue(listOfSongs)\r\n\t\t\tsetCurrentSongPlaylistSource(source)\r\n\t\t\tconst listSongsIds = listOfSongs.map(song => song.id)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tlastQueue: {\r\n\t\t\t\t\timage: source.image,\r\n\t\t\t\t\tname: source.name,\r\n\t\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\t\tsource: source.source\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction playShuffledList(e){\r\n\t\te.stopPropagation()\r\n\t\tlet newList = shuffleSongs(listOfSongs)\r\n\t\tsetCurrentSongQueue(newList)\r\n\t\tsetCurrentSongPlaylistSource(source)\r\n\t\tconst listSongsIds = newList.map(song => song.id)\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tlastQueue: {\r\n\t\t\t\timage: source.image,\r\n\t\t\t\tname: source.name,\r\n\t\t\t\tsongsList: listSongsIds,\r\n\t\t\t\tsource: source.source\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetCurrentSong(newList[0].id)\r\n\t\tplaySong()\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className=\"SongList\" onClick={setQueueInSongList}>\r\n\t\t\t{title.length !== 0 ? <TitleWithMoreBtn title={title} func={() => setShowMoreSongs(!showMoreSongs)} boolVal={showMoreSongs} lenOfList={listOfSongs.length} /> : null}\r\n\t\t\t{showSearch?<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t<SearchBar value = {searchValue} setValue = {setSearchValue} allFoundSongs = {displaySongs} setAllFoundSongs = {setDisplaySongs} defaultSearchMode = {\"songs\"} defaultSongsListValue = {listOfSongs} inputText = {\"Search for songs\"}/>\r\n\t\t\t\t{showhistory?<Link to = {HISTORY_ROUTE}><button className = \"standartButton\" style = {{marginTop:'10px', marginBottom:'0', height:'44px', width:'44px', padding:'0', marginLeft:'6px', background:'var(--playlistsColor)'}}><FaHistory style = {{marginRight:'0'}}/></button></Link>:null}\r\n\t\t\t</div>:null}\r\n\t\t\t{/* {showControls?\r\n\t\t\t\t<div className = \"listControlButtons\">\r\n\t\t\t\t\t<button className = \"standartButton\"><BsPlayFill /></button>\r\n\t\t\t\t\t<button className = \"standartButton\" onClick = {playShuffledList}><TiArrowShuffle /></button>\r\n\t\t\t\t</div> :null\r\n\t\t\t} */}\r\n\t\t\t{displaySongs.map((song, index) => {\r\n\t\t\t\tif (title.length !== 0) {\r\n\t\t\t\t\tif (showMoreSongs) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (index < 5) {\r\n\t\t\t\t\t\t\treturn <span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className=\"topSongItem\">\r\n\t\t\t\t\t\t\t{showCount ? <h3 style = {{opacity:'0.7'}}>{index + 1}</h3> : null}\r\n\t\t\t\t\t\t\t<SongItem song={song} key = {song.id} localIndex={index} showListens={showListens} isNewSong={isNewSong} listOfChosenSongs = {listOfChosenSongs} setListOfSongs = {setListOfSongs}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t<div style = {{display:\"flex\", justifyContent:'center'}}>{listOfSongs.length === 0?displayIfEmpty:null}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findIfSongIsNew from '../../functions/find/findIfSongIsNew'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\n\r\nexport const RecentSongs = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recentSongs, setRecentSongs] = useState([])\r\n\tfunction findRecentSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async songId=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(findIfSongIsNew(songData) && !tempSongsIds.includes(songData.id)){\r\n\t\t\t\t\tsetRecentSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(yourAuthors !== undefined && yourAuthors.length !== 0 && recentSongs.length === 0) findRecentSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<SongList listOfSongs = {recentSongs} source = {{source: `/home`, name: \"New Songs\", image: \"\", songsList: recentSongs}} title = {\"New Songs\"} isNewSong/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nfunction findSimilarArtistsNames(authorsSongsArr, authorsData, setSimilarAuthors) {\r\n\tlet peopleArray = []\r\n\tauthorsSongsArr.forEach((song) => {\r\n\t\tlet newAuthors = song.authors\r\n\t\tif (newAuthors.length !== 0) {\r\n\t\t\tpeopleArray.push(newAuthors)\r\n\t\t}\r\n\t})\r\n\tpeopleArray = peopleArray.flat()\r\n\tconst uniqueAuthorsSet = new Set(peopleArray.map(people=>people.uid).filter(id=>id!==authorsData.uid))\r\n\tconst uniqueAuthorsIdsArray = Array.from(uniqueAuthorsSet)\r\n\tconst uniqueAuthorsDataArray = []\r\n\tfor (let i = 0; i < uniqueAuthorsIdsArray.length; i++) {\r\n\t\tfor (let j = 0; j < peopleArray.length; j++) {\r\n\t\t\tif(uniqueAuthorsIdsArray[i] === peopleArray[j].uid){\r\n\t\t\t\tuniqueAuthorsDataArray.push(peopleArray[j])\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tsetSimilarAuthors(uniqueAuthorsDataArray)\r\n\treturn uniqueAuthorsDataArray\r\n}\r\n\r\nexport default async function findSimilarArtists(authorsData, setSimilarAuthors) {\r\n\tif (authorsData !== undefined && authorsData.ownSongs !== undefined && authorsData.ownSongs.length !== 0) {\r\n\t\tconst authorsSongsArray = []\r\n\t\tauthorsData.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\tauthorsSongsArray.push(songData)\r\n\t\t\tif(index === authorsData.ownSongs.length - 1){\r\n\t\t\t\treturn findSimilarArtistsNames(authorsSongsArray, authorsData, setSimilarAuthors)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t}\r\n}\r\n\r\n\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\n\r\nexport const AuthorsList = ({ listOfAuthors, title = \"\", listOfChosenAuthors, setListOfChosenAuthors }) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAuthors.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAuthors])\r\n\treturn listOfAuthors.length > 0?(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAuthors.map((author) => {\r\n\t\t\t\t\treturn <AuthorItemBig data={author} key={author.uid} listOfChosenAuthors = {listOfChosenAuthors} setListOfChosenAuthors = {setListOfChosenAuthors}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && (wrapperRef.current !== null && wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport findSimilarArtists from '../../functions/find/findSimilarArtists'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\n\r\nexport const RecommendedAuthors = () => {\r\n\tconst { yourAuthors } = useSong()\r\n\tconst [recommendationAuthors, setRecommendationAuthors] = useState([])\r\n\r\n\tconst [uniqueAuthors, setUniqueAuthors] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tif (yourAuthors !== undefined) {\r\n\t\t\tyourAuthors.forEach((author) => {\r\n\t\t\t\tfindSimilarArtists(author, setRecommendationAuthors)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\trecommendationAuthors.forEach(author=>{\r\n\t\t\tconst uniqueAuthorsUIDSArray = uniqueAuthors.map(author=>author.uid)\r\n\t\t\tif(!currentUser.addedAuthors.includes(author.uid) && !uniqueAuthorsUIDSArray.includes(author.uid)){\r\n\t\t\t\tsetUniqueAuthors(prev=>[...prev, author])\r\n\t\t\t}\r\n\t\t})\r\n}, [recommendationAuthors])\r\n\treturn (\r\n\t\t<div className = \"RecommendedAuthors\">\r\n\t\t\t<AuthorsList listOfAuthors = {uniqueAuthors} title = {\"Recommended Authors\"}/>\r\n\t\t\t{/* <h2>Recommended Authors</h2>\r\n\t\t\t<div className=\"artistsWrapper\">\r\n\t\t\t\t{uniqueAuthors.map((author, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const ImportantMessage = ({message, image, button}) => {\r\n\treturn (\r\n\t\t<div className = \"importantMessage\">\r\n\t\t\t<div>\r\n\t\t\t\t{image?<img loading = \"lazy\" src={image} alt=\"\" />:null}\r\n\t\t\t\t<h3>{message}</h3>\r\n\t\t\t\t{button?button:null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {useSong} from '../../contexts/SongContext'\r\nimport { SongList } from '../Lists/SongList'\r\nimport {ImportantMessage} from '../MessagePlates/ImportantMessage'\r\nexport const RecommendedSongs = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst {currentUser} = useAuth()\r\n\tconst [recommendedSongs, setRecommendedSongs] = useState([])\r\n\tfunction fetchRecommendedSongs(){\r\n\t\tconst tempSongsIds = []\r\n\t\tyourAuthors.forEach((author, i) => {\r\n\t\t\tauthor.ownSongs.forEach(async (songId, index)=>{\r\n\t\t\t\tlet songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tif(!currentUser.addedSongs.includes(songId) && !tempSongsIds.includes(songData.id) && index <= 3){\r\n\t\t\t\t\tsetRecommendedSongs(prev=>[...prev, songData])\r\n\t\t\t\t\ttempSongsIds.push(songData.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// tempSongArray.sort((songA, songB)=>songB.listens - songA.listens)\r\n\t\t\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRecommendedSongs()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className = 'RecommendedSongs'>\r\n\t\t\t<SongList listOfSongs = {recommendedSongs} source = {{source: `/home`, name: \"Recommended Songs\", image: \"\", songsList: recommendedSongs}} title = {\"Recommended Songs\"} displayIfEmpty = {<ImportantMessage message = {\"No songs recommended. Add favorite authors so we could know what to recommend\"} image = {\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\"}/>}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SongList } from '../Lists/SongList'\r\n\r\nexport const Top15Songs = () => {\r\n\tconst [topSongs, setTopSongs] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tfunction fetchTopSongs(){\r\n\t\tfirestore.collection('songs').orderBy('listens', 'desc').limit(15).get().then(res=>{\r\n\t\t\tres.docs.forEach(song=>{\r\n\t\t\t\tsetTopSongs(prev=>[...prev, song.data()])\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchTopSongs()\r\n\t}, [])\r\n\treturn !loading?(\r\n\t\t<SongList \r\n\t\t\tlistOfSongs = {topSongs} \r\n\t\t\tsource = {{source:`/home`,name:\"Top 15 Songs\", image:\"https://media.istockphoto.com/vectors/fire-icon-illustration-for-design-stock-vector-vector-id931601050?k=6&m=931601050&s=170667a&w=0&h=fhRQfwwsW6aXK9OSDM-yj842SFFl2Q9ll6ch-xCK5es=\", songsList:topSongs}}\r\n\t\t\ttitle = {'Top 15 Songs'}\r\n\t\t\tshowListens\t\r\n\t\t\tshowCount\r\n\t\t/>\r\n\t):<LoadingCircle/>\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\n\r\nexport const AlbumList = ({listOfAlbums, title = \"\", loading = true, listOfChosenAlbums, setListOfChosenAlbums}) => {\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 220\r\n\t\tsetScrollLeft(prev - 220)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 220\r\n\t\tsetScrollLeft(prev + 220)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif(listOfAlbums.length > 0 && !loading){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfAlbums])\r\n\treturn listOfAlbums.length > 0?\r\n\t\tloading?<LoadingCircle/>:\r\n\t\t(\r\n\t\t<div className=\"AuthorsList\" >\r\n\t\t\t{title.length !== 0 ? <h2>{title}</h2> : null}\r\n\t\t\t<div className=\"authorsWrapper\" ref={wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t{listOfAlbums.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist = {playlist} key={index} listOfChosenAlbums = {listOfChosenAlbums} setListOfChosenAlbums = {setListOfChosenAlbums}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\n\r\nexport const Slider = ({pages, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<div className = \"Slider\">\r\n\t\t\t{pages.map((pageName, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = {\"sliderItem \" + (index === currentPage?\"current\":\"\")} key = {index} onClick = {()=>setCurrentPage(index)}>\r\n\t\t\t\t\t\t{pageName}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/wave2.f62cb572.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { HiPause, HiPlay } from 'react-icons/hi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nexport const LibraryPlaylistItem = ({ playlist }) => {\r\n\tconst { currentSongPlaylistSource, play } = useSong()\r\n\tconst { isMobile } = useScreen()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\r\n\treturn (\r\n\t\t<Link to={`/albums/${playlist.id}`} className=\"playlistWrapper\">\r\n\t\t\t<div className=\"library playlistItem\" style={{ backgroundImage: `url(${playlist.image})`}}>\r\n\t\t\t\t<h2 style={{ background: playlist.imageColors[2] }}>{shortWord(playlist.name, 10)}</h2>\r\n\t\t\t\t{!playlist.image?<BiAlbum style = {{position:'absolute', left:'50%', top:'50%', transform:'translate(-50%, -50%)', width:'60px', height:'60px'}}/>:null}\r\n\t\t\t\t{!isMobile ? <button onClick={playSongsInPlaylist}>\r\n\t\t\t\t\t{(currentSongPlaylistSource.name === playlist.name) && play ? <HiPause /> : <HiPlay />}\r\n\t\t\t\t</button> : null}\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","export const findVisiblePlaylists = (screenWidth) => {\r\n\tif(screenWidth < 1990 && screenWidth >= 1780) return 7\r\n\telse if(screenWidth < 1780 && screenWidth >= 1570) return 6\r\n\telse if(screenWidth < 1570 && screenWidth >= 1360) return 5\r\n\telse if(screenWidth < 1360 && screenWidth >= 1150) return 4\r\n\telse if(screenWidth < 1150 && screenWidth >= 1000) return 3\r\n\telse if(screenWidth < 1000 && screenWidth >= 892) return 6\r\n\telse if(screenWidth < 892 && screenWidth >= 754) return 5\r\n\telse if(screenWidth < 754 && screenWidth >= 614) return 4\r\n\telse if(screenWidth < 614 && screenWidth >= 464) return 3\r\n\telse return 2\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport wave from '../../images/wave2.svg'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { LibraryPlaylistItem } from './LibraryPlaylistItem'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { findVisiblePlaylists } from '../../functions/find/findVisiblePlaylists'\r\nexport const SongsPage = () => {\r\n\tconst { yourSongs, yourPlaylists, setYourSongs } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst {screenWidth} = useScreen()\r\n\tconst [playlistsVisible, setPlaylistsVisible] = useState(findVisiblePlaylists(screenWidth))\r\n\tuseEffect(() => {\r\n\t\tsetPlaylistsVisible(findVisiblePlaylists(screenWidth))\r\n\t}, [screenWidth])\r\n\treturn (\r\n\t\t<div className=\"SongsPage\">\r\n\t\t\t<div className=\"playLists\">\r\n\t\t\t\t<div className=\"playlistContent\">\r\n\t\t\t\t\t{yourPlaylists.length?yourPlaylists.map((p, index) => {\r\n\t\t\t\t\t\tif(index < playlistsVisible){\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<LibraryPlaylistItem playlist={p} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}):<h3 style = {{position:'absolute', left:'50%', top:'40%', transform:'translate(-50%, -50%)'}}>You don't have playlists</h3>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"playlistsBackground\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={wave} alt=\"erwerrnjeqjweqwqeqwewerbjfrwjfbewjerbh\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"yourSongsList\">\r\n\t\t\t\t<SongList listOfSongs={yourSongs} source={{ source: '/library', name: \"Your Library\", image: currentUser.photoURL, songsList: yourSongs }} showSearch showhistory displayIfEmpty={<h3>Your library is empty</h3>} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { storage } from '../../firebase'\r\nexport const DownloadPhotoButton = ({ setErrorMessage, setImageLocalPath, downloadedPhoto, setDownloadedPhoto, place, btnText = \"Download song cover\" }) => {\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/' || place === 'chatCovers/') {\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<label className=\"downloadFile\">\r\n\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t{btnText}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"photoLoadLine\" style={downloadedPhoto !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" onChange={(e) => onFileChange(e, place, setDownloadedPhoto)} />\r\n\t\t</label>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/find/findVariantsOfName'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { DownloadPhotoButton } from '../Buttons/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { FullScreenLoading } from '../Loading/FullScreenLoading'\r\nexport const AddPlaylist = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(\"\")\r\n\tconst [playlistCover, setPlaylistCover] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(currentUser.isAdmin ? \"\" : new Date().toString())\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState([])\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(0)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loadingPlaylist, setLoadingPlaylist] = useState(false)\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (playlistName.length === 0) setErrorMessage(\"Playlist has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Playlist has to have at least 1 author')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a playlist')\r\n\t\telse {\r\n\t\t\tsetLoadingPlaylist(true)\r\n\t\t\tfirestore.collection('playlists').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: playlistName,\r\n\t\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\timage: playlistCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\tcreationDate: releaseDate,\r\n\t\t\t\t\tsubscribers: 0,\r\n\t\t\t\t\tisAlbum: playlistStatus === 1,\r\n\t\t\t\t\timageColors: imageColors,\r\n\t\t\t\t\tisPrivate: isPlaylistPrivate === true\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetPlaylistCover('')\r\n\t\t\t\tsetPlaylistName('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t\tsetSongsSearch('')\r\n\t\t\t\tsetChosenSongs([])\r\n\t\t\t\tsetIsPlaylistPrivate(0)\r\n\t\t\t\tsetLoadingPlaylist(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetErrorMessage(err)\r\n\t\t\t\tsetLoadingPlaylist(false)\r\n\t\t\t})\r\n\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\t\tplace: 'playlists',\r\n\t\t\t\tuid: uid,\r\n\t\t\t\tvariantsOfName: findVariantsOfName(playlistName)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<FullScreenLoading loading = {loadingPlaylist}/>\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={e => e.preventDefault()}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<SearchBar value={authorsInputValue} setValue={setAuthorsInputValue} setResultAuthorList={setAllAuthors} defaultSearchMode={\"authors\"} inputText={\"Search for authors\"} />\r\n\t\t\t\t\t{/* <input type=\"text\" placeholder=\"Enter author name\" value={authorsInputValue} onChange={(e) => setAuthorsInputValue(e.target.value)} style={{ marginBottom: '5px' }} onKeyUp={() => timerUpFunc(findAuthors)} onKeyDown={() => { return clearTimeout(typingTimeout) }} /> */}\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<SearchBar value={songsSearch} setValue={setSongsSearch} setAllFoundSongs={setAllSongs} defaultSearchMode={'songs'} inputText={\"Search for songs\"} />\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tallSongs.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<SongItem song={data} localIndex={index} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage={setErrorMessage} setImageLocalPath={setImageLocalPath} downloadedPhoto={playlistCover} setDownloadedPhoto={setPlaylistCover} place={'songsImages/'} btnText={\"Download playlist cover\"} />\r\n\t\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t\t<button className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Add playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\n\r\nexport const CreatePlaylistPage = () => {\r\n\treturn (\r\n\t\t<div className = 'CreatePlaylistPage'>\r\n\t\t\t<AddPlaylist/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { BiFolderPlus } from 'react-icons/bi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { CreatePlaylistPage } from './CreatePlaylistPage'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { useState } from 'react'\r\nexport const PlaylistsPage = () => {\r\n\tconst { yourPlaylists } = useSong()\r\n\tconst [playlistsDisplay, setPlaylistsDisplay] = useState(yourPlaylists)\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\treturn (\r\n\t\t<div className=\"PlaylistsPage\">\r\n\t\t\t<div style = {{display:'flex'}} className = \"searchAndCreatePlaylist\">\r\n\t\t\t\t<SearchBar value = {searchValue} setValue = {setSearchValue} setResultPlaylists = {setPlaylistsDisplay} defaultSearchMode = {'playlists'} defaultPlaylistsListValue = {yourPlaylists}/>\r\n\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }}>\r\n\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\tCreate Playlist\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"playlistsContainer\">\r\n\t\t\t\t{playlistsDisplay && playlistsDisplay.map((playlist, index) => {\r\n\t\t\t\t\treturn <PlaylistItem playlist={playlist} key={playlist.id} />\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {AuthorItemBig} from '../AuthorPage/AuthorItemBig'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const AuthorsPage = () => {\r\n\tconst {yourAuthors} = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [displayAuthors, setDisplayAuthors] = useState(yourAuthors)\r\n\treturn (\r\n\t\t<div className = \"AuthorsPage\">\r\n\t\t\t<SearchBar value = {searchValue} setValue = {setSearchValue} setResultAuthorList = {setDisplayAuthors} defaultSearchMode = {\"authors\"} defaultAuthorsListValue = {yourAuthors}/>\r\n\t\t\t<div className=\"authorsContainer\">\r\n\t\t\t\t{displayAuthors.map((authorData)=>{\r\n\t\t\t\t\treturn <AuthorItemBig data = {authorData} key = {authorData.uid}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const IsUserOnlineCircle = ({userUID}) => {\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<div className = \"onlineCircle\"></div>:null\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAmountOfUnseenMessages } from '../../functions/find/findAmountOfUnseenMessages'\r\nexport const AmountOfUnseenMessages = ({amountOfUnseen}) => {\r\n\t\r\n\treturn amountOfUnseen !== 0?(\r\n\t\t<div className = \"AmountOfUnseenMessages\">\r\n\t\t\t{amountOfUnseen}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React from 'react'\r\n\r\nexport const SeenByCircle = ({listOfSeen}) => {\r\n\treturn (\r\n\t\t<div className = \"SeenByCircle\" style = {listOfSeen !== undefined? listOfSeen.length <= 1?{opacity:'1', visibility:'visible'}:{}:null}></div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiMusic, FiUser } from 'react-icons/fi'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {BsDot} from 'react-icons/bs'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { SeenByCircle } from './SeenByCircle'\r\nexport const LastSentMessage = ({ messages }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [lastAttachedItem, setLastAttachedItem] = useState(\"\")\r\n\tconst [shouldPutDot, setShouldPutDot] = useState(false)\r\n\tconst [lastMessage, setLastMessage] = useState(\"\")\r\n\tconst messageIcons = [null, <FiMusic />, <BiAlbum />, <FiUser />]\r\n\tconst [lastIcon, setLastIcon] = useState(0)\r\n\tasync function findWhatToWriteUnderName() {\r\n\t\tif (messages !== undefined) {\r\n\t\t\tconst lastAttachedItem = messages[messages.length - 1]\r\n\t\t\tsetLastMessage(str => str += lastAttachedItem.message)\r\n\t\t\tsetShouldPutDot(lastAttachedItem.message.length !== 0) \r\n\t\t\tif (lastAttachedItem.attachedSongs.length) {\r\n\t\t\t\tconst songName = (await firestore.collection('songs').doc(lastAttachedItem.attachedSongs[0]).get()).data().name\r\n\t\t\t\tsetLastIcon(1)\r\n\t\t\t\tsetLastAttachedItem(str => str += songName)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAlbums.length) {\r\n\t\t\t\tconst playlistName = (await firestore.collection('playlists').doc(lastAttachedItem.attachedAlbums[0]).get())\r\n\t\t\t\tif(playlistName.exists) setLastAttachedItem(str => str +=playlistName.data().name)\r\n\t\t\t\telse setLastAttachedItem(str => str +=\"Deleted Album \")\r\n\t\t\t\tsetLastIcon(2)\r\n\t\t\t}\r\n\t\t\tif (lastAttachedItem.attachedAuthors.length) {\r\n\t\t\t\tconst authorName = (await firestore.collection('users').doc(lastAttachedItem.attachedAuthors[0]).get()).data().displayName\r\n\t\t\t\tsetLastIcon(3)\r\n\t\t\t\tsetLastAttachedItem(str => str +=authorName)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindWhatToWriteUnderName()\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className=\"messageShowOutside\">\r\n\t\t\t{messages[messages.length - 1].sender === currentUser.uid?<span style = {{marginRight:'5px'}}>You:</span>:null}\r\n\t\t\t{shortWord(lastMessage, 30)}\r\n\t\t\t{shouldPutDot && lastAttachedItem.length?<BsDot/>:null}\r\n\t\t\t{messageIcons[lastIcon]}\r\n\t\t\t{lastAttachedItem}\r\n\t\t\t<SeenByCircle listOfSeen = {messages[messages.length - 1].seenBy}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { findAmountOfUnseenMessages } from '../../functions/find/findAmountOfUnseenMessages'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\nimport { AmountOfUnseenMessages } from './AmountOfUnseenMessages'\r\nimport { LastSentMessage } from './LastSentMessage'\r\n\r\nexport const ChatItem = ({ chatData }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatName, chatImage, participants, messages } = chatData\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [amountOfUnseen, setAmountOfUnseen] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAmountOfUnseen(findAmountOfUnseenMessages(messages, currentUser))\r\n\t}, [])\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName === '') {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [])\r\n\treturn chatData?(\r\n\t\t<Link to={`/chat/${chatData.id}`}>\r\n\t\t\t<div className={\"ChatItem \" + (amountOfUnseen > 0?\"unseen\":\"\")} >\r\n\t\t\t\t<div className=\"chatItemImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={chatImage || otherPerson.photoURL} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<IsUserOnlineCircle userUID = {otherPerson.uid}/>\r\n\t\t\t\t<div style={{ width: '100%' }}>\r\n\t\t\t\t\t<h4 style={{ display: 'flex', justifyContent: 'space-between', width: '100%' }}>\r\n\t\t\t\t\t\t<span>{chatName || otherPerson.displayName}</span>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{messages.length?<span style={{ opacity: '.6', fontWeight: '500', fontSize: '.8em' }}>{displayDate(messages[messages.length - 1].sentTime, chatData && ( Date.now() - new Date(messages[messages.length - 1].sentTime).getTime()) > 86000000 ? 0 : 2)}</span>:null}\r\n\t\t\t\t\t\t\t<AmountOfUnseenMessages amountOfUnseen = {amountOfUnseen}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t{messages.length?<p style={messages[messages.length - 1].sender !== currentUser.uid ? { color: '#fff' } : {}}>{<LastSentMessage messages={messages} />}</p>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t):null\r\n}\r\n","export function findAmountOfUnseenMessages(messages, currentUser) {\r\n\treturn messages.reduce((accum, message)=>{\r\n\t\tif(message.sender !== currentUser.uid){\r\n\t\t\tif(message.seenBy !== undefined){\r\n\t\t\t\tif(!message.seenBy.includes(currentUser.uid)){\r\n\t\t\t\t\treturn ++accum\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn accum\r\n\t}, 0)\r\n}","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { DownloadPhotoButton } from '../Buttons/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nexport const CreateChat = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal} = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [foundFriends, setFoundFriends] = useState(yourFriends)\r\n\tconst [chosenFriends, setChosenFriends] = useState([])\r\n\tconst [chatCover, setChatCover] = useState(\"\")\r\n\tconst [chatName, setChatName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst chatId = getUID()\r\n\tconst history = useHistory()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [allowedToCreate, setAllowedToCreate] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (chosenFriends.length >= 1) {\r\n\t\t\tfindChatURL(chosenFriends, currentUser, setShouldCreate, setFriendChatId)\r\n\t\t}\r\n\t}, [chosenFriends])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chatName.length === 0 || chosenFriends.length === 0) {\r\n\t\t\tsetAllowedToCreate(false)\r\n\t\t}\r\n\t\telse setAllowedToCreate(true)\r\n\t\tsetErrorMessage(\"\")\r\n\t}, [chosenFriends.length, chatName])\r\n\treturn (\r\n\t\t<div className=\"CreateChat\">\r\n\t\t\t<SearchBar value={searchValue} setValue={setSearchValue} setResultAuthorList={setFoundFriends} focus inputText={\"Search for friends\"} defaultSearchMode={\"authors\"} />\r\n\t\t\t{foundFriends.map(friend => {\r\n\t\t\t\treturn <PersonTiny data={friend} chosenArray={chosenFriends} setChosenArray={setChosenFriends} />\r\n\t\t\t})}\r\n\t\t\t{chosenFriends.length > 1 && shouldCreate ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h3>Chat name</h3>\r\n\t\t\t\t\t<input type=\"text\" style={{ marginBottom: '10px' }} className=\"standartInput\" placeholder={\"Enter chat name\"} value={chatName} onChange={e => setChatName(e.target.value)} />\r\n\t\t\t\t\t<h3>Chat image</h3>\r\n\t\t\t\t\t<DownloadPhotoButton setErrorMessage={setErrorMessage} setImageLocalPath={() => { return null }} downloadedPhoto={chatCover} setDownloadedPhoto={setChatCover} place={'chatCovers/'} btnText={\"Download chat image\"} />\r\n\t\t\t\t</div> : null\r\n\t\t\t}\r\n\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\t\t\t{chosenFriends.length >= 1 ?\r\n\t\t\t\t<button className=\"addSongBtn\" style={shouldCreate ? allowedToCreate ? {} : { opacity: '0.4' } : {}}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (shouldCreate) {\r\n\t\t\t\t\t\t\tif (allowedToCreate) {\r\n\t\t\t\t\t\t\t\tcreateChat([currentUser.uid, ...chosenFriends], chatId, chatName, chatCover, [currentUser.uid]);\r\n\t\t\t\t\t\t\t\thistory.push(`/chat/${chatId}`)\r\n\t\t\t\t\t\t\t\ttoggleModal()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse setErrorMessage(\"Chat has to have a name\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\thistory.push(`/chat/${friendChatId}`)\r\n\t\t\t\t\t\t\ttoggleModal()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{shouldCreate ? \"Create Chat\" : \"Go to chat\"}\r\n\t\t\t\t</button> : null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { FiArrowLeft } from 'react-icons/fi'\r\nimport { useHistory } from 'react-router'\r\nimport { Hint } from '../Basic/Hint'\r\nexport const BackBtn = ({color = \"\"}) => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"BackBtn\">\r\n\t\t\t<button onClick={() => history.goBack()} style = {color.length?{color:color}:{}}>\r\n\t\t\t\t<Hint text = {\"go back\"} direction = {\"bottom\"}/>\r\n\t\t\t\t<FiArrowLeft />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\nimport { Slider } from '../Tools/Slider'\r\nimport { fetchItemsList } from '../../functions/fetch/fetchItemsList'\r\nexport const AttachmentList = ({ chatId }) => {\r\n\tconst [attachmentList, setAttachmentList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [sliderCurrentPage, setSliderCurrentPage] = useState(0)\r\n\tconst attachmentContent = [\r\n\t\t<SongList listOfSongs={attachmentList} source={{ source: `/chat/${chatId}`, name: `Chat with ${chatId}`, image: \"\", songsList: attachmentList }} />,\r\n\t\t<AuthorsList listOfAuthors={attachmentList} />,\r\n\t\t<AlbumList listOfAlbums={attachmentList} loading={loading} />\r\n\t]\r\n\tasync function fetchAttachedData(attachedType, firebaseCollection) {\r\n\t\tconst chatData = await firestore.collection('chats').doc(chatId).get()\r\n\t\tchatData.data().messages.forEach(message => {\r\n\t\t\tif (message[attachedType].length > 0) {\r\n\t\t\t\tfetchItemsList(message[attachedType], firebaseCollection, setAttachmentList, (res) => res, () => setLoading(false), undefined, 1)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tswitch (sliderCurrentPage) {\r\n\t\t\tcase 0:\r\n\t\t\t\tfetchAttachedData('attachedSongs', 'songs').then(() => setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tfetchAttachedData('attachedAuthors', 'users').then(() => setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfetchAttachedData('attachedAlbums', 'playlists').then(() => setLoading(false))\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}, [sliderCurrentPage])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachmentList([])\r\n\t}, [chatId])\r\n\r\n\treturn (\r\n\t\t<div className=\"AttachmentList\">\r\n\t\t\t<Slider pages={[\"Songs\", \"Authors\", \"Playlists\"]} currentPage={sliderCurrentPage} setCurrentPage={(page) => { setSliderCurrentPage(page); setLoading(true); setAttachmentList([]) }} />\r\n\t\t\t{loading ? <LoadingCircle /> :\r\n\t\t\t\tattachmentList.length > 0 ? attachmentContent[sliderCurrentPage] : <h2>Nothing here</h2>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useFetchDocs } from '../../hooks/useFetchDocs'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { FiSettings } from 'react-icons/fi'\r\nimport { MdModeEdit } from 'react-icons/md'\r\nimport { RiVolumeUpLine } from 'react-icons/ri'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { Slider } from '../Tools/Slider'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { fetchItemsList } from '../../functions/fetch/fetchItemsList'\r\n\r\nexport const ChatInfo = ({ data }) => {\r\n\tconst [participants, setParticipants] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [chatNameValue, setChatNameValue] = useState(data.chatName)\r\n\tconst [newChatPhoto, setNewChatPhoto] = useState(data.chatImage)\r\n\tconst [newImageLocalPath, setNewImageLocalPath] = useState(\"\")\r\n\tconst [newImageColors, setNewImageColors] = useState(data.imageColors || [])\r\n\tconst { setContent } = useModal()\r\n\tconst [participantsPage, setParticipantsPage] = useState(0)\r\n\tconst [showUpdateBtn, setShowUpdateBtn] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tfetchItemsList(data.participants, 'users', setParticipants, res=>res, ()=>setLoading(false))\r\n\t}, [data.id])\r\n\tuseEffect(() => {\r\n\t\tif (chatNameValue.trim() !== data.chatName.trim() || newChatPhoto !== data.chatImage) {\r\n\t\t\tsetShowUpdateBtn(true)\r\n\t\t}\r\n\t\telse setShowUpdateBtn(false)\r\n\t}, [chatNameValue, newChatPhoto])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChatNameValue(data.chatName)\r\n\t}, [data.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChatNameValue(data.chatName)\r\n\t\tsetNewChatPhoto(data.chatImage)\r\n\t}, [data.chatName, data.chatImage])\r\n\r\n\tfunction updateChatInfo() {\r\n\t\tfirestore.collection('chats').doc(data.id).update({\r\n\t\t\tchatName: chatNameValue,\r\n\t\t\tchatImage: newChatPhoto,\r\n\t\t\timageColors: newImageColors\r\n\t\t})\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetNewImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"ChatInfo\">\r\n\t\t\t<ColorExtractor src={newImageLocalPath} getColors={(colors) => setNewImageColors(colors)} />\r\n\t\t\t<div className=\"chatInfoImageAndName\">\r\n\t\t\t\t<div className=\"chatInfoImage\">\r\n\t\t\t\t\t<label className=\"changePhoto\">\r\n\t\t\t\t\t\t<MdModeEdit />\r\n\t\t\t\t\t\tChange photo\r\n\t\t\t\t\t\t<input type=\"file\" style={{ display: 'none' }} onChange={(e) => onFileChange(e, 'chatCovers/', setNewChatPhoto)} />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<img loading=\"lazy\" src={newChatPhoto} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type=\"text\" className=\"standartInput\" value={chatNameValue} onChange={(e) => setChatNameValue(e.target.value)} />\r\n\t\t\t\t\t<div className=\"chatInfoButtons\">\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<FiSettings />\r\n\t\t\t\t\t\t\tSettings\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\" onClick={() => setContent(<AttachmentList chatId={data.id} />)}>\r\n\t\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t\t\t{shortWord(\"Attachments\", 7)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"chatInfoButton\">\r\n\t\t\t\t\t\t\t<RiVolumeUpLine />\r\n\t\t\t\t\t\t\tSound\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showUpdateBtn ? <button className=\"standartButton\" onClick={updateChatInfo}>Update Chat</button> : null}\r\n\t\t\t</div>\r\n\t\t\t<h4>Chat participants</h4>\r\n\t\t\t<Slider pages={['All participants', \"Administrators\"]} currentPage={participantsPage} setCurrentPage={setParticipantsPage} />\r\n\t\t\t{!loading ? participants.map(person => {\r\n\t\t\t\tif (participantsPage === 1) {\r\n\t\t\t\t\tif (data.admins.includes(person.uid)) return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t\t}\r\n\t\t\t\telse return <PersonTiny data={person} key={person.uid} />\r\n\t\t\t}) : <LoadingCircle />}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { firestore } from '../../firebase'\r\n\r\nexport const WallpaperItem = ({chatId, image, currentWallpaper}) => {\r\n\tfunction changeChatWallpaper(){\r\n\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\twallpaper:image\r\n\t\t})\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className = {\"WallpaperItem \" + (image === currentWallpaper?\"active\":\"\")} onClick = {changeChatWallpaper} style = {image === \"undefined\"?{background:'var(--playlistsColor)'}:{}}>\r\n\t\t\t{image !== \"undefined\" ?<img loading = \"lazy\" src={image} alt=\"\" />:null}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useFetchFirebaseData } from '../../hooks/fetchFirebaseData'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { WallpaperItem } from './WallpaperItem'\r\n\r\nexport const Wallpapers = ({chatId, currentWallpaper}) => {\r\n\tconst [wallpaperList, setWallpaperList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseFetchFirebaseData(setLoading,'chatWallpapers', undefined, setWallpaperList)\r\n\treturn !loading?(\r\n\t\t<div className='Wallpapers'>\r\n\t\t\t<h2>Wallpapers</h2>\r\n\t\t\t<div className=\"wallpapreWrapper\">\r\n\t\t\t\t<WallpaperItem chatId = {chatId} image={\"undefined\"}/>\r\n\t\t\t\t{wallpaperList.map((wallpaper, index) => {\r\n\t\t\t\t\treturn <WallpaperItem chatId = {chatId} image={wallpaper.image} key={wallpaper.id} currentWallpaper = {currentWallpaper}/>\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):<LoadingCircle/>\r\n}\r\n","import { useEffect } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useFetchFirebaseData = (setLoading, collection, list, setState, sortCondition, whereCondFP, whereCondSP, whereCondTP, deps = []) => {\r\n\r\n\tasync function fetchData() {\r\n\t\tconst tempArray = []\r\n\t\tif (list === undefined) {\r\n\t\t\tif (whereCondFP !== undefined) {\r\n\t\t\t\tconst items = await firestore.collection(collection).where(whereCondFP, whereCondSP, whereCondTP).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\tconst items = await firestore.collection(collection).get()\r\n\t\t\t\titems.docs.forEach(itemData => {\r\n\t\t\t\t\ttempArray.push(itemData.data())\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait list.forEach(async (itemId, index) => {\r\n\t\t\t\tconst itemData = (await firestore.collection(collection).doc(itemId).get()).data()\r\n\t\t\t\ttempArray.push(itemData)\r\n\t\t\t\tif(index === list.length - 1){\r\n\t\t\t\t\tif(sortCondition !== undefined){\r\n\t\t\t\t\t\ttempArray.sort(sortCondition)\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsetState(tempArray)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t\treturn tempArray\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true)\r\n\t\tsetState([])\r\n\t\tfetchData().then((res)=>{\r\n\t\t\tif(list === undefined) {\r\n\t\t\t\tsetState(res)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}, deps)\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiFolder, FiImage, FiMoreHorizontal, FiSearch, FiTrash, FiInfo } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { AttachmentList } from './AttachmentList'\r\nimport { ChatInfo } from './ChatInfo'\r\nimport { Wallpapers } from './Wallpapers'\r\n\r\nexport const ChatMoreBtn = ({chatId, currentWallpaper, data}) => {\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst chatMoreBtnRef = useRef(null)\r\n\tuseOutsideClick(chatMoreBtnRef, setOpenMoreWindow)\r\n\treturn (\r\n\t\t<div className=\"ChatMoreBtn\" ref = {chatMoreBtnRef}>\r\n\t\t\t<button onClick = {()=>setOpenMoreWindow(!openMoreWindow)}>\r\n\t\t\t\t<FiMoreHorizontal />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"chatHeaderMenuWindow\" style = {!openMoreWindow?{display:'none'}:{}}>\r\n\t\t\t\t{data.participants.length > 2? <div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<FiInfo/>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</div>:null}\r\n\t\t\t\t{/* <div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiSearch/>\r\n\t\t\t\t\t<span>Search messages</span>\r\n\t\t\t\t</div> */}\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<AttachmentList chatId = {chatId}/>)}}>\r\n\t\t\t\t\t<FiFolder/>\r\n\t\t\t\t\t<span>Attachments</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"chatHeaderMenuWindowItem\" onClick = {()=>{toggleModal(); setContent(<Wallpapers chatId = {chatId} currentWallpaper = {currentWallpaper}/>)}}>\r\n\t\t\t\t\t<FiImage/>\r\n\t\t\t\t\t<span>Change wallpaper</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <div className=\"chatHeaderMenuWindowItem\">\r\n\t\t\t\t\t<FiTrash/>\r\n\t\t\t\t\t<span>Delete chat</span>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport displayDate from '../../functions/display/displayDate'\r\n\r\nexport const LastSeen = ({userUID}) => {\r\n\tconst [lastSeen, setLastSeen] = useState(\"\")\r\n\tconst [isOnline, setIsOnline] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('users').doc(userUID)\r\n\t\t.onSnapshot(doc => {\r\n\t\t\tif(userUID !== undefined){\r\n\t\t\t\tconst fiveMinutesAgo = new Date().getTime() - 300000\r\n\t\t\t\tconst isOnline = doc.data().online > fiveMinutesAgo\r\n\t\t\t\tsetIsOnline(isOnline)\r\n\t\t\t\tif(doc.data().online === undefined) setLastSeen(\"offline\")\r\n\t\t\t\telse if(!isOnline) setLastSeen(\"last seen \" + displayDate(doc.data().online, 3))\r\n\t\t\t}\r\n\t\t })\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, userUID])\r\n\treturn (\r\n\t\tisOnline?<span>Online</span>:<span>{lastSeen}</span>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { BackBtn } from '../Buttons/BackBtn'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { ChatMoreBtn } from './ChatMoreBtn'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { ChatInfo } from './ChatInfo'\r\nexport const ChatHeader = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {toggleModal, setContent} = useModal()\r\n\tconst [otherPerson, setOtherPerson] = useState({})\r\n\tconst [headerColors, setHeaderColors] = useState(data.chatName === \"\"?[]:data.imageColors)\r\n\tasync function fetchOtherPerson() {\r\n\t\tconst otherPersonId = data.participants.find(personId => personId !== currentUser.uid)\r\n\t\tconst person = (await firestore.collection('users').doc(otherPersonId).get()).data()\r\n\t\tsetOtherPerson(person)\r\n\t\tsetHeaderColors(person.imageColors)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data.chatName === \"\") {\r\n\t\t\tfetchOtherPerson()\r\n\t\t}\r\n\t}, [data.id])\r\n\treturn (\r\n\t\t<div className=\"ChatHeader\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[0]}, ${headerColors[1]})` } : { background: `linear-gradient(45deg, grey, lightgrey)` }}>\r\n\t\t\t<BackBtn />\r\n\t\t\t{data.participants.length === 2 ? <Link className=\"chatHeaderImageAndName\" to={`/authors/${otherPerson.uid}`}>\r\n\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Link> :\r\n\t\t\t\t<div className=\"chatHeaderImageAndName\" onClick = {()=>{toggleModal(); setContent(<ChatInfo data = {data}/>)}}>\r\n\t\t\t\t\t<div className=\"chatHeaderImage\">\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={otherPerson.photoURL || data.chatImage} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<h4>{otherPerson.displayName || data.chatName}</h4>\r\n\t\t\t\t\t\t<LastSeen userUID={otherPerson.uid} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<ChatMoreBtn chatId={data.id} data={data} currentWallpaper={data.wallpaper} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","export function findWhatToWriteInResponseToItem(referedMessage){\r\n\treturn referedMessage.attachedSongs.length ? \"Audio\":\r\n\treferedMessage.attachedAlbums.length? \"Album\":\r\n\treferedMessage.attachedAuthors.length?\"Author\":\r\n\treferedMessage.inResponseToMessage && referedMessage.inResponseToMessage.length?\"Forwarded message\":\"\"\r\n}","import React from 'react'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nexport const AttachedItemsInChatInput = ({attachedItems, setAttachedItems, icon}) => {\r\n\tfunction removeItemFromAttached(attachedItems, setItems, itemId) {\r\n\t\tsetItems(attachedItems.filter(id => id !== itemId))\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"AttachedItemsInChatInput\">\r\n\t\t\t{attachedItems.map((itemId, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"attachedSongItem\" key={itemId}>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t<span>{itemId}</span>\r\n\t\t\t\t\t\t<button className=\"removeMessageFromResponse\" onClick={() => removeItemFromAttached(attachedItems, setAttachedItems, itemId)}>\r\n\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { ImAttachment } from 'react-icons/im'\r\nimport { MdSend } from 'react-icons/md'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\nimport { FiX, FiUser } from 'react-icons/fi'\r\nimport { CgMusicNote } from 'react-icons/cg'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/find/findWhatToWriteInResponseItem'\r\nimport { auth, firestore } from '../../firebase'\r\nimport { sendMessage } from '../../functions/other/sendMessage'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { AttachedItemsInChatInput } from '../ChatPage/AttachedItemsInChatInput'\r\n\r\nexport const ChatInput = ({ chatId, chatData, messageText, setMessageText, inResponseToMessage, setInResponseToMessage, otherMessages }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAttachWindow, setOpenAttachWindow] = useState(false)\r\n\tconst { yourSongs, yourAuthors, yourPlaylists } = useSong()\r\n\tconst [searchValue, setSearchValue] = useState(\"\")\r\n\tconst [allFoundSongs, setAllFoundSongs] = useState(yourSongs)\r\n\tconst [attachedSongs, setAttachedSongs] = useState([])\r\n\tconst [attachedAlbums, setAttachedAlbums] = useState([])\r\n\tconst [attachedAuthors, setAttachedAuthors] = useState([])\r\n\tconst [resultPlaylists, setResultPlaylists] = useState(yourPlaylists)\r\n\tconst [resultAuthorList, setResultAuthorList] = useState(yourAuthors)\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst [attachedSongsNames, setAttachedSongsNames] = useState([])\r\n\tconst attachWindowRef = useRef(null)\r\n\tuseOutsideClick(attachWindowRef, setOpenAttachWindow)\r\n\r\n\tfunction sendMessageFull() {\r\n\t\tsendMessage(chatId, chatData, currentUser.uid, messageText, attachedSongs, attachedAlbums, attachedAuthors, inResponseToMessage);\r\n\t\tsetMessageText(\"\");\r\n\t\tsetAttachedSongs([]);\r\n\t\tsetAttachedAuthors([]);\r\n\t\tsetAttachedAlbums([]);\r\n\t\tsetInResponseToMessage([])\r\n\t\tsetOpenAttachWindow(false)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (searchValue.length === 0) {\r\n\t\t\tsetAllFoundSongs(yourSongs)\r\n\t\t}\r\n\t}, [searchValue])\r\n\r\n\tfunction removeMessageFromResponseList(messageId) {\r\n\t\tsetInResponseToMessage(inResponseToMessage.filter(id => id !== messageId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(messageText.length === 0){\r\n\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\ttyping:chatData.typing.filter(id=>id !== currentUser.uid)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(!chatData.typing.includes(currentUser.uid)){\r\n\t\t\t\tconst tempArray = chatData.typing\r\n\t\t\t\ttempArray.push(currentUser.uid)\r\n\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\ttyping:tempArray\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [messageText])\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInResponseNames([])\r\n\t\tinResponseToMessage.forEach(async id => {\r\n\r\n\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[id].sender).get()).data().displayName\r\n\t\t\tsetInResponseNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [inResponseToMessage.length])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAttachedSongsNames([])\r\n\t\tattachedSongs.forEach(async id => {\r\n\t\t\tconst name = (await firestore.collection('songs').doc(id).get()).data().name\r\n\t\t\tsetAttachedSongsNames(prev => [...prev, name])\r\n\t\t})\r\n\t}, [attachedSongs.length])\r\n\r\n\treturn (\r\n\t\t<div className=\"chatInput\" style={openAttachWindow ? { borderRadius: \"0 0 var(--standartBorderRadius) var(--standartBorderRadius)\", transition: \".2s\" } : {}} ref={attachWindowRef}>\r\n\t\t\t<div className=\"attachWindow\" style={openAttachWindow ? { height: \"400px\", opacity: '1' } : {}} >\r\n\t\t\t\t{openAttachWindow ?\r\n\t\t\t\t\t<div style={openAttachWindow ? { maxHeight: '100%', overflowY: 'auto' } : { display: 'none' }}>\r\n\t\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\tsetValue={setSearchValue}\r\n\t\t\t\t\t\t\tsetAllFoundSongs={setAllFoundSongs}\r\n\t\t\t\t\t\t\tsetResultPlaylists={setResultPlaylists}\r\n\t\t\t\t\t\t\tsetResultAuthorList={setResultAuthorList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SongList listOfSongs={allFoundSongs} source={'no'} listOfChosenSongs={attachedSongs} setListOfSongs={setAttachedSongs} />\r\n\t\t\t\t\t\t<AuthorsList listOfAuthors={resultAuthorList} listOfChosenAuthors={attachedAuthors} setListOfChosenAuthors={setAttachedAuthors} />\r\n\t\t\t\t\t\t<AlbumList listOfAlbums={resultPlaylists} loading={false} listOfChosenAlbums={attachedAlbums} setListOfChosenAlbums={setAttachedAlbums} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inResponseArea\" style={inResponseToMessage.length || attachedSongsNames.length || attachedAuthors.length || attachedAlbums.length ? {} : { height: '0', padding: '0', opacity: '0', top: \"0\", visibility: 'hidden' }}>\r\n\t\t\t\t<div className=\"responseMessages\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{inResponseToMessage.map((id, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" key={id}>\r\n\t\t\t\t\t\t\t\t<h5 style={otherMessages[id].sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>{inResponseNames[index]}</h5>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{shortWord(otherMessages[id].message, 35)}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(otherMessages[id])}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button onClick={() => removeMessageFromResponseList(id)} className=\"removeMessageFromResponse\">\r\n\t\t\t\t\t\t\t\t\t<FiX />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedSongs} setAttachedItems = { setAttachedSongs} icon = {<CgMusicNote />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAuthors} setAttachedItems = { setAttachedAuthors} icon = {<FiUser />}/>\r\n\t\t\t\t<AttachedItemsInChatInput attachedItems = {attachedAlbums} setAttachedItems = { setAttachedAlbums} icon = {<BiAlbum />}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"attachAndEmojis\">\r\n\t\t\t\t<div className=\"attachBtn\">\r\n\t\t\t\t\t<button onClick={() => { setOpenAttachWindow(!openAttachWindow) }}>\r\n\t\t\t\t\t\t<ImAttachment />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"text\" style={{ background: 'var(--lightGrey)', border: 'none', outline: 'none', minHeight: '100%' }} value={messageText} onChange={(e) => { setMessageText(e.target.value) }} onKeyDown={(e) => { if (e.key === 'Enter') { sendMessageFull() } }} />\r\n\t\t\t\t{/* <div className=\"emojis\">\r\n\t\t\t\t\t<div className=\"emojiItem\">\r\n\t\t\t\t\t\t<FcLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--red)' }}>\r\n\t\t\t\t\t\t<AiFillFire />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"emojiItem\" style={{ color: 'var(--lightBlue)' }}>\r\n\t\t\t\t\t\t<AiFillLike />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t\t<button className=\"sendBtn\" onClick={() => { sendMessageFull() }}>\r\n\t\t\t\t<MdSend />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport displayDate from '../../functions/display/displayDate'\r\n\r\nexport const DateOnTop = ({date}) => {\r\n\treturn (\r\n\t\t<div className = \"DateOnTop\">\r\n\t\t\t{displayDate(date)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nexport default function useOnScreen(ref) {\r\n\r\n\tconst [isIntersecting, setIntersecting] = useState(false)\r\n \r\n\tconst observer = new IntersectionObserver(\r\n\t  ([entry]) => setIntersecting(entry.isIntersecting)\r\n\t)\r\n \r\n\tuseEffect(() => {\r\n\t  observer.observe(ref.current)\r\n\t  // Remove the observer as soon as the component is unmounted\r\n\t  return () => { observer.disconnect() }\r\n\t}, [])\r\n \r\n\treturn isIntersecting\r\n }","import React from 'react'\r\n\r\nexport const SongItemLoading = () => {\r\n\treturn (\r\n\t\t<div className = \"SongItem SongItemLoading\">\r\n\t\t\t<div className=\"songItemImageAndName\">\r\n\t\t\t\t<div className=\"songItemImage\"></div>\r\n\t\t\t\t<div className=\"songItemNameAndAuthor\">\r\n\t\t\t\t\t<div className=\"songItemName\"></div>\r\n\t\t\t\t\t<div className=\"songItemAuthor\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { AiFillFire, AiFillLike } from 'react-icons/ai'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FcLike } from 'react-icons/fc'\r\nimport { useSwipeable } from 'react-swipeable'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { findWhatToWriteInResponseToItem } from '../../functions/find/findWhatToWriteInResponseItem'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nimport { AuthorItemBig } from '../AuthorPage/AuthorItemBig'\r\nimport { PlaylistItem } from '../AuthorPage/PlaylistItem'\r\nimport { SongItemLoading } from '../Loading/SongItemLoading'\r\nimport { SongItem } from '../FullScreenPlayer/SongItem'\r\nimport { SeenByCircle } from './SeenByCircle'\r\n\r\nexport const MessageItem = ({ messageData, chatId, scrollToMessageRef, setScrollToMessageId, scrollToMessageId, showPhoto = true, otherMessages, inResponseToMessageArr, setInResponseToMessageArr }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {isMobile, screenHeight} = useScreen()\r\n\tconst { message, attachedAlbums, attachedSongs, attachedAuthors, sender, inResponseToMessage, id, sentTime } = messageData\r\n\tconst [userThatSentMessage, setUserThatSentMessage] = useState({})\r\n\tconst messageSentTime = displayDate(sentTime, 2)\r\n\tconst [attachedSongsData, setAttachedSongsData] = useState([])\r\n\tconst [attachedAuthorsData, setAttachedAuthorsData] = useState([])\r\n\tconst [attachedPlaylistsData, setAttachedPlaylistsData] = useState([])\r\n\tconst [inResponseToMessagesData, setInResponseToMessagesData] = useState([])\r\n\tconst [inResponseNames, setInResponseNames] = useState([])\r\n\tconst messageRef = useRef()\r\n\tconst isVisible = useOnScreen(messageRef)\r\n\tconst [swipeDeltaX, setSwipeDeltaX] = useState(0)\r\n\tconst [transformTransition, setTransformTransition] = useState(0)\r\n\tconst handlers = useSwipeable({ onSwiping: (event) => {if(event.deltaX < 0) setSwipeDeltaX(event.deltaX)} })\r\n\tconst refPassthrough = (el) => {\r\n\t\t// call useSwipeable ref prop with el\r\n\t\thandlers.ref(el);\r\n\r\n\t\t// set myRef el so you can access it yourself\r\n\t\tmessageRef.current = el;\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (messageData.seenBy !== undefined) {\r\n\t\t\tif (currentUser.uid !== messageData.sender && isVisible) {\r\n\t\t\t\tif (!messageData.seenBy.includes(currentUser.uid)) {\r\n\t\t\t\t\tconst tempMessages = otherMessages\r\n\t\t\t\t\ttempMessages[messageData.id].seenBy.push(currentUser.uid)\r\n\t\t\t\t\tfirestore.collection('chats').doc(chatId).update({\r\n\t\t\t\t\t\tmessages: tempMessages\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isVisible])\r\n\r\n\tasync function fetchSentMessageUser() {\r\n\t\tconst user = (await firestore.collection('users').doc(messageData.sender).get()).data()\r\n\t\tsetUserThatSentMessage(user)\r\n\t}\r\n\r\n\tfunction fetchAttachedData(list, place, setFunc) {\r\n\t\treturn list.forEach(async (itemId) => {\r\n\t\t\tlet itemData = (await firestore.collection(place).doc(itemId).get())\r\n\t\t\tif(itemData.exists) setFunc(prev => [...prev, itemData.data()])\r\n\t\t\telse setFunc(prev => [...prev, null])\r\n\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tfunction inResponseMessagesFetch() {\r\n\t\tif (inResponseToMessage !== null) {\r\n\t\t\tinResponseToMessage.forEach(async messageId => {\r\n\t\t\t\tsetInResponseToMessagesData(prev => [...prev, otherMessages[messageId]])\r\n\t\t\t\tconst name = (await firestore.collection('users').doc(otherMessages[messageId].sender).get()).data().displayName\r\n\t\t\t\tsetInResponseNames(prev => [name, ...prev])\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSentMessageUser()\r\n\t\tfetchAttachedData(attachedSongs, 'songs', setAttachedSongsData)\r\n\t\tfetchAttachedData(attachedAuthors, 'users', setAttachedAuthorsData)\r\n\t\tfetchAttachedData(attachedAlbums, 'playlists', setAttachedPlaylistsData)\r\n\t\tinResponseMessagesFetch()\r\n\t}, [])\r\n\r\n\tfunction addMessageToResponseList() {\r\n\t\tif (!inResponseToMessageArr.includes(id)) {\r\n\t\t\tsetInResponseToMessageArr(prev => [...prev, id])\r\n\t\t}\r\n\t}\r\n\r\n\tfunction returnToInitial() {\r\n\t\tlet dropDelta\r\n\t\tclearTimeout(dropDelta)\r\n\t\tsetTransformTransition(0.2)\r\n\t\tdropDelta = setTimeout(() => {\r\n\t\t  setSwipeDeltaX(0)\r\n\t\t  setTransformTransition(0)\r\n\t\t}, 200)\r\n\t }\r\n\r\n\tuseEffect(() => {\r\n\t\tif(swipeDeltaX < -160){\r\n\t\t\treturnToInitial()\r\n\t\t\taddMessageToResponseList()\r\n\t\t}\r\n\t}, [swipeDeltaX])\r\n\r\n\r\n\tconst emojis = [<FcLike />, <AiFillFire />, <AiFillLike />]\r\n\treturn (\r\n\t\t<div className={\"MessageItem \" + (sender === currentUser.uid ? 'your' : '')} ref={id === scrollToMessageId ? scrollToMessageRef : refPassthrough} style={showPhoto ? { paddingBottom: '15px', transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition } : {transform:`translateX(${swipeDeltaX}px)`, transition:transformTransition}} onTouchEnd = {returnToInitial}>\r\n\t\t\t<div className=\"messageItemImage\">\r\n\t\t\t\t{showPhoto ?\r\n\t\t\t\t\t<img loading = \"lazy\" src={userThatSentMessage.photoURL} alt=\"\" /> :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t\t<div className=\"messageItemBody\" style={id === scrollToMessageId ? { animation: 'showResponseMessage .5s forwards' } : showPhoto ? { borderRadius: 'var(--standartBorderRadius2) var(--standartBorderRadius) var(--standartBorderRadius) 5px' } : {}}>\r\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n\t\t\t\t\t<h5 className=\"messageUserName\">{userThatSentMessage.displayName}</h5>\r\n\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{messageSentTime}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{inResponseToMessage !== null ?\r\n\t\t\t\t\tinResponseToMessagesData.map((messageData, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"responseItem\" onClick={() => setScrollToMessageId(messageData.id)}>\r\n\t\t\t\t\t\t\t\t<span style={{ display: 'flex', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t<h5 style={messageData.sender === currentUser.uid ? { color: \"var(--lightPurple)\" } : {}}>\r\n\t\t\t\t\t\t\t\t\t\t{inResponseNames[index]}\r\n\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: '.7em', opacity: '.8', marginLeft: '10px' }}>{displayDate(messageData.sentTime, 2)}</div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{messageData.message}\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: '5px', color: 'var(--reallyLightBlue)' }}>\r\n\t\t\t\t\t\t\t\t\t\t{findWhatToWriteInResponseToItem(messageData)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{message}</p>\r\n\t\t\t\t\t{attachedSongsData.map((song, key) => {\r\n\t\t\t\t\t\treturn isVisible ? <SongItem song={song} localIndex={key} key={key} position = {screenHeight}/> : <SongItemLoading />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedPlaylistsData.map((album, index) => {\r\n\t\t\t\t\t\treturn <PlaylistItem playlist={album} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{attachedAuthorsData.map((author, index) => {\r\n\t\t\t\t\t\treturn <AuthorItemBig data={author} key={index} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t<SeenByCircle listOfSeen={messageData.seenBy} />\r\n\t\t\t<button className=\"respondToMessageBtn\" onClick={addMessageToResponseList} style = {isMobile?{opacity:-swipeDeltaX/80}:{}}>\r\n\t\t\t\t<BiShare />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { MessageItem } from './MessageItem'\r\n\r\nexport const MessageField = ({message, index, messageList, chatId, inResponseToMessage, setInResponseToMessage, scrollToMessageRef, scrollToMessageId, setScrollToMessageId, setDateRefsArray}) => {\r\n\tconst [showPhoto, setShowPhoto] = useState(false)\r\n\tconst [showDate, setShowDate] = useState(false)\r\n\tconst dateRef = useRef(null)\r\n\tuseEffect(() => {\r\n\t\tif (index === messageList.length - 1) setShowPhoto(true)\r\n\t\telse if (messageList[index + 1].sender !== messageList[index].sender) setShowPhoto(true)\r\n\t\telse if (displayDate(messageList[index + 1].sentTime) !== displayDate(messageList[index].sentTime)) setShowPhoto(true)\r\n\t\r\n\t\tif (index === 0) setShowDate(true)\r\n\t\telse if (displayDate(messageList[index].sentTime) !== displayDate(messageList[index - 1].sentTime)) {\r\n\t\t\tsetShowDate(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dateRef.current !== null) {\r\n\t\t\tsetDateRefsArray(prev=>[...prev, dateRef])\r\n\t\t}\r\n\t}, [showDate])\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showDate ?  <div ref = {dateRef} style={{ width: '100%', display: 'flex', justifyContent: 'center', alignItems: \"center\", padding: \"10px 0\" }}>{displayDate(message.sentTime)}</div> : null}\r\n\t\t\t<MessageItem\r\n\t\t\t\tmessageData={message}\r\n\t\t\t\tchatId={chatId}\r\n\t\t\t\tkey={message.id}\r\n\t\t\t\tscrollToMessageRef={scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId={scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId={setScrollToMessageId}\r\n\t\t\t\tshowPhoto={showPhoto}\r\n\t\t\t\totherMessages={messageList}\r\n\t\t\t\tinResponseToMessageArr={inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessageArr={setInResponseToMessage}\r\n\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { MessageField } from './MessageField'\r\n\r\nexport const DisplayChatMessages = ({chatId, messageList, inResponseToMessage, setInResponseToMessage, messagesWindowRef, setDateRefsArray}) => {\r\n\tconst scrollToMessageRef = useRef(null)\r\n\tconst [scrollToMessageId, setScrollToMessageId] = useState(-1)\r\n\tuseEffect(() => {\r\n\t\tif (scrollToMessageId !== -1) {\r\n\t\t\tmessagesWindowRef.current.scrollTo(0, scrollToMessageRef.current.offsetTop - 65 < 0 ? 0 : scrollToMessageRef.current.offsetTop - 65)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetScrollToMessageId(-1)\r\n\t\t\t}, 500)\r\n\t\t}\r\n\t}, [scrollToMessageId])\r\n\r\n\treturn messageList.length?<>\r\n\t\t{messageList.map((message, index)=>{\r\n\t\t\treturn <MessageField \r\n\t\t\t\tmessage = {message} \r\n\t\t\t\tindex = {index} \r\n\t\t\t\tkey = {message.id} \r\n\t\t\t\tmessageList = {messageList} \r\n\t\t\t\tchatId = {chatId} \r\n\t\t\t\tinResponseToMessage = {inResponseToMessage}\r\n\t\t\t\tsetInResponseToMessage = {setInResponseToMessage}\r\n\t\t\t\tscrollToMessageRef = {scrollToMessageRef}\r\n\t\t\t\tscrollToMessageId = {scrollToMessageId}\r\n\t\t\t\tsetScrollToMessageId = {setScrollToMessageId}\r\n\t\t\t\tsetDateRefsArray = {setDateRefsArray}\r\n\t\t\t/>\r\n\t\t})}\r\n\t</>:null\r\n}\r\n","import React, {useEffect} from 'react'\r\n\r\nexport const SmallImages = ({imagesList, borderColor = \"#fff\"}) => {\r\n\treturn (\r\n\t\t<div className = \"SmallImages\" style = {{marginRight:-7*(imagesList.length-1)}}>\r\n\t\t\t{imagesList.map((image, index)=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"smallImgContainer\" style = {{border:`3px solid ${borderColor}`, transform:`translateX(${-15*index}px)`}} key = {index}>\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={image} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport {SmallImages} from '../AuthorPage/SmallImages'\r\nexport const TypingAnimation = ({ typingPeople }) => {\r\n\tconst [typingPeopleData, setTypingPeopleData] = useState([])\r\n\tconst {currentUser} = useAuth()\r\n\tuseEffect(() => {\r\n\t\tsetTypingPeopleData([])\r\n\t\ttypingPeople.map(async personId=>{\r\n\t\t\tconst personData = (await firestore.collection('users').doc(personId).get()).data()\r\n\t\t\tif(personData.uid !== currentUser.uid) setTypingPeopleData(prev=>[...prev, personData])\r\n\t\t})\r\n\t}, [typingPeople])\r\n\treturn typingPeopleData.length > 0 ? (\r\n\t\t<div className = \"typingWrapper\">\r\n\t\t\t<SmallImages imagesList = {typingPeopleData.map(person=>person.photoURL)} borderColor = {'var(--navItemColor)'}/>\r\n\t\t\t<div className=\"TypingAnimation\">\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t\t<span className=\"typingCircle\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : null\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { DisplayChatMessages } from './DisplayChatMessages'\r\nimport { TypingAnimation } from './TypingAnimation'\r\n\r\nexport const ChatMessagesWindow = ({chatId, chatData, messageList, findTopDate, inResponseToMessage, setInResponseToMessage, setDateRefsArray }) => {\r\n\tconst { screenHeight, isMobile } = useScreen()\r\n\tconst messagesWindowRef = useRef(null)\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tconst scroll = messagesWindowRef.current?.scrollHeight - messagesWindowRef.current?.clientHeight;\r\n\t\tmessagesWindowRef.current?.scrollTo(0, scroll);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(()=>{\r\n\t\t\tscrollToBottom()\r\n\t\t}, 200) \r\n\t}, [messageList]);\r\n\treturn (\r\n\t\t<div className=\"chatMessagesWindow\" ref={messagesWindowRef} onScroll={findTopDate} style={{ height: !isMobile ? screenHeight - 170 + 'px' : screenHeight - 125 + 'px' }}>\r\n\t\t\t<DisplayChatMessages chatId={chatId} messageList={messageList} inResponseToMessage={inResponseToMessage} setInResponseToMessage={setInResponseToMessage} messagesWindowRef={messagesWindowRef} setDateRefsArray={setDateRefsArray}/>\r\n\t\t\t<TypingAnimation typingPeople={chatData.typing} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { FiMessageCircle } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\n\r\nexport const ChatWithFriendButton = ({ data, color }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([data.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [data.uid])\r\n\r\n\treturn (\r\n\t\t<Link to={`/chat/${friendChatId}`} style = {{display:'block', width:'fit-content', textDecoration: \"none\"}}>\r\n\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, data.uid], friendChatId) }} style = {{background:color}} className = \"ChatWithFriendButton\"><FiMessageCircle /> Messages</button>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { RadioBtn } from '../SignIn-Up/RadioBtn'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { SongList } from '../Lists/SongList'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nexport const CustomizeAlbum = ({ playlist }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [playlistName, setPlaylistName] = useState(playlist.name)\r\n\tconst [playlistCover, setPlaylistCover] = useState(playlist.image)\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(playlist.authors)\r\n\tconst [releaseDate, setReleaseDate] = useState(playlist.creationDate)\r\n\tconst [songsSearch, setSongsSearch] = useState(\"\")\r\n\tconst [allSongs, setAllSongs] = useState([])\r\n\tconst [chosenSongs, setChosenSongs] = useState(playlist.songs)\r\n\tconst [playlistStatus, setPlaylistStatus] = useState(playlist.isAlbum?1:0)\r\n\tconst [isPlaylistPrivate, setIsPlaylistPrivate] = useState(playlist.isPrivate ? 1 : 0)\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [loadingSongs, setLoadingSongs] = useState(false)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(playlist.imageColors)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPlaylistName(playlist.name)\r\n\t\tsetPlaylistCover(playlist.image)\r\n\t\tsetChosenAuthors(playlist.authors)\r\n\t}, [playlist.id])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (songsSearch.length === 0) {\r\n\t\t\tplaylist.songs.map(async songId => {\r\n\t\t\t\tconst songData = (await firestore.collection('songs').doc(songId).get()).data()\r\n\t\t\t\tsetLoadingSongs(false)\r\n\t\t\t\tsetAllSongs(prev => [...prev, songData])\r\n\t\t\t})\r\n\t\t}\r\n\t}, [songsSearch])\r\n\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\r\n\tfunction removeSongFromList(data) {\r\n\t\tconst filtered = chosenSongs.filter(song => song !== data)\r\n\t\treturn setChosenSongs(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function addPlaylistToFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tconst uid = getUID()\r\n\t\tif (chosenAuthors.length > playlist.authors.length) {\r\n\t\t\tconst newAuthors = chosenAuthors.filter(author => { return !playlist.authors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tauthorPlaylists.push(playlist.id)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: authorPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(chosenAuthors.length < playlist.authors.length){\r\n\t\t\tconst newAuthors = playlist.authors.filter(author => { return !chosenAuthors.find(a => a.uid === author.uid) })\r\n\t\t\tnewAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorPlaylists = authorData.ownPlaylists\r\n\t\t\t\tconst filteredPlaylists = authorPlaylists.filter(playlistId => playlistId !== playlist.id)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townPlaylists: filteredPlaylists\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfirestore.collection('playlists').doc(playlist.id).update(\r\n\t\t\t{\r\n\t\t\t\tid: playlist.id,\r\n\t\t\t\tname: playlistName,\r\n\t\t\t\tsongs: chosenSongs,\r\n\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\timage: playlistCover,\r\n\t\t\t\tlistens: playlist.listens,\r\n\t\t\t\tcreationDate: releaseDate, \r\n\t\t\t\tsubscribers:playlist.subscribers,\r\n\t\t\t\tisAlbum:playlistStatus === 1,\r\n\t\t\t\timageColors:imageColors,\r\n\t\t\t\tisPrivate:isPlaylistPrivate === 1\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit = {e=>e.preventDefault()}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter playlist name\" value={playlistName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Playlist authors</h3>\r\n\t\t\t\t\t<SearchBar value = {authorsInputValue} setValue = {setAuthorsInputValue} setResultAuthorList = {setAllAuthors} defaultSearchMode = {'authors'} inputText = {\"Search for authors\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => author.uid === currentUser.uid ? null : removeAuthorFromList(author)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingAuthors ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\tallAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Search for songs</h3>\r\n\t\t\t\t\t<SearchBar value = {songsSearch} setValue = {setSongsSearch} setAllFoundSongs = {setAllSongs} defaultSearchMode = {'songs'} inputText = {\"Search for songs\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenSongs.map((songId) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{songId}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => removeSongFromList(songId)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{loadingSongs ?\r\n\t\t\t\t\t\t\t<div style={{ position: 'relative', width: '100%', height: '50px' }}>\r\n\t\t\t\t\t\t\t\t<LoadingCircle />\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<SongList listOfSongs={allSongs} source={'no'} listOfChosenSongs={chosenSongs} setListOfSongs={setChosenSongs} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ? <div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"Playlist\" onClick={() => setPlaylistStatus(0)} currentActive={playlistStatus} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Album\" onClick={() => setPlaylistStatus(1)} currentActive={playlistStatus} id={1} />\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', margin: '15px 0' }}>\r\n\t\t\t\t\t<RadioBtn label=\"Not Private\" onClick={() => setIsPlaylistPrivate(0)} currentActive={isPlaylistPrivate} id={0} />\r\n\t\t\t\t\t<RadioBtn label=\"Private\" onClick={() => setIsPlaylistPrivate(1)} currentActive={isPlaylistPrivate} id={1} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.isAdmin || currentUser.isAuthor ?\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t\t\t</label> : null\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload playlist cover\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={playlistCover !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songsImages/', setPlaylistCover)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={addPlaylistToFirebase}>Update playlist</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { MdModeEdit } from 'react-icons/md'\r\nexport const CustomizeAuthor = ({ author }) => {\r\n\tconst [authorName, setPlaylistName] = useState(author.displayName)\r\n\tconst [authorCover, setAuthorCover] = useState(author.photoURL)\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState(author.imageColors)\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tfunction updateAuthorInFirebase(e) {\r\n\t\te.preventDefault()\r\n\t\tfirestore.collection('users').doc(author.uid).update(\r\n\t\t\t{\r\n\t\t\t\tdisplayName: authorName,\r\n\t\t\t\tphotoURL: authorCover,\r\n\t\t\t\timageColors: imageColors,\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={e => e.preventDefault()}>\r\n\t\t\t\t<div style = {{width:'100%', display:'flex', justifyContent:'center'}}>\r\n\t\t\t\t\t<div className=\"chatInfoImage\" style={{ backgroundImage: `url(${authorCover})` }}>\r\n\t\t\t\t\t\t<label className=\"changePhoto\">\r\n\t\t\t\t\t\t\t<MdModeEdit />\r\n\t\t\t\t\t\t\tChange photo\r\n\t\t\t\t\t\t\t<input type=\"file\" style={{ display: 'none' }} onChange={(e) => onFileChange(e, 'chatCovers/', setAuthorCover)} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Your name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" value={authorName} onChange={(e) => setPlaylistName(e.target.value)} required />\r\n\t\t\t\t</label>\r\n\t\t\t\t<button type=\"button\" className=\"addSongBtn\" onClick={updateAuthorInFirebase}>Update author</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const addAuthorToLibrary = async (authorData , currentUser) => {\r\n\tconst addedAuthors = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedAuthors\r\n\taddedAuthors.push(authorData.uid)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedAuthors: addedAuthors\r\n\t})\r\n\tlet subscribers = authorData.subscribers\r\n\tsubscribers++\r\n\tfirestore.collection('users').doc(authorData.uid).update({\r\n\t\tsubscribers: subscribers\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport default function addFriend(friendData, currentUser){\r\n\tconst updatedDataForFriend = friendData.friends\r\n\tconst updatedDataForCurrentUser = currentUser.friends\r\n\tupdatedDataForFriend.push({status:'requested', uid:currentUser.uid})\r\n\tupdatedDataForCurrentUser.push({status:'awaiting', uid:friendData.uid})\r\n\r\n\tfirestore.collection('users').doc(friendData.uid).update({\r\n\t\tfriends:updatedDataForFriend\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends:updatedDataForCurrentUser\r\n\t})\r\n\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const  addPlaylistToLibrary = async(playlistData, currentUser) => {\r\n\tconst addedPlaylists = (await firestore.collection('users').doc(currentUser.uid).get()).data().addedPlaylists\r\n\taddedPlaylists.push(playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists: addedPlaylists\r\n\t})\r\n\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:++playlistData.subscribers\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const removePlaylistFromLibrary = async (playlistData, currentUser) =>{\r\n\tconst filteredPlaylists = currentUser.addedPlaylists.filter(id=>id !== playlistData.id)\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\taddedPlaylists:filteredPlaylists\r\n\t})\r\n\tfirestore.collection('playlists').doc(playlistData.id).update({\r\n\t\tsubscribers:--playlistData.subscribers\r\n\t})\r\n}","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\n\r\nexport const GeneralSettings = () => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className = \"GeneralSettings\">\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport {FiMenu} from 'react-icons/fi'\r\nimport {IoIosArrowForward} from 'react-icons/io'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport \"../../styles/Settings.css\"\r\nimport { GeneralSettings } from './GeneralSettings'\r\nexport const SettingsList = () => {\r\n\tconst {setContent} = useModal()\r\n\tconst settingsList = [\r\n\t\t{\r\n\t\t\tid:0, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<GeneralSettings/>,\r\n\t\t\tcolor:'var(--red)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:1, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--lightBlue)'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid:2, \r\n\t\t\ttitle:'General',\r\n\t\t\ticon:<FiMenu/>,\r\n\t\t\tto:<h2>Test</h2>,\r\n\t\t\tcolor:'var(--green)'\r\n\t\t}\r\n\t]\r\n\treturn (\r\n\t\t<div className = \"SettingsList\">\r\n\t\t\t{settingsList.map(settingItem=>{\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className = \"SettingItem\" style = {{color:settingItem.color}} key = {settingItem.id} onClick = {()=>setContent(settingItem.to)}>\r\n\t\t\t\t\t\t<div className = \"settingItemIconAndTitle\">\r\n\t\t\t\t\t\t\t{settingItem.icon}\r\n\t\t\t\t\t\t\t<h3>{settingItem.title}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IoIosArrowForward/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { FiHeadphones, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const AlbumInfo = ({ album }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisAlbum, setFriendsThatHaveThisAlbum] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisAlbum() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisAlbum([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (friend.addedPlaylists.includes(album.id)) setFriendsThatHaveThisAlbum(prev => [...prev, friend])\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisAlbum()\r\n\t}, [album.uid])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${album.image})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<span style={{ opacity: \".5\", fontWeight: 500, fontSize: '.7em' }}>{album.isAlbum ? \"Album\" : \"Playlist\"}</span>\r\n\t\t\t\t\t<h3 style={{ color: album.imageColors[1] }}>{album.name}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', opacity: '0.6', fontSize: '.9em', position: \"relative\" }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{album.listens}<FiHeadphones /></p>\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{album.subscribers} <FiUserPlus /></p>\r\n\t\t\t\t\t<span>{displayDate(album.creationDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisAlbum.length > 0 ? 'Friends subscribed' : 'None of your friends subscribed'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex' }}>\r\n\t\t\t\t\t{friendsThatHaveThisAlbum.length > 0 ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{friendsThatHaveThisAlbum.map((person, index) => {\r\n\t\t\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{friendsThatHaveThisAlbum.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisAlbum} title={`Friends subscribed to ${album.name}`} />)} /> : null}\r\n\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t<button className=\"shareBtn\" style={{ minHeight: '35px', background: album.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={album} whatToShare={'playlist'} />) }}>Share</button>}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { PersonTinyVerticalItem } from '../AuthorPage/PersonTinyVerticalItem'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { FiHeadphones, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { SeeMoreRoundButton } from '../Buttons/SeeMoreRoundButton'\r\nimport { TinyPersonsList } from '../Lists/TinyPersonsList'\r\nexport const AuthorInfo = ({ author }) => {\r\n\tconst { setContent } = useModal()\r\n\tconst { yourFriends } = useSong()\r\n\tconst [friendsThatHaveThisSong, setFriendsThatHaveThisAuthor] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tasync function findFriendsThatHaveThisAuthor() {\r\n\t\tsetLoading(true)\r\n\t\tsetFriendsThatHaveThisAuthor([])\r\n\t\tyourFriends.forEach(friend => {\r\n\t\t\tif (author.isAuthor) {\r\n\t\t\t\tif (friend.addedAuthors.includes(author.uid)) setFriendsThatHaveThisAuthor(prev => [...prev, friend])\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (friend.friends.find(person=>person.uid === author.uid)) setFriendsThatHaveThisAuthor(prev => [...prev, friend])\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindFriendsThatHaveThisAuthor()\r\n\t}, [author.uid])\r\n\r\n\treturn (\r\n\t\t<div className='SongInfo'>\r\n\t\t\t<div className=\"songImage\" style={{ backgroundImage: `url(${author.photoURL})` }}></div>\r\n\t\t\t<div className=\"songInfoContent\">\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column-reverse' }}>\r\n\t\t\t\t\t<h3 style={{ color: author.imageColors[1] }}>{author.displayName}{author.isVerified ? <ImCheckmark style={{ color: author.imageColors[0], width: '15px', height: \"15px\", marginLeft: '5px' }} /> : null}</h3>\r\n\t\t\t\t\t<span style={{ opacity: \".5\", fontWeight: 500, fontSize: '.7em' }}>{author.isAuthor ? \"Author\" : \"User\"}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: 'flex', opacity: '0.6', fontSize: '.9em', position: \"relative\" }} className=\"listensAndDate\">\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{author.numberOfListenersPerMonth}<FiHeadphones /></p>\r\n\t\t\t\t\t<p className=\"infoListens\" style={{ marginRight: '20px', position: 'relative' }}>{author.subscribers} <FiUserPlus /></p>\r\n\t\t\t\t\t<span>{displayDate(author.regDate)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 style={{ margin: '10px 0' }}>{friendsThatHaveThisSong.length > 0 ? 'Friends subscribed' : 'None of your friends subscribed'}</h4>\r\n\t\t\t\t{!loading ? <div style={{ display: 'flex' }}>\r\n\t\t\t\t\t{friendsThatHaveThisSong.length > 0 ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{friendsThatHaveThisSong.map((person, index) => {\r\n\t\t\t\t\t\t\t\tif (index < 2) return <PersonTinyVerticalItem person={person} key={person.uid} />\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{friendsThatHaveThisSong.length > 2 ? <SeeMoreRoundButton onClick={() => setContent(<TinyPersonsList listOfPeople={friendsThatHaveThisSong} title={`Friends subscribed to ${author.displayName}`} />)} /> : null}\r\n\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t<button className=\"shareBtn\" style={{ minHeight: '35px', background: author.imageColors[0] }} onClick={() => { setContent(<FriendsListToShareWith item={author} whatToShare={'author'} />) }}>Share</button>}\r\n\t\t\t\t</div> :\r\n\t\t\t\t\t<div style={{ position: 'relative', height: '50px' }}><LoadingCircle top={\"50%\"} /></div>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useModal } from '../../contexts/ModalContext';\r\nimport { FiFlag, FiInfo, FiShare } from 'react-icons/fi'\r\nimport {FriendsListToShareWith} from '../Lists/FriendsListToShareWith'\r\nimport { AlbumInfo } from '../Info/AlbumInfo';\r\nimport { AuthorInfo } from '../Info/AuthorInfo';\r\nexport const AuthorMoreWindow = ({data}) => {\r\n\tconst {setContent} = useModal()\r\n\treturn (\r\n\t\t<div className=\"AuthorMoreWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => {setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t<FiShare />Share\r\n\t\t\t</div>\r\n\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { setContent(data.authors !== undefined ? <AlbumInfo album={data} /> : <AuthorInfo author={data} />) }}><FiInfo />Info</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useAlbumAuthors = (data) => {\r\n\tconst [albumAuthors, setAlbumAuthors] = useState([])\r\n\tconst [authorsImages, setAuthorsImages] = useState([])\r\n\tasync function fetchAuthorsData() {\r\n\t\tif (data?.authors !== undefined) {\r\n\t\t\tconst ids = data.authors.map(author => author.uid)\r\n\t\t\tconst authrorsData = await firestore.collection(\"users\").where(\"uid\", \"in\", ids).get()\r\n\t\t\tconst tempArrayAuthors = []\r\n\t\t\tconst tempArrayImages = []\r\n\t\t\tauthrorsData.docs.forEach((a) => {\r\n\t\t\t\ttempArrayAuthors.push(a.data())\r\n\t\t\t\ttempArrayImages.push(a.data().photoURL)\r\n\t\t\t})\r\n\t\t\tsetAlbumAuthors(tempArrayAuthors)\r\n\t\t\tsetAuthorsImages(tempArrayImages)\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [data?.id])\r\n\r\n\treturn [albumAuthors, authorsImages]\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { FiEdit2, FiHeadphones, FiInfo, FiMoreVertical, FiPlusCircle, FiSettings, FiShare, FiTrash, FiUserCheck, FiUserPlus } from 'react-icons/fi'\r\nimport { ImCheckmark } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport displayDate from '../../functions/display/displayDate'\r\nimport { BackBtn } from '../Buttons/BackBtn'\r\nimport { SmallImages } from './SmallImages'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { IoMdExit } from 'react-icons/io'\r\nimport rightFormanForBigNumber from '../../functions/other/rightFormatForBigNumber'\r\nimport { CgCheckO, CgLock } from 'react-icons/cg'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport { ChatWithFriendButton } from './ChatWithFriendButton'\r\nimport { BiAlbum, BiDoorOpen, BiLoaderAlt } from 'react-icons/bi'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { CustomizeAlbum } from '../AlbumPage/CustomizeAlbum'\r\nimport { CustomizeAuthor } from '../AuthorPage/CustomizeAuthor'\r\nimport { addAuthorToLibrary } from '../../functions/add/addAuthorToLibrary'\r\nimport addFriend from '../../functions/add/addFriend'\r\nimport { LastSongListened } from './LastSongListened'\r\nimport { LastSeen } from '../Basic/LastSeen'\r\nimport { addPlaylistToLibrary } from '../../functions/add/addPlaylistToLibrary'\r\nimport { removePlaylistFromLibrary } from '../../functions/other/removePlaylistFromLibrary'\r\nimport { SettingsList } from '../Settings/SettingsList'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { AuthorMoreWindow } from '../Windows/AuthorMoreWindow'\r\nimport { AlbumInfo } from '../Info/AlbumInfo'\r\nimport { AuthorInfo } from '../Info/AuthorInfo'\r\nimport { deleteFriend } from '../../functions/delete/deleteFriend'\r\nimport { useAlbumAuthors } from '../../hooks/useAlbumAuthors'\r\nimport { deletePlaylist } from '../../functions/delete/deletePlaylist'\r\nimport { quitPlaylist } from '../../functions/other/quitPlaylist'\r\nexport const Header = ({ data, headerColors }) => {\r\n\tconst { isMobile } = useScreen()\r\n\tconst { displayAuthors } = useSong()\r\n\tconst [albumAuthors, authorsImages] = useAlbumAuthors(data)\r\n\tconst { currentUser, logout } = useAuth()\r\n\tconst [openMoreWindow, setOpenMoreWindow] = useState(false)\r\n\tconst { toggleModal, setContent, openConfirm, closeConfirm } = useModal()\r\n\tconst isFriend = currentUser.friends.find(friend => (friend.uid === data.uid && friend.status === 'added'))\r\n\tconst moreWindowRef = useRef(null)\r\n\tuseOutsideClick(moreWindowRef, setOpenMoreWindow)\r\n\r\n\tfunction displayCreationDateIfExists() {\r\n\t\treturn data.creationDate !== undefined ?\r\n\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t<Hint text={\"creation date\"} style={{ fontSize: \"0.8em\" }} />\r\n\t\t\t\t<span>{displayDate(data.creationDate)}</span>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction isAlbumOrIsAuthor() {\r\n\t\treturn data.authors !== undefined ? data.isAlbum ? <h5>Album</h5> : <h5>Playlist</h5> : data.isAuthor ? <h5>Author</h5> : <h5>User {data.authors === undefined && isFriend ? <LastSeen userUID={data.uid} /> : null}</h5>\r\n\t}\r\n\r\n\tfunction showCreatorsIfExist() {\r\n\t\treturn data.authors !== undefined ?\r\n\t\t\t<div className=\"headerAuthorsImagesAndNames\">\r\n\t\t\t\t<SmallImages imagesList={authorsImages} borderColor={headerColors[2]} />\r\n\t\t\t\t<div className=\"headerAuthors\">{displayAuthors(albumAuthors, \", \")}</div>\r\n\t\t\t</div> :\r\n\t\t\tnull\r\n\t}\r\n\r\n\tfunction findIfIsVerified() {\r\n\t\treturn data.isVerified ? <ImCheckmark style={{ color: headerColors[0] }} /> : null\r\n\t}\r\n\r\n\r\n\tfunction whatButtonToRender() {\r\n\t\tif (data.authors) {\r\n\t\t\tif (currentUser.ownPlaylists.includes(data.id) && data.authors.length === 1) return <button onClick={() => openConfirm(\"Are you sure you want to DELETE this playlist forever?!\", \"Yes, pretty sure\", \"No, I Don't!\", () => { deletePlaylist(data.id); closeConfirm() })}><Hint text={\"delete playlist\"} direction={\"bottom\"} /><FiTrash /></button>\r\n\t\t\telse if (currentUser.ownPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to quit this playlist?\", \"Yes, pretty sure\", \"No, I Don't!\", () => { quitPlaylist(data, currentUser); closeConfirm() })}><Hint text={\"quit playlist\"} direction={\"bottom\"} /><BiDoorOpen /></button>\r\n\t\t\telse if (currentUser.addedPlaylists.includes(data.id)) return <button onClick={() => openConfirm(\"Are you sure you want to remove this playlist from library?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { removePlaylistFromLibrary(data, currentUser); closeConfirm() })}><Hint text={\"remove playlist from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse return <button onClick={() => addPlaylistToLibrary(data, currentUser)}><Hint text={\"add playlist\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (currentUser.addedAuthors.includes(data.uid)) return <button><Hint text={\"remove author from library\"} direction={\"bottom\"} /><CgCheckO /></button>\r\n\t\t\telse if (currentUser.uid === data.uid) return <button onClick={() => { toggleModal(); setContent(<SettingsList />) }}><Hint text={\"settings\"} direction={\"bottom\"} /><FiSettings /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => friend.uid === data.uid && friend.status === 'added')) return <button onClick={() => openConfirm(\"Are you sure you want to remove this person from friend list?\", \"Yes, pretty sure\", \"No-no-no, go away\", () => { deleteFriend(currentUser, data); closeConfirm() })}><Hint text={\"remove from friend list\"} direction={\"bottom\"} /><FiUserCheck /></button>\r\n\t\t\telse if (!data.isAuthor && currentUser.friends.find(friend => ((friend.uid === data.uid) && (friend.status === 'awaiting')))) return <button onClick={addFriend}><Hint text={\"waiting for response\"} direction={\"bottom\"} /><BiLoaderAlt style={{ animation: 'loading 1s infinite linear' }} /></button>\r\n\t\t\telse if (!data.isAuthor) return <button onClick={() => addFriend(data, currentUser)}><Hint text={\"add friend\"} direction={\"bottom\"} /><FiUserPlus /></button>\r\n\t\t\telse return <button onClick={() => addAuthorToLibrary(data, currentUser)}><Hint text={\"subscribe\"} direction={\"bottom\"} /><FiPlusCircle /></button>\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findIfIsPrivate() {\r\n\t\treturn data.isPrivate ? <CgLock /> : null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Header\" style={headerColors.length ? { background: `linear-gradient(45deg, ${headerColors[2]}, ${headerColors[0]})` } : { background: 'var(--yellowAndPinkGrad)' }}>\r\n\t\t\t<div className=\"headerBtns\" style={{ background: headerColors[2] }}>\r\n\t\t\t\t<BackBtn />\r\n\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t<div className=\"headerBackBtn\">\r\n\t\t\t\t\t\t{whatButtonToRender()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerMoreBtn\" ref={moreWindowRef}>\r\n\t\t\t\t\t\t<button onClick={!isMobile ? () => setOpenMoreWindow(!openMoreWindow) : () => { toggleModal(); setContent(<AuthorMoreWindow data={data} />) }}>\r\n\t\t\t\t\t\t\t<Hint text={\"more\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<FiMoreVertical />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{openMoreWindow ?\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindow\" style={{ top: '110%', bottom: 'auto' }} onClick={e => e.stopPropagation()} >\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t(data.authors && data.authors.find(person => person.uid === currentUser.uid)) || (data.authors && currentUser.isAdmin) ? <div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<CustomizeAlbum playlist={data} />) }}><FiEdit2 />Edit</div> :\r\n\t\t\t\t\t\t\t\t\t\t(data.uid === currentUser.uid && !data.isAuthor) ? <div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<CustomizeAuthor author={data} />) }}><FiEdit2 />Edit</div> :\r\n\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={data} whatToShare={data.authors !== undefined ? 'playlist' : 'author'} />) }}>\r\n\t\t\t\t\t\t\t\t\t\t<FiShare />Share\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"songItemMenuWindowItem\" onClick={() => { toggleModal(); setContent(data.authors !== undefined ? <AlbumInfo album={data} /> : <AuthorInfo author={data} />) }}><FiInfo />Info</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentUser.uid === data.uid ?\r\n\t\t\t\t\t\t<button onClick={() => openConfirm(\"Are you sure you want to quit?\", \"Yes, pretty sure\", \"No, I Don't!\", () => { logout(); closeConfirm() })} >\r\n\t\t\t\t\t\t\t<Hint text={\"quit\"} direction={\"bottom\"} />\r\n\t\t\t\t\t\t\t<IoMdExit />\r\n\t\t\t\t\t\t</button> :\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorsImage\" style={data.authors === undefined ? { animation: \"floatingBorderRadius 10s infinite ease-in-out\", backgroundImage: `url(${data.photoURL})`, position:'relative' } : { backgroundImage: `url(${data.image})`, position:'relative', backgroundColor:'var(--red)' }}>\r\n\t\t\t{data.authors !== undefined && !data.image?<BiAlbum style = {{position:'absolute', left:'50%', top:'50%', transform:'translate(-50%, -50%)', width:'60px', height:'60px'}}/>:null}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"headerAuthorInfo\">\r\n\t\t\t\t<div className=\"headerAuthorsName\">\r\n\t\t\t\t\t{isAlbumOrIsAuthor()}\r\n\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', margin: \"2px 0 10px 0\" }}>\r\n\t\t\t\t\t\t<h1>{data.displayName || data.name}</h1>\r\n\t\t\t\t\t\t{findIfIsVerified()}\r\n\t\t\t\t\t\t{findIfIsPrivate()}\r\n\t\t\t\t\t\t{/* <LastSongListened data = {data} loading = {loading}/> */}\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{showCreatorsIfExist()}\r\n\r\n\t\t\t\t<div className=\"headerListenersAndSubs\">\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t\t\t<Hint text={(data.listens ?? data.numberOfListenersPerMonth) + ' listens'} style={{ fontSize: \"0.8em\" }} />\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.listens ?? data.numberOfListenersPerMonth)}</span>\r\n\t\t\t\t\t\t<FiHeadphones />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"headerListenersAndSubsItem\">\r\n\t\t\t\t\t\t<Hint text={data.subscribers + ' subscribers'} style={{ fontSize: \"0.8em\" }} />\r\n\t\t\t\t\t\t<span>{rightFormanForBigNumber(data.subscribers)}</span>\r\n\t\t\t\t\t\t<FiUserPlus />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{displayCreationDateIfExists()}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isFriend ? <ChatWithFriendButton data={data} color={headerColors[3]} /> : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { firestore } from \"../../firebase\"\r\n\r\nexport const deletePlaylist = (playlistId) => {\r\n\tfirestore.collection(\"users\").where(\"addedPlaylists\", \"array-contains\", playlistId).get().then((listOfPeople)=>{\r\n\t\tlistOfPeople.docs.forEach(person=>{\r\n\t\t\tconst personFilteredPlaylists = person.data().addedPlaylists.filter(pId => pId !== playlistId)\r\n\t\t\tfirestore.collection('users').doc(person.data().uid).update({\r\n\t\t\t\taddedPlaylists:personFilteredPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\tfirestore.collection(\"users\").where(\"ownPlaylists\", \"array-contains\", playlistId).get().then((listOfPeople)=>{\r\n\t\tlistOfPeople.docs.forEach(person=>{\r\n\t\t\tconst personFilteredPlaylists = person.data().addedPlaylists.filter(pId => pId !== playlistId)\r\n\t\t\tfirestore.collection('users').doc(person.data().uid).update({\r\n\t\t\t\townPlaylists:personFilteredPlaylists\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\tfirestore.collection('search').doc(playlistId).delete().then(()=>{\r\n\t\tfirestore.collection('playlists').doc(playlistId).delete()\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const quitPlaylist = (playlist, currentUser) => {\r\n\t//logic for quiting playlist where it has more than one participant\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\townPlaylists:currentUser.ownPlaylists.filter(id => id !== playlist.id)\r\n\t})\r\n\tfirestore.collection('playlists').doc(playlist.id).update({\r\n\t\tauthors:playlist.authors.filter(author=>author.uid !== currentUser.uid)\r\n\t})\r\n}","import { firestore } from \"../../firebase\"\r\n\r\nexport const deleteFriend = (currentUser, data) => {\r\n\tlet filteredUserFriends = currentUser.friends.filter(friend => friend.uid !== data.uid)\r\n\tlet filteredOtherUserFriends = data.friends.filter(friend => friend.uid !== currentUser.uid)\r\n\r\n\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\tfriends: filteredUserFriends\r\n\t})\r\n\r\n\tfirestore.collection('users').doc(data.uid).update({\r\n\t\tfriends: filteredOtherUserFriends\r\n\t})\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { firestore, storage } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findVariantsOfName } from '../../functions/find/findVariantsOfName'\r\nimport getUID from '../../functions/other/getUID'\r\nimport { DownloadPhotoButton } from '../Buttons/DownloadPhotoButton'\r\nimport { ErrorPlate } from '../MessagePlates/ErrorPlate'\r\nimport { LoadingCircle } from '../Loading/LoadingCircle'\r\nimport { PersonTiny } from '../Basic/PersonTiny'\r\nimport { FullScreenLoading } from '../Loading/FullScreenLoading'\r\nimport { SearchBar } from '../Basic/SearchBar'\r\nimport { transformLyricsToArrayOfObjects } from '../../functions/other/transformLyricsToArrayOfObject'\r\nexport const AddSong = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [songName, setSongName] = useState(\"\")\r\n\tconst [songCover, setSongCover] = useState(\"\")\r\n\tconst [songSrc, setSongSrc] = useState(\"\")\r\n\tconst [authorsInputValue, setAuthorsInputValue] = useState('')\r\n\tconst [allAuthors, setAllAuthors] = useState([])\r\n\tconst [chosenAuthors, setChosenAuthors] = useState(!currentUser.isAdmin ? [{ uid: currentUser.uid, photoURL: currentUser.photoURL, displayName: currentUser.displayName }] : [])\r\n\tconst [releaseDate, setReleaseDate] = useState(\"\")\r\n\tconst [lyrics, setLyrics] = useState(\"\")\r\n\tconst [imageLocalPath, setImageLocalPath] = useState(\"\")\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tconst [loadingAuthors, setLoadingAuthors] = useState(false)\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [showSuccessMessage, setShowSuccessMessage] = useState(false)\r\n\tconst [loadingSong, setLoadingSong] = useState(false)\r\n\r\n\tfunction removeAuthorFromList(data) {\r\n\t\tconst filtered = chosenAuthors.filter(people => people.uid !== data.uid)\r\n\t\treturn setChosenAuthors(filtered)\r\n\t}\r\n\r\n\tfunction addAuthor(data) {\r\n\t\tif (!chosenAuthors.some(person => person.uid === data.uid)) {\r\n\t\t\treturn setChosenAuthors(prev => [...prev, {\r\n\t\t\t\tuid: data.uid,\r\n\t\t\t\tdisplayName: data.displayName,\r\n\t\t\t\tphotoURL: data.photoURL\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tremoveAuthorFromList(data)\r\n\t}\r\n\r\n\tasync function onFileChange(e, place, setFunc) {\r\n\t\tsetErrorMessage(\"\")\r\n\t\tconst file = e.target.files[0]\r\n\t\tlet isValid = false\r\n\t\tif (place === 'songsImages/') {\r\n\t\t\tconst validExtensions = [\".jpg\", \".png\", \".jpeg\"]\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => \" \" + ex)}`)\r\n\t\t}\r\n\t\telse if (place === \"songs/\") {\r\n\t\t\tconst validExtensions = [\".mp3\", \".mp4a\", \".flac\", \".wav\", '.wma']\r\n\t\t\tif (validExtensions.find((ext) => file.name.substr(file.name.length - ext.length, ext.length) === ext)) isValid = true\r\n\t\t\telse setErrorMessage(`Format of your file is not valid. Download file with one of these: ${validExtensions.map(ex => ex)}`)\r\n\t\t}\r\n\r\n\t\tif (isValid) {\r\n\t\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\t\tconst storageRef = storage.ref()\r\n\t\t\tconst fileRef = storageRef.child(place + file.name)\r\n\t\t\tawait fileRef.put(file)\r\n\t\t\tsetFunc(await fileRef.getDownloadURL())\r\n\t\t}\r\n\t}\r\n\r\n\tasync function addSongToFirebase(e) {\r\n\t\te.preventDefault()\r\n\r\n\t\tlet uid = getUID()\r\n\t\tsetErrorMessage(\"\")\r\n\t\tif (songName.length === 0) setErrorMessage(\"Song has to have some name\")\r\n\t\telse if (chosenAuthors.length === 0) setErrorMessage('Song has to have at least 1 author')\r\n\t\telse if (songCover.length === 0) setErrorMessage('You didn\\'t load song cover')\r\n\t\telse if (songSrc.length === 0) setErrorMessage('You didn\\'t load song file')\r\n\t\telse if (releaseDate.length === 0) setErrorMessage('You have to set release date for a song')\r\n\t\telse {\r\n\t\t\tsetLoadingSong(true)\r\n\t\t\tfirestore.collection('songs').doc(uid).set(\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uid,\r\n\t\t\t\t\tname: songName,\r\n\t\t\t\t\tsongSrc: songSrc,\r\n\t\t\t\t\tauthors: chosenAuthors,\r\n\t\t\t\t\tcover: songCover,\r\n\t\t\t\t\tlistens: 0,\r\n\t\t\t\t\treleaseDate: releaseDate,\r\n\t\t\t\t\tlyrics: transformLyricsToArrayOfObjects(lyrics),\r\n\t\t\t\t\timageColors: imageColors\r\n\t\t\t\t}\r\n\t\t\t).then(() => {\r\n\t\t\t\tsetAllAuthors([])\r\n\t\t\t\tsetAuthorsInputValue(\"\")\r\n\t\t\t\tsetChosenAuthors([])\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetSongCover('')\r\n\t\t\t\tsetSongName('')\r\n\t\t\t\tsetSongSrc('')\r\n\t\t\t\tsetReleaseDate('')\r\n\t\t\t\tsetLyrics([])\r\n\t\t\t\tsetShowSuccessMessage(true)\r\n\t\t\t\tsetImageColors([])\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tsetErrorMessage(err)\r\n\t\t\t\tsetLoadingSong(false)\r\n\t\t\t})\r\n\r\n\t\t\tchosenAuthors.forEach(async author => {\r\n\t\t\t\tconst authorRef = await firestore.collection('users').doc(author.uid).get()\r\n\t\t\t\tconst authorData = authorRef.data()\r\n\t\t\t\tconst authorSongs = authorData.ownSongs\r\n\t\t\t\tauthorSongs.push(uid)\r\n\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\townSongs: authorSongs\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tfirestore.collection('search').doc(uid).set({\r\n\t\t\t\tplace: 'songs',\r\n\t\t\t\tuid: uid,\r\n\t\t\t\tvariantsOfName: findVariantsOfName(songName)\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showSuccessMessage) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetShowSuccessMessage(false)\r\n\t\t\t}, 2000)\r\n\t\t}\r\n\t}, [showSuccessMessage])\r\n\r\n\tfunction manuallyChangeColor(e, i) {\r\n\t\timageColors[i] = e.target.value\r\n\t\tsetImageColors([...imageColors])\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"AddSong\">\r\n\t\t\t<FullScreenLoading loading={loadingSong} />\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<form onSubmit={e => e.preventDefault()}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song name</h3>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter song name\" value={songName} onChange={(e) => setSongName(e.target.value)} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Song authors</h3>\r\n\t\t\t\t\t<SearchBar value={authorsInputValue} setValue={setAuthorsInputValue} setResultAuthorList={setAllAuthors} defaultSearchMode={'authors'} inputText = {\"Search for authors\"}/>\r\n\t\t\t\t\t<div className=\"chosenAuthorsList\">\r\n\t\t\t\t\t\t{chosenAuthors.map((author) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"chosenAuthorItem\">\r\n\t\t\t\t\t\t\t\t\t<span>{author.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t<FiXCircle onClick={() => { if (currentUser.isAdmin) removeAuthorFromList(author); else if (author.uid !== currentUser.uid) removeAuthorFromList(author); }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"authorsResult\">\r\n\t\t\t\t\t\t{allAuthors.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<PersonTiny data={data} onClick={() => addAuthor(data)} style={chosenAuthors.includes(data.uid) ? { background: 'var(--green)' } : {}} key={index} />\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<h3>Release Date</h3>\r\n\t\t\t\t\t<input type=\"date\" name=\"\" id=\"\" value={releaseDate} onChange={(e) => setReleaseDate(e.target.value)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<ErrorPlate errorMessage={errorMessage} />\r\n\r\n\t\t\t\t<div style={{ width: '100%', display: 'flex' }}>\r\n\t\t\t\t\t{imageColors.map((color, index) => {\r\n\t\t\t\t\t\treturn <input type=\"color\" value={color} style={{ width: '100%', height: '60px', padding: '0', borderRadius: '0px' }} onChange={(e) => { manuallyChangeColor(e, index) }} />\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<DownloadPhotoButton setErrorMessage={setErrorMessage} setImageLocalPath={setImageLocalPath} downloadedPhoto={songCover} setDownloadedPhoto={setSongCover} place={'songsImages/'} />\r\n\r\n\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t<span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\tDownload song file\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"photoLoadLine\" style={songSrc !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={(e) => onFileChange(e, 'songs/', setSongSrc)} />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" placeholder={\"Add song lyrics\"} value={lyrics} onChange={(e) => setLyrics(e.target.value)}></textarea>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button className=\"addSongBtn\" onClick={addSongToFirebase}>{!showSuccessMessage ? \"Add song\" : \"Song Successfully added. Congrats!\"}</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { FiPlus} from 'react-icons/fi'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { AddPlaylist } from '../AddWindow/AddPlaylist'\r\nimport { AddSong } from '../AddWindow/AddSong'\r\nimport { Slider } from '../Tools/Slider'\r\n\r\nexport const AddWindow = ({ data }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [openAddSongWindow, setOpenAddSongWindow] = useState(false)\r\n\tconst [currentSliderPage, setCurrentSliderPage] = useState(0)\r\n\tconst sliderPages = [<AddSong/>, <AddPlaylist/>]\r\n\treturn (((currentUser.isAdmin) || (data.isAuthor)) && (data.uid === currentUser.uid)) ?\r\n\t\t(\r\n\t\t\t<div className=\"AddSong\">\r\n\t\t\t\t<button onClick={() => setOpenAddSongWindow(!openAddSongWindow)} style={openAddSongWindow ? { background: 'var(--red)' } : {}} className = \"openAddSongWindowBtn\">\r\n\t\t\t\t\t<FiPlus style={openAddSongWindow ? { transform: 'rotate(45deg)' } : {}} />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"addSongWindow\" style={openAddSongWindow ? { display: 'flex' } : {}}>\r\n\t\t\t\t\t<Slider pages = {['Song', 'Playlist']} currentPage = {currentSliderPage} setCurrentPage = {setCurrentSliderPage}/>\r\n\t\t\t\t\t{sliderPages[currentSliderPage]}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) :\r\n\t\tnull\r\n}\r\n","import React from 'react'\r\nimport { FiCheck, FiX } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const FriendRequestItem = ({person, addFriend, rejectFriend}) => {\r\n\treturn (\r\n\t\t<div className = 'FriendRequestItem'>\r\n\t\t\t<Link to = {`/authors/${person.uid}`}>\r\n\t\t\t\t<div className = \"friendRequestImageAndName\">  \r\n\t\t\t\t\t<div className=\"requestImage\">\r\n\t\t\t\t\t\t<img loading = \"lazy\" src={person.photoURL} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h3>{person.displayName}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"requestButtons\">\r\n\t\t\t\t<button style = {{color:'var(--green)'}} onClick = {()=>addFriend(person.uid)}>\r\n\t\t\t\t\t<FiCheck/>\r\n\t\t\t\t\t<span>Add</span> \r\n\t\t\t\t</button>\r\n\t\t\t\t<button style = {{color:'var( --lightRed)'}} onClick = {()=>rejectFriend(person.uid)}>\r\n\t\t\t\t\t<FiX/>\r\n\t\t\t\t\t<span>Reject</span> \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FriendRequestItem } from './FriendRequestItem'\r\n\r\nexport const FriendRequest = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [friendRequests, setFriendRequests] = useState([])\r\n\tfunction fetchFriendRequests(){\r\n\t\tconst tempArray = []\r\n\t\tcurrentUser.friends.forEach(async (friendObj, i)=>{\r\n\t\t\tif(friendObj.status === 'requested'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(friendObj.uid).get()).data()\r\n\t\t\t\ttempArray.push(personData)\r\n\t\t\t\tif(i === currentUser.friends.length - 1) setFriendRequests(tempArray)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendRequests()\r\n\t}, [JSON.stringify(currentUser.friends)])\r\n\r\n\tfunction addFriend(uid){\r\n\t\tconst friendsList = currentUser.friends\r\n\t\tconst otherUserFriendList = friendRequests.find(person=>person.uid === uid).friends\r\n\t\tfriendsList.find(obj=>obj.uid === uid).status = \"added\"\r\n\t\totherUserFriendList.find(obj=> obj.uid === currentUser.uid).status = \"added\"\r\n\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\tfriends:friendsList\r\n\t\t})\r\n\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\tfriends:otherUserFriendList\r\n\t\t})\r\n\r\n\t\tsetFriendRequests(arrOfReqs=>arrOfReqs.filter(el=>el.uid !== uid))\r\n\t}\r\n\r\n\tfunction rejectFriend(uid){\r\n\t\tconst friendsList = currentUser.friends.filter(obj=>obj.uid !== uid)\r\n\t\tfirestore.collection('users').doc(uid).get().then(res=>{\r\n\t\t\tconst otherUserFriendList = res.data().friends.filter(obj=>obj.uid !== currentUser.uid)\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({\r\n\t\t\t\tfriends:friendsList\r\n\t\t\t})\r\n\t\t\tfirestore.collection('users').doc(uid).update({\r\n\t\t\t\tfriends:otherUserFriendList\r\n\t\t\t})\r\n\t\t\tsetFriendRequests(arrOfReqs=>arrOfReqs.filter(el=>el.uid !== uid))\r\n\t\t})\r\n\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{friendRequests.map((person, index)=>{\r\n\t\t\t\treturn <FriendRequestItem person = {person} key = {index} addFriend = {addFriend} rejectFriend = {rejectFriend}/>\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\nimport { firestore } from '../../firebase';\r\nimport { PersonTinyVerticalItem } from './PersonTinyVerticalItem'\r\n\r\nexport const PersonTinyList = ({data, title}) => {\r\n\tconst [listOfPeople, setListOfPeople] = useState([])\r\n\tconst [scrollLeft, setScrollLeft] = useState(0)\r\n\tconst wrapperRef = useRef(null)\r\n\tconst [shouldRenderRightArrow, setShouldRenderRightArrow] = useState(false)\r\n\tfunction scrollToLeft() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev - 200\r\n\t\tsetScrollLeft(prev - 200)\r\n\t}\r\n\tfunction scrollToRight() {\r\n\t\tconst prev = wrapperRef.current.scrollLeft\r\n\t\twrapperRef.current.scrollLeft = prev + 200\r\n\t\tsetScrollLeft(prev + 200)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(listOfPeople.length > 0){\r\n\t\t\tconst scrollBiggerThanScreen = wrapperRef.current.scrollWidth > wrapperRef.current.offsetWidth\r\n\t\t\tif (scrollBiggerThanScreen) setShouldRenderRightArrow(true)\r\n\t\t}\r\n\t}, [listOfPeople])\r\n\r\n\tfunction fetchFriends(){\r\n\t\tsetListOfPeople([])\r\n\t\tdata.friends.forEach(async personObj => {\r\n\t\t\tif(personObj.status === 'added'){\r\n\t\t\t\tconst personData = (await firestore.collection('users').doc(personObj.uid).get()).data()\r\n\t\t\t\tsetListOfPeople(prev=>[...prev, personData])\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tsetListOfPeople([])\r\n\t\tfetchFriends()\r\n\t}, [data.uid])\r\n\treturn listOfPeople.length > 0? (\r\n\t\t<div className = 'PersonTinyList'>\r\n\t\t\t{title && <h2>{title}</h2>}\r\n\t\t\t<div style = {{position:'relative'}}>\t\r\n\t\t\t\t<div className=\"personTinyListWrapper\" ref = {wrapperRef} onScroll={e => setScrollLeft(e.target.scrollLeft)}>\r\n\t\t\t\t\t{listOfPeople.map((person, index)=>{\r\n\t\t\t\t\t\treturn <PersonTinyVerticalItem person = {person} key = {person.uid}/>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"authorsShiftButtons\">\r\n\t\t\t\t\t<button onClick={scrollToLeft} style={scrollLeft <= 0 ? { visibility: 'hidden', opacity: '0' } : {}}><FiChevronLeft /></button>\r\n\t\t\t\t\t<button onClick={scrollToRight} style={shouldRenderRightArrow && wrapperRef.current && (wrapperRef.current.scrollWidth - wrapperRef.current.offsetWidth !== scrollLeft)? {} : { visibility: 'hidden', opacity: '0' }}><FiChevronRight /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { firestore } from \"../../firebase\";\r\n\r\nexport const findAuthorsAlbums = async (authorsData, setAuthorsPlaylists, currentUserUID, setLoading) => {\r\n\tsetAuthorsPlaylists([])\r\n\tconst tempArray = []\r\n\tif (authorsData.ownPlaylists !== undefined && authorsData.ownPlaylists.length !== 0) {\r\n\t\tauthorsData.ownPlaylists.forEach(async (playlistId, index) => {\r\n\t\t\tconst playlistData = (await firestore.collection(\"playlists\").doc(playlistId).get()).data()\r\n\t\t\tif (playlistData && (!playlistData.isPrivate || (authorsData.uid === currentUserUID && playlistData.isPrivate))) tempArray.push(playlistData)\r\n\t\t\tif (index === authorsData.ownPlaylists.length-1) {\r\n\t\t\t\ttempArray.sort((a, b) => new Date(b.creationDate).getTime() - new Date(a.creationDate).getTime())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetAuthorsPlaylists(tempArray)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { findAuthorsAlbums } from '../../functions/find/findAuthorsAlbums'\r\nimport { AlbumList } from '../Lists/AlbumList'\r\n\r\nexport const Playlists = ({ authorsData }) => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst [authorsPlaylists, setAuthorsPlaylists] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsAlbums(authorsData, setAuthorsPlaylists, currentUser.uid, setLoading)\r\n\t}, [authorsData.ownPlaylists])\r\n\r\n\treturn <AlbumList listOfAlbums = {authorsPlaylists} title = {currentUser.isAuthor?\"Albums\":\"Playlists\"} loading = {loading}/>\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport findSimilarArtists from '../../functions/find/findSimilarArtists'\r\nimport { AuthorsList } from '../Lists/AuthorsList'\r\n\r\nexport const SimilarArtists = ({ data }) => {\r\n\tconst [similarArtists, setSimilarArtists] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSimilarArtists(data, setSimilarArtists)\r\n\t}, [data])\r\n\treturn (\r\n\t\t<AuthorsList listOfAuthors = {similarArtists} title = {\"Similar Authors\"}/>\r\n\t)\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { fetchItemsList } from '../../functions/fetch/fetchItemsList'\r\nimport findIfSongIsNew from '../../functions/find/findIfSongIsNew'\r\nimport { SongList } from '../Lists/SongList'\r\nexport const TopSongs = ({ authorId, authorsData, headerColors }) => {\r\n\tconst [popularSongs, setPopularSongs] = useState([])\r\n\tconst [newSongs, setNewSongs] = useState([])\r\n\r\n\tasync function findAuthorsSongs() {\r\n\t\tif (authorsData.isAuthor) {\r\n\t\t\tfetchItemsList(authorsData.ownSongs, 'songs', setPopularSongs, (res) => {\r\n\t\t\t\tres.forEach(songData=>{if (findIfSongIsNew(songData) && !newSongs.includes(songData)) setNewSongs(prevSongs => [...prevSongs, songData])})\r\n\t\t\t\treturn res.sort((a, b) => b.listens - a.listens)\r\n\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfetchItemsList(authorsData.addedSongs.slice(0).reverse(), 'songs', setPopularSongs)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAuthorsSongs()\r\n\t\tsetNewSongs([])\r\n\t}, [authorsData.ownSongs])\r\n\r\n\treturn authorsData.isAuthor ?\r\n\t\t(<div className=\"TopSongs\">\r\n\t\t\t<SongList listOfSongs={newSongs} source={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: newSongs }} isNewSong />\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName, image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={\"Popular Songs\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t</div>) :\r\n\t\t(\r\n\t\t\t<SongList\r\n\t\t\t\tlistOfSongs={popularSongs}\r\n\t\t\t\tsource={{ source: `/authors/${authorsData.uid}`, name: authorsData.displayName + \"'s Library\", image: authorsData.photoURL, songsList: popularSongs }}\r\n\t\t\t\ttitle={authorsData.displayName + \"'s Library\"}\r\n\t\t\t\tshowListens\r\n\t\t\t\tshowCount\r\n\t\t\t/>\r\n\t\t)\r\n}\r\n","import { CHAT_ROUTE, HISTORY_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, LOGIN_ROUTE, NOTFOUND_ROUTE, SEARCH_ROUTE, SIGNUP_ROUTE, TEMPLATE_ALBUM, TEMPLATE_AUTHOR, TEMPLATE_CHAT } from \"./utils/consts\";\r\nimport {LogInPage} from './pages/LogInPage'\r\nimport {SignUpPage} from './pages/SignUpPage'\r\nimport { Home } from \"./pages/Home\";\r\nimport { SearchPage } from \"./pages/SearchPage\";\r\nimport { LibraryPage } from \"./pages/LibraryPage\";\r\nimport { ChatPage } from \"./pages/ChatPage\";\r\nimport { PageNotFound } from \"./pages/PageNotFound\";\r\nimport { DialoguePage } from \"./pages/DialoguePage\";\r\nimport { AlbumPage } from \"./pages/AlbumPage\";\r\nimport { AuthorPage } from \"./pages/AuthorPage\";\r\nimport { HistoryPage } from \"./pages/HistoryPage\";\r\nexport const publicRoutes = [\r\n\t{\r\n\t\tpath:LOGIN_ROUTE,\r\n\t\tComponent:LogInPage,\r\n\t},\r\n\t{\r\n\t\tpath:SIGNUP_ROUTE,\r\n\t\tComponent:SignUpPage,\r\n\t}\r\n]\r\n\r\nexport const privateRoutes = [\r\n\t{\r\n\t\tpath:HOME_ROUTE,\r\n\t\tComponent:Home,\r\n\t},\r\n\t{\r\n\t\tpath:LIBRARY_ROUTE,\r\n\t\tComponent:LibraryPage,\r\n\t},\r\n\t{\r\n\t\tpath:SEARCH_ROUTE,\r\n\t\tComponent:SearchPage,\r\n\t},\r\n\t{\r\n\t\tpath:CHAT_ROUTE,\r\n\t\tComponent:ChatPage,\r\n\t},\r\n\t{\r\n\t\tpath:NOTFOUND_ROUTE,\r\n\t\tComponent:PageNotFound\r\n\t},\r\n\t{\r\n\t\tpath:TEMPLATE_CHAT,\r\n\t\tComponent:DialoguePage\r\n\t},\r\n\t{\r\n\t\tpath:TEMPLATE_ALBUM,\r\n\t\tComponent:AlbumPage\r\n\t},\r\n\t{\r\n\t\tpath:TEMPLATE_AUTHOR,\r\n\t\tComponent:AuthorPage\r\n\t},\r\n\t{\r\n\t\tpath:HISTORY_ROUTE,\r\n\t\tComponent:HistoryPage\r\n\t}\r\n]","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { ErrorPlate } from '../components/MessagePlates/ErrorPlate'\r\nimport { FullScreenLoading } from '../components/Loading/FullScreenLoading'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { SIGNUP_ROUTE } from '../utils/consts'\r\n\r\nexport const LogInPage = () => {\r\n\tconst {login} = useAuth()\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst isValid = email.length !== 0 && password.length !== 0\r\n\tasync function handleSubmit(e){\r\n\t\te.preventDefault()\r\n\t\tif(!isValid){\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\t\tawait login(email, password, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className = \"In-Up-Container\">\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading = {loading}/>\r\n\t\t\t\t<TitleAndLogo title=\"Log In\"/>\r\n\t\t\t\t<ErrorPlate errorMessage = {errorMessage}/>\r\n\t\t\t\t<form onSubmit = {handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange = {(e)=>setEmail(e.target.value)}/>\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Enter your password\" onChange = {(e)=>setPassword(e.target.value)}/>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" disabled = {loading}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to = {SIGNUP_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tCreate new account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../styles/SignIn-Up.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { LOGIN_ROUTE } from '../utils/consts'\r\nimport { BlurredBg } from '../components/SignIn-Up/BlurredBg'\r\nimport { TitleAndLogo } from '../components/SignIn-Up/TitleAndLogo'\r\nimport { RadioBtn } from '../components/SignIn-Up/RadioBtn'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { AiOutlineCloudDownload } from 'react-icons/ai'\r\nimport { storage } from '../firebase'\r\nimport { ColorExtractor } from 'react-color-extractor'\r\nimport { FullScreenLoading } from '../components/Loading/FullScreenLoading'\r\nexport const SignUpPage = () => {\r\n\tconst [currentRoleChoice, setCurrentRoleChoice] = useState(1)\r\n\tconst [email, setEmail] = useState(\"\")\r\n\tconst [password, setPassword] = useState(\"\")\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\")\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst { signup } = useAuth()\r\n\tconst [photoURL, setPhotoURL] = useState(\"\")\r\n\tconst isValid = email.length !== 0 && password.length !== 0 && name.length !== 0\r\n\tconst [imageLocalPath, setImageLocalPath] = useState('')\r\n\tconst [imageColors, setImageColors] = useState([])\r\n\tasync function onFileChange(e) {\r\n\t\tconst file = e.target.files[0]\r\n\t\tsetImageLocalPath(URL.createObjectURL(file))\r\n\t\tconst storageRef = storage.ref()\r\n\t\tconst fileRef = storageRef.child(`usersImages/${file.name}`)\r\n\t\tawait fileRef.put(file)\r\n\t\tsetPhotoURL(await fileRef.getDownloadURL())\r\n\t}\r\n\r\n\tasync function handleSubmit(e) {\r\n\t\te.preventDefault()\r\n\t\tif (!isValid) {\r\n\t\t\treturn setErrorMessage(\"One of your fields is totaly empty\")\r\n\t\t}\r\n\r\n\t\tawait signup(email, name, password, currentRoleChoice, photoURL, imageColors, setErrorMessage, setLoading)\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"In-Up-Container\">\r\n\t\t\t<ColorExtractor src={imageLocalPath} getColors={(colors) => setImageColors(colors)} />\r\n\t\t\t<div className=\"CentralPlate\">\r\n\t\t\t\t<FullScreenLoading loading={loading} />\r\n\t\t\t\t<TitleAndLogo title=\"Sign Up\" />\r\n\r\n\t\t\t\t{errorMessage &&\r\n\t\t\t\t\t<div className=\"Alert\">\r\n\t\t\t\t\t\t{errorMessage}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input type=\"email\" placeholder=\"Enter your Email\" className=\"emailInput\" onChange={(e) => setEmail(e.target.value)} />\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"Enter your name\" onChange={(e) => setName(e.target.value)} />\r\n\t\t\t\t\t<input type=\"password\" name=\"\" id=\"\" placeholder=\"Create a password\" onChange={(e) => setPassword(e.target.value)} />\r\n\t\t\t\t\t<div style={{ display: 'flex', width: '100%', justifyContent: 'center', margin: '5px 0 15px 0' }}>\r\n\t\t\t\t\t\t<RadioBtn label=\"User\" onClick={() => setCurrentRoleChoice(0)} currentActive={currentRoleChoice} id={0} />\r\n\t\t\t\t\t\t<RadioBtn label=\"Author\" onClick={() => setCurrentRoleChoice(1)} currentActive={currentRoleChoice} id={1} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className=\"downloadFile\">\r\n\t\t\t\t\t\t<div className=\"downloadPhoto\">\r\n\t\t\t\t\t\t\t{photoURL === '' ? <span className=\"downloadBtnText\">\r\n\t\t\t\t\t\t\t\t<AiOutlineCloudDownload />\r\n\t\t\t\t\t\t\t\tDownload photo\r\n\t\t\t\t\t\t\t</span> : <span className=\"downloadBtnText\">Done</span>}\r\n\t\t\t\t\t\t\t<span className=\"photoLoadLine\" style={photoURL !== '' ? { width: '100%' } : {}}></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"file\" name=\"\" id=\"\" onChange={onFileChange} />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"inAndUpBtns\">\r\n\t\t\t\t\t\t<button className=\"upBtn\" type=\"submit\" disabled={loading}>\r\n\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link to={LOGIN_ROUTE}>\r\n\t\t\t\t\t\t\t<button className=\"inBtn\" >\r\n\t\t\t\t\t\t\t\tAlready have the account\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<BlurredBg />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../styles/HomePage.css'\r\nimport { MainBanner } from '../components/HomePage/MainBanner'\r\nimport { RecentSongs } from '../components/HomePage/RecentSongs'\r\nimport { RecommendedAuthors } from '../components/HomePage/RecommendedAuthors'\r\nimport { RecommendedSongs } from '../components/HomePage/RecommendedSongs'\r\nimport { Top15Songs } from '../components/HomePage/Top15Songs'\r\n\r\nexport const Home = () => {\r\n\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards' }} className=\"HomePage\">\r\n\t\t\t<MainBanner />\r\n\t\t\t<RecentSongs />\r\n\t\t\t<Top15Songs />\r\n\t\t\t<RecommendedSongs />\r\n\t\t\t<RecommendedAuthors />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport \"../styles/LibraryPage.css\"\r\nimport { Slider } from '../components/Tools/Slider'\r\nimport { SongsPage } from '../components/LibraryPage/SongsPage'\r\nimport { PlaylistsPage } from '../components/LibraryPage/PlaylistsPage'\r\nimport { AuthorsPage } from '../components/LibraryPage/AuthorsPage'\r\n\r\nexport const LibraryPage = () => {\r\n\tconst [currentPage, setCurrentPage] = useState(0)\r\n\tconst libraryPages = [<SongsPage/>, <PlaylistsPage/>, <AuthorsPage/>]\r\n\treturn (\r\n\t\t<div className=\"LibraryPage\" style = {{animation:'zoomIn .2s forwards'}}>\r\n\t\t\t<Slider pages = {['Songs', \"Playlists\", \"Authors\"]} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t{libraryPages[currentPage]}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport \"../styles/SearchPage.css\"\r\nimport { SearchBar } from '../components/Basic/SearchBar'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { AuthorsList } from '../components/Lists/AuthorsList'\r\nimport { AlbumList } from '../components/Lists/AlbumList'\r\nexport const SearchPage = () => {\r\n\tconst {searchValue, setSearchValue} = useAuth()\r\n\tconst [resultSongList, setResultSongList] = useState([])\r\n\tconst [resultAuthorList, setResultAuthorList] = useState([])\r\n\tconst [resultAlbumList, setResultAlbumList] = useState([])\r\n\tconst [shadowColor, setShadowColor] = useState(\"\")\r\n\tuseEffect(() => {\r\n\t\tsetResultSongList([])\r\n\t\tsetResultAuthorList([])\r\n\t\tsetResultAlbumList([])\r\n\t}, [searchValue])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(resultSongList.length !== 0){\r\n\t\t\tsetShadowColor(resultSongList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAuthorList.length !== 0){\r\n\t\t\tsetShadowColor(resultAuthorList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse if(resultAlbumList.length !== 0){\r\n\t\t\tsetShadowColor(resultAlbumList[0].imageColors[0] + 'a6')\r\n\t\t}\r\n\t\telse setShadowColor(\"\")\r\n\t}, [resultSongList, resultAuthorList, resultAlbumList])\r\n\treturn (\r\n\t\t<div className=\"SearchPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<SearchBar\r\n\t\t\t\tvalue={searchValue}\r\n\t\t\t\tsetValue = {setSearchValue}\r\n\t\t\t\tallFoundSongs = {resultSongList}\r\n\t\t\t\tsetAllFoundSongs = {setResultSongList}\r\n\t\t\t\tsetResultPlaylists = {setResultAlbumList}\r\n\t\t\t\tsetResultAuthorList = {setResultAuthorList}\r\n\t\t\t\tfocus\r\n\t\t\t/>\r\n\r\n\t\t\t<SongList listOfSongs = {resultSongList} source = {{ source: '/search', name: \"Search\", image: \"https://www.pngkey.com/png/full/87-872187_lupa-search-icon-white-png.png\", songsList:resultSongList }} title = {\"Songs\"} showListens displayIfEmpty = {\"\"}/>\r\n\t\t\t<AuthorsList listOfAuthors = {resultAuthorList} title = {\"Authors\"}/>\r\n\t\t\t<AlbumList listOfAlbums = {resultAlbumList} title = {\"Albums and Playlists\"} loading = {false}/>\r\n\t\t\t<div className=\"colorfullShadow\" style={{ background: shadowColor }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { ChatItem } from '../components/ChatPage/ChatItem'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport '../styles/ChatPage.css'\r\nimport { FiPlus } from 'react-icons/fi'\r\nimport { useModal } from '../contexts/ModalContext'\r\nimport { CreateChat } from '../components/ChatPage/CreateChat'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\nexport const ChatPage = () => {\r\n\tconst [yourChats, setYourChats] = useState([])\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [loading, setLoading] = useState(true)\r\n\tuseEffect(() => {\r\n\t\tfetchItemsList(currentUser.chats, 'chats', setYourChats, (res) => res.sort(\r\n\t\t\t(a, b) => {\r\n\t\t\t\tif (a.messages.length && b.messages.length) {\r\n\t\t\t\t\treturn new Date(b.messages[b.messages.length - 1].sentTime).getTime() - new Date(a.messages[a.messages.length - 1].sentTime).getTime()\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t() => setLoading(false))\r\n\t}, [])\r\n\treturn (\r\n\t\t<div style={{ animation: 'zoomIn .2s forwards', minHeight: \"100%\" }}>\r\n\t\t\t<div style={{ marginBottom: '10px', display: 'flex', alignItems: 'start', width: '100%' }}>\r\n\t\t\t\t<button className=\"standartButton\" onClick={() => { toggleModal(); setContent(<CreateChat />) }}>\r\n\t\t\t\t\t<FiPlus />\r\n\t\t\t\t\tCreate chat\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t{loading ?\r\n\t\t\t\t<LoadingCircle />\r\n\t\t\t\t:\r\n\t\t\t\t<div className=\"chatsWrapper\">\r\n\t\t\t\t\t{yourChats.length ? yourChats.map((chat, index) => {\r\n\t\t\t\t\t\treturn <ChatItem chatData={chat} key={index} />\r\n\t\t\t\t\t}) : <h3>No chats</h3>}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport \"../styles/PageNotFound.css\"\r\nexport const PageNotFound = () => {\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className = \"PageNotFound\">\r\n\t\t\t<img loading = \"lazy\" src=\"https://i.pinimg.com/originals/b2/3d/f6/b23df649311586e74a8455c92eb3d76b.png\" alt=\"\" />\r\n\t\t\t<h2>Page not found</h2>\r\n\t\t\t<button className=\"standartButton\" onClick = {()=>history.push('/library')}>\r\n\t\t\t\tBack to library\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { useHistory, useRouteMatch } from 'react-router'\r\nimport { ChatHeader } from '../components/ChatPage/ChatHeader'\r\nimport { ChatInput } from '../components/AuthorPage/ChatInput'\r\nimport { useEffect } from 'react'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { DateOnTop } from '../components/ChatPage/DateOnTop'\r\nimport { useRealTimeMessages } from '../hooks/useRealTimeMessages'\r\nimport { ChatMessagesWindow } from '../components/ChatPage/ChatMessagesWindow'\r\nimport { useScreen } from '../contexts/ScreenContext'\r\nexport const DialoguePage = () => {\r\n\tconst match = useRouteMatch('/chat/:chatId')\r\n\tconst {screenHeight} = useScreen()\r\n\tconst { currentUser } = useAuth()\r\n\tconst { chatId } = match.params\r\n\tconst [messageText, setMessageText] = useState(\"\")\r\n\tconst [inResponseToMessage, setInResponseToMessage] = useState([])\r\n\tconst [dateRefsArray, setDateRefsArray] = useState([])\r\n\tconst history = useHistory()\r\n\tconst [chatData, messageList, loading, currentDateOnTop, findTopDate] = useRealTimeMessages(chatId, dateRefsArray)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(chatData === undefined){\r\n\t\t\thistory.push('/not-found')\r\n\t\t}\r\n\t\telse if (chatData?.participants !== undefined) {\r\n\t\t\tif (!chatData.participants.includes(currentUser.uid)) history.push('/chat')\r\n\t\t}\r\n\t}, [chatData])\r\n\r\n\treturn chatData !== null && chatData !== undefined?(\r\n\t\t<div className=\"DialoguePage\" style = {{height:'100%'}}>\r\n\t\t\t{\r\n\t\t\t\tloading ?\r\n\t\t\t\t\t<LoadingCircle top = {\"50%\"}/> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ChatHeader data={chatData} />\r\n\t\t\t\t\t\t<DateOnTop date = {currentDateOnTop}/>\r\n\t\t\t\t\t\t<ChatMessagesWindow chatId = {chatId} chatData = {chatData} messageList = {messageList} findTopDate = {findTopDate} setDateRefsArray = {setDateRefsArray} inResponseToMessage = {inResponseToMessage} setInResponseToMessage = {setInResponseToMessage}/>\r\n\t\t\t\t\t\t<ChatInput \r\n\t\t\t\t\t\t\tchatId={chatId} \r\n\t\t\t\t\t\t\tchatData = {chatData}\r\n\t\t\t\t\t\t\tmessageText={messageText} \r\n\t\t\t\t\t\t\tsetMessageText={setMessageText} \r\n\t\t\t\t\t\t\tinResponseToMessage = {inResponseToMessage} \r\n\t\t\t\t\t\t\tsetInResponseToMessage = {setInResponseToMessage} \r\n\t\t\t\t\t\t\totherMessages = {messageList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t{chatData?.wallpaper !== \"undefined\"?<img loading = \"lazy\" src={chatData.wallpaper} className = \"chatWallpaper\" alt=\"\"/>:null}\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { firestore } from '../firebase'\r\n\r\n/**\r\n \t* Returns [chatData, messageList, loading, currentDateOnTop, findTopDate]\r\n*/\r\nexport const useRealTimeMessages = (chatId, dateRefsArray) => {\r\n\tconst [chatData, setChatData] = useState(null)\r\n\tconst [messageList, setMessageList] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [currentDateOnTop, setCurrentDateOnTop] = useState(\"\")\r\n\tfunction findTopDate(e){\r\n\t\tdateRefsArray.forEach(ref=>{\r\n\t\t\tif(ref.current !== null) {\r\n\t\t\t\tif(ref.current.offsetTop - 70 <= e.target.scrollTop) setCurrentDateOnTop(ref.current.innerHTML)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = firestore.collection('chats').doc(chatId)\r\n\t\t\t.onSnapshot(snapshot => {\r\n\t\t\t\tsetChatData(snapshot.data())\r\n\t\t\t\tsetMessageList(snapshot.data()?.messages)\r\n\t\t\t\tsetCurrentDateOnTop(snapshot.data()?.messages.length ? snapshot.data().messages[0].sentTime : new Date().toString())\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tunsubscribe()\r\n\t\t}\r\n\t}, [firestore, chatId])\r\n\r\n\r\n\treturn [chatData, messageList, loading, currentDateOnTop, findTopDate]\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { firestore } from '../firebase'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\nexport const AlbumPage = () => {\r\n\tconst match = useRouteMatch('/albums/:albumId')\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { albumId } = match.params\r\n\tconst [albumData, setAlbumData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst history = useHistory()\r\n\tasync function fetchAlbumsData() {\r\n\t\tfirestore.collection(\"playlists\").doc(albumId).onSnapshot(doc => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\tsetAlbumData(doc.data())\r\n\t\t\t\tsetHeaderColors(doc.data().imageColors)\r\n\t\t\t} else {\r\n\t\t\t\thistory.push('/not-found')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tfunction fetchSongsInAlbum() {\r\n\t\tif(albumData.songs?.length) fetchItemsList(albumData.songs, 'songs', setPlaylistSongs, (res)=>res, ()=>setLoading(false))\r\n\t\telse setLoading(false)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAlbumsData()\r\n\t}, [albumId, firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSongsInAlbum()\r\n\t}, [albumData])\r\n\r\n\treturn (\r\n\t\t<div className=\"AlbumPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{\r\n\t\t\t\tloading ? <LoadingCircle top={'50%'} /> :\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header data={albumData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t\t<SongList listOfSongs={playlistSongs} source={{ source: `/albums/${albumData.id}`, name: albumData.name, image: albumData.image, songsList: playlistSongs }} showSearch defaultSearchMode={\"songs\"} />\r\n\t\t\t\t\t</>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router'\r\nimport { AddWindow } from '../components/AdminAndAuthor/AddWindow'\r\nimport { FriendRequest } from '../components/AuthorPage/FriendRequest'\r\nimport { Header } from '../components/AuthorPage/Header'\r\nimport { PersonTinyList } from '../components/AuthorPage/PersonTinyList'\r\nimport { Playlists } from '../components/AuthorPage/Playlists'\r\nimport { SimilarArtists } from '../components/AuthorPage/SimilarArtists'\r\nimport { TopSongs } from '../components/AuthorPage/TopSongs'\r\nimport { LoadingCircle } from '../components/Loading/LoadingCircle'\r\nimport { firestore } from '../firebase'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport \"../styles/AuthorPage.css\"\r\nimport { useHistory } from 'react-router-dom'\r\nexport const AuthorPage = () => {\r\n\tconst match = useRouteMatch('/authors/:authorId')\r\n\tconst {currentUser} = useAuth()\r\n\tconst [headerColors, setHeaderColors] = useState([])\r\n\tconst { authorId } = match.params\r\n\tconst [authorsData, setAuthorsData] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst history = useHistory()\r\n\tasync function fetchAuthorsData() {\r\n\t\tconst response = firestore.collection(\"users\").doc(authorId)\r\n\t\tresponse.get().then((doc) => {\r\n\t\t\tif (doc.exists) {\r\n\t\t\t\t setAuthorsData(doc.data())\r\n\t\t\t\t setHeaderColors(doc.data().imageColors)\r\n\t\t\t\t setLoading(false)\r\n\t\t\t} else {\r\n\t\t\t\t history.push('/not-found')\r\n\t\t\t}\r\n\t  }).catch((error) => {\r\n\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t  });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAuthorsData()\r\n\t}, [authorId])\r\n\treturn (\r\n\t\t<div className=\"AuthorPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t{loading?\r\n\t\t\t\t<LoadingCircle/>:\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header data={authorsData} headerColors={headerColors} setHeaderColors={setHeaderColors} />\r\n\t\t\t\t\t{currentUser.uid === authorsData.uid?<FriendRequest/>:null} \r\n\t\t\t\t\t<AddWindow data={authorsData} />\r\n\t\t\t\t\t<TopSongs author={authorId} authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{authorsData.friends && !authorsData.isAuthor?<PersonTinyList data = {authorsData} title = {\"Friends\"}/>:null}\r\n\t\t\t\t\t<Playlists authorsData={authorsData} headerColors={headerColors} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tauthorsData.isAuthor?\r\n\t\t\t\t\t\t<SimilarArtists data={authorsData} />:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { BackBtn } from '../components/Buttons/BackBtn'\r\nimport { SongList } from '../components/Lists/SongList'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { firestore } from '../firebase'\r\nimport { fetchItemsList } from '../functions/fetch/fetchItemsList'\r\n\r\nexport const HistoryPage = () => {\r\n\tconst [historySongsIds, setHistorySongsIds] = useState([])\r\n\tconst [historySongs, setHistorySongs] = useState([])\r\n\tconst { currentUser } = useAuth()\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('history').doc(currentUser.uid).onSnapshot(res => {\r\n\t\t\tsetHistorySongsIds(res.data().history)\r\n\t\t})\r\n\t}, [firestore])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchItemsList(historySongsIds, \"songs\", setHistorySongs)\r\n\t}, [historySongsIds])\r\n\treturn (\r\n\t\t<div className=\"HistoryPage\" style={{ animation: 'zoomIn .2s forwards' }}>\r\n\t\t\t<div style = {{display:'flex', alignItems:'center'}}>\r\n\t\t\t\t<BackBtn/>\r\n\t\t\t\t<h2 style={{ margin: '0px', marginLeft:'8px' }}>History</h2>\r\n\t\t\t</div>\r\n\t\t\t<SongList listOfSongs={historySongs} source={{ source: `/history`, name: \"History\", image: \"https://www.seekpng.com/png/full/781-7815113_history-icon-white-png.png\", songsList: historySongs }} showCount showSearch displayIfEmpty={\"Nothing here\"} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { privateRoutes } from '../routes'\r\nimport { HOME_ROUTE } from '../utils/consts'\r\nexport const ContentRouter = () => {\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{privateRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact key = {path}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={HOME_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","function amountOfZeros(number) {\r\n\treturn number % 10 === number ? \"0\" + number : number\r\n}\r\n\r\nexport default function correctTimeDisplay(seconds) {\r\n\treturn amountOfZeros(Math.floor(seconds / 60)) + \":\" + amountOfZeros(Math.floor(seconds % 60))\r\n}","export function findLenOfAuthors(authors) {\r\n\tlet str = \"\"\r\n\tauthors.forEach(el => {str += el.displayName})\r\n\treturn str.length\r\n}","import React from 'react'\r\nimport { FaBackward, FaForward, FaPause, FaPlay } from 'react-icons/fa'\r\nimport { TiArrowRepeat, TiArrowShuffle } from 'react-icons/ti'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport checkNumber from '../../functions/other/checkNumber'\r\nimport correctTimeDisplay from '../../functions/other/correctTimeDisplay'\r\nimport { displayAuthorsStr } from '../../functions/display/displayAuthorsStr'\r\nimport { ColorCircles } from './colorCircles'\r\nimport {Hint} from '../Basic/Hint'\r\nimport { findLenOfAuthors } from '../../functions/find/findLenOfAuthors'\r\nexport const Player = ({inputRef, textLimit = 18, linkToAuthors = true}) => {\r\n\tconst { \r\n\t\tcurrentSongData,\r\n\t\tcurrentTime, \r\n\t\tchangeCurrentTime, \r\n\t\tsongDuration, \r\n\t\tsetRepeatMode, \r\n\t\trepeatMode, \r\n\t\tplay, \r\n\t\tprevSong, \r\n\t\tplaySong, \r\n\t\tnextSong, \r\n\t\tsetShuffleMode, \r\n\t\tshuffleMode, \r\n\t\tdisplayAuthors,\r\n\t\tname, \r\n\t\tauthors, \r\n\t\tcover,\r\n\t\tinputRange} = useSong()\r\n\treturn currentSongData.id !== -1?(\r\n\t\t<div className=\"player\">\r\n\t\t\t<div className=\"playerUpperSide\">\r\n\t\t\t\t<div className=\"songCover\">\r\n\t\t\t\t\t<img loading = \"lazy\" src={cover} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className = \"nameAndAuthors\">\r\n\t\t\t\t\t<h2 title={name.length > textLimit ? name : null} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t\t<div style={name.length > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{name}</div>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h3 style={{ overflow: 'hidden' }} title = {authors.map((el) => ' ' + el.displayName)}>\r\n\t\t\t\t\t\t{linkToAuthors?<div style={findLenOfAuthors(currentSongData.authors) > textLimit ? { animation: 'outSideText 17s infinite', whiteSpace: 'nowrap' } : {}}>{displayAuthors()}</div>:<div>{displayAuthorsStr(authors, ' & ', 33)}</div>}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"controlPanel\">\r\n\t\t\t\t<input type=\"range\" min=\"0\" ref={inputRef} step=\"1\" value={currentTime} onChange={(event)=>{changeCurrentTime(event)}} style = {{background: `linear-gradient(to right, var(--themeColor2) ${inputRange}%, #fff ${inputRange}%)`}}/>\r\n\t\t\t\t<div className=\"startAndEndTime\">\r\n\t\t\t\t\t<span>{correctTimeDisplay(currentTime)}</span>\r\n\t\t\t\t\t<span>{correctTimeDisplay(songDuration)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<button className=\"shuffleBtn\" onClick={() => setShuffleMode(checkNumber(shuffleMode + 1, 1))} style={shuffleMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowShuffle style={shuffleMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={(e)=>{e.stopPropagation();prevSong()}}><FaBackward /></button>\r\n\t\t\t\t\t<button onClick={(e)=>{e.stopPropagation();playSong()}}>{play ? <FaPause /> : <FaPlay />}</button>\r\n\t\t\t\t\t<button onClick={(e)=>{e.stopPropagation();nextSong()}}><FaForward /></button>\r\n\t\t\t\t\t<button className=\"repeatBtn\" onClick={() => setRepeatMode(checkNumber(repeatMode + 1, 2))} style={repeatMode ? { background: 'var(--reallyTransparentWhite)' } : {}}>\r\n\t\t\t\t\t\t<TiArrowRepeat style={repeatMode ? { color: 'var(--themeColor)' } : {}} />\r\n\t\t\t\t\t\t<span style={repeatMode === 2 ? { opacity: 1 } : {}}></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ColorCircles play={play} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t):null\r\n}\r\n","import { BiMusic, BiSearch } from \"react-icons/bi\";\r\nimport { FiHome, FiMessageCircle } from \"react-icons/fi\";\r\nimport { CHAT_ROUTE, HOME_ROUTE, LIBRARY_ROUTE, SEARCH_ROUTE } from \"../utils/consts\";\r\n\r\nexport const leftSideBar = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<FiHome/>,\r\n\t\ttitle:'Home',\r\n\t\tlink:HOME_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiMusic/>,\r\n\t\ttitle:'Library',\r\n\t\tlink:LIBRARY_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<BiSearch/>,\r\n\t\ttitle:'Search',\r\n\t\tlink:SEARCH_ROUTE\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<FiMessageCircle/>,\r\n\t\ttitle:'Chat',\r\n\t\tlink:CHAT_ROUTE\r\n\t},\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport const MobileControlBarItem = ({element, currentPage, setCurrentPage}) => {\r\n\treturn (\r\n\t\t<Link to = {element.link} className = 'MobileControlBarItem' onClick = {()=>setCurrentPage(element.id)} style = {element.id === currentPage?{color:'var(--blue)'}:{}}>\t\r\n\t\t\t{element.icon}\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport '../../styles/BottomControlBar.css'\r\nimport {leftSideBar} from '../../data/leftSideBar'\r\nimport { MobileControlBarItem } from '../BottomControlBar/MobileControlBarItem'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { BiUserCircle } from 'react-icons/bi'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nexport const BottomControlBar = () => {\r\n\tconst {currentUser} = useAuth()\r\n\tconst userElement = {\r\n\t\ticon:<BiUserCircle/>,\r\n\t\tlink:`/authors/${currentUser.uid}`,\r\n\t}\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? 0 : page.id\r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className = \"BottomControlBar\">\r\n\t\t\t{leftSideBar.map((el, i)=>{\r\n\t\t\t\treturn <MobileControlBarItem element = {el} key = {i} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t\t})}\r\n\t\t\t<MobileControlBarItem element = {userElement} currentPage = {currentPage} setCurrentPage = {setCurrentPage}/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BottomControlBar } from './BottomControlBar'\r\n\r\nexport const FullBottomSide = () => {\r\n\tconst { setOpenFullScreenPlayer, inputRange } = useSong()\r\n\treturn (\r\n\t\t<div className=\"FullBottomSide\">\r\n\t\t\t<span onClick={() => setOpenFullScreenPlayer(true)} style={{\r\n\t\t\t\tdisplay: \"block\",\r\n\t\t\t\tposition: \"relative\"\r\n\t\t\t}}>\r\n\t\t\t\t<Player textLimit={25} linkToAuthors={false} />\r\n\t\t\t\t<span className=\"mobileSongRange\" style={{ width: inputRange + \"%\" }}></span>\r\n\t\t\t</span>\r\n\t\t\t<BottomControlBar />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const Loading = ({currentTime, timeSpan, id}) => {\r\n\treturn (\r\n\t\t<div className = \"Loading\" id = {id}>\r\n\t\t\t<div className=\"outer\" style = {{pointerEvents:'none'}}>\r\n\t\t\t\t<div className=\"inner\" style = {currentTime/timeSpan < 1?{width:(currentTime/timeSpan)*100 + \"%\"}:{width:0 + \"%\", opacity:'0'}}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { Loading } from './Loading'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport useOnScreen from '../../hooks/useOnScreen'\r\nexport const LyricsParagraph = ({ el, index, lyricsModeratorMode, karaokeModeratorTimes,  setKaraokeModeratorTimes, setInputKaraokeTime, inputKaraokeTime }) => {\r\n\tconst { currentSongData, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, lyrics} = useSong()\r\n\tconst paragraphRef = useRef()\r\n\tconst isVisible = useOnScreen(currentParagraph === index ? currentParagraphRef : paragraphRef)\r\n\tconst paragraphStyle = currentParagraph === index ?\r\n\t{} : window.innerWidth > 1000 ?\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-58px)' } : { transform: 'scale(.75) translateX(-78px)' } :\r\n\t\tMath.abs(currentParagraph - index) < 2 ?\r\n\t\t\t{ transform: 'scale(.8) translateX(-11.5%)' } : { transform: 'scale(.75) translateX(-15.6%)' }\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\tfunction inputKaraoke(e, index) {\r\n\t\t// console.log(\"ewqewqewq\")\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={\"lyricsBlock \" + (!isVisible ?\"notVisible\":\"\")} key={index} id={index} onClick={(e) => changeCurrentTime(e, el.startTime)} style={play ? currentParagraph === index ? {} : Math.abs(currentParagraph - index) < 2? { opacity: .5} : { opacity: .1} : {}} ref={currentParagraph === index ? currentParagraphRef : paragraphRef} >\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t<span onClick={e => e.stopPropagation()}>{karaokeModeratorTimes[index] !== undefined && karaokeModeratorTimes[index].length !== 0 ? <BiCheckCircle style={{ background: 'var(--themeColor3)', color: 'var(--themeColor)' }} /> : <FiXCircle />} </span>\r\n\t\t\t\t\t\t<input type=\"number\" value={karaokeModeratorTimes[index] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, index)} onClick={e => e.stopPropagation()} />\r\n\t\t\t\t\t\t<div className=\"addLyricsElementBtns\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'up') }}><BiUpArrow /></button>\r\n\t\t\t\t\t\t\t<button onClick={() => { addLyricsBlock(index, 'down') }}><BiDownArrow /></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tel.text === \"@loading\" ?\r\n\t\t\t\t\t<Loading currentTime={currentTime - lyrics[index].startTime} timeSpan={lyrics[index + 1].startTime - lyrics[index].startTime} id={index} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\tel.text === \"@end\" ? <></>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<p key={index} id={index} style={paragraphStyle}>{el.text}</p>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { Share } from '../components/FullScreenPlayer/Share';\r\nimport { Options } from '../components/FullScreenPlayer/Options';\r\nimport { Lyrics } from '../components/FullScreenPlayer/Lyrics';\r\nimport { Queue } from '../components/FullScreenPlayer/Queue';\r\nimport { BiDotsVerticalRounded, BiShare } from 'react-icons/bi';\r\nimport {RiPlayListFill} from 'react-icons/ri'\r\nimport {FiAlignLeft} from 'react-icons/fi'\r\nimport { TiDocumentText } from 'react-icons/ti';\r\nimport { AuthorsList } from '../components/FullScreenPlayer/AuthorsList';\r\nimport { SongInfo } from '../components/Info/SongInfo';\r\nimport { AddToPlaylists } from '../components/FullScreenPlayer/AddToPlaylists';\r\nexport const rightSide = [\r\n\t{\r\n\t\tid:0, \r\n\t\ticon:<BiShare/>,\r\n\t\ttitle:'Share',\r\n\t\tcomponent:Share\r\n\t},\r\n\t{\r\n\t\tid:1, \r\n\t\ticon:<BiDotsVerticalRounded/>,\r\n\t\ttitle:'More',\r\n\t\tcomponent:Options\r\n\t},\r\n\t{\r\n\t\tid:2, \r\n\t\ticon:<TiDocumentText/>,\r\n\t\ttitle:'Lyrics',\r\n\t\tcomponent:Lyrics\r\n\t},\r\n\t{\r\n\t\tid:3, \r\n\t\ticon:<RiPlayListFill/>,\r\n\t\ttitle:'Queue',\r\n\t\tcomponent:Queue\r\n\t},\r\n\t{\r\n\t\tid:4, \r\n\t\ticon:null,\r\n\t\ttitle:'Go To Authors',\r\n\t\tcomponent:AuthorsList\r\n\t},\r\n\t{\r\n\t\tid:5, \r\n\t\ticon:null,\r\n\t\ttitle:'Add to playlist',\r\n\t\tcomponent:AddToPlaylists\r\n\t},\r\n\t{\r\n\t\tid:6, \r\n\t\ticon:null,\r\n\t\ttitle:'Info',\r\n\t\tcomponent:SongInfo\r\n\t},\r\n]","import React from 'react'\r\nimport { FaFacebookF, FaTelegramPlane, FaVk } from 'react-icons/fa'\r\nimport { FiCopy } from 'react-icons/fi'\r\nimport { AiFillInstagram } from 'react-icons/ai'\r\nimport { ImWhatsapp } from 'react-icons/im'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport {FriendsListToShareWith} from '../Lists/FriendsListToShareWith'\r\nexport const Share = () => {\r\n\tconst {currentSongData} = useSong()\r\n\tconst socialMedia = [\r\n\t\t<ImWhatsapp />,\r\n\t\t<FaFacebookF />,\r\n\t\t<FaTelegramPlane />,\r\n\t\t<FaVk />,\r\n\t\t<AiFillInstagram />\r\n\t]\r\n\treturn (\r\n\t\t<div className=\"Share\">\r\n\t\t\t<button className=\"shareCopyLink\">\r\n\t\t\t\t<FiCopy />\r\n\t\t\t\tCopy link\r\n\t\t\t</button>\r\n\t\t\t<div className=\"shareOnSocial\">\r\n\t\t\t\t{socialMedia.map((social, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"shareSocialIcon\" key={index}>\r\n\t\t\t\t\t\t\t{social}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sharePeopleShort\">\r\n\t\t\t\t<FriendsListToShareWith item = {currentSongData} whatToShare = {'song'}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {MdPlaylistAdd} from 'react-icons/md'\r\nimport { BiUserCircle } from \"react-icons/bi\";\r\nimport {FiInfo} from 'react-icons/fi'\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport AddOrDeleteButtonFull from './AddOrDeleteSongButton';\r\nexport const Options = () => {\r\n\tconst {currentSongData, setRightSideCurrentPage} = useSong()\r\n\treturn (\r\n\t\t<div className='Options'>\r\n\t\t\t<div className='OptionItem' >\r\n\t\t\t\t<AddOrDeleteButtonFull song = {currentSongData}/>\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(4)}>\r\n\t\t\t\t<BiUserCircle />\r\n\t\t\t\tGo to author\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(5)}>\r\n\t\t\t\t<MdPlaylistAdd />\r\n\t\t\t\tAdd to playlist\r\n\t\t\t</div>\r\n\t\t\t<div className='OptionItem' onClick = {()=>setRightSideCurrentPage(6)}>\r\n\t\t\t\t<FiInfo/>\r\n\t\t\t\tInfo\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { firestore } from '../../firebase'\r\nimport { Slider } from '../Tools/Slider'\r\nimport {BiCheckCircle, BiDownArrow, BiUpArrow} from 'react-icons/bi'\r\nimport { FiXCircle } from 'react-icons/fi'\r\nimport { LyricsParagraph } from './LyricsParagraph'\r\nexport const Lyrics = () => {\r\n\tconst { setIsThereKaraoke, currentSongData, setCurrentSongData, isThereKaraoke, currentParagraph, displayAuthors, changeCurrentTime, play, currentTime, currentParagraphRef, currentSong, lyrics, rightSideCurrentPage, openFullScreenPlayer, openMenu } = useSong()\r\n\tconst { currentUser } = useAuth()\r\n\tconst [inputKaraokeTime, setInputKaraokeTime] = useState(0)\r\n\tconst [karaokeModeratorTimes, setKaraokeModeratorTimes] = useState([])\r\n\tconst [lyricsModeratorMode, setLyricsModeratorMode] = useState(0)\r\n\tconst [canUpdateLyrics, setCanUpdateLyrics] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tif (isThereKaraoke && (openMenu && rightSideCurrentPage === 2) && openFullScreenPlayer) currentParagraphRef.current.scrollIntoView()\r\n\t}, [currentParagraph])\r\n\tfunction inputKaraoke(e, index) {\r\n\t\tlet tempArray = karaokeModeratorTimes\r\n\t\tlet convertedToNumber = e.target.value\r\n\t\ttempArray[index] = convertedToNumber\r\n\t\tsetInputKaraokeTime(e.target.value)\r\n\t\tsetKaraokeModeratorTimes(tempArray)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif(lyrics && lyrics[0].startTime !== 'undefined'){\r\n\t\t\tlyrics.forEach(paragraph => {\r\n\t\t\t\tkaraokeModeratorTimes.push(paragraph.startTime)\r\n\t\t\t});\r\n\t\t\tsetCanUpdateLyrics(true)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet tempSongData = currentSongData\r\n\t\t// console.log(tempSongData)\r\n\t\tif (tempSongData !== undefined && inputKaraokeTime !== 0) {\r\n\t\t\ttempSongData.lyrics.forEach((paragraph, index) => {\r\n\t\t\t\tparagraph.startTime = karaokeModeratorTimes[index] || 'undefined'\r\n\t\t\t})\r\n\t\t\tsetCurrentSongData(tempSongData)\r\n\t\t\tsetIsThereKaraoke(true)\r\n\t\t}\r\n\r\n\t\tif(!currentSongData.lyrics?.some(paragraph=>paragraph.startTime === 'undefined')) setCanUpdateLyrics(true)\r\n\t\telse setCanUpdateLyrics(false)\r\n\t}, [inputKaraokeTime])\r\n\tfunction updateLyrics() {\r\n\t\t//TODO: add if statement to prevent adding lyrics time spans to not everysingle paragraph block\r\n\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\tlyrics: currentSongData.lyrics\r\n\t\t})\r\n\t}\r\n\r\n\t// console.log(currentSongData)\r\n\r\n\tfunction addLyricsBlock(indexOfRelativeElement, direction){\t\t\r\n\t\tconst tempTimes = karaokeModeratorTimes\r\n\t\tif(direction === 'down'){\r\n\t\t\ttempTimes.splice(indexOfRelativeElement + 1, 0, undefined)\r\n\t\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\t\treturn currentSongData.lyrics.splice(indexOfRelativeElement + 1, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t\t}\r\n\t\t\r\n\t\ttempTimes.splice(indexOfRelativeElement, 0, undefined)\r\n\t\tsetKaraokeModeratorTimes(tempTimes)\r\n\t\tcurrentSongData.lyrics.splice(indexOfRelativeElement, 0, {startTime:\"undefined\", text:\"@loading\"})\r\n\t}\r\n\r\n\treturn lyrics?(\r\n\t\t<div className=\"Lyrics\">\r\n\t\t\t{\r\n\t\t\t\tcurrentUser.isAdmin ?\r\n\t\t\t\t\t<Slider pages={['Listen mode', 'Edit Mode']} currentPage={lyricsModeratorMode} setCurrentPage={setLyricsModeratorMode} /> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tisThereKaraoke ?\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LyricsParagraph el = {el} index = {i} lyricsModeratorMode = {lyricsModeratorMode} karaokeModeratorTimes = {karaokeModeratorTimes} setKaraokeModeratorTimes = {setKaraokeModeratorTimes} setInputKaraokeTime = {setInputKaraokeTime} inputKaraokeTime = {inputKaraoke}/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}) :\r\n\t\t\t\t\tlyrics.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"lyricsBlock\" key={i}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"lyricsBlockInput\">\r\n\t\t\t\t\t\t\t\t\t\t{karaokeModeratorTimes[i] !== undefined && karaokeModeratorTimes[i].length !== 0?<BiCheckCircle style = {{background:'var(--themeColor3)', color:'var(--themeColor)'}}/>:<FiXCircle/>} \r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\"  value={karaokeModeratorTimes[i] || inputKaraokeTime} onChange={(e) => inputKaraoke(e, i)} onClick={e => e.stopPropagation()} /> \r\n\t\t\t\t\t\t\t\t\t\t<div className=\"addLyricsElementBtns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'up')}><BiUpArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick = {()=>addLyricsBlock(i, 'down')}><BiDownArrow/></button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>:\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<p>{el.text}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<h6 className={\"lyricsAuthors \" + (currentParagraph === lyrics.length - 1 ? \"active\" : \"\")}>Authors:  {displayAuthors()}</h6>\r\n\t\t\t{\r\n\t\t\t\tlyricsModeratorMode === 1 ?\r\n\t\t\t\t\t<button onClick={canUpdateLyrics?updateLyrics:null} className=\"updateLyricsBtn\" style = {!canUpdateLyrics?{opacity:0.3}:{}}>Update Lyrics</button> :\r\n\t\t\t\t\tnull\r\n\t\t\t}\r\n\t\t</div>\r\n\t): <h3>No lyrics</h3>\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { SongItem } from './SongItem'\r\n\r\nexport const Queue = () => {\r\n\tconst { currentSongQueue, currentSongPlaylistSource, setOpenFullScreenPlayer } = useSong()\r\n\treturn (\r\n\t\t<div className=\"Queue\">\r\n\t\t\t<div className=\"queueNowIsPlaying\">\r\n\t\t\t\t<h5 style={{ marginTop: 2 }}>\r\n\t\t\t\t\tNow is playing:\r\n\t\t\t\t\t<Link onClick={() => setOpenFullScreenPlayer(false)} to={currentSongPlaylistSource.source} className=\"queueAlbumName\">\r\n\t\t\t\t\t\t<div className=\"queueImage\" style = {currentSongPlaylistSource.image?{}:{display:'none'}}>\r\n\t\t\t\t\t\t\t<img loading = \"lazy\" src={currentSongPlaylistSource.image} alt=\"\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>{shortWord(currentSongPlaylistSource.name, 25)}</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t\t{currentSongQueue.map((song, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SongItem song={song} localIndex={index} key={index} />\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import '../../App.css';\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { BiChevronLeft } from 'react-icons/bi'\r\nimport { rightSide } from '../../data/playerRightSide'\r\nimport { Player } from '../FullScreenPlayer/Player';\r\nimport { HiChevronDown } from 'react-icons/hi';\r\nimport { useSong } from '../../contexts/SongContext';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport { useSwipeable } from 'react-swipeable'\r\nimport checkNumber from '../../functions/other/checkNumber';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\nimport { useScreen } from '../../contexts/ScreenContext';\r\n\r\nexport default function FullScreenPlayer() {\r\n  const {\r\n    imgColors,\r\n    inputRef,\r\n    rightSideCurrentPage,\r\n    setRightSideCurrentPage,\r\n    openFullScreenPlayer,\r\n    setOpenFullScreenPlayer,\r\n    lyrics,\r\n    openMenu,\r\n    setOpenMenu\r\n  } = useSong()\r\n  const { isMobile, screenHeight, screenWidth } = useScreen()\r\n  const lyricsRef = useRef(null)\r\n  const [transformTransition, setTransformTransition] = useState(0.05)\r\n  const [mobileMenuTransition, setMobileMenuTransition] = useState(0)\r\n  // const [swipeDown, setSwipeDown] = useState(false)\r\n  const [deltaY, setDeltaY] = useState(0)\r\n  const [deltaYMobileMenu, setDeltaYMobileMenu] = useState(0)\r\n  const mobileContentScroll = useRef()\r\n  // setup ref for your usage\r\n  const mobileMenuRef = React.useRef();\r\n  useOutsideClick(mobileMenuRef, setOpenMenu)\r\n  const handlers = useSwipeable({\r\n    // onSwiped: (eventData) => {setSwipeDown(eventData.dir === 'Down')},\r\n    onSwiping: (event) => { if (event.deltaY > 0) setDeltaY(event.deltaY); }\r\n  })\r\n\r\n  // setup ref for your usage\r\n  const bgRef = React.useRef();\r\n\r\n  const handlersForMobileMenu = useSwipeable({\r\n    onSwiping: (event) => { event.event.stopPropagation(); if (openMenu && mobileContentScroll.current.scrollTop === 0 && event.deltaY > 0) setDeltaYMobileMenu(event.deltaY); else if (!openMenu && event.deltaY < 0) setDeltaYMobileMenu(event.deltaY) },\r\n    onSwipedLeft: () => { setRightSideCurrentPage(checkNumber(rightSideCurrentPage + 1, 3)) },\r\n    onSwipedRight: () => { setRightSideCurrentPage(checkNumber(rightSideCurrentPage - 1, 3)) }\r\n  })\r\n\r\n\r\n  function returnToInitialMobileMenu() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setMobileMenuTransition(0)\r\n    dropDelta = setTimeout(() => {\r\n      setMobileMenuTransition(0.2)\r\n      setDeltaYMobileMenu(0)\r\n    }, 300)\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (deltaY > 150) {\r\n      setOpenFullScreenPlayer(false)\r\n    }\r\n  }, [deltaY])\r\n\r\n  useEffect(() => {\r\n    if (!openMenu && deltaYMobileMenu < -100) {\r\n      setOpenMenu(true)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else if (openMenu && deltaYMobileMenu > 150) {\r\n      setOpenMenu(false)\r\n      setDeltaYMobileMenu(0)\r\n      setMobileMenuTransition(0.2)\r\n    }\r\n    else {\r\n      returnToInitialMobileMenu()\r\n    }\r\n  }, [deltaYMobileMenu])\r\n\r\n\r\n\r\n  function returnToInitial() {\r\n    let dropDelta\r\n    clearTimeout(dropDelta)\r\n    setTransformTransition(0.2)\r\n    dropDelta = setTimeout(() => {\r\n      setDeltaY(0)\r\n      setTransformTransition(0)\r\n    }, 100)\r\n  }\r\n\r\n  const refPassthroughBg = (el) => {\r\n    handlers.ref(el);\r\n    bgRef.current = el;\r\n  }\r\n\r\n  const refPassthroughMobileMenu = (el) => {\r\n    handlersForMobileMenu.ref(el);\r\n    mobileMenuRef.current = el;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (imgColors.length !== 0) {\r\n      document.documentElement.style.setProperty('--themeColor', imgColors[1]);\r\n      document.documentElement.style.setProperty('--themeColor2', imgColors[0]);\r\n      document.documentElement.style.setProperty('--themeColor3', imgColors[2]);\r\n      document.documentElement.style.setProperty('--themeColor4', imgColors[5]);\r\n      document.documentElement.style.setProperty('--themeColorTransparent', imgColors[0] + '6e');\r\n    }\r\n  }, [imgColors])\r\n\r\n\r\n  function rightSideContent(currentPage) {\r\n    let RightSidePage = rightSide[currentPage].component\r\n    return (<RightSidePage />)\r\n  }\r\n\r\n  function noLyrics() {\r\n    return lyrics && lyrics.length === 0\r\n  }\r\n\r\n  function changeRightSidePage(el) {\r\n    if (el.id === 2 && noLyrics()) return null\r\n    setMobileMenuTransition(0.2)\r\n    setRightSideCurrentPage(el.id);\r\n    setOpenMenu(true)\r\n  }\r\n  return (\r\n    <div className=\"bg\"\r\n      style={\r\n        openFullScreenPlayer ?\r\n          {\r\n            top: 0,\r\n            opacity: 1,\r\n            visibility: 'visible',\r\n            zIndex: 10,\r\n            transform: `translateY(${deltaY}px)`,\r\n            borderRadius: `${deltaY < 20 ? deltaY : 20}px ${deltaY < 20 ? deltaY : 20}px 0 0`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          } :\r\n          {\r\n            transform: `translateY(${deltaY}px)`,\r\n            transition: `.4s opacity, ${transformTransition}s transform, .4s top, .4s visibility`\r\n          }\r\n      }\r\n      ref={refPassthroughBg}\r\n      {...handlers}\r\n      onTouchEnd={returnToInitial}\r\n    >\r\n\r\n      {/* <div className=\"auroraWrapper\">\r\n        <svg height={screenHeight} width={screenWidth}>\r\n          <defs>\r\n            <filter id=\"f1\" x=\"0\" y=\"0\">\r\n              <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"215\" />\r\n            </filter>\r\n          </defs>\r\n          <circle cx={screenWidth/2} cy=\"0\" r={screenHeight}\r\n            fill={imgColors[0]} filter=\"url(#f1)\" />\r\n        </svg>\r\n      </div> */}\r\n\r\n      <div className=\"closeFullScreen\" onClick={() => { setOpenFullScreenPlayer(false) }}>\r\n        {window.innerWidth > 1000 ? <HiChevronDown /> : <FiMinus style={{ opacity: .6 }} />}\r\n      </div>\r\n      <div className=\"FullScreenPlayer\" >\r\n        <div className=\"leftSide\" style={!openMenu ? { width: '100%' } : isMobile ? {\r\n          opacity: 0.6,\r\n          visibility: 'visible',\r\n          transform: `translateY(20px)`,\r\n          borderRadius: `10px`,\r\n          transition: `.4s`\r\n        } : null}>\r\n          <Player inputRef={inputRef} />\r\n        </div>\r\n        {window.innerWidth > 1000 ?\r\n          <div className=\"rightSideWrapper\" style={!openMenu ? { transform: 'translateX(calc(100% - 90px))', width: 0 } : {}}>\r\n            <button className=\"menuBtn\" style={openMenu ? { transform: 'rotate(180deg)' } : { opacity: 0, visibility: 'hidden' }} onClick={() => setOpenMenu(!openMenu)}><BiChevronLeft /></button>\r\n            <div className=\"rightSideControl\">\r\n              {rightSide.map((el, i) => {\r\n                return (\r\n                  <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--themeColor)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={() => changeRightSidePage(el)}>\r\n                    {el.icon}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"rightSide\" ref={lyricsRef} style={!openMenu ? { display: 'none' } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div> :\r\n          <div className=\"mobilePlayerMenu\" {...handlersForMobileMenu} ref={refPassthroughMobileMenu} style={\r\n            openMenu ?\r\n              {\r\n                top: `calc(100% - calc(70vh + 55px) + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n\r\n              } :\r\n              {\r\n                top: `calc(100% - 55px + ${deltaYMobileMenu}px)`,\r\n                transition: `${mobileMenuTransition}s`\r\n              }\r\n\r\n          }\r\n          // onTouchStart = {returnToInitialMobileMenu}\r\n          >\r\n            <div className=\"mobilePlayerMenuClose\">\r\n              <FiMinus style={{ opacity: .6, width: '50px' }} onClick={() => setOpenMenu(!openMenu)} />\r\n            </div>\r\n            <div className=\"controlIconsWrapper\">\r\n              {rightSide.map((el, i) => {\r\n                if (i <= 3) {\r\n                  return (\r\n                    <div className=\"controlIcon\" key={el.id} style={el.id === rightSideCurrentPage && openMenu ? { background: \"var(--transparentWhite)\" } : el.id === 2 && noLyrics() ? { opacity: .4 } : {}} onClick={(e) => changeRightSidePage(el)}>\r\n                      {el.title}\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n            <div className=\"mobilePlayerMenuContent\" ref={mobileContentScroll} style={!openMenu ? { opacity: 0 } : {}}>\r\n              {rightSideContent(rightSideCurrentPage)}\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div >\r\n  );\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NavigationItem({id, title, icon, link, currentPage, setCurrentPage}) {\r\n\treturn (\r\n\t\t<Link to = {link}>\r\n\t\t\t<div className={\"NavigationItem \" + (id === currentPage?\"active\":\"\")} onClick={() => setCurrentPage(id)}>\r\n\t\t\t\t<div className=\"icon\">{icon}</div>\r\n\t\t\t\t<b>{title}</b>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { BiShare } from 'react-icons/bi'\r\nimport { FiMessageCircle, FiUser } from 'react-icons/fi'\r\nimport { Link } from 'react-router-dom'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { createChat } from '../../functions/create/createChat'\r\nimport { findChatURL } from '../../functions/find/findChatURL'\r\nimport getUID from '../../functions/other/getUID'\r\nimport shareWithManyFriends from '../../functions/other/shareWithManyFriends'\r\nimport { Hint } from '../Basic/Hint'\r\nimport { IsUserOnlineCircle } from '../Basic/IsUserOnlineCircle'\r\n\r\nexport const Person = ({ index, friend }) => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst [friendChatId, setFriendChatId] = useState(0)\r\n\tconst [shouldCreate, setShouldCreate] = useState(false)\r\n\tconst [sendAnimation, setSendAnimation] = useState(\"\")\r\n\tconst { currentSong, currentSongData } = useSong()\r\n\tconst [loadingSendSong, setLoadingSendSong] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tfindChatURL([friend.uid], currentUser, setShouldCreate, setFriendChatId)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (sendAnimation?.length > 0) {\r\n\t\t\tsetLoadingSendSong(true)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetSendAnimation(\"\")\r\n\t\t\t\tsetLoadingSendSong(false)\r\n\t\t\t}, 600)\r\n\t\t}\r\n\t}, [sendAnimation])\r\n\treturn (\r\n\t\t<div className=\"person\" key={index} id={friend.uid} >\r\n\t\t\t<img loading=\"lazy\" src={currentSongData.cover} alt=\"\" className={\"sendSongImage \" + sendAnimation} />\r\n\t\t\t<div className=\"personBtns\">\r\n\t\t\t\t<Link to={`/chat/${friendChatId}`}>\r\n\t\t\t\t\t<button onClick={() => { if (shouldCreate) createChat([currentUser.uid, friend.uid], friendChatId) }}>\r\n\t\t\t\t\t\t<Hint text={'chat'} />\r\n\t\t\t\t\t\t<FiMessageCircle />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={`/authors/${friend.uid}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'profile'} />\r\n\t\t\t\t\t\t<FiUser />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={() => { if (!loadingSendSong) { shareWithManyFriends([friend.uid], currentUser, currentSong, \"song\", \"\", setShouldCreate, setFriendChatId); setSendAnimation('sendAnimation');} }}>\r\n\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t<BiShare />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"pesronImg\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t<img loading=\"lazy\" src={friend.photoURL} alt=\"\" />\r\n\t\t\t</div>\r\n\t\t\t<IsUserOnlineCircle userUID={friend.uid} />\r\n\t\t\t<div className=\"personName\" style={{ pointerEvents: 'none' }}>\r\n\t\t\t\t{friend.displayName}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { BiAlbum } from 'react-icons/bi'\r\nimport { FiCheck, FiPlayCircle, FiPlusCircle, FiShare } from 'react-icons/fi'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport shortWord from '../../functions/other/shortWord'\r\nimport { useAddOrDeleteSong } from '../../hooks/useAddOrDeleteSong'\r\nimport { usePlaylistSongs } from '../../hooks/usePlaylistSongs'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { Hint } from '../Basic/Hint'\r\n\r\nexport const TinyPlaylist = ({ playlist }) => {\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [playlistSongs, setPlaylistSongs] = useState([])\r\n\tconst playSongsInPlaylist = usePlaylistSongs(playlist, playlistSongs, setPlaylistSongs)\r\n\tconst [addFunc, isAdded] = useAddOrDeleteSong(playlist.id)\r\n\tconst { currentUser } = useAuth()\r\n\tconst history = useHistory()\r\n\treturn (\r\n\t\t<div className=\"TinyPlaylist\">\r\n\t\t\t<div className=\"TinyPlaylistBtns\">\r\n\t\t\t\t{playlist.authors.find(author => author.uid === currentUser.uid) ?\r\n\t\t\t\t\t<button onClick={addFunc}>\r\n\t\t\t\t\t\t{isAdded ?\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Hint text={`remove song`} />\r\n\t\t\t\t\t\t\t\t<FiCheck />\r\n\t\t\t\t\t\t\t</> :\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Hint text={'add song'} />\r\n\t\t\t\t\t\t\t\t<FiPlusCircle />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</button> :\r\n\t\t\t\t\t<button onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={playlist} whatToShare={\"playlist\"} />) }}>\r\n\t\t\t\t\t\t<Hint text={'share'} />\r\n\t\t\t\t\t\t<FiShare />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t}\r\n\t\t\t\t<Link to={`/albums/${playlist.id}`}>\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<Hint text={'album'} /><BiAlbum />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button onClick={playSongsInPlaylist}>\r\n\t\t\t\t\t<Hint text={'play'} />\r\n\t\t\t\t\t<FiPlayCircle />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"TinyPlaylistImg\" style={{ backgroundImage: `url(${playlist.image})`, display: 'inline-block', backgroundPosition: \"center center\", backgroundSize: \"cover\", position:'relative' }} onClick={() => history.push(`/albums/${playlist.id}`)}>\r\n\t\t\t\t{!playlist.image ? <BiAlbum style={{ position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%, -50%)', width: '20px', height: '20px' }} /> : null}\r\n\t\t\t</div>\r\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{shortWord(playlist.name, 13)}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontSize: '0.8em', color: 'grey', fontWeight: '500' }}>\r\n\t\t\t\t\t{playlist.isAlbum ? \"album\" : \"playlist\"}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nexport const NotificationCircle = () => {\r\n\treturn (\r\n\t\t<div className = \"NotificationCircle\"></div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { leftSideBar } from '../../data/leftSideBar'\r\nimport NavigationItem from '../LeftsideBar/NavigationItem'\r\nimport Logo from \"../../images/Logo3.svg\"\r\nimport '../../styles/LeftsideBar.css'\r\nimport { Player } from '../FullScreenPlayer/Player'\r\nimport { BiFolderPlus, BiFullscreen} from 'react-icons/bi'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport normalizeString from '../../functions/other/normalizeString'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { FriendsListToShareWith } from '../Lists/FriendsListToShareWith'\r\nimport { Person } from '../LeftsideBar/Person'\r\nimport { CreatePlaylistPage } from '../LibraryPage/CreatePlaylistPage'\r\nimport { TinyPlaylist } from '../LeftsideBar/TinyPlaylist'\r\nimport { NotificationCircle } from './NotificationCircle'\r\nimport shortWord from '../../functions/other/shortWord'\r\nexport const LeftsideBar = () => {\r\n\tconst { currentUser } = useAuth()\r\n\tconst {\r\n\t\tleftSideBarInputRef,\r\n\t\tsetOpenFullScreenPlayer,\r\n\t\tcurrentSongData,\r\n\t\tyourFriends,\r\n\t\tyourPlaylists\r\n\t} = useSong()\r\n\tconst { toggleModal, setContent } = useModal()\r\n\tconst [currentFriendToPlaylistPage, setCurrentFriendToPlaylistPage] = useState(0)\r\n\tconst [currentPage, setCurrentPage] = useState(\r\n\t\t() => {\r\n\t\t\tlet page = leftSideBar.find((el, i) => {\r\n\t\t\t\tif (window.location.hash.includes(normalizeString(el.title))) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t\treturn page === undefined ? -1 : page.id\r\n\t\t}\r\n\t)\r\n\treturn (\r\n\t\t<div className=\"LeftsideBar\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<img loading = \"lazy\" src={Logo} alt=\"\" />\r\n\t\t\t\t<h3>Soundbubble</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\" onClick = {()=>setCurrentPage(-1)} >\r\n\t\t\t\t<Link to={`/authors/${currentUser.uid}`}>\r\n\t\t\t\t\t<div className=\"person\" style = {currentPage === -1?{background:'var(--blue)'}:{}}>\r\n\t\t\t\t\t\t{currentUser.friends.some(friend=>friend.status === 'requested')?<NotificationCircle/>:null}\r\n\t\t\t\t\t\t<div className=\"pesronImg\" style = {{backgroundImage:`url(${currentUser.photoURL})`}}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"personName\">\r\n\t\t\t\t\t\t\t{shortWord(currentUser.displayName, 9)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"NavigationPanel\">\r\n\t\t\t\t{leftSideBar.map(({ id, title, icon, link }, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavigationItem key={index} id={id} title={title} icon={icon} link={link} currentPage={currentPage} setCurrentPage={setCurrentPage} />\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer friendsAndPlaylists\">\r\n\t\t\t\t<span style={{display: !currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromBottom .2s forwards' }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tyourFriends.length > 0?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t{yourFriends.map((friend, index) => {\r\n\t\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Person index={friend.uid} friend={friend}/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<h4 className=\"seeMoreBtn\" onClick={() => { toggleModal(); setContent(<FriendsListToShareWith item={currentSongData} whatToShare = {\"song\"}/>) }}>See more</h4>\r\n\t\t\t\t\t\t</>:\r\n\t\t\t\t\t\t<h4 style = {{alignSelf:'center',width:'100%', display:'flex', alignItems:'center', justifyContent:'center'}}>No friends added</h4>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{display: currentFriendToPlaylistPage ? \"block\" : \"none\", animation: 'scrollFromTop .2s forwards' }}>\r\n\t\t\t\t\t{yourPlaylists.map((playlist, index) => {\r\n\t\t\t\t\t\tif (index <= 2) {\r\n\t\t\t\t\t\t\treturn <TinyPlaylist playlist = {playlist} key = {playlist.id}/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<button className=\"createPlaylistBtn\" onClick={() => { toggleModal(); setContent(<CreatePlaylistPage />) }} style = {{margin:'5px 0'}}>\r\n\t\t\t\t\t\t<BiFolderPlus />\r\n\t\t\t\t\t\tCreate Playlist\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"upAndDownBtns\">\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(0)} style={!currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronUp /></button>\r\n\t\t\t\t\t<button onClick={() => setCurrentFriendToPlaylistPage(1)} style={currentFriendToPlaylistPage ? { opacity: '0.3' } : {}}><FiChevronDown /></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"leftSideBarContainer\">\r\n\t\t\t\t{\r\n\t\t\t\t\t(currentSongData.id === -1)?\r\n\t\t\t\t\tnull:<div className=\"littlePlayer\">\r\n\t\t\t\t\t\t<Player textLimit={15} inputRef={leftSideBarInputRef} />\r\n\t\t\t\t\t\t<div className=\"fullScreenBtn\" onClick={() => setOpenFullScreenPlayer(true)}>\r\n\t\t\t\t\t\t\t{/* <Hint text = {\"open full screen\"} style = {{fontSize:'0.8em'}}/> */}\r\n\t\t\t\t\t\t\t<BiFullscreen />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\nimport {useScreen} from '../../contexts/ScreenContext'\r\nexport const ModalWindow = ({...restProps}) => {\r\n\tconst {openModal, setOpenModal, content} = useModal()\r\n\tconst modalRef = useRef(null)\r\n\tconst {screenHeight} = useScreen()\r\n\tuseOutsideClick(modalRef, setOpenModal)\r\n\treturn (\r\n\t\t<div className = \"modal_darkBg\" style = {!openModal?{opacity:0, visibility:'hidden'}:{height:screenHeight}} >\r\n\t\t\t<div className = \"ModalWindow\" {...restProps} ref = {modalRef} style = {!openModal?{opacity:0, visibility:'hidden', transform:'translateY(40px)'}:{}}>\r\n\t\t\t\t{content}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useModal } from '../../contexts/ModalContext'\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick'\r\n\r\nexport const ConfirmWindow = () => {\r\n\tconst { isOpenConfirm, confirmContent, setIsOpenConfirm, closeComfirm } = useModal()\r\n\tconst confirmRef = useRef(null)\r\n\tuseOutsideClick(confirmRef, setIsOpenConfirm)\r\n\treturn (\r\n\t\t<div className=\"modal_darkBg confirm\" style={!isOpenConfirm ? { opacity: 0, visibility: 'hidden' } : {}} >\r\n\t\t\t<div className=\"ConfirmWindow\" ref = {confirmRef} style={!isOpenConfirm ? { transform: 'translateY(40px)' } : {}}>\r\n\t\t\t\t<h3>{confirmContent.question}</h3>\r\n\t\t\t\t<div className=\"confirmButtons\">\r\n\t\t\t\t\t<button onClick={confirmContent.onConfirm} className = \"standartButton\">{confirmContent.confirmText}</button>\r\n\t\t\t\t\t<button onClick={confirmContent.onReject} className = \"standartButton\">{confirmContent.rejectText}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useSong } from '../contexts/SongContext';\r\nimport { displayAuthorsStr } from '../functions/display/displayAuthorsStr';\r\n\r\nexport const useMediaMetadata = () => {\r\n\tconst { currentSongData, currentSongPlaylistSource, nextSong, prevSong, songRef, setPlay } = useSong()\r\n\r\n\tconst updatePositionState = () => {\r\n\t\tnavigator.mediaSession.setPositionState({\r\n\t\t\tduration: songRef.current.duration,\r\n\t\t\tplaybackRate: songRef.current.playbackRate,\r\n\t\t\tposition: songRef.current.currentTime\r\n\t\t});\r\n\t}\r\n\r\n\tfunction playSong(){\r\n\t\tsongRef.current.play()\r\n\t\tsetPlay(true)\r\n\t}\r\n\r\n\tfunction pauseSong(){\r\n\t\tsongRef.current.pause()\r\n\t\tsetPlay(false)\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif ('mediaSession' in navigator && currentSongData.id !== -1) {\r\n\t\t\tnavigator.mediaSession.metadata = new window.MediaMetadata({\r\n\t\t\t\ttitle: currentSongData.name,\r\n\t\t\t\tartist: displayAuthorsStr(currentSongData.authors),\r\n\t\t\t\talbum: currentSongPlaylistSource.name,\r\n\t\t\t\tartwork: [\r\n\t\t\t\t\t{ src: currentSongData.cover, sizes: '512x512', type: 'image/png' },\r\n\t\t\t\t]\r\n\t\t\t});\r\n\r\n\t\t\tnavigator.mediaSession.setActionHandler('play', () => { playSong();});\r\n\t\t\tnavigator.mediaSession.setActionHandler('pause', pauseSong);\r\n\t\t\tnavigator.mediaSession.setActionHandler('stop', pauseSong);\r\n\t\t\tnavigator.mediaSession.setActionHandler('nexttrack', ()=>{nextSong(); updatePositionState()});\r\n\t\t\tnavigator.mediaSession.setActionHandler('previoustrack', ()=>{prevSong(); updatePositionState()})\r\n\t\t}\r\n\t}, [currentSongData.id])\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSong } from '../../contexts/SongContext'\r\nimport { ContentRouter } from '../../routers/ContentRouter'\r\nimport { FullBottomSide } from '../Mobile/FullBottomSide'\r\nimport FullScreenPlayer from './FullScreenPlayer'\r\nimport { LeftsideBar } from './LeftsideBar'\r\nimport { ModalWindow } from '../Windows/ModalWindow'\r\nimport '../../styles/FullScreenPlayer.css'\r\nimport { firestore } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport { useScreen } from '../../contexts/ScreenContext'\r\nimport { ConfirmWindow } from '../Windows/ConfirmWindow'\r\nimport { useUpdateListenCount } from '../../hooks/useUpdateListenCount'\r\nimport { useMediaMetadata } from '../../hooks/useMediaMetadata'\r\n\r\nexport const ContentWrapper = () => {\r\n\tconst { songRef, loadSongData, playing, songSrc, openFullScreenPlayer, repeatMode, setPlay, prevSong, currentSongQueue, nextSong, currentSongInQueue} = useSong()\r\n\tconst { isMobile, screenHeight } = useScreen()\r\n\tconst { currentUser } = useAuth()\r\n\tconst fiveMinutes = 300000 // 10min\r\n\tconst [intervalExciter, setIntervalExciter] = useState(true)\r\n\tuseMediaMetadata()\r\n\tconst updateListenCount = useUpdateListenCount()\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t\t\tsetIntervalExciter(!intervalExciter)\r\n\t\t}, fiveMinutes)\r\n\t\treturn () => clearInterval(interval);\r\n\t}, [intervalExciter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfirestore.collection('users').doc(currentUser.uid).update({ online: new Date().getTime() })\r\n\t}, [])\r\n\r\n\tfunction audioEnded() {\r\n\t\tif (repeatMode === 0) {\r\n\t\t\tsongRef.current.pause()\r\n\t\t\tsetPlay(false)\r\n\t\t\treturn prevSong()\r\n\t\t}\r\n\t\telse if (repeatMode === 1) {\r\n\t\t\tif (currentSongQueue.length === 1) {\r\n\t\t\t\tprevSong()\r\n\t\t\t\tupdateListenCount()\r\n\t\t\t\treturn songRef.current.play()\r\n\t\t\t}\r\n\t\t\treturn nextSong()\r\n\t\t}\r\n\t\tprevSong()\r\n\t\tupdateListenCount()\r\n\t\tsongRef.current.play()\r\n\t}\r\n\r\n\t\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<audio src={songSrc} ref={songRef} onLoadedData={loadSongData} onTimeUpdate={playing} onEnded={audioEnded}></audio>\r\n\t\t\t<div className={\"Wrapper \" + (openFullScreenPlayer ? \"turnedOff\" : \"\")} style={isMobile ? { height: screenHeight } : { height: \"100vh\" }}>\r\n\t\t\t\t{!isMobile ? <LeftsideBar /> : window.location.hash.substr(2, 4) === 'chat' && window.location.hash.length > 6 ? null : <FullBottomSide />}\r\n\t\t\t\t<div className=\"Content\">\r\n\t\t\t\t\t<ContentRouter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ModalWindow />\r\n\t\t\t\t<ConfirmWindow/>\r\n\t\t\t</div>\r\n\t\t\t<FullScreenPlayer />\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useSong } from '../contexts/SongContext'\r\nimport { firestore } from '../firebase'\r\n\r\nexport const useUpdateListenCount = () => {\r\n\tlet listenCountTimeOut = useRef()\r\n\tconst {currentSongData, currentSongPlaylistSource, songDuration, play} = useSong()\r\n\tfunction updateListenCount() {\r\n\t\tif(currentSongData.id !== -1){\r\n\t\t\tlistenCountTimeOut.current = setTimeout(() => {\r\n\t\t\t\tlet listens = currentSongData.listens\r\n\t\t\t\tlistens++\r\n\t\t\t\tfirestore.collection('songs').doc(currentSongData.id).update({\r\n\t\t\t\t\tlistens: listens\r\n\t\t\t\t})\r\n\r\n\t\t\t\t//update playlist listens\r\n\t\t\t\tif (currentSongPlaylistSource.source.substr(1, 6) === 'albums') {\r\n\t\t\t\t\tconst sourceId = currentSongPlaylistSource.source.substr(8, currentSongPlaylistSource.source.length - 8)\r\n\t\t\t\t\tfirestore.collection('playlists').doc(sourceId).get().then((res) => {\r\n\t\t\t\t\t\tlet listedData = res.data().listens\r\n\t\t\t\t\t\tlistedData++\r\n\t\t\t\t\t\tfirestore.collection('playlists').doc(sourceId).update({\r\n\t\t\t\t\t\t\tlistens: listedData\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//update authors' listens\r\n\t\t\t\tcurrentSongData.authors.forEach(async author=>{\r\n\t\t\t\t\tlet authorNumberOfListenersPerMonth = (await firestore.collection('users').doc(author.uid).get()).data().numberOfListenersPerMonth\r\n\t\t\t\t\t++authorNumberOfListenersPerMonth\r\n\t\t\t\t\tfirestore.collection('users').doc(author.uid).update({\r\n\t\t\t\t\t\tnumberOfListenersPerMonth: authorNumberOfListenersPerMonth\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}, songDuration * 1000 * 0.5)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(listenCountTimeOut.current)\r\n\t\tif (play) {\r\n\t\t\tupdateListenCount()\r\n\t\t}\r\n\t}, [play, currentSongData.id])\r\n\r\n\treturn updateListenCount\r\n}\r\n","import React from 'react'\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport { ContentWrapper } from '../components/Basic/ContentWrapper'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { publicRoutes } from '../routes'\r\nimport { LOGIN_ROUTE} from '../utils/consts'\r\nexport const AppRouter = () => {\r\n\tconst {currentUser} = useAuth()\r\n\treturn currentUser.uid ?\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t<Route path='/' component = {ContentWrapper} />\r\n\t\t</Switch>\r\n\t):\r\n\t(\r\n\t\t<Switch>\r\n\t\t\t{publicRoutes.map(({path, Component}, i)=>{\r\n\t\t\t\treturn <Route path={path} component={Component} exact = {true} key = {i}/>\r\n\t\t\t})}\r\n\t\t\t<Redirect to={LOGIN_ROUTE} />\r\n\t\t</Switch>\r\n\t)\r\n}\r\n","import './App.css';\r\nimport React from 'react'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { AppRouter } from './routers/AppRouter';\r\nexport default function App() {\r\n  return (\r\n    <HashRouter basename = \"/\">\r\n      <AppRouter/>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { ModalClassProvider } from './contexts/ModalContext';\r\nimport { ScreenProvider } from './contexts/ScreenContext';\r\nimport { SongProvider } from './contexts/SongContext';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ScreenProvider>\r\n      <AuthProvider>\r\n        <ModalClassProvider>\r\n          <SongProvider>\r\n            <App />\r\n          </SongProvider>\r\n        </ModalClassProvider>\r\n      </AuthProvider>\r\n    </ScreenProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}